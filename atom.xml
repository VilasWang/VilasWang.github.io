<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>CodeVerse | æŠ€æœ¯å®‡å®™</title>
  
  <subtitle>æ¢ç´¢æŠ€æœ¯çš„æ— é™å¯èƒ½</subtitle>
  <link href="https://vilaswang.github.io/atom.xml" rel="self"/>
  
  <link href="https://vilaswang.github.io/"/>
  <updated>2025-12-18T01:22:09.016Z</updated>
  <id>https://vilaswang.github.io/</id>
  
  <author>
    <name>vilas</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Gemini CLI å’Œ Claude Code ä¸­é…ç½® GitHub MCP æœåŠ¡å™¨è¯¦è§£</title>
    <link href="https://vilaswang.github.io/posts/mcp-github-config/"/>
    <id>https://vilaswang.github.io/posts/mcp-github-config/</id>
    <published>2025-12-18T01:09:23.000Z</published>
    <updated>2025-12-18T01:22:09.016Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Gemini-CLI-å’Œ-Claude-Code-ä¸­é…ç½®-GitHub-MCP-æœåŠ¡å™¨è¯¦è§£"><a href="#Gemini-CLI-å’Œ-Claude-Code-ä¸­é…ç½®-GitHub-MCP-æœåŠ¡å™¨è¯¦è§£" class="headerlink" title="Gemini CLI å’Œ Claude Code ä¸­é…ç½® GitHub MCP æœåŠ¡å™¨è¯¦è§£"></a>Gemini CLI å’Œ Claude Code ä¸­é…ç½® GitHub MCP æœåŠ¡å™¨è¯¦è§£</h1><blockquote><p><strong>æ–‡æ¡£åˆ›å»ºæ—¶é—´</strong>: 2025-12-18<br><strong>æœ€åæ›´æ–°</strong>: 2025-12-18<br><strong>æ ‡ç­¾</strong>: <code>github</code>, <code>mcp</code>, <code>gemini-cli</code>, <code>claude-code</code>, <code>http</code>, <code>stdio</code>, <code>ai-tools</code></p></blockquote><h2 id="ğŸ“‘-ç›®å½•"><a href="#ğŸ“‘-ç›®å½•" class="headerlink" title="ğŸ“‘ ç›®å½•"></a>ğŸ“‘ ç›®å½•</h2><ul><li><a href="#1-mcp%E4%BC%A0%E8%BE%93%E6%96%B9%E5%BC%8F%E5%AF%B9%E6%AF%94">1. MCPä¼ è¾“æ–¹å¼å¯¹æ¯”</a></li><li><a href="#2-gemini-cli-%E7%9A%84-mcp-%E9%85%8D%E7%BD%AE">2. Gemini CLI çš„ MCP é…ç½®</a></li><li><a href="#3-claude-code-%E7%9A%84-mcp-%E9%85%8D%E7%BD%AE">3. Claude Code çš„ MCP é…ç½®</a></li><li><a href="#4-%E5%AE%9E%E7%8E%B0%E5%B7%AE%E5%BC%82%E8%AF%A6%E8%A7%A3">4. å®ç°å·®å¼‚è¯¦è§£</a></li><li><a href="#5-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E5%BB%BA%E8%AE%AE">5. æœ€ä½³å®è·µå»ºè®®</a></li><li><a href="#6-%E6%95%85%E9%9A%9C%E6%8E%92%E9%99%A4">6. æ•…éšœæ’é™¤</a></li><li><a href="#7-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96">7. æ€§èƒ½ä¼˜åŒ–</a></li><li><a href="#8-%E6%80%BB%E7%BB%93">8. æ€»ç»“</a></li></ul><hr><h2 id="1-ğŸ“–-MCPä¼ è¾“æ–¹å¼å¯¹æ¯”"><a href="#1-ğŸ“–-MCPä¼ è¾“æ–¹å¼å¯¹æ¯”" class="headerlink" title="1. ğŸ“– MCPä¼ è¾“æ–¹å¼å¯¹æ¯”"></a>1. ğŸ“– MCPä¼ è¾“æ–¹å¼å¯¹æ¯”</h2><h2 id="MCPä¼ è¾“æ–¹å¼å¯¹æ¯”"><a href="#MCPä¼ è¾“æ–¹å¼å¯¹æ¯”" class="headerlink" title="MCPä¼ è¾“æ–¹å¼å¯¹æ¯”"></a>MCPä¼ è¾“æ–¹å¼å¯¹æ¯”</h2><h3 id="HTTP-vs-stdio-ä¼ è¾“æ–¹å¼"><a href="#HTTP-vs-stdio-ä¼ è¾“æ–¹å¼" class="headerlink" title="HTTP vs stdio ä¼ è¾“æ–¹å¼"></a>HTTP vs stdio ä¼ è¾“æ–¹å¼</h3><table><thead><tr><th>ç‰¹æ€§</th><th>HTTPä¼ è¾“</th><th>stdioä¼ è¾“</th></tr></thead><tbody><tr><td><strong>å®ç°å¤æ‚åº¦</strong></td><td>ç›¸å¯¹ç®€å•</td><td>è¾ƒç®€å•</td></tr><tr><td><strong>è°ƒè¯•ä¾¿åˆ©æ€§</strong></td><td>å®¹æ˜“è°ƒè¯•ï¼ˆå¯ç”¨curlç­‰å·¥å…·ï¼‰</td><td>è°ƒè¯•è¾ƒå›°éš¾</td></tr><tr><td><strong>è·¨å¹³å°æ€§</strong></td><td>ä¼˜ç§€</td><td>éœ€è€ƒè™‘æ¢è¡Œç¬¦é—®é¢˜</td></tr><tr><td><strong>å®‰å…¨è€ƒè™‘</strong></td><td>éœ€è¦å¤„ç†è®¤è¯</td><td>é€šè¿‡stdin&#x2F;stdouté€šä¿¡</td></tr><tr><td><strong>æ€§èƒ½</strong></td><td>æœ‰ç½‘ç»œå¼€é”€</td><td>ç›´æ¥è¿›ç¨‹é€šä¿¡</td></tr><tr><td><strong>æ‰©å±•æ€§</strong></td><td>æ˜“äºé›†ç¾¤éƒ¨ç½²</td><td>å•è¿›ç¨‹é™åˆ¶</td></tr></tbody></table><h2 id="ä¸€ã€Gemini-CLI-çš„-MCP-é…ç½®"><a href="#ä¸€ã€Gemini-CLI-çš„-MCP-é…ç½®" class="headerlink" title="ä¸€ã€Gemini CLI çš„ MCP é…ç½®"></a>ä¸€ã€Gemini CLI çš„ MCP é…ç½®</h2><h3 id="1-1-HTTPæ–¹å¼é…ç½®"><a href="#1-1-HTTPæ–¹å¼é…ç½®" class="headerlink" title="1.1 HTTPæ–¹å¼é…ç½®"></a>1.1 HTTPæ–¹å¼é…ç½®</h3><p>HTTPæ–¹å¼é€‚åˆå·²ç»å®ç°äº†REST APIçš„MCPæœåŠ¡å™¨ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;selectedAuthType&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vertex-ai&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;theme&quot;</span><span class="punctuation">:</span> <span class="string">&quot;GitHub&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;mcpServers&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;github-http&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://localhost:8080/mcp&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;headers&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;Authorization&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Bearer $&#123;GITHUB_TOKEN&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;Content-Type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;application/json&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="1-2-stdioæ–¹å¼é…ç½®"><a href="#1-2-stdioæ–¹å¼é…ç½®" class="headerlink" title="1.2 stdioæ–¹å¼é…ç½®"></a>1.2 stdioæ–¹å¼é…ç½®</h3><p>stdioæ–¹å¼é€‚åˆç›´æ¥å‘½ä»¤è¡Œå¯åŠ¨çš„MCPæœåŠ¡å™¨ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;selectedAuthType&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vertex-ai&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;theme&quot;</span><span class="punctuation">:</span> <span class="string">&quot;GitHub&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;mcpServers&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;github-stdio&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;stdio&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npx&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;-y&quot;</span><span class="punctuation">,</span> <span class="string">&quot;@modelcontextprotocol/server-github&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;env&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;GITHUB_PERSONAL_ACCESS_TOKEN&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;GITHUB_PERSONAL_ACCESS_TOKEN&#125;&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="1-3-æ··åˆé…ç½®ç¤ºä¾‹"><a href="#1-3-æ··åˆé…ç½®ç¤ºä¾‹" class="headerlink" title="1.3 æ··åˆé…ç½®ç¤ºä¾‹"></a>1.3 æ··åˆé…ç½®ç¤ºä¾‹</h3><p>åŒæ—¶æ”¯æŒä¸¤ç§ä¼ è¾“æ–¹å¼ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;selectedAuthType&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vertex-ai&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;theme&quot;</span><span class="punctuation">:</span> <span class="string">&quot;GitHub&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;mcpServers&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;github&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;stdio&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npx&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;-y&quot;</span><span class="punctuation">,</span> <span class="string">&quot;@modelcontextprotocol/server-github&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;env&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;GITHUB_PERSONAL_ACCESS_TOKEN&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;GITHUB_PERSONAL_ACCESS_TOKEN&#125;&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;github-fallback&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://localhost:8080/github-mcp&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;headers&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;Authorization&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Bearer $&#123;GITHUB_TOKEN&#125;&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="äºŒã€Claude-Code-çš„-MCP-é…ç½®"><a href="#äºŒã€Claude-Code-çš„-MCP-é…ç½®" class="headerlink" title="äºŒã€Claude Code çš„ MCP é…ç½®"></a>äºŒã€Claude Code çš„ MCP é…ç½®</h2><h3 id="2-1-é…ç½®æ–‡ä»¶ä½ç½®"><a href="#2-1-é…ç½®æ–‡ä»¶ä½ç½®" class="headerlink" title="2.1 é…ç½®æ–‡ä»¶ä½ç½®"></a>2.1 é…ç½®æ–‡ä»¶ä½ç½®</h3><p>Claude Codeæ”¯æŒå¤šä¸ªé…ç½®æ–‡ä»¶ä½ç½®ï¼š</p><ul><li>ç”¨æˆ·çº§é…ç½®ï¼š<code>~/.claude/claude_desktop_config.json</code></li><li>é¡¹ç›®çº§é…ç½®ï¼š<code>.claude/claude_desktop_config.json</code></li><li>ä¸´æ—¶é…ç½®ï¼š<code>./mcp.json</code></li></ul><h3 id="2-2-HTTPæ–¹å¼é…ç½®"><a href="#2-2-HTTPæ–¹å¼é…ç½®" class="headerlink" title="2.2 HTTPæ–¹å¼é…ç½®"></a>2.2 HTTPæ–¹å¼é…ç½®</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;mcpServers&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;github-api&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://api.github.com/mcp&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;headers&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;Authorization&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Bearer $&#123;GITHUB_TOKEN&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;X-GitHub-API-Version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2022-11-28&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="2-3-stdioæ–¹å¼é…ç½®"><a href="#2-3-stdioæ–¹å¼é…ç½®" class="headerlink" title="2.3 stdioæ–¹å¼é…ç½®"></a>2.3 stdioæ–¹å¼é…ç½®</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;mcpServers&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;github-cli&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npx&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;-y&quot;</span><span class="punctuation">,</span> <span class="string">&quot;@modelcontextprotocol/server-github&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;env&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;GITHUB_PERSONAL_ACCESS_TOKEN&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;GITHUB_PERSONAL_ACCESS_TOKEN&#125;&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="2-4-ä½¿ç”¨CLIå‘½ä»¤æ·»åŠ MCP"><a href="#2-4-ä½¿ç”¨CLIå‘½ä»¤æ·»åŠ MCP" class="headerlink" title="2.4 ä½¿ç”¨CLIå‘½ä»¤æ·»åŠ MCP"></a>2.4 ä½¿ç”¨CLIå‘½ä»¤æ·»åŠ MCP</h3><p>Claude Codeæä¾›äº†ä¾¿æ·çš„CLIå‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ·»åŠ HTTPç±»å‹çš„MCPæœåŠ¡å™¨</span></span><br><span class="line">claude mcp add --transport http \</span><br><span class="line">  --name github-api \</span><br><span class="line">  --url https://api.github.com/mcp \</span><br><span class="line">  --<span class="built_in">env</span> GITHUB_TOKEN=<span class="string">&quot;<span class="variable">$&#123;GITHUB_TOKEN&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ stdioç±»å‹çš„MCPæœåŠ¡å™¨</span></span><br><span class="line">claude mcp add --transport stdio \</span><br><span class="line">  --name github-cli \</span><br><span class="line">  --<span class="built_in">command</span> npx \</span><br><span class="line">  --args <span class="string">&quot;-y&quot;</span> <span class="string">&quot;@modelcontextprotocol/server-github&quot;</span> \</span><br><span class="line">  --<span class="built_in">env</span> GITHUB_PERSONAL_ACCESS_TOKEN=<span class="string">&quot;<span class="variable">$&#123;GITHUB_PERSONAL_ACCESS_TOKEN&#125;</span>&quot;</span></span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€å®ç°å·®å¼‚è¯¦è§£"><a href="#ä¸‰ã€å®ç°å·®å¼‚è¯¦è§£" class="headerlink" title="ä¸‰ã€å®ç°å·®å¼‚è¯¦è§£"></a>ä¸‰ã€å®ç°å·®å¼‚è¯¦è§£</h2><h3 id="3-1-æœåŠ¡å™¨ç«¯å®ç°"><a href="#3-1-æœåŠ¡å™¨ç«¯å®ç°" class="headerlink" title="3.1 æœåŠ¡å™¨ç«¯å®ç°"></a>3.1 æœåŠ¡å™¨ç«¯å®ç°</h3><h4 id="HTTPæœåŠ¡å™¨ç¤ºä¾‹"><a href="#HTTPæœåŠ¡å™¨ç¤ºä¾‹" class="headerlink" title="HTTPæœåŠ¡å™¨ç¤ºä¾‹"></a>HTTPæœåŠ¡å™¨ç¤ºä¾‹</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># github_mcp_http_server.py</span></span><br><span class="line"><span class="keyword">from</span> http.server <span class="keyword">import</span> HTTPServer, BaseHTTPRequestHandler</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GitHubMCPHandler</span>(<span class="title class_ inherited__">BaseHTTPRequestHandler</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">do_POST</span>(<span class="params">self</span>):</span><br><span class="line">        content_length = <span class="built_in">int</span>(<span class="variable language_">self</span>.headers[<span class="string">&#x27;Content-Length&#x27;</span>])</span><br><span class="line">        post_data = <span class="variable language_">self</span>.rfile.read(content_length)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># å¤„ç†MCPè¯·æ±‚</span></span><br><span class="line">        response = <span class="variable language_">self</span>.handle_mcp_request(json.loads(post_data))</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.send_response(<span class="number">200</span>)</span><br><span class="line">        <span class="variable language_">self</span>.send_header(<span class="string">&#x27;Content-type&#x27;</span>, <span class="string">&#x27;application/json&#x27;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.end_headers()</span><br><span class="line">        <span class="variable language_">self</span>.wfile.write(json.dumps(response).encode())</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">handle_mcp_request</span>(<span class="params">self, request</span>):</span><br><span class="line">    <span class="comment"># å®ç°MCPåè®®é€»è¾‘</span></span><br><span class="line">    <span class="keyword">if</span> request.get(<span class="string">&#x27;method&#x27;</span>) == <span class="string">&#x27;tools/list&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="string">&#x27;tools&#x27;</span>: list_available_tools()&#125;</span><br><span class="line">    <span class="keyword">elif</span> request.get(<span class="string">&#x27;method&#x27;</span>) == <span class="string">&#x27;tools/call&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> execute_tool_call(request)</span><br><span class="line">    <span class="keyword">return</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    server = HTTPServer((<span class="string">&#x27;localhost&#x27;</span>, <span class="number">8080</span>), GitHubMCPHandler)</span><br><span class="line">    server.serve_forever()</span><br></pre></td></tr></table></figure><h4 id="stdioæœåŠ¡å™¨ç¤ºä¾‹"><a href="#stdioæœåŠ¡å™¨ç¤ºä¾‹" class="headerlink" title="stdioæœåŠ¡å™¨ç¤ºä¾‹"></a>stdioæœåŠ¡å™¨ç¤ºä¾‹</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># github_mcp_stdio_server.py</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            line = sys.stdin.readline()</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> line:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">            request = json.loads(line.strip())</span><br><span class="line">            response = handle_mcp_request(request)</span><br><span class="line"></span><br><span class="line">            <span class="built_in">print</span>(json.dumps(response))</span><br><span class="line">            sys.stdout.flush()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            error_response = &#123;</span><br><span class="line">                <span class="string">&#x27;error&#x27;</span>: &#123;</span><br><span class="line">                    <span class="string">&#x27;code&#x27;</span>: -<span class="number">32603</span>,</span><br><span class="line">                    <span class="string">&#x27;message&#x27;</span>: <span class="built_in">str</span>(e)</span><br><span class="line">                &#125;</span><br><span class="line">            <span class="built_in">print</span>(json.dumps(error_response))</span><br><span class="line">            sys.stdout.flush()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><h3 id="3-2-è®¤è¯å¤„ç†å·®å¼‚"><a href="#3-2-è®¤è¯å¤„ç†å·®å¼‚" class="headerlink" title="3.2 è®¤è¯å¤„ç†å·®å¼‚"></a>3.2 è®¤è¯å¤„ç†å·®å¼‚</h3><h4 id="HTTPè®¤è¯"><a href="#HTTPè®¤è¯" class="headerlink" title="HTTPè®¤è¯"></a>HTTPè®¤è¯</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;headers&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;Authorization&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Bearer $&#123;GITHUB_TOKEN&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;X-API-Key&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;API_KEY&#125;&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h4 id="stdioè®¤è¯"><a href="#stdioè®¤è¯" class="headerlink" title="stdioè®¤è¯"></a>stdioè®¤è¯</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;env&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;GITHUB_PERSONAL_ACCESS_TOKEN&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;GITHUB_PERSONAL_ACCESS_TOKEN&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;API_KEY&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;API_KEY&#125;&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="å››ã€æœ€ä½³å®è·µå»ºè®®"><a href="#å››ã€æœ€ä½³å®è·µå»ºè®®" class="headerlink" title="å››ã€æœ€ä½³å®è·µå»ºè®®"></a>å››ã€æœ€ä½³å®è·µå»ºè®®</h2><h3 id="4-1-é€‰æ‹©ä¼ è¾“æ–¹å¼çš„è€ƒè™‘å› ç´ "><a href="#4-1-é€‰æ‹©ä¼ è¾“æ–¹å¼çš„è€ƒè™‘å› ç´ " class="headerlink" title="4.1 é€‰æ‹©ä¼ è¾“æ–¹å¼çš„è€ƒè™‘å› ç´ "></a>4.1 é€‰æ‹©ä¼ è¾“æ–¹å¼çš„è€ƒè™‘å› ç´ </h3><ol><li><strong>å¼€å‘é˜¶æ®µ</strong>ï¼šä½¿ç”¨stdioï¼Œä¾¿äºè°ƒè¯•</li><li><strong>ç”Ÿäº§ç¯å¢ƒ</strong>ï¼šä½¿ç”¨HTTPï¼Œä¾¿äºç›‘æ§å’Œæ‰©å±•</li><li><strong>ç½‘ç»œç¯å¢ƒ</strong>ï¼šå—é™ç¯å¢ƒå¯èƒ½éœ€è¦stdio</li><li><strong>æ€§èƒ½è¦æ±‚</strong>ï¼šé«˜é¢‘è°ƒç”¨ä½¿ç”¨stdio</li></ol><h3 id="4-2-é”™è¯¯å¤„ç†ç­–ç•¥"><a href="#4-2-é”™è¯¯å¤„ç†ç­–ç•¥" class="headerlink" title="4.2 é”™è¯¯å¤„ç†ç­–ç•¥"></a>4.2 é”™è¯¯å¤„ç†ç­–ç•¥</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;mcpServers&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;github&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;stdio&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npx&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;-y&quot;</span><span class="punctuation">,</span> <span class="string">&quot;@modelcontextprotocol/server-github&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;env&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;GITHUB_PERSONAL_ACCESS_TOKEN&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;GITHUB_PERSONAL_ACCESS_TOKEN&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;NODE_ENV&quot;</span><span class="punctuation">:</span> <span class="string">&quot;production&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;retries&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;timeout&quot;</span><span class="punctuation">:</span> <span class="number">30000</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;github-backup&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://backup-server:8080/mcp&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;fallback&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="4-3-å®‰å…¨è€ƒè™‘"><a href="#4-3-å®‰å…¨è€ƒè™‘" class="headerlink" title="4.3 å®‰å…¨è€ƒè™‘"></a>4.3 å®‰å…¨è€ƒè™‘</h3><ol><li><p><strong>ä»¤ç‰Œç®¡ç†</strong>ï¼š</p><ul><li>ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼Œé¿å…ç¡¬ç¼–ç </li><li>å®šæœŸè½®æ¢è®¿é—®ä»¤ç‰Œ</li><li>ä½¿ç”¨æœ€å°æƒé™åŸåˆ™</li></ul></li><li><p><strong>ç½‘ç»œå®‰å…¨</strong>ï¼š</p><ul><li>HTTPæ–¹å¼ä½¿ç”¨HTTPS</li><li>éªŒè¯æœåŠ¡å™¨è¯ä¹¦</li><li>é™åˆ¶è®¿é—®æ¥æº</li></ul></li><li><p><strong>æ•°æ®ä¿æŠ¤</strong>ï¼š</p><ul><li>æ•æ„Ÿæ•°æ®è„±æ•</li><li>æ—¥å¿—è®°å½•æ§åˆ¶</li><li>ä¸´æ—¶æ–‡ä»¶æ¸…ç†</li></ul></li></ol><h2 id="äº”ã€æ•…éšœæ’é™¤"><a href="#äº”ã€æ•…éšœæ’é™¤" class="headerlink" title="äº”ã€æ•…éšœæ’é™¤"></a>äº”ã€æ•…éšœæ’é™¤</h2><h3 id="5-1-å¸¸è§é—®é¢˜"><a href="#5-1-å¸¸è§é—®é¢˜" class="headerlink" title="5.1 å¸¸è§é—®é¢˜"></a>5.1 å¸¸è§é—®é¢˜</h3><ol><li><p><strong>è¿æ¥è¶…æ—¶</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;timeout&quot;</span><span class="punctuation">:</span> <span class="number">60000</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;retries&quot;</span><span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;retryDelay&quot;</span><span class="punctuation">:</span> <span class="number">1000</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li><li><p><strong>è®¤è¯å¤±è´¥</strong></p><ul><li>æ£€æŸ¥ç¯å¢ƒå˜é‡è®¾ç½®</li><li>éªŒè¯ä»¤ç‰Œæœ‰æ•ˆæ€§</li><li>ç¡®è®¤æƒé™é…ç½®</li></ul></li><li><p><strong>é€šä¿¡é”™è¯¯</strong></p><ul><li>stdioï¼šæ£€æŸ¥æ¢è¡Œç¬¦ï¼ˆ\n vs \r\nï¼‰</li><li>HTTPï¼šæ£€æŸ¥Content-Typeå¤´</li></ul></li></ol><h3 id="5-2-è°ƒè¯•æŠ€å·§"><a href="#5-2-è°ƒè¯•æŠ€å·§" class="headerlink" title="5.2 è°ƒè¯•æŠ€å·§"></a>5.2 è°ƒè¯•æŠ€å·§</h3><h4 id="HTTPæ–¹å¼è°ƒè¯•"><a href="#HTTPæ–¹å¼è°ƒè¯•" class="headerlink" title="HTTPæ–¹å¼è°ƒè¯•"></a>HTTPæ–¹å¼è°ƒè¯•</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æµ‹è¯•è¿æ¥</span></span><br><span class="line">curl -X POST http://localhost:8080/mcp \</span><br><span class="line">  -H <span class="string">&quot;Content-Type: application/json&quot;</span> \</span><br><span class="line">  -H <span class="string">&quot;Authorization: Bearer <span class="variable">$GITHUB_TOKEN</span>&quot;</span> \</span><br><span class="line">  -d <span class="string">&#x27;&#123;&quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;tools/list&quot;&#125;&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="stdioæ–¹å¼è°ƒè¯•"><a href="#stdioæ–¹å¼è°ƒè¯•" class="headerlink" title="stdioæ–¹å¼è°ƒè¯•"></a>stdioæ–¹å¼è°ƒè¯•</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ‰‹åŠ¨æµ‹è¯•</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;&#123;&quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;method&quot;: &quot;tools/list&quot;&#125;&#x27;</span> | npx -y @modelcontextprotocol/server-github</span><br></pre></td></tr></table></figure><h2 id="å…­ã€æ€§èƒ½ä¼˜åŒ–"><a href="#å…­ã€æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="å…­ã€æ€§èƒ½ä¼˜åŒ–"></a>å…­ã€æ€§èƒ½ä¼˜åŒ–</h2><h3 id="6-1-HTTPä¼˜åŒ–"><a href="#6-1-HTTPä¼˜åŒ–" class="headerlink" title="6.1 HTTPä¼˜åŒ–"></a>6.1 HTTPä¼˜åŒ–</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;headers&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;Connection&quot;</span><span class="punctuation">:</span> <span class="string">&quot;keep-alive&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;Keep-Alive&quot;</span><span class="punctuation">:</span> <span class="string">&quot;timeout=60, max=100&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timeout&quot;</span><span class="punctuation">:</span> <span class="number">30000</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="6-2-stdioä¼˜åŒ–"><a href="#6-2-stdioä¼˜åŒ–" class="headerlink" title="6.2 stdioä¼˜åŒ–"></a>6.2 stdioä¼˜åŒ–</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ‰¹é‡å¤„ç†è¯·æ±‚</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">batch_process_requests</span>(<span class="params">requests</span>):</span><br><span class="line">    results = []</span><br><span class="line">    <span class="keyword">for</span> request <span class="keyword">in</span> requests:</span><br><span class="line">        results.append(handle_request(request))</span><br><span class="line">    <span class="keyword">return</span> results</span><br></pre></td></tr></table></figure><h2 id="ä¸ƒã€æ€»ç»“"><a href="#ä¸ƒã€æ€»ç»“" class="headerlink" title="ä¸ƒã€æ€»ç»“"></a>ä¸ƒã€æ€»ç»“</h2><p>HTTPå’Œstdioä¸¤ç§ä¼ è¾“æ–¹å¼å„æœ‰ä¼˜åŠ¿ï¼š</p><ul><li><strong>HTTP</strong>ï¼šæ˜“äºè°ƒè¯•ã€æ‰©å±•æ€§å¥½ã€é€‚åˆåˆ†å¸ƒå¼éƒ¨ç½²</li><li><strong>stdio</strong>ï¼šæ€§èƒ½é«˜ã€å®ç°ç®€å•ã€é€‚åˆæœ¬åœ°å¼€å‘</li></ul><p>æ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©åˆé€‚çš„ä¼ è¾“æ–¹å¼ï¼Œå¹¶åšå¥½é”™è¯¯å¤„ç†å’Œå®‰å…¨é˜²æŠ¤ã€‚é€šè¿‡åˆç†çš„é…ç½®å’Œä¼˜åŒ–ï¼Œå¯ä»¥åœ¨Gemini CLIå’ŒClaude Codeä¸­ç¨³å®šåœ°ä½¿ç”¨GitHub MCPæœåŠ¡å™¨ï¼Œæå‡å¼€å‘æ•ˆç‡ã€‚</p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul><li><a href="https://modelcontextprotocol.io/">Model Context Protocolå®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://ai.google.dev/gemini-api/docs/cli">Gemini CLIæ–‡æ¡£</a></li><li><a href="https://docs.anthropic.com/claude/docs/claude-for-developers">Claude Codeæ–‡æ¡£</a></li></ul>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;Gemini-CLI-å’Œ-Claude-Code-ä¸­é…ç½®-GitHub-MCP-æœåŠ¡å™¨è¯¦è§£&quot;&gt;&lt;a href=&quot;#Gemini-CLI-å’Œ-Claude-Code-ä¸­é…ç½®-GitHub-MCP-æœåŠ¡å™¨è¯¦è§£&quot; class=&quot;headerlink&quot;</summary>
        
      
    
    
    
    <category term="å¼€å‘å·¥å…·" scheme="https://vilaswang.github.io/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="æŠ€æœ¯æ–‡æ¡£" scheme="https://vilaswang.github.io/tags/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/"/>
    
    <category term="æŒ‡å—" scheme="https://vilaswang.github.io/tags/%E6%8C%87%E5%8D%97/"/>
    
  </entry>
  
  <entry>
    <title>Gemini CLI åœ¨å›½å†…ç½‘ç»œç¯å¢ƒä¸‹çš„å®Œæ•´é…ç½®æŒ‡å—</title>
    <link href="https://vilaswang.github.io/posts/gemini-cli-proxy/"/>
    <id>https://vilaswang.github.io/posts/gemini-cli-proxy/</id>
    <published>2025-12-18T01:09:23.000Z</published>
    <updated>2025-12-18T01:22:29.399Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Gemini-CLI-åœ¨å›½å†…ç½‘ç»œç¯å¢ƒä¸‹çš„å®Œæ•´é…ç½®æŒ‡å—"><a href="#Gemini-CLI-åœ¨å›½å†…ç½‘ç»œç¯å¢ƒä¸‹çš„å®Œæ•´é…ç½®æŒ‡å—" class="headerlink" title="Gemini CLI åœ¨å›½å†…ç½‘ç»œç¯å¢ƒä¸‹çš„å®Œæ•´é…ç½®æŒ‡å—"></a>Gemini CLI åœ¨å›½å†…ç½‘ç»œç¯å¢ƒä¸‹çš„å®Œæ•´é…ç½®æŒ‡å—</h1><blockquote><p><strong>æ–‡æ¡£åˆ›å»ºæ—¶é—´</strong>: 2025-12-18<br><strong>æœ€åæ›´æ–°</strong>: 2025-12-18<br><strong>æ ‡ç­¾</strong>: <code>gemini-cli</code>, <code>proxy</code>, <code>vpn</code>, <code>network</code>, <code>ai-tools</code>, <code>è·¨åŸŸè®¿é—®</code></p></blockquote><h2 id="ğŸ“‘-ç›®å½•"><a href="#ğŸ“‘-ç›®å½•" class="headerlink" title="ğŸ“‘ ç›®å½•"></a>ğŸ“‘ ç›®å½•</h2><ul><li><a href="#1-%E6%A6%82%E8%BF%B0">1. æ¦‚è¿°</a></li><li><a href="#2-%E7%B3%BB%E7%BB%9F%E8%A6%81%E6%B1%82">2. ç³»ç»Ÿè¦æ±‚</a></li><li><a href="#3-%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87">3. ç¯å¢ƒå‡†å¤‡</a></li><li><a href="#4-gemini-cli-%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE">4. Gemini CLI å®‰è£…é…ç½®</a></li><li><a href="#5-%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE">5. ä»£ç†é…ç½®</a></li><li><a href="#6-%E8%AE%A4%E8%AF%81%E6%B5%81%E7%A8%8B">6. è®¤è¯æµç¨‹</a></li><li><a href="#7-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E4%B8%8E%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88">7. å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</a></li><li><a href="#8-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5">8. æœ€ä½³å®è·µ</a></li><li><a href="#9-%E9%AA%8C%E8%AF%81%E6%B5%8B%E8%AF%95">9. éªŒè¯æµ‹è¯•</a></li><li><a href="#10-%E6%80%BB%E7%BB%93">10. æ€»ç»“</a></li></ul><hr><h2 id="1-ğŸ“–-æ¦‚è¿°"><a href="#1-ğŸ“–-æ¦‚è¿°" class="headerlink" title="1. ğŸ“– æ¦‚è¿°"></a>1. ğŸ“– æ¦‚è¿°</h2><p>æœ¬æ–‡æ¡£æä¾›äº†ä¸€å¥—å®Œæ•´çš„ Gemini CLI åœ¨å›½å†…ç½‘ç»œç¯å¢ƒä¸‹çš„é…ç½®è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡ä»£ç†æœåŠ¡å’Œ VPN ç»„åˆï¼Œå®ç°ç¨³å®šçš„ Google æœåŠ¡è®¿é—®ã€‚</p><h2 id="2-âš™ï¸-ç³»ç»Ÿè¦æ±‚"><a href="#2-âš™ï¸-ç³»ç»Ÿè¦æ±‚" class="headerlink" title="2. âš™ï¸ ç³»ç»Ÿè¦æ±‚"></a>2. âš™ï¸ ç³»ç»Ÿè¦æ±‚</h2><h2 id="ç³»ç»Ÿè¦æ±‚"><a href="#ç³»ç»Ÿè¦æ±‚" class="headerlink" title="ç³»ç»Ÿè¦æ±‚"></a>ç³»ç»Ÿè¦æ±‚</h2><h3 id="åŸºç¡€ç¯å¢ƒ"><a href="#åŸºç¡€ç¯å¢ƒ" class="headerlink" title="åŸºç¡€ç¯å¢ƒ"></a>åŸºç¡€ç¯å¢ƒ</h3><table><thead><tr><th>ç»„ä»¶</th><th>æœ€ä½ç‰ˆæœ¬</th><th>æ¨èç‰ˆæœ¬</th><th>éªŒè¯æ–¹æ³•</th></tr></thead><tbody><tr><td><strong>Node.js</strong></td><td>v18.x</td><td>v20.x+</td><td><code>node --version</code></td></tr><tr><td><strong>npm</strong></td><td>v9.x</td><td>v10.x+</td><td><code>npm --version</code></td></tr><tr><td><strong>æ“ä½œç³»ç»Ÿ</strong></td><td>Windows 10+</td><td>Windows 11&#x2F;macOS&#x2F;Linux</td><td>ç³»ç»Ÿä¿¡æ¯</td></tr></tbody></table><h3 id="ç½‘ç»œç¯å¢ƒ"><a href="#ç½‘ç»œç¯å¢ƒ" class="headerlink" title="ç½‘ç»œç¯å¢ƒ"></a>ç½‘ç»œç¯å¢ƒ</h3><h4 id="ä»£ç†æœåŠ¡è¦æ±‚"><a href="#ä»£ç†æœåŠ¡è¦æ±‚" class="headerlink" title="ä»£ç†æœåŠ¡è¦æ±‚"></a>ä»£ç†æœåŠ¡è¦æ±‚</h4><table><thead><tr><th>è¦æ±‚é¡¹</th><th>è§„æ ¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>åè®®æ”¯æŒ</strong></td><td>âœ… HTTPS</td><td>å¿…é¡»æ”¯æŒ SSL&#x2F;TLS</td></tr><tr><td><strong>ç«¯å£é…ç½®</strong></td><td>âœ… è‡ªå®šä¹‰ç«¯å£</td><td>æ”¯æŒå¸¸ç”¨ç«¯å£ï¼ˆ8080, 7890, 10808ç­‰ï¼‰</td></tr><tr><td><strong>è¿æ¥ç¨³å®šæ€§</strong></td><td>âœ… é«˜å¯ç”¨</td><td>99%+ è¿æ¥æˆåŠŸç‡</td></tr><tr><td><strong>å¸¦å®½è¦æ±‚</strong></td><td>âœ… &gt; 1Mbps</td><td>æ»¡è¶³ API è°ƒç”¨éœ€æ±‚</td></tr></tbody></table><h4 id="VPN-æœåŠ¡è¦æ±‚"><a href="#VPN-æœåŠ¡è¦æ±‚" class="headerlink" title="VPN æœåŠ¡è¦æ±‚"></a>VPN æœåŠ¡è¦æ±‚</h4><table><thead><tr><th>è¦æ±‚é¡¹</th><th>è§„æ ¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>åœ°ç†ä½ç½®</strong></td><td>âš ï¸ <strong>ç¾å›½èŠ‚ç‚¹æ¨è</strong></td><td>é¿å…åœ°ç†ä½ç½®é™åˆ¶</td></tr><tr><td><strong>åè®®æ”¯æŒ</strong></td><td>âœ… OpenVPN&#x2F;WireGuard</td><td>ç¡®ä¿å…¼å®¹æ€§</td></tr><tr><td><strong>DNS ä¿æŠ¤</strong></td><td>âœ… DNS leaké˜²æŠ¤</td><td>é˜²æ­¢ DNS æ³„éœ²</td></tr><tr><td><strong>Kill Switch</strong></td><td>âœ… è‡ªåŠ¨æ–­ç½‘ä¿æŠ¤</td><td>æ„å¤–æ–­å¼€æ—¶ä¿æŠ¤éšç§</td></tr></tbody></table><h2 id="ç¯å¢ƒå‡†å¤‡"><a href="#ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a>ç¯å¢ƒå‡†å¤‡</h2><h3 id="Node-js-å®‰è£…"><a href="#Node-js-å®‰è£…" class="headerlink" title="Node.js å®‰è£…"></a>Node.js å®‰è£…</h3><h4 id="Windows-å®‰è£…"><a href="#Windows-å®‰è£…" class="headerlink" title="Windows å®‰è£…"></a>Windows å®‰è£…</h4><ol><li>è®¿é—® <a href="https://nodejs.org/">Node.js å®˜ç½‘</a></li><li>ä¸‹è½½ Windows å®‰è£…åŒ…ï¼ˆ.msiï¼‰</li><li>è¿è¡Œå®‰è£…ç¨‹åºï¼Œå‹¾é€‰ â€œAdd to PATHâ€</li><li>éªŒè¯å®‰è£…ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node --version</span><br><span class="line">npm --version</span><br></pre></td></tr></table></figure><h4 id="macOS-å®‰è£…"><a href="#macOS-å®‰è£…" class="headerlink" title="macOS å®‰è£…"></a>macOS å®‰è£…</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨ Homebrew</span></span><br><span class="line">brew install node</span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ–ä¸‹è½½å®˜æ–¹å®‰è£…åŒ…</span></span><br></pre></td></tr></table></figure><h4 id="Linux-å®‰è£…"><a href="#Linux-å®‰è£…" class="headerlink" title="Linux å®‰è£…"></a>Linux å®‰è£…</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Ubuntu/Debian</span></span><br><span class="line">curl -fsSL https://deb.nodesource.com/setup_20.x | <span class="built_in">sudo</span> -E bash -</span><br><span class="line"><span class="built_in">sudo</span> apt-get install -y nodejs</span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ–ä½¿ç”¨ NodeSource</span></span><br></pre></td></tr></table></figure><h3 id="ç½‘ç»œè¿æ¥æµ‹è¯•"><a href="#ç½‘ç»œè¿æ¥æµ‹è¯•" class="headerlink" title="ç½‘ç»œè¿æ¥æµ‹è¯•"></a>ç½‘ç»œè¿æ¥æµ‹è¯•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æµ‹è¯• Google å¯è®¿é—®æ€§</span></span><br><span class="line">curl -I https://google.com</span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯•ç‰¹å®šæœåŠ¡å™¨è¿é€šæ€§</span></span><br><span class="line">ping 216.239.32.223</span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯• HTTPS ä»£ç†</span></span><br><span class="line">curl -x http://127.0.0.1:8080 https://www.google.com</span><br></pre></td></tr></table></figure><h2 id="Gemini-CLI-å®‰è£…é…ç½®"><a href="#Gemini-CLI-å®‰è£…é…ç½®" class="headerlink" title="Gemini CLI å®‰è£…é…ç½®"></a>Gemini CLI å®‰è£…é…ç½®</h2><h3 id="å…¨å±€å®‰è£…"><a href="#å…¨å±€å®‰è£…" class="headerlink" title="å…¨å±€å®‰è£…"></a>å…¨å±€å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ ‡å‡†å®‰è£…å‘½ä»¤</span></span><br><span class="line">npm install -g @google/gemini-cli</span><br><span class="line"></span><br><span class="line"><span class="comment"># éªŒè¯å®‰è£…</span></span><br><span class="line">gemini --version</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯</span></span><br><span class="line">gemini --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯•è°ƒè¯•æ¨¡å¼</span></span><br><span class="line">gemini -d --<span class="built_in">help</span></span><br></pre></td></tr></table></figure><h3 id="å®‰è£…éªŒè¯"><a href="#å®‰è£…éªŒè¯" class="headerlink" title="å®‰è£…éªŒè¯"></a>å®‰è£…éªŒè¯</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># éªŒè¯ npm åŒ…å®‰è£…</span></span><br><span class="line">npm list -g @google/gemini-cli</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥å¯æ‰§è¡Œæ–‡ä»¶</span></span><br><span class="line"><span class="built_in">where</span> gemini  <span class="comment"># Windows</span></span><br><span class="line"><span class="built_in">which</span> gemini   <span class="comment"># macOS/Linux</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯•åŸºæœ¬åŠŸèƒ½</span></span><br><span class="line">gemini --version</span><br></pre></td></tr></table></figure><h2 id="ä»£ç†é…ç½®"><a href="#ä»£ç†é…ç½®" class="headerlink" title="ä»£ç†é…ç½®"></a>ä»£ç†é…ç½®</h2><h3 id="ç¯å¢ƒå˜é‡é…ç½®"><a href="#ç¯å¢ƒå˜é‡é…ç½®" class="headerlink" title="ç¯å¢ƒå˜é‡é…ç½®"></a>ç¯å¢ƒå˜é‡é…ç½®</h3><h4 id="Windows-ç³»ç»Ÿ"><a href="#Windows-ç³»ç»Ÿ" class="headerlink" title="Windows ç³»ç»Ÿ"></a>Windows ç³»ç»Ÿ</h4><p><strong>CMD ç¯å¢ƒ</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">rem è®¾ç½® HTTP ä»£ç†</span><br><span class="line">set HTTP_PROXY=http://127.0.0.1:8080</span><br><span class="line">set HTTPS_PROXY=https://127.0.0.1:8080</span><br><span class="line"></span><br><span class="line">rem éªŒè¯è®¾ç½®</span><br><span class="line">echo %HTTP_PROXY%</span><br><span class="line">echo %HTTPS_PROXY%</span><br></pre></td></tr></table></figure><p><strong>PowerShell ç¯å¢ƒ</strong>ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½®ä»£ç†ç¯å¢ƒå˜é‡</span></span><br><span class="line"><span class="variable">$env:HTTP_PROXY</span>=<span class="string">&quot;http://127.0.0.1:8080&quot;</span></span><br><span class="line"><span class="variable">$env:HTTPS_PROXY</span>=<span class="string">&quot;https://127.0.0.1:8080&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># éªŒè¯è®¾ç½®</span></span><br><span class="line"><span class="variable">$env:HTTP_PROXY</span></span><br><span class="line"><span class="variable">$env:HTTPS_PROXY</span></span><br></pre></td></tr></table></figure><h4 id="macOS-Linux-ç³»ç»Ÿ"><a href="#macOS-Linux-ç³»ç»Ÿ" class="headerlink" title="macOS&#x2F;Linux ç³»ç»Ÿ"></a>macOS&#x2F;Linux ç³»ç»Ÿ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Bash/Zsh ç¯å¢ƒ</span></span><br><span class="line"><span class="built_in">export</span> HTTP_PROXY=http://127.0.0.1:8090</span><br><span class="line"><span class="built_in">export</span> HTTPS_PROXY=https://127.0.0.1:8090</span><br><span class="line"></span><br><span class="line"><span class="comment"># éªŒè¯è®¾ç½®</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$HTTP_PROXY</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$HTTPS_PROXY</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ åˆ°é…ç½®æ–‡ä»¶ï¼ˆæ°¸ä¹…ç”Ÿæ•ˆï¼‰</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;export HTTP_PROXY=http://127.0.0.1:8090&#x27;</span> &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;export HTTPS_PROXY=https://127.0.0.1:8090&#x27;</span> &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure><h3 id="ä»£ç†æ’é™¤è®¾ç½®"><a href="#ä»£ç†æ’é™¤è®¾ç½®" class="headerlink" title="ä»£ç†æ’é™¤è®¾ç½®"></a>ä»£ç†æ’é™¤è®¾ç½®</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Windows CMD</span></span><br><span class="line"><span class="built_in">set</span> NO_PROXY=localhost,127.0.0.1,.<span class="built_in">local</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Windows PowerShell</span></span><br><span class="line"><span class="variable">$env</span>:NO_PROXY=<span class="string">&quot;localhost,127.0.0.1,.local&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># macOS/Linux</span></span><br><span class="line"><span class="built_in">export</span> NO_PROXY=localhost,127.0.0.1,.<span class="built_in">local</span></span><br></pre></td></tr></table></figure><h3 id="ä»£ç†æœåŠ¡é…ç½®ç¤ºä¾‹"><a href="#ä»£ç†æœåŠ¡é…ç½®ç¤ºä¾‹" class="headerlink" title="ä»£ç†æœåŠ¡é…ç½®ç¤ºä¾‹"></a>ä»£ç†æœåŠ¡é…ç½®ç¤ºä¾‹</h3><h4 id="Clash-é…ç½®"><a href="#Clash-é…ç½®" class="headerlink" title="Clash é…ç½®"></a>Clash é…ç½®</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Gemini CLI ä¸“ç”¨è§„åˆ™</span></span><br><span class="line"><span class="attr">rules:</span></span><br><span class="line">  <span class="comment"># Google ç›¸å…³åŸŸåèµ°ä»£ç†</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&#x27;DOMAIN-SUFFIX,googleapis.com,ğŸ”° èŠ‚ç‚¹é€‰æ‹©&#x27;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&#x27;DOMAIN-SUFFIX,google.com,ğŸ”° èŠ‚ç‚¹é€‰æ‹©&#x27;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&#x27;DOMAIN,generativelanguage.googleapis.com,ğŸ”° èŠ‚ç‚¹é€‰æ‹©&#x27;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&#x27;DOMAIN,aistudio.google.com,ğŸ”° èŠ‚ç‚¹é€‰æ‹©&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Gemini CLI è¿›ç¨‹èµ°ä»£ç†</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&#x27;PROCESS-NAME,gemini,ğŸ”° èŠ‚ç‚¹é€‰æ‹©&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">proxy-groups:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">ğŸ”°</span> <span class="string">èŠ‚ç‚¹é€‰æ‹©</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">select</span></span><br><span class="line">    <span class="attr">proxies:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ç¾å›½èŠ‚ç‚¹1</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ç¾å›½èŠ‚ç‚¹2</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ç¾å›½èŠ‚ç‚¹3</span></span><br></pre></td></tr></table></figure><h2 id="è®¤è¯æµç¨‹"><a href="#è®¤è¯æµç¨‹" class="headerlink" title="è®¤è¯æµç¨‹"></a>è®¤è¯æµç¨‹</h2><h3 id="å¯åŠ¨-Gemini-CLI"><a href="#å¯åŠ¨-Gemini-CLI" class="headerlink" title="å¯åŠ¨ Gemini CLI"></a>å¯åŠ¨ Gemini CLI</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åŸºç¡€å¯åŠ¨</span></span><br><span class="line">gemini</span><br><span class="line"></span><br><span class="line"><span class="comment"># è°ƒè¯•æ¨¡å¼å¯åŠ¨</span></span><br><span class="line">gemini -d</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šæ¨¡å‹å¯åŠ¨</span></span><br><span class="line">gemini --model=gemini-1.5-flash</span><br></pre></td></tr></table></figure><h3 id="è®¤è¯æ­¥éª¤"><a href="#è®¤è¯æ­¥éª¤" class="headerlink" title="è®¤è¯æ­¥éª¤"></a>è®¤è¯æ­¥éª¤</h3><ol><li>Gemini CLI ä¼šè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨è¿›è¡Œ OAuth è®¤è¯</li><li>ç™»å½• Google è´¦å·</li><li>æˆæƒ Gemini CLI è®¿é—®æƒé™</li><li>æµè§ˆå™¨ä¼šè·³è½¬å›æœ¬åœ°ç«¯å£ï¼ˆé€šå¸¸ä¸º localhost:11101ï¼‰</li><li>CLI ç¡®è®¤è®¤è¯æˆåŠŸ</li></ol><h2 id="å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ"><a href="#å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ" class="headerlink" title="å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ"></a>å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h2><h3 id="è¿æ¥è¶…æ—¶é—®é¢˜"><a href="#è¿æ¥è¶…æ—¶é—®é¢˜" class="headerlink" title="è¿æ¥è¶…æ—¶é—®é¢˜"></a>è¿æ¥è¶…æ—¶é—®é¢˜</h3><p><strong>ç—‡çŠ¶</strong>ï¼š</p><ul><li>ç»ˆç«¯æ˜¾ç¤º â€œWaiting for authâ€¦â€ åè‡ªåŠ¨é€€å‡º</li><li>æµè§ˆå™¨æˆæƒæˆåŠŸä½† CLI è¿æ¥å¤±è´¥</li><li>é”™è¯¯æ—¥å¿—æ˜¾ç¤º <code>AggregateError [ETIMEDOUT]</code></li></ul><p><strong>è§£å†³æ­¥éª¤</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. å¯ç”¨è°ƒè¯•æ¨¡å¼</span></span><br><span class="line">gemini -d</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. æ£€æŸ¥ä»£ç†è®¾ç½®</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$HTTPS_PROXY</span>  <span class="comment"># Linux/macOS</span></span><br><span class="line"><span class="built_in">echo</span> %HTTPS_PROXY%  <span class="comment"># Windows</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. æµ‹è¯•ç½‘ç»œè¿é€šæ€§</span></span><br><span class="line">curl -x <span class="variable">$HTTPS_PROXY</span> https://google.com</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. æ£€æŸ¥ç‰¹å®šæœåŠ¡å™¨</span></span><br><span class="line">curl -x <span class="variable">$HTTPS_PROXY</span> https://216.239.32.223</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. æµ‹è¯• DNS è§£æ</span></span><br><span class="line">nslookup google.com 8.8.8.8</span><br></pre></td></tr></table></figure><h3 id="è®¤è¯æˆæƒé—®é¢˜"><a href="#è®¤è¯æˆæƒé—®é¢˜" class="headerlink" title="è®¤è¯æˆæƒé—®é¢˜"></a>è®¤è¯æˆæƒé—®é¢˜</h3><p><strong>æ£€æŸ¥æ¸…å•</strong>ï¼š</p><ul><li><input disabled="" type="checkbox"> é˜²ç«å¢™æ˜¯å¦é˜»æ­¢ localhost:11101</li><li><input disabled="" type="checkbox"> æ€æ¯’è½¯ä»¶æ˜¯å¦æ‹¦æˆª Gemini CLI</li><li><input disabled="" type="checkbox"> ä»£ç†æ˜¯å¦æ”¯æŒ WebSocket è¿æ¥</li><li><input disabled="" type="checkbox"> æµè§ˆå™¨æ˜¯å¦å…è®¸é‡å®šå‘</li></ul><h3 id="ç¯å¢ƒå˜é‡é—®é¢˜"><a href="#ç¯å¢ƒå˜é‡é—®é¢˜" class="headerlink" title="ç¯å¢ƒå˜é‡é—®é¢˜"></a>ç¯å¢ƒå˜é‡é—®é¢˜</h3><p><strong>éªŒè¯æ–¹æ³•</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ£€æŸ¥å½“å‰ç¯å¢ƒå˜é‡</span></span><br><span class="line"><span class="built_in">env</span> | grep -i proxy  <span class="comment"># Linux/macOS</span></span><br><span class="line"><span class="built_in">set</span> | findstr PROXY     <span class="comment"># Windows</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯•ä»£ç†è¿æ¥</span></span><br><span class="line">curl -v -x <span class="variable">$HTTPS_PROXY</span> https://httpbin.org/ip</span><br></pre></td></tr></table></figure><h3 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸´æ—¶è®¾ç½®ï¼ˆå½“å‰ä¼šè¯æœ‰æ•ˆï¼‰</span></span><br><span class="line"><span class="built_in">export</span> HTTPS_PROXY=http://127.0.0.1:8090</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ°¸ä¹…è®¾ç½®ï¼ˆå†™å…¥é…ç½®æ–‡ä»¶ï¼‰</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;export HTTPS_PROXY=http://127.0.0.1:8090&#x27;</span> &gt;&gt; ~/.profile</span><br><span class="line"><span class="built_in">source</span> ~/.profile</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç³»ç»Ÿçº§è®¾ç½®ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">tee</span> /etc/environment &gt; /dev/null &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">HTTPS_PROXY=http://127.0.0.1:8090</span></span><br><span class="line"><span class="string">HTTP_PROXY=http://127.0.0.1:8090</span></span><br><span class="line"><span class="string">NO_PROXY=localhost,127.0.0.1,.local</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure><h2 id="æœ€ä½³å®è·µ"><a href="#æœ€ä½³å®è·µ" class="headerlink" title="æœ€ä½³å®è·µ"></a>æœ€ä½³å®è·µ</h2><h3 id="æ€§èƒ½ä¼˜åŒ–"><a href="#æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="æ€§èƒ½ä¼˜åŒ–"></a>æ€§èƒ½ä¼˜åŒ–</h3><h4 id="èŠ‚ç‚¹è¯„ä¼°æ ‡å‡†"><a href="#èŠ‚ç‚¹è¯„ä¼°æ ‡å‡†" class="headerlink" title="èŠ‚ç‚¹è¯„ä¼°æ ‡å‡†"></a>èŠ‚ç‚¹è¯„ä¼°æ ‡å‡†</h4><table><thead><tr><th>æŒ‡æ ‡</th><th>ä¼˜ç§€</th><th>è‰¯å¥½</th><th>å¯æ¥å—</th></tr></thead><tbody><tr><td><strong>å»¶è¿Ÿ</strong></td><td>&lt; 100ms</td><td>100-200ms</td><td>200-500ms</td></tr><tr><td><strong>ç¨³å®šæ€§</strong></td><td>99.9%+</td><td>99%+</td><td>95%+</td></tr><tr><td><strong>å¸¦å®½</strong></td><td>&gt; 10Mbps</td><td>5-10Mbps</td><td>&gt; 1Mbps</td></tr><tr><td><strong>æˆåŠŸç‡</strong></td><td>100%</td><td>99%+</td><td>95%+</td></tr></tbody></table><h4 id="è‡ªåŠ¨åˆ‡æ¢é…ç½®"><a href="#è‡ªåŠ¨åˆ‡æ¢é…ç½®" class="headerlink" title="è‡ªåŠ¨åˆ‡æ¢é…ç½®"></a>è‡ªåŠ¨åˆ‡æ¢é…ç½®</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Clash é…ç½®ç¤ºä¾‹</span></span><br><span class="line"><span class="attr">proxy-groups:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">&quot;Auto-Best-Proxy&quot;</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">url-test</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">&quot;http://www.gstatic.com/generate_204&quot;</span></span><br><span class="line">    <span class="attr">interval:</span> <span class="number">300</span></span><br><span class="line">    <span class="attr">tolerance:</span> <span class="number">50</span></span><br><span class="line">    <span class="attr">use:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">proxy-nodes</span></span><br></pre></td></tr></table></figure><h3 id="å®‰å…¨ç­–ç•¥"><a href="#å®‰å…¨ç­–ç•¥" class="headerlink" title="å®‰å…¨ç­–ç•¥"></a>å®‰å…¨ç­–ç•¥</h3><h4 id="ç½‘ç»œå®‰å…¨"><a href="#ç½‘ç»œå®‰å…¨" class="headerlink" title="ç½‘ç»œå®‰å…¨"></a>ç½‘ç»œå®‰å…¨</h4><ol><li><strong>é€‰æ‹©å¯ä¿¡æœåŠ¡å•†</strong>ï¼šé¿å…ä½¿ç”¨å…è´¹æˆ–ä¸ç¨³å®šçš„ä»£ç†æœåŠ¡</li><li><strong>åŠ å¯†é€šä¿¡</strong>ï¼šç¡®ä¿ä»£ç†æ”¯æŒ HTTPS åè®®</li><li><strong>æ—¥å¿—å®¡è®¡</strong>ï¼šå®šæœŸæ£€æŸ¥ä»£ç†è¿æ¥æ—¥å¿—</li><li><strong>è®¿é—®æ§åˆ¶</strong>ï¼šé™åˆ¶ä»£ç†æœåŠ¡çš„è®¿é—®æƒé™</li></ol><h4 id="è´¦å·å®‰å…¨"><a href="#è´¦å·å®‰å…¨" class="headerlink" title="è´¦å·å®‰å…¨"></a>è´¦å·å®‰å…¨</h4><ol><li><strong>ä¸¤æ­¥éªŒè¯</strong>ï¼šä¸º Google è´¦å·å¯ç”¨ 2FA</li><li><strong>åº”ç”¨å¯†ç </strong>ï¼šä½¿ç”¨åº”ç”¨ä¸“ç”¨å¯†ç è€Œéä¸»å¯†ç </li><li><strong>å®šæœŸå®¡æŸ¥</strong>ï¼šæ£€æŸ¥æˆæƒçš„åº”ç”¨åˆ—è¡¨</li><li><strong>å®‰å…¨ç›‘æ§</strong>ï¼šç›‘æ§å¼‚å¸¸ç™»å½•æ´»åŠ¨</li></ol><h2 id="éªŒè¯æµ‹è¯•"><a href="#éªŒè¯æµ‹è¯•" class="headerlink" title="éªŒè¯æµ‹è¯•"></a>éªŒè¯æµ‹è¯•</h2><h3 id="åŸºç¡€ç¯å¢ƒéªŒè¯"><a href="#åŸºç¡€ç¯å¢ƒéªŒè¯" class="headerlink" title="åŸºç¡€ç¯å¢ƒéªŒè¯"></a>åŸºç¡€ç¯å¢ƒéªŒè¯</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æµ‹è¯•åŸºç¡€è¿æ¥</span></span><br><span class="line">curl -I https://www.google.com</span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯•ä»£ç†è¿æ¥</span></span><br><span class="line">curl -x <span class="variable">$HTTPS_PROXY</span> -I https://www.google.com</span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯•ç‰¹å®šæœåŠ¡å™¨</span></span><br><span class="line">curl -x <span class="variable">$HTTPS_PROXY</span> -I https://216.239.32.223</span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯• API ç«¯ç‚¹</span></span><br><span class="line">curl -x <span class="variable">$HTTPS_PROXY</span> https://generativelanguage.googleapis.com</span><br></pre></td></tr></table></figure><h3 id="ç«¯åˆ°ç«¯æµ‹è¯•è„šæœ¬"><a href="#ç«¯åˆ°ç«¯æµ‹è¯•è„šæœ¬" class="headerlink" title="ç«¯åˆ°ç«¯æµ‹è¯•è„šæœ¬"></a>ç«¯åˆ°ç«¯æµ‹è¯•è„šæœ¬</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># Gemini CLI è®¤è¯æµ‹è¯•è„šæœ¬</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;å¼€å§‹ Gemini CLI è®¤è¯æµ‹è¯•...&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. æ£€æŸ¥ç¯å¢ƒå˜é‡</span></span><br><span class="line"><span class="keyword">if</span> [ -z <span class="string">&quot;<span class="variable">$HTTPS_PROXY</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;âŒ ä»£ç†ç¯å¢ƒå˜é‡æœªè®¾ç½®&quot;</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;âœ… ä»£ç†ç¯å¢ƒå˜é‡: <span class="variable">$HTTPS_PROXY</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. æµ‹è¯•ç½‘ç»œè¿æ¥</span></span><br><span class="line"><span class="keyword">if</span> ! curl -s -x <span class="string">&quot;<span class="variable">$HTTPS_PROXY</span>&quot;</span> https://www.google.com &gt; /dev/null; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;âŒ ä»£ç†è¿æ¥å¤±è´¥&quot;</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;âœ… ä»£ç†è¿æ¥æ­£å¸¸&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. å¯åŠ¨è°ƒè¯•æ¨¡å¼</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;å¯åŠ¨ Gemini CLI è°ƒè¯•æ¨¡å¼...&quot;</span></span><br><span class="line"><span class="built_in">timeout</span> 30 gemini -d &amp;</span><br><span class="line">GEMINI_PID=$!</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. ç­‰å¾…è®¤è¯å®Œæˆ</span></span><br><span class="line"><span class="built_in">sleep</span> 5</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. æ£€æŸ¥è¿›ç¨‹çŠ¶æ€</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">kill</span> -0 <span class="variable">$GEMINI_PID</span> 2&gt;/dev/null; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;âœ… Gemini CLI è¿›ç¨‹è¿è¡Œä¸­&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;è¯·å®Œæˆæµè§ˆå™¨è®¤è¯æµç¨‹&quot;</span></span><br><span class="line">    <span class="built_in">wait</span> <span class="variable">$GEMINI_PID</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;âœ… è®¤è¯æµç¨‹å®Œæˆ&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;âŒ Gemini CLI è¿›ç¨‹å¼‚å¸¸é€€å‡º&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬æ–‡æ¡£æä¾›äº†ä¸€å¥—å®Œæ•´çš„ Gemini CLI åœ¨å›½å†…ç½‘ç»œç¯å¢ƒä¸‹çš„é…ç½®è§£å†³æ–¹æ¡ˆï¼Œæ¶µç›–äº†ä»ç¯å¢ƒå‡†å¤‡åˆ°æœ€ç»ˆéªŒè¯çš„å®Œæ•´æµç¨‹ã€‚</p><h3 id="å…³é”®æˆåŠŸå› ç´ "><a href="#å…³é”®æˆåŠŸå› ç´ " class="headerlink" title="å…³é”®æˆåŠŸå› ç´ "></a>å…³é”®æˆåŠŸå› ç´ </h3><ul><li><strong>ä»£ç†æœåŠ¡ç¨³å®šæ€§</strong>ï¼šé€‰æ‹©å¯é çš„ä»£ç†æœåŠ¡æä¾›å•†</li><li><strong>ç¯å¢ƒå˜é‡é…ç½®</strong>ï¼šæ­£ç¡®è®¾ç½® HTTPS_PROXY å’Œç›¸å…³ç¯å¢ƒå˜é‡</li><li><strong>ç½‘ç»œå…¼å®¹æ€§</strong>ï¼šç¡®ä¿ä»£ç†æœåŠ¡æ”¯æŒ HTTPS åè®®å’Œ WebSocket è¿æ¥</li><li><strong>ç³»ç»Ÿæƒé™é…ç½®</strong>ï¼šæ­£ç¡®é…ç½®é˜²ç«å¢™å’Œæ€æ¯’è½¯ä»¶</li></ul><p>é€šè¿‡éµå¾ªæœ¬æ–‡æ¡£çš„æŒ‡å¯¼åŸåˆ™å’Œæœ€ä½³å®è·µï¼Œç”¨æˆ·å¯ä»¥åœ¨å›½å†…ç½‘ç»œç¯å¢ƒä¸­ç¨³å®šã€é«˜æ•ˆåœ°ä½¿ç”¨ Gemini CLIï¼Œäº«å— Google AI æŠ€æœ¯å¸¦æ¥çš„ä¾¿åˆ©å’Œå¼ºå¤§åŠŸèƒ½ã€‚</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;Gemini-CLI-åœ¨å›½å†…ç½‘ç»œç¯å¢ƒä¸‹çš„å®Œæ•´é…ç½®æŒ‡å—&quot;&gt;&lt;a href=&quot;#Gemini-CLI-åœ¨å›½å†…ç½‘ç»œç¯å¢ƒä¸‹çš„å®Œæ•´é…ç½®æŒ‡å—&quot; class=&quot;headerlink&quot; title=&quot;Gemini CLI åœ¨å›½å†…ç½‘ç»œç¯å¢ƒä¸‹çš„å®Œæ•´é…ç½®æŒ‡å—&quot;&gt;&lt;/a&gt;Gemini</summary>
        
      
    
    
    
    <category term="å¼€å‘å·¥å…·" scheme="https://vilaswang.github.io/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="æŠ€æœ¯æ–‡æ¡£" scheme="https://vilaswang.github.io/tags/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/"/>
    
    <category term="æŒ‡å—" scheme="https://vilaswang.github.io/tags/%E6%8C%87%E5%8D%97/"/>
    
  </entry>
  
  <entry>
    <title>Windows ç¯å¢ƒä¸‹é…ç½® GitHub MCP æœåŠ¡å™¨å®Œæ•´æŒ‡å—</title>
    <link href="https://vilaswang.github.io/posts/windows-github-mcp/"/>
    <id>https://vilaswang.github.io/posts/windows-github-mcp/</id>
    <published>2025-12-18T01:09:23.000Z</published>
    <updated>2025-12-18T01:22:18.455Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Windows-ç¯å¢ƒä¸‹é…ç½®-GitHub-MCP-æœåŠ¡å™¨å®Œæ•´æŒ‡å—"><a href="#Windows-ç¯å¢ƒä¸‹é…ç½®-GitHub-MCP-æœåŠ¡å™¨å®Œæ•´æŒ‡å—" class="headerlink" title="Windows ç¯å¢ƒä¸‹é…ç½® GitHub MCP æœåŠ¡å™¨å®Œæ•´æŒ‡å—"></a>Windows ç¯å¢ƒä¸‹é…ç½® GitHub MCP æœåŠ¡å™¨å®Œæ•´æŒ‡å—</h1><blockquote><p><strong>æ–‡æ¡£åˆ›å»ºæ—¶é—´</strong>: 2025-12-18<br><strong>æœ€åæ›´æ–°</strong>: 2025-12-18<br><strong>æ ‡ç­¾</strong>: <code>github</code>, <code>mcp</code>, <code>windows</code>, <code>powershell</code>, <code>gemini-cli</code>, <code>ai-tools</code></p></blockquote><h2 id="ğŸ“‘-ç›®å½•"><a href="#ğŸ“‘-ç›®å½•" class="headerlink" title="ğŸ“‘ ç›®å½•"></a>ğŸ“‘ ç›®å½•</h2><ul><li><a href="#1-%E6%A6%82%E8%BF%B0">1. æ¦‚è¿°</a></li><li><a href="#2-%E7%94%9F%E6%88%90-github-pat">2. ç”Ÿæˆ GitHub PAT</a></li><li><a href="#3-%E8%AE%BE%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">3. è®¾ç½®ç¯å¢ƒå˜é‡</a></li><li><a href="#4-%E7%BC%96%E8%BE%91-gemini-cli-%E9%85%8D%E7%BD%AE">4. ç¼–è¾‘ Gemini CLI é…ç½®</a></li><li><a href="#5-%E5%AE%89%E8%A3%85%E5%BF%85%E8%A6%81%E7%9A%84%E4%BE%9D%E8%B5%96">5. å®‰è£…å¿…è¦çš„ä¾èµ–</a></li><li><a href="#6-%E9%AA%8C%E8%AF%81%E9%85%8D%E7%BD%AE">6. éªŒè¯é…ç½®</a></li><li><a href="#7-%E6%95%85%E9%9A%9C%E6%8E%92%E9%99%A4">7. æ•…éšœæ’é™¤</a></li><li><a href="#8-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5">8. æœ€ä½³å®è·µ</a></li><li><a href="#9-%E6%80%BB%E7%BB%93">9. æ€»ç»“</a></li></ul><hr><h2 id="1-ğŸ“–-æ¦‚è¿°"><a href="#1-ğŸ“–-æ¦‚è¿°" class="headerlink" title="1. ğŸ“– æ¦‚è¿°"></a>1. ğŸ“– æ¦‚è¿°</h2><p>æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»åœ¨Windowsç¯å¢ƒä¸‹å¦‚ä½•é…ç½®GitHub MCP (Model Context Protocol) æœåŠ¡å™¨ï¼Œè®©æ‚¨å¯ä»¥åœ¨Gemini CLIä¸­ç›´æ¥æ“ä½œGitHubä»“åº“ã€‚</p><h2 id="2-ğŸ”‘-ç”Ÿæˆ-GitHub-PAT"><a href="#2-ğŸ”‘-ç”Ÿæˆ-GitHub-PAT" class="headerlink" title="2. ğŸ”‘ ç”Ÿæˆ GitHub PAT"></a>2. ğŸ”‘ ç”Ÿæˆ GitHub PAT</h2><h2 id="æ­¥éª¤-1ï¼šç”Ÿæˆ-GitHub-PAT"><a href="#æ­¥éª¤-1ï¼šç”Ÿæˆ-GitHub-PAT" class="headerlink" title="æ­¥éª¤ 1ï¼šç”Ÿæˆ GitHub PAT"></a>æ­¥éª¤ 1ï¼šç”Ÿæˆ GitHub PAT</h2><p>æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤åœ¨GitHubåˆ›å»ºä¸€ä¸ª<strong>Fine-grained Token</strong>ï¼ˆç»†ç²’åº¦ä»¤ç‰Œï¼‰ï¼š</p><h3 id="1-1-è®¿é—®GitHubè®¾ç½®"><a href="#1-1-è®¿é—®GitHubè®¾ç½®" class="headerlink" title="1.1 è®¿é—®GitHubè®¾ç½®"></a>1.1 è®¿é—®GitHubè®¾ç½®</h3><ol><li>ç™»å½•GitHubè´¦æˆ·</li><li>ç‚¹å‡»å³ä¸Šè§’å¤´åƒ</li><li>é€‰æ‹© â€œSettingsâ€ï¼ˆè®¾ç½®ï¼‰</li><li>åœ¨å·¦ä¾§èœå•ä¸­é€‰æ‹© â€œDeveloper settingsâ€</li><li>ç‚¹å‡» â€œPersonal access tokensâ€ â†’ â€œFine-grained tokensâ€</li></ol><h3 id="1-2-åˆ›å»ºæ–°ä»¤ç‰Œ"><a href="#1-2-åˆ›å»ºæ–°ä»¤ç‰Œ" class="headerlink" title="1.2 åˆ›å»ºæ–°ä»¤ç‰Œ"></a>1.2 åˆ›å»ºæ–°ä»¤ç‰Œ</h3><ol><li>ç‚¹å‡» â€œGenerate new tokenâ€</li><li>è¾“å…¥ä»¤ç‰Œåç§°ï¼ˆå¦‚ï¼šâ€Gemini MCP Serverâ€ï¼‰</li><li>è®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆå»ºè®®é€‰æ‹©90å¤©ï¼‰</li></ol><h3 id="1-3-é…ç½®æƒé™"><a href="#1-3-é…ç½®æƒé™" class="headerlink" title="1.3 é…ç½®æƒé™"></a>1.3 é…ç½®æƒé™</h3><p><strong>Repository access</strong>ï¼š</p><ul><li>é€‰æ‹©ä½ è¦è®¿é—®çš„ä»“åº“</li><li>å»ºè®®é€‰æ‹© â€œOnly select repositoriesâ€ å¹¶æŒ‡å®šç›¸å…³ä»“åº“</li></ul><p><strong>Permissions</strong>ï¼ˆæƒé™é…ç½®ï¼‰ï¼š</p><ul><li><strong>Contents</strong> â†’ Read &amp; Writeï¼ˆè¯»å†™ä»£ç å†…å®¹ï¼‰</li><li><strong>Issues</strong> â†’ Read &amp; Writeï¼ˆç®¡ç†Issuesï¼‰</li><li><strong>Pull requests</strong> â†’ Read &amp; Writeï¼ˆç®¡ç†PRï¼‰</li><li><strong>Metadata</strong> â†’ Readï¼ˆè¯»å–ä»“åº“å…ƒæ•°æ®ï¼‰</li></ul><h3 id="1-4-å¤åˆ¶ä»¤ç‰Œ"><a href="#1-4-å¤åˆ¶ä»¤ç‰Œ" class="headerlink" title="1.4 å¤åˆ¶ä»¤ç‰Œ"></a>1.4 å¤åˆ¶ä»¤ç‰Œ</h3><p>ç”Ÿæˆåç«‹å³å¤åˆ¶å¹¶ä¿å­˜ä»¤ç‰Œï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ghp_abcd1234efgh5678ijkl90mnopqrstuvwx</span><br></pre></td></tr></table></figure><h2 id="æ­¥éª¤-2ï¼šè®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆWindowsï¼‰"><a href="#æ­¥éª¤-2ï¼šè®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆWindowsï¼‰" class="headerlink" title="æ­¥éª¤ 2ï¼šè®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆWindowsï¼‰"></a>æ­¥éª¤ 2ï¼šè®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆWindowsï¼‰</h2><h3 id="2-1-ä½¿ç”¨PowerShellè®¾ç½®"><a href="#2-1-ä½¿ç”¨PowerShellè®¾ç½®" class="headerlink" title="2.1 ä½¿ç”¨PowerShellè®¾ç½®"></a>2.1 ä½¿ç”¨PowerShellè®¾ç½®</h3><p>åœ¨Windows PowerShellä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½®ç”¨æˆ·çº§ç¯å¢ƒå˜é‡</span></span><br><span class="line">setx GITHUB_PERSONAL_ACCESS_TOKEN <span class="string">&quot;ä½ çš„GitHubä»¤ç‰Œ&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®ä¼šè¯çº§ç¯å¢ƒå˜é‡ï¼ˆç«‹å³ç”Ÿæ•ˆï¼‰</span></span><br><span class="line"><span class="variable">$env:GITHUB_PERSONAL_ACCESS_TOKEN</span> = <span class="string">&quot;ä½ çš„GitHubä»¤ç‰Œ&quot;</span></span><br></pre></td></tr></table></figure><h3 id="2-2-éªŒè¯è®¾ç½®"><a href="#2-2-éªŒè¯è®¾ç½®" class="headerlink" title="2.2 éªŒè¯è®¾ç½®"></a>2.2 éªŒè¯è®¾ç½®</h3><p>é‡æ–°æ‰“å¼€ä¸€ä¸ªæ–°çš„PowerShellçª—å£ï¼ŒéªŒè¯ç¯å¢ƒå˜é‡ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹ç¯å¢ƒå˜é‡å€¼</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$env:GITHUB_PERSONAL_ACCESS_TOKEN</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line"><span class="built_in">Get-ChildItem</span> Env:GITHUB_PERSONAL_ACCESS_TOKEN</span><br></pre></td></tr></table></figure><h2 id="æ­¥éª¤-3ï¼šç¼–è¾‘-Gemini-CLI-é…ç½®"><a href="#æ­¥éª¤-3ï¼šç¼–è¾‘-Gemini-CLI-é…ç½®" class="headerlink" title="æ­¥éª¤ 3ï¼šç¼–è¾‘ Gemini CLI é…ç½®"></a>æ­¥éª¤ 3ï¼šç¼–è¾‘ Gemini CLI é…ç½®</h2><h3 id="3-1-å®šä½é…ç½®æ–‡ä»¶"><a href="#3-1-å®šä½é…ç½®æ–‡ä»¶" class="headerlink" title="3.1 å®šä½é…ç½®æ–‡ä»¶"></a>3.1 å®šä½é…ç½®æ–‡ä»¶</h3><ul><li><strong>å…¨å±€é…ç½®è·¯å¾„</strong>ï¼š<code>%USERPROFILE%\.gemini\settings.json</code></li><li><strong>é¡¹ç›®çº§é…ç½®è·¯å¾„</strong>ï¼š<code>ä½ çš„é¡¹ç›®ç›®å½•\.gemini\settings.json</code></li></ul><h3 id="3-2-åˆ›å»ºé…ç½®æ–‡ä»¶"><a href="#3-2-åˆ›å»ºé…ç½®æ–‡ä»¶" class="headerlink" title="3.2 åˆ›å»ºé…ç½®æ–‡ä»¶"></a>3.2 åˆ›å»ºé…ç½®æ–‡ä»¶</h3><p>å¦‚æœé…ç½®æ–‡ä»¶ä¸å­˜åœ¨ï¼Œå…ˆåˆ›å»ºï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºé…ç½®ç›®å½•</span></span><br><span class="line">mkdir <span class="variable">$env:USERPROFILE</span>\.gemini</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¼–è¾‘é…ç½®æ–‡ä»¶</span></span><br><span class="line">notepad <span class="variable">$env:USERPROFILE</span>\.gemini\settings.json</span><br></pre></td></tr></table></figure><h3 id="3-3-é…ç½®MCPæœåŠ¡å™¨"><a href="#3-3-é…ç½®MCPæœåŠ¡å™¨" class="headerlink" title="3.3 é…ç½®MCPæœåŠ¡å™¨"></a>3.3 é…ç½®MCPæœåŠ¡å™¨</h3><p>åœ¨ <code>settings.json</code> ä¸­å†™å…¥ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;mcpServers&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;github&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npx&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;-y&quot;</span><span class="punctuation">,</span> <span class="string">&quot;@modelcontextprotocol/server-github&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;env&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;GITHUB_PERSONAL_ACCESS_TOKEN&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;GITHUB_PERSONAL_ACCESS_TOKEN&#125;&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="æ­¥éª¤-4ï¼šå®‰è£…å¿…è¦çš„ä¾èµ–"><a href="#æ­¥éª¤-4ï¼šå®‰è£…å¿…è¦çš„ä¾èµ–" class="headerlink" title="æ­¥éª¤ 4ï¼šå®‰è£…å¿…è¦çš„ä¾èµ–"></a>æ­¥éª¤ 4ï¼šå®‰è£…å¿…è¦çš„ä¾èµ–</h2><h3 id="4-1-å®‰è£…Node-jsï¼ˆå¦‚æœå°šæœªå®‰è£…ï¼‰"><a href="#4-1-å®‰è£…Node-jsï¼ˆå¦‚æœå°šæœªå®‰è£…ï¼‰" class="headerlink" title="4.1 å®‰è£…Node.jsï¼ˆå¦‚æœå°šæœªå®‰è£…ï¼‰"></a>4.1 å®‰è£…Node.jsï¼ˆå¦‚æœå°šæœªå®‰è£…ï¼‰</h3><p>è®¿é—® <a href="https://nodejs.org/">Node.jså®˜ç½‘</a> ä¸‹è½½å¹¶å®‰è£…LTSç‰ˆæœ¬ã€‚</p><h3 id="4-2-å®‰è£…GitHub-MCPæœåŠ¡å™¨"><a href="#4-2-å®‰è£…GitHub-MCPæœåŠ¡å™¨" class="headerlink" title="4.2 å®‰è£…GitHub MCPæœåŠ¡å™¨"></a>4.2 å®‰è£…GitHub MCPæœåŠ¡å™¨</h3><p>åœ¨PowerShellä¸­æ‰§è¡Œï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å…¨å±€å®‰è£…GitHub MCPæœåŠ¡å™¨</span></span><br><span class="line">npm install <span class="literal">-g</span> @modelcontextprotocol/server<span class="literal">-github</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># éªŒè¯å®‰è£…</span></span><br><span class="line">npx @modelcontextprotocol/server<span class="literal">-github</span> <span class="literal">--help</span></span><br></pre></td></tr></table></figure><h2 id="æ­¥éª¤-5ï¼šéªŒè¯é…ç½®"><a href="#æ­¥éª¤-5ï¼šéªŒè¯é…ç½®" class="headerlink" title="æ­¥éª¤ 5ï¼šéªŒè¯é…ç½®"></a>æ­¥éª¤ 5ï¼šéªŒè¯é…ç½®</h2><h3 id="5-1-å¯åŠ¨Gemini-CLI"><a href="#5-1-å¯åŠ¨Gemini-CLI" class="headerlink" title="5.1 å¯åŠ¨Gemini CLI"></a>5.1 å¯åŠ¨Gemini CLI</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯åŠ¨Gemini CLI</span></span><br><span class="line">gemini</span><br></pre></td></tr></table></figure><h3 id="5-2-æµ‹è¯•MCPè¿æ¥"><a href="#5-2-æµ‹è¯•MCPè¿æ¥" class="headerlink" title="5.2 æµ‹è¯•MCPè¿æ¥"></a>5.2 æµ‹è¯•MCPè¿æ¥</h3><p>åœ¨Gemini CLIä¸­è¾“å…¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/mcp</span><br></pre></td></tr></table></figure><p>å¦‚æœé…ç½®æˆåŠŸï¼Œä½ åº”è¯¥èƒ½çœ‹åˆ° â€œgithub mcp server connectedâ€ çš„æç¤ºã€‚</p><h3 id="5-3-æµ‹è¯•åŠŸèƒ½"><a href="#5-3-æµ‹è¯•åŠŸèƒ½" class="headerlink" title="5.3 æµ‹è¯•åŠŸèƒ½"></a>5.3 æµ‹è¯•åŠŸèƒ½</h3><p>å°è¯•ä»¥ä¸‹å‘½ä»¤æµ‹è¯•GitHub MCPåŠŸèƒ½ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">åˆ—å‡ºæˆ‘ä»“åº“ä¸­çš„open issues</span><br><span class="line">æŸ¥çœ‹æˆ‘çš„ä¸ªäººèµ„æ–™ä¿¡æ¯</span><br><span class="line">åˆ—å‡ºæœ€è¿‘ä¿®æ”¹çš„ä»“åº“</span><br></pre></td></tr></table></figure><h2 id="æ•…éšœæ’é™¤"><a href="#æ•…éšœæ’é™¤" class="headerlink" title="æ•…éšœæ’é™¤"></a>æ•…éšœæ’é™¤</h2><h3 id="å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ"><a href="#å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ" class="headerlink" title="å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ"></a>å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ</h3><ol><li><p><strong>MCPæœåŠ¡å™¨è¿æ¥å¤±è´¥</strong></p><ul><li>æ£€æŸ¥ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®è®¾ç½®</li><li>ç¡®è®¤GitHub PATæƒé™é…ç½®æ­£ç¡®</li><li>éªŒè¯ç½‘ç»œè¿æ¥</li></ul></li><li><p><strong>æƒé™é”™è¯¯</strong></p><ul><li>ç¡®ä¿PATåŒ…å«å¿…è¦çš„æƒé™</li><li>æ£€æŸ¥PATæ˜¯å¦å·²è¿‡æœŸ</li></ul></li><li><p><strong>npxå‘½ä»¤å¤±è´¥</strong></p><ul><li>ç¡®ä¿Node.jså·²æ­£ç¡®å®‰è£…</li><li>æ£€æŸ¥npmå…¨å±€å®‰è£…è·¯å¾„</li></ul></li></ol><h2 id="æœ€ä½³å®è·µ"><a href="#æœ€ä½³å®è·µ" class="headerlink" title="æœ€ä½³å®è·µ"></a>æœ€ä½³å®è·µ</h2><ol><li><p><strong>å®‰å…¨æ€§</strong>ï¼š</p><ul><li>å®šæœŸæ›´æ–°PAT</li><li>ä½¿ç”¨æœ€å°æƒé™åŸåˆ™</li><li>ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç ä»¤ç‰Œ</li></ul></li><li><p><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼š</p><ul><li>ä½¿ç”¨é¡¹ç›®çº§é…ç½®è€Œéå…¨å±€é…ç½®</li><li>å®šæœŸæ¸…ç†ä¸å¿…è¦çš„MCPæœåŠ¡å™¨é…ç½®</li></ul></li><li><p><strong>ç»´æŠ¤</strong>ï¼š</p><ul><li>å®šæœŸæ£€æŸ¥ä»¤ç‰Œæœ‰æ•ˆæ€§</li><li>æ›´æ–°MCPæœåŠ¡å™¨ç‰ˆæœ¬</li></ul></li></ol><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œæ‚¨å·²ç»åœ¨Windowsç¯å¢ƒä¸‹æˆåŠŸé…ç½®äº†GitHub MCPæœåŠ¡å™¨ï¼Œç°åœ¨å¯ä»¥åœ¨Gemini CLIä¸­ç›´æ¥æ“ä½œGitHubä»“åº“äº†ã€‚è¿™ä¸ªé…ç½®è®©æ‚¨èƒ½å¤Ÿæ›´é«˜æ•ˆåœ°ç®¡ç†ä»£ç ä»“åº“ï¼Œæå‡å¼€å‘æ•ˆç‡ã€‚</p><h2 id="ç›¸å…³é“¾æ¥"><a href="#ç›¸å…³é“¾æ¥" class="headerlink" title="ç›¸å…³é“¾æ¥"></a>ç›¸å…³é“¾æ¥</h2><ul><li><a href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens">GitHub Fine-grained tokensæ–‡æ¡£</a></li><li><a href="https://modelcontextprotocol.io/">Model Context Protocolå®˜ç½‘</a></li><li><a href="https://ai.google.dev/gemini-api/docs/cli">Gemini CLIæ–‡æ¡£</a></li></ul>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;Windows-ç¯å¢ƒä¸‹é…ç½®-GitHub-MCP-æœåŠ¡å™¨å®Œæ•´æŒ‡å—&quot;&gt;&lt;a href=&quot;#Windows-ç¯å¢ƒä¸‹é…ç½®-GitHub-MCP-æœåŠ¡å™¨å®Œæ•´æŒ‡å—&quot; class=&quot;headerlink&quot; title=&quot;Windows ç¯å¢ƒä¸‹é…ç½® GitHub MCP</summary>
        
      
    
    
    
    <category term="å¼€å‘å·¥å…·" scheme="https://vilaswang.github.io/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="æŠ€æœ¯æ–‡æ¡£" scheme="https://vilaswang.github.io/tags/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/"/>
    
    <category term="æŒ‡å—" scheme="https://vilaswang.github.io/tags/%E6%8C%87%E5%8D%97/"/>
    
  </entry>
  
  <entry>
    <title>Antigravity ç™»å½•è®¤è¯å®Œæ•´è§£å†³æ–¹æ¡ˆï¼ˆéTUNæ–¹æ³•ï¼‰</title>
    <link href="https://vilaswang.github.io/posts/56a10ecb/"/>
    <id>https://vilaswang.github.io/posts/56a10ecb/</id>
    <published>2025-12-16T22:30:00.000Z</published>
    <updated>2025-12-18T01:03:30.706Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>ç³»ç»Ÿæ¶æ„</strong>ï¼šWindows 10&#x2F;11 + Clash Proxy + Proxifier + Microsoft Edge</p><p><strong>åè®®æ”¯æŒ</strong>ï¼šSOCKS5 ä»£ç† + OAuth 2.0 è®¤è¯</p><p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå›½å†…ç½‘ç»œç¯å¢ƒ + ç¬¬ä¸‰æ–¹æœåŠ¡è®¤è¯</p><p><strong>æ–‡æ¡£ç‰ˆæœ¬</strong>ï¼šv2.0.0</p><p><strong>æœ€åæ›´æ–°</strong>ï¼š2025-12-17</p></blockquote><hr><h2 id="ğŸ“‹-ç›®å½•"><a href="#ğŸ“‹-ç›®å½•" class="headerlink" title="ğŸ“‹ ç›®å½•"></a>ğŸ“‹ ç›®å½•</h2><ul><li><a href="#-%E6%A6%82%E8%BF%B0">æ¦‚è¿°</a></li><li><a href="#-%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87">ç¯å¢ƒå‡†å¤‡</a></li><li><a href="#-%E9%85%8D%E7%BD%AE%E6%AD%A5%E9%AA%A4">é…ç½®æ­¥éª¤</a></li><li><a href="#-%E6%95%85%E9%9A%9C%E6%8E%92%E9%99%A4">æ•…éšœæ’é™¤</a></li><li><a href="#-%E6%A0%B8%E5%BF%83%E9%AA%8C%E8%AF%81%E6%B5%8B%E8%AF%95">æ ¸å¿ƒéªŒè¯æµ‹è¯•</a></li></ul><hr><h2 id="ğŸ“–-æ¦‚è¿°"><a href="#ğŸ“–-æ¦‚è¿°" class="headerlink" title="ğŸ“– æ¦‚è¿°"></a>ğŸ“– æ¦‚è¿°</h2><h3 id="1-1-è§£å†³æ–¹æ¡ˆèƒŒæ™¯"><a href="#1-1-è§£å†³æ–¹æ¡ˆèƒŒæ™¯" class="headerlink" title="1.1 è§£å†³æ–¹æ¡ˆèƒŒæ™¯"></a>1.1 è§£å†³æ–¹æ¡ˆèƒŒæ™¯</h3><p>Antigravity æ˜¯ä¸€æ¬¾åŸºäºäº‘åŸç”Ÿçš„å¼€å‘å¹³å°ï¼Œé‡‡ç”¨ OAuth 2.0 æ ‡å‡†è¿›è¡Œç”¨æˆ·è®¤è¯ã€‚ç”±äºå›½å†…ç½‘ç»œç¯å¢ƒçš„ç½‘ç»œé™åˆ¶ï¼Œç›´æ¥è®¿é—® Google è®¤è¯æœåŠ¡å­˜åœ¨æŠ€æœ¯å£å’ï¼Œéœ€è¦é€šè¿‡ä¸“ä¸šçš„ä»£ç†æ¶æ„å®ç°è®¤è¯é“¾è·¯çš„æ‰“é€šã€‚</p><h3 id="1-2-æ ¸å¿ƒè¦æ±‚"><a href="#1-2-æ ¸å¿ƒè¦æ±‚" class="headerlink" title="1.2 æ ¸å¿ƒè¦æ±‚"></a>1.2 æ ¸å¿ƒè¦æ±‚</h3><ul><li><strong>Google è´¦å·å½’å±åœ°å¿…é¡»ä¸ºç¾å›½</strong> - Antigravity è®¤è¯çš„ç¡¬æ€§è¦æ±‚</li><li><strong>ä»£ç†èŠ‚ç‚¹å¿…é¡»ä¸ºç¾å›½åœ°åŒº</strong> - ç¡®ä¿ä¸è´¦å·å½’å±åœ°åŒ¹é…</li><li><strong>ä¼ä¸šç½‘ç»œç¯å¢ƒå…¼å®¹</strong> - é€‚åº”ä¼ä¸šé˜²ç«å¢™å’Œç½‘ç»œå®‰å…¨ç­–ç•¥</li></ul><h3 id="1-3-æŠ€æœ¯æ¶æ„"><a href="#1-3-æŠ€æœ¯æ¶æ„" class="headerlink" title="1.3 æŠ€æœ¯æ¶æ„"></a>1.3 æŠ€æœ¯æ¶æ„</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚  Antigravity.exe â”‚â”€â”€â”€â–¶â”‚  Proxifier      â”‚â”€â”€â”€â–¶â”‚  Clash Proxy    â”‚</span><br><span class="line">â”‚  (OAuth Client) â”‚    â”‚  (Process Rule) â”‚    â”‚ (SOCKS5:7890)   â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">                                                    â”‚</span><br><span class="line">                                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">                                               â”‚  US Proxy    â”‚</span><br><span class="line">                                               â”‚  (Google API)â”‚</span><br><span class="line">                                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">                                                    â”‚</span><br><span class="line">                                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">                                               â”‚ Google OAuth  â”‚</span><br><span class="line">                                               â”‚  (US Region)   â”‚</span><br><span class="line">                                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></pre></td></tr></table></figure><hr><h2 id="ğŸ”§-ç¯å¢ƒå‡†å¤‡"><a href="#ğŸ”§-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ğŸ”§ ç¯å¢ƒå‡†å¤‡"></a>ğŸ”§ ç¯å¢ƒå‡†å¤‡</h2><h3 id="2-1-Google-è´¦å·è¦æ±‚"><a href="#2-1-Google-è´¦å·è¦æ±‚" class="headerlink" title="2.1 Google è´¦å·è¦æ±‚"></a>2.1 Google è´¦å·è¦æ±‚</h3><table><thead><tr><th>è¦æ±‚é¡¹</th><th>çŠ¶æ€</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>è´¦å·å½’å±åœ°</strong></td><td>âš ï¸ <strong>å¿…é¡»ä¸ºç¾å›½</strong></td><td>Antigravity è®¤è¯çš„ç¡¬æ€§è¦æ±‚</td></tr><tr><td><strong>è´¦å·çŠ¶æ€</strong></td><td>âœ… æ­£å¸¸</td><td>æ— å°ç¦ã€é™åˆ¶æˆ–å®‰å…¨è­¦å‘Š</td></tr><tr><td><strong>åŒé‡è®¤è¯</strong></td><td>âœ… æ¨è</td><td>å»ºè®®å¼€å¯ 2FA æé«˜å®‰å…¨æ€§</td></tr><tr><td><strong>æµè§ˆå™¨ç™»å½•</strong></td><td>âœ… å·²å®Œæˆ</td><td>Edge æµè§ˆå™¨å·²ç™»å½•ç›®æ ‡è´¦å·</td></tr></tbody></table><p><strong>âš ï¸ é‡è¦æé†’</strong>ï¼š</p><ul><li><strong>éç¾å›½è´¦å·ä¼šè¢«ç›´æ¥æ‹’ç»è®¤è¯</strong></li><li><strong>å½’å±åœ°ä¸åŒ¹é…ä¼šå¯¼è‡´è®¤è¯å¤±è´¥</strong></li><li><strong>é¢‘ç¹åˆ‡æ¢åœ°åŒºä¼šè¢«æ ‡è®°ä¸ºå¼‚å¸¸</strong></li></ul><h3 id="2-2-ä»£ç†æœåŠ¡è¦æ±‚"><a href="#2-2-ä»£ç†æœåŠ¡è¦æ±‚" class="headerlink" title="2.2 ä»£ç†æœåŠ¡è¦æ±‚"></a>2.2 ä»£ç†æœåŠ¡è¦æ±‚</h3><table><thead><tr><th>è¦æ±‚é¡¹</th><th>è§„æ ¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>åœ°ç†ä½ç½®</strong></td><td>âš ï¸ <strong>å¿…é¡»ä¸ºç¾å›½æœ¬åœŸ</strong></td><td>ç¡®ä¿ä¸è´¦å·å½’å±åœ°åŒ¹é…</td></tr><tr><td><strong>IP ç±»å‹</strong></td><td>âœ… ä½å®…çº§ IP</td><td>é¿å…æ•°æ®ä¸­å¿ƒ IP è¢«è¯†åˆ«</td></tr><tr><td><strong>æœåŠ¡ç±»å‹</strong></td><td>âœ… ä¸“ä¸šä»˜è´¹æœåŠ¡</td><td>å…è´¹èŠ‚ç‚¹é€šå¸¸ä¸å¯é </td></tr><tr><td><strong>åè®®æ”¯æŒ</strong></td><td>âœ… SOCKS5</td><td>ä¸ Clash å…¼å®¹</td></tr></tbody></table><p><strong>æ¨èèŠ‚ç‚¹é€‰æ‹©</strong>ï¼š</p><ol><li><strong>é¦–é€‰èŠ‚ç‚¹</strong>ï¼šæ´›æ‰çŸ¶ã€çº½çº¦ã€è¥¿é›…å›¾ã€èŠåŠ å“¥</li><li><strong>å¤‡é€‰èŠ‚ç‚¹</strong>ï¼šæ—§é‡‘å±±ã€è¾¾æ‹‰æ–¯ã€è¿ˆé˜¿å¯†</li><li><strong>é¿å…ä½¿ç”¨</strong>ï¼šé¦™æ¸¯ã€æ—¥æœ¬ã€æ–°åŠ å¡ç­‰äºšæ´²èŠ‚ç‚¹</li></ol><h3 id="2-3-è½¯ä»¶ç¯å¢ƒè¦æ±‚"><a href="#2-3-è½¯ä»¶ç¯å¢ƒè¦æ±‚" class="headerlink" title="2.3 è½¯ä»¶ç¯å¢ƒè¦æ±‚"></a>2.3 è½¯ä»¶ç¯å¢ƒè¦æ±‚</h3><table><thead><tr><th>è½¯ä»¶</th><th>ç‰ˆæœ¬è¦æ±‚</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td><strong>Clash</strong></td><td>v1.18.0+</td><td>SOCKS5 ä»£ç†æœåŠ¡</td></tr><tr><td><strong>Proxifier</strong></td><td>v4.0+</td><td>è¿›ç¨‹çº§ä»£ç†ç®¡ç†</td></tr><tr><td><strong>Edge æµè§ˆå™¨</strong></td><td>v118.0+</td><td>OAuth è®¤è¯æµè§ˆå™¨</td></tr><tr><td><strong>Antigravity</strong></td><td>Latest</td><td>ç›®æ ‡åº”ç”¨ç¨‹åº</td></tr></tbody></table><hr><h2 id="âš™ï¸-é…ç½®æ­¥éª¤"><a href="#âš™ï¸-é…ç½®æ­¥éª¤" class="headerlink" title="âš™ï¸ é…ç½®æ­¥éª¤"></a>âš™ï¸ é…ç½®æ­¥éª¤</h2><h3 id="3-1-Clash-ä»£ç†é…ç½®"><a href="#3-1-Clash-ä»£ç†é…ç½®" class="headerlink" title="3.1 Clash ä»£ç†é…ç½®"></a>3.1 Clash ä»£ç†é…ç½®</h3><h4 id="3-1-1-èŠ‚ç‚¹é€‰æ‹©"><a href="#3-1-1-èŠ‚ç‚¹é€‰æ‹©" class="headerlink" title="3.1.1 èŠ‚ç‚¹é€‰æ‹©"></a>3.1.1 èŠ‚ç‚¹é€‰æ‹©</h4><p>ç¡®ä¿ Clash å®¢æˆ·ç«¯è¿æ¥åˆ°ç¾å›½åœ°åŒºèŠ‚ç‚¹ï¼Œé¿å…ä½¿ç”¨é¦™æ¸¯ã€æ—¥æœ¬ç­‰äºšæ´²èŠ‚ç‚¹ã€‚</p><h4 id="3-1-2-è§„åˆ™é…ç½®"><a href="#3-1-2-è§„åˆ™é…ç½®" class="headerlink" title="3.1.2 è§„åˆ™é…ç½®"></a>3.1.2 è§„åˆ™é…ç½®</h4><p>æ›´æ–° Clash é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ  Antigravity ç›¸å…³è§„åˆ™ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Google Auth &amp; Antigravity å¿…é¡»èµ°ä»£ç†</span></span><br><span class="line"><span class="attr">rules:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&#x27;DOMAIN-SUFFIX,googleapis.com,ğŸ”° èŠ‚ç‚¹é€‰æ‹©&#x27;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&#x27;DOMAIN-SUFFIX,sandbox.googleapis.com,ğŸ”° èŠ‚ç‚¹é€‰æ‹©&#x27;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&#x27;DOMAIN,oauth2.googleapis.com,ğŸ”° èŠ‚ç‚¹é€‰æ‹©&#x27;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&#x27;DOMAIN,accounts.google.com,ğŸ”° èŠ‚ç‚¹é€‰æ‹©&#x27;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&#x27;DOMAIN,daily-cloudcode-pa.sandbox.googleapis.com,ğŸ”° èŠ‚ç‚¹é€‰æ‹©&#x27;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&#x27;PROCESS-NAME,Antigravity.exe,ğŸ”° èŠ‚ç‚¹é€‰æ‹©&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="3-2-Proxifier-é…ç½®"><a href="#3-2-Proxifier-é…ç½®" class="headerlink" title="3.2 Proxifier é…ç½®"></a>3.2 Proxifier é…ç½®</h3><h4 id="3-2-1-æ·»åŠ ä»£ç†æœåŠ¡å™¨"><a href="#3-2-1-æ·»åŠ ä»£ç†æœåŠ¡å™¨" class="headerlink" title="3.2.1 æ·»åŠ ä»£ç†æœåŠ¡å™¨"></a>3.2.1 æ·»åŠ ä»£ç†æœåŠ¡å™¨</h4><ol><li>æ‰“å¼€ Proxifier â†’ <code>Profile â†’ Proxy Serversâ€¦ â†’ Add</code></li><li>é…ç½®å‚æ•°ï¼š<ul><li><strong>Address</strong>: 127.0.0.1</li><li><strong>Port</strong>: 7890</li><li><strong>Protocol</strong>: SOCKS5</li><li><strong>Authentication</strong>: NO</li></ul></li><li>ç‚¹å‡» <strong>Check</strong> éªŒè¯è¿æ¥ï¼Œç¡®è®¤æ˜¾ç¤º â€œSocks5 server is availableâ€</li></ol><h4 id="3-2-2-åˆ›å»ºä»£ç†è§„åˆ™"><a href="#3-2-2-åˆ›å»ºä»£ç†è§„åˆ™" class="headerlink" title="3.2.2 åˆ›å»ºä»£ç†è§„åˆ™"></a>3.2.2 åˆ›å»ºä»£ç†è§„åˆ™</h4><p><strong>è§„åˆ™1ï¼šEdge æµè§ˆå™¨ç›´è¿ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰</strong></p><ul><li><strong>Rule name</strong>: Edge Direct</li><li><strong>Applications</strong>: msedge.exe</li><li><strong>Action</strong>: Direct</li><li><strong>Priority</strong>: Highest</li></ul><p><strong>è§„åˆ™2ï¼šClash è¿›ç¨‹ç›´è¿ï¼ˆé¿å…ä»£ç†å¾ªç¯ï¼‰</strong></p><ul><li><strong>Rule name</strong>: Clash Processes Direct</li><li><strong>Applications</strong>: clash_*.exe</li><li><strong>Action</strong>: Direct</li><li><strong>Priority</strong>: High</li></ul><p><strong>è§„åˆ™3ï¼šAntigravity åº”ç”¨èµ°ä»£ç†</strong></p><ul><li><strong>Rule name</strong>: Antigravity via Clash</li><li><strong>Applications</strong>: Antigravity.exe, language_server_windows_x64.exe</li><li><strong>Action</strong>: 127.0.0.1:7890</li><li><strong>Priority</strong>: Normal</li></ul><h4 id="3-2-3-è§„åˆ™ä¼˜å…ˆçº§ç¡®è®¤"><a href="#3-2-3-è§„åˆ™ä¼˜å…ˆçº§ç¡®è®¤" class="headerlink" title="3.2.3 è§„åˆ™ä¼˜å…ˆçº§ç¡®è®¤"></a>3.2.3 è§„åˆ™ä¼˜å…ˆçº§ç¡®è®¤</h4><p>ç¡®ä¿è§„åˆ™æŒ‰ä»¥ä¸‹é¡ºåºæ’åˆ—ï¼š</p><ol><li><strong>Edge Direct</strong> (æœ€é«˜ä¼˜å…ˆçº§)</li><li><strong>Clash Processes Direct</strong> (é«˜ä¼˜å…ˆçº§)</li><li><strong>Antigravity via Clash</strong> (æ™®é€šä¼˜å…ˆçº§)</li></ol><h3 id="3-3-ç³»ç»Ÿç¯å¢ƒé…ç½®"><a href="#3-3-ç³»ç»Ÿç¯å¢ƒé…ç½®" class="headerlink" title="3.3 ç³»ç»Ÿç¯å¢ƒé…ç½®"></a>3.3 ç³»ç»Ÿç¯å¢ƒé…ç½®</h3><h4 id="3-3-1-æ¸…ç†ç¯å¢ƒå˜é‡"><a href="#3-3-1-æ¸…ç†ç¯å¢ƒå˜é‡" class="headerlink" title="3.3.1 æ¸…ç†ç¯å¢ƒå˜é‡"></a>3.3.1 æ¸…ç†ç¯å¢ƒå˜é‡</h4><p>å¿…é¡»æ¸…ç©ºä»¥ä¸‹ç³»ç»Ÿç¯å¢ƒå˜é‡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Windows å‘½ä»¤è¡Œ</span></span><br><span class="line"><span class="built_in">set</span> HTTP_PROXY=<span class="string">&quot;&quot;</span></span><br><span class="line"><span class="built_in">set</span> HTTPS_PROXY=<span class="string">&quot;&quot;</span></span><br><span class="line"><span class="built_in">set</span> NO_PROXY=<span class="string">&quot;&quot;</span></span><br></pre></td></tr></table></figure><p>æˆ–è€…åœ¨ç³»ç»Ÿå±æ€§ä¸­æ°¸ä¹…åˆ é™¤è¿™äº›å˜é‡ã€‚</p><h4 id="3-3-2-é˜²ç«å¢™é…ç½®"><a href="#3-3-2-é˜²ç«å¢™é…ç½®" class="headerlink" title="3.3.2 é˜²ç«å¢™é…ç½®"></a>3.3.2 é˜²ç«å¢™é…ç½®</h4><p>ç¡®ä¿é˜²ç«å¢™å…è®¸ä»¥ä¸‹è¿æ¥ï¼š</p><ul><li>Clash.exe (TCP:7890 å…¥ç«™)</li><li>Proxifier.exe (TCP åŠ¨æ€ç«¯å£ å‡ºç«™)</li><li>msedge.exe (TCP&#x2F;UDP:80&#x2F;443 å‡ºç«™)</li><li>Antigravity.exe (TCP&#x2F;UDP åŠ¨æ€ç«¯å£ å‡ºç«™)</li></ul><hr><h2 id="ğŸ”§-æ•…éšœæ’é™¤"><a href="#ğŸ”§-æ•…éšœæ’é™¤" class="headerlink" title="ğŸ”§ æ•…éšœæ’é™¤"></a>ğŸ”§ æ•…éšœæ’é™¤</h2><h3 id="4-1-è®¤è¯æµç¨‹é—®é¢˜"><a href="#4-1-è®¤è¯æµç¨‹é—®é¢˜" class="headerlink" title="4.1 è®¤è¯æµç¨‹é—®é¢˜"></a>4.1 è®¤è¯æµç¨‹é—®é¢˜</h3><p><strong>é—®é¢˜ï¼šEdge æµè§ˆå™¨æ— æ³•æ‰“å¼€ Google ç™»å½•é¡µé¢</strong></p><table><thead><tr><th>ç—‡çŠ¶</th><th>å¯èƒ½åŸå› </th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>Edge æ— å“åº”</td><td>Proxifier è§„åˆ™å†²çª</td><td>æ£€æŸ¥è§„åˆ™é¡ºåºï¼ŒEdge Direct ç½®é¡¶</td></tr><tr><td>é¡µé¢åŠ è½½å¤±è´¥</td><td>ç¯å¢ƒå˜é‡æ±¡æŸ“</td><td>æ¸…ç©º HTTP_PROXY&#x2F;HTTPS_PROXY</td></tr><tr><td>è¿æ¥è¶…æ—¶</td><td>ç½‘ç»œé˜²ç«å¢™é™åˆ¶</td><td>æ£€æŸ¥é˜²ç«å¢™é…ç½®</td></tr></tbody></table><p><strong>é—®é¢˜ï¼šGoogle ç™»å½•æˆåŠŸä½†æ— æ³•è·³è½¬å› Antigravity</strong></p><table><thead><tr><th>æ£€æŸ¥ç‚¹</th><th>éªŒè¯æ–¹æ³•</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>OAuth æµç¨‹</td><td>Clash Connections æ—¥å¿—</td><td>æ£€æŸ¥ Clash è§„åˆ™é…ç½®</td></tr><tr><td>åº”ç”¨ä»£ç†</td><td>Proxifier å®æ—¶æ—¥å¿—</td><td>é‡æ–°é…ç½®åº”ç”¨è§„åˆ™</td></tr><tr><td>ä»£ç†å¾ªç¯</td><td>Proxifier è¿æ¥æ—¥å¿—</td><td>æ·»åŠ  Clash ç›´è¿è§„åˆ™</td></tr></tbody></table><h3 id="4-2-ç½‘ç»œè¿æ¥é—®é¢˜"><a href="#4-2-ç½‘ç»œè¿æ¥é—®é¢˜" class="headerlink" title="4.2 ç½‘ç»œè¿æ¥é—®é¢˜"></a>4.2 ç½‘ç»œè¿æ¥é—®é¢˜</h3><p><strong>é—®é¢˜ï¼šä»£ç†èŠ‚ç‚¹è¿æ¥ä¸ç¨³å®š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åŸºç¡€è¿æ¥æµ‹è¯•</span></span><br><span class="line">curl --proxy socks5://127.0.0.1:7890 https://www.google.com</span><br><span class="line"></span><br><span class="line"><span class="comment"># IP åœ°ç†ä½ç½®æ£€æµ‹</span></span><br><span class="line">curl --proxy socks5://127.0.0.1:7890 <span class="string">&quot;https://httpbin.org/ip&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿æ¥ç¨³å®šæ€§æµ‹è¯•</span></span><br><span class="line">ping -n 10 8.8.8.8</span><br></pre></td></tr></table></figure><p><strong>èŠ‚ç‚¹è´¨é‡æ ‡å‡†</strong>ï¼š</p><table><thead><tr><th>æŒ‡æ ‡</th><th>ä¼˜ç§€</th><th>å¯æ¥å—</th><th>éœ€æ›´æ¢</th></tr></thead><tbody><tr><td><strong>å»¶è¿Ÿ</strong></td><td>&lt; 100ms</td><td>100-200ms</td><td>&gt; 200ms</td></tr><tr><td><strong>ç¨³å®šæ€§</strong></td><td>99.9%+</td><td>99%+</td><td>&lt; 99%</td></tr><tr><td><strong>æˆåŠŸç‡</strong></td><td>100%</td><td>99%+</td><td>&lt; 99%</td></tr></tbody></table><h3 id="4-3-è´¦å·ç›¸å…³é—®é¢˜"><a href="#4-3-è´¦å·ç›¸å…³é—®é¢˜" class="headerlink" title="4.3 è´¦å·ç›¸å…³é—®é¢˜"></a>4.3 è´¦å·ç›¸å…³é—®é¢˜</h3><p><strong>Google è´¦å·å®‰å…¨æ£€æŸ¥æ¸…å•</strong>ï¼š</p><ul><li><input disabled="" type="checkbox"> ç™»å½•åœ°ç‚¹æ˜¯å¦ä¸ºç¾å›½åœ°åŒº</li><li><input disabled="" type="checkbox"> ç™»å½•è®¾å¤‡æ˜¯å¦ä¸ºå·²çŸ¥è®¾å¤‡</li><li><input disabled="" type="checkbox"> æ˜¯å¦å¯ç”¨äº†ä¸¤æ­¥éªŒè¯</li><li><input disabled="" type="checkbox"> åº”ç”¨æƒé™æ˜¯å¦æ­£ç¡®æˆæƒ</li></ul><p>å¦‚æœè´¦å·å½’å±åœ°æ£€æµ‹å¤±è´¥ï¼Œæ ¹æœ¬åŸå› é€šå¸¸æ˜¯ï¼š</p><ul><li><strong>è´¦å·åˆ›å»ºåœ°</strong>ï¼šéç¾å›½åœ°åŒºåˆ›å»ºï¼ˆå›°éš¾è§£å†³ï¼‰</li><li><strong>å¸¸ç”¨ç™»å½•åœ°</strong>ï¼šé•¿æœŸéç¾å›½ç™»å½•ï¼ˆä¸­ç­‰è§£å†³ï¼‰</li><li><strong>ç™»å½•è¡Œä¸º</strong>ï¼šé¢‘ç¹åˆ‡æ¢åœ°åŒºï¼ˆç®€å•è§£å†³ï¼‰</li></ul><hr><h2 id="ğŸ§ª-æ ¸å¿ƒéªŒè¯æµ‹è¯•"><a href="#ğŸ§ª-æ ¸å¿ƒéªŒè¯æµ‹è¯•" class="headerlink" title="ğŸ§ª æ ¸å¿ƒéªŒè¯æµ‹è¯•"></a>ğŸ§ª æ ¸å¿ƒéªŒè¯æµ‹è¯•</h2><h3 id="5-1-åŸºç¡€ç¯å¢ƒéªŒè¯"><a href="#5-1-åŸºç¡€ç¯å¢ƒéªŒè¯" class="headerlink" title="5.1 åŸºç¡€ç¯å¢ƒéªŒè¯"></a>5.1 åŸºç¡€ç¯å¢ƒéªŒè¯</h3><table><thead><tr><th>ç»„ä»¶</th><th>æ£€æŸ¥å‘½ä»¤</th><th>é¢„æœŸç»“æœ</th></tr></thead><tbody><tr><td><strong>Clash</strong></td><td>&#96;tasklist</td><td>findstr Clash&#96;</td></tr><tr><td><strong>ç«¯å£ç›‘å¬</strong></td><td>&#96;netstat -an</td><td>findstr :7890&#96;</td></tr><tr><td><strong>ä»£ç†è¿æ¥</strong></td><td><code>curl -x socks5://127.0.0.1:7890 https://www.google.com</code></td><td>HTTP 200</td></tr><tr><td><strong>Proxifier</strong></td><td>ä»»åŠ¡ç®¡ç†å™¨æ£€æŸ¥</td><td>è¿›ç¨‹è¿è¡Œ</td></tr><tr><td><strong>ç¯å¢ƒå˜é‡</strong></td><td><code>echo %HTTP_PROXY%</code></td><td>ç©ºå€¼</td></tr></tbody></table><h3 id="5-2-OAuth-è®¤è¯æµ‹è¯•"><a href="#5-2-OAuth-è®¤è¯æµ‹è¯•" class="headerlink" title="5.2 OAuth è®¤è¯æµ‹è¯•"></a>5.2 OAuth è®¤è¯æµ‹è¯•</h3><p><strong>å®Œæ•´è®¤è¯æµç¨‹æµ‹è¯•æ­¥éª¤</strong>ï¼š</p><ol><li><p><strong>å¯åŠ¨ Antigravity å®¢æˆ·ç«¯</strong></p><ul><li>ç¡®è®¤ç¨‹åºæ­£å¸¸å¯åŠ¨</li><li>æ£€æŸ¥ Proxifier æ—¥å¿—æ˜¾ç¤ºä»£ç†è¿æ¥</li></ul></li><li><p><strong>è§¦å‘ Google ç™»å½•</strong></p><ul><li>ç‚¹å‡» OAuth ç™»å½•æŒ‰é’®</li><li>ç¡®è®¤ Edge æµè§ˆå™¨è‡ªåŠ¨æ‰“å¼€</li></ul></li><li><p><strong>æµè§ˆå™¨éªŒè¯</strong></p><ul><li>Edge åº”ç›´è¿æ‰“å¼€ Google ç™»å½•é¡µ</li><li>åœ°å€æ  URL: <code>accounts.google.com</code></li><li>é¡µé¢åŠ è½½æ­£å¸¸ï¼Œæ— ä»£ç†é”™è¯¯</li></ul></li><li><p><strong>è´¦å·è®¤è¯</strong></p><ul><li>è¾“å…¥ç¾å›½å½’å±åœ° Google è´¦å·å‡­æ®</li><li>å®Œæˆä¸¤æ­¥éªŒè¯ï¼ˆå¦‚å·²å¯ç”¨ï¼‰</li><li>æˆæƒ Antigravity åº”ç”¨è®¿é—®æƒé™</li></ul></li><li><p><strong>å›è·³éªŒè¯</strong></p><ul><li>è‡ªåŠ¨è·³è½¬å› Antigravity åº”ç”¨</li><li>åº”ç”¨æ˜¾ç¤ºç™»å½•æˆåŠŸçŠ¶æ€</li><li>Clash æ—¥å¿—æ˜¾ç¤º OAuth API ä»£ç†è¯·æ±‚</li></ul></li></ol><h3 id="5-3-å…³é”®éªŒè¯ç‚¹"><a href="#5-3-å…³é”®éªŒè¯ç‚¹" class="headerlink" title="5.3 å…³é”®éªŒè¯ç‚¹"></a>5.3 å…³é”®éªŒè¯ç‚¹</h3><table><thead><tr><th>æ£€æŸ¥èŠ‚ç‚¹</th><th>éªŒè¯æ–¹æ³•</th><th>æˆåŠŸçŠ¶æ€</th></tr></thead><tbody><tr><td><strong>Clash çŠ¶æ€</strong></td><td>æ§åˆ¶é¢æ¿</td><td>ç»¿è‰²è¿æ¥</td></tr><tr><td><strong>ç«¯å£ç›‘å¬</strong></td><td><code>netstat -an</code></td><td><code>:7890</code> å¤„äº LISTEN</td></tr><tr><td><strong>ä»£ç†è§„åˆ™</strong></td><td>Proxifier è§„åˆ™åˆ—è¡¨</td><td>Edge è§„åˆ™ç½®é¡¶</td></tr><tr><td><strong>æµè§ˆå™¨è®¿é—®</strong></td><td>ç›´æ¥è®¿é—® Google</td><td>æ­£å¸¸åŠ è½½</td></tr><tr><td><strong>IP æ£€æµ‹</strong></td><td>åœ¨çº¿ IP æ£€æµ‹</td><td>ç¾å›½åœ°å€</td></tr><tr><td><strong>OAuth è¯·æ±‚</strong></td><td>Clash Connections</td><td>æ˜¾ç¤º <code>googleapis.com</code></td></tr></tbody></table><hr><h2 id="ğŸ“‹-æ ¸å¿ƒæ£€æŸ¥æ¸…å•"><a href="#ğŸ“‹-æ ¸å¿ƒæ£€æŸ¥æ¸…å•" class="headerlink" title="ğŸ“‹ æ ¸å¿ƒæ£€æŸ¥æ¸…å•"></a>ğŸ“‹ æ ¸å¿ƒæ£€æŸ¥æ¸…å•</h2><h3 id="6-1-éƒ¨ç½²å‰æ£€æŸ¥"><a href="#6-1-éƒ¨ç½²å‰æ£€æŸ¥" class="headerlink" title="6.1 éƒ¨ç½²å‰æ£€æŸ¥"></a>6.1 éƒ¨ç½²å‰æ£€æŸ¥</h3><p><strong>Google è´¦å·éªŒè¯</strong>ï¼š</p><ul><li><input disabled="" type="checkbox"> è´¦å·å½’å±åœ°ä¸ºç¾å›½åœ°åŒº</li><li><input disabled="" type="checkbox"> è´¦å·çŠ¶æ€æ­£å¸¸ï¼Œæ— å®‰å…¨è­¦å‘Š</li><li><input disabled="" type="checkbox"> å·²å¯ç”¨ä¸¤æ­¥éªŒè¯</li><li><input disabled="" type="checkbox"> æµè§ˆå™¨å·²ç™»å½•ç›®æ ‡è´¦å·</li></ul><p><strong>ä»£ç†æœåŠ¡éªŒè¯</strong>ï¼š</p><ul><li><input disabled="" type="checkbox"> ä»£ç†èŠ‚ç‚¹ä½äºç¾å›½åœ°åŒº</li><li><input disabled="" type="checkbox"> èŠ‚ç‚¹æ”¯æŒ Google å…¨å¥—æœåŠ¡</li><li><input disabled="" type="checkbox"> èŠ‚ç‚¹è¿æ¥ç¨³å®šæ€§ &gt; 99%</li><li><input disabled="" type="checkbox"> IP åœ°å€æœªè¢« Google æ ‡è®°</li></ul><p><strong>è½¯ä»¶ç¯å¢ƒéªŒè¯</strong>ï¼š</p><ul><li><input disabled="" type="checkbox"> Clash v1.18.0+ æ­£å¸¸è¿è¡Œ</li><li><input disabled="" type="checkbox"> Proxifier v4.0+ å·²å®‰è£…</li><li><input disabled="" type="checkbox"> Microsoft Edge v118.0+ å·²å®‰è£…</li><li><input disabled="" type="checkbox"> ç³»ç»Ÿç¯å¢ƒå˜é‡å·²æ¸…ç©º</li></ul><h3 id="6-2-åŠŸèƒ½éªŒè¯"><a href="#6-2-åŠŸèƒ½éªŒè¯" class="headerlink" title="6.2 åŠŸèƒ½éªŒè¯"></a>6.2 åŠŸèƒ½éªŒè¯</h3><p><strong>åŸºç¡€åŠŸèƒ½æµ‹è¯•</strong>ï¼š</p><ul><li><input disabled="" type="checkbox"> Clash æ§åˆ¶é¢æ¿æ˜¾ç¤ºè¿æ¥æ­£å¸¸</li><li><input disabled="" type="checkbox"> ç«¯å£ 7890 å¤„äºç›‘å¬çŠ¶æ€</li><li><input disabled="" type="checkbox"> Google æœåŠ¡è®¿é—®æ­£å¸¸</li><li><input disabled="" type="checkbox"> IP åœ°å€æ˜¾ç¤ºä¸ºç¾å›½åœ°åŒº</li></ul><p><strong>OAuth æµç¨‹æµ‹è¯•</strong>ï¼š</p><ul><li><input disabled="" type="checkbox"> Antigravity å¯åŠ¨æ­£å¸¸</li><li><input disabled="" type="checkbox"> ç‚¹å‡»ç™»å½•æŒ‰é’®è§¦å‘ Edge æ‰“å¼€</li><li><input disabled="" type="checkbox"> Edge ç›´è¿è®¿é—® Google ç™»å½•é¡µ</li><li><input disabled="" type="checkbox"> Google è´¦å·ç™»å½•æˆåŠŸ</li><li><input disabled="" type="checkbox"> è‡ªåŠ¨è·³è½¬å› Antigravity åº”ç”¨</li><li><input disabled="" type="checkbox"> åº”ç”¨æ˜¾ç¤ºç™»å½•æˆåŠŸçŠ¶æ€</li></ul><hr><h2 id="ğŸ“-æ€»ç»“"><a href="#ğŸ“-æ€»ç»“" class="headerlink" title="ğŸ“ æ€»ç»“"></a>ğŸ“ æ€»ç»“</h2><h3 id="7-1-å…³é”®æˆåŠŸå› ç´ "><a href="#7-1-å…³é”®æˆåŠŸå› ç´ " class="headerlink" title="7.1 å…³é”®æˆåŠŸå› ç´ "></a>7.1 å…³é”®æˆåŠŸå› ç´ </h3><p><strong>æˆåŠŸçš„ä¸¤å¤§å‰æ</strong>ï¼š</p><ul><li><strong>Google è´¦å·å½’å±åœ°å¿…é¡»ä¸ºç¾å›½</strong>ï¼šè¿™æ˜¯ Antigravity è®¤è¯çš„ç¡¬æ€§è¦æ±‚</li><li><strong>ä»£ç†èŠ‚ç‚¹å¿…é¡»ä¸ºç¾å›½åœ°åŒºä¸”æ”¯æŒ Google å…¨å¥—æœåŠ¡</strong>ï¼šç¡®ä¿è®¤è¯æµé‡çš„åœ°ç†åˆè§„æ€§</li></ul><p><strong>æŠ€æœ¯å®æ–½è¦ç‚¹</strong>ï¼š</p><ul><li>Proxifier è§„åˆ™ä¼˜å…ˆçº§é…ç½®æ˜¯å…³é”®ï¼ŒEdge æµè§ˆå™¨å¿…é¡»ç›´è¿</li><li>Clash è§„åˆ™éœ€è¦ç²¾ç¡®åŒ¹é… Google OAuth ç›¸å…³åŸŸå</li><li>ç³»ç»Ÿç¯å¢ƒå˜é‡å¿…é¡»æ¸…ç©ºï¼Œé¿å…ä»£ç†å†²çª</li><li>Clash ç›¸å…³è¿›ç¨‹å¿…é¡»ç›´è¿ï¼Œé¿å…ä»£ç†å¾ªç¯</li></ul><h3 id="7-2-å¿«é€Ÿæ•…éšœæ’é™¤æŒ‡å—"><a href="#7-2-å¿«é€Ÿæ•…éšœæ’é™¤æŒ‡å—" class="headerlink" title="7.2 å¿«é€Ÿæ•…éšœæ’é™¤æŒ‡å—"></a>7.2 å¿«é€Ÿæ•…éšœæ’é™¤æŒ‡å—</h3><p><strong>è®¤è¯å¤±è´¥çš„å¸¸è§åŸå› </strong>ï¼š</p><ol><li><strong>Google è´¦å·å½’å±åœ°ä¸æ˜¯ç¾å›½</strong> â†’ æ›´æ¢ç¾å›½è´¦å·æˆ–é‡æ–°æ³¨å†Œ</li><li><strong>ä»£ç†èŠ‚ç‚¹ä¸åœ¨ç¾å›½åœ°åŒº</strong> â†’ åˆ‡æ¢åˆ°ç¾å›½èŠ‚ç‚¹</li><li><strong>Edge æµè§ˆå™¨è¢«ä»£ç†</strong> â†’ æ£€æŸ¥ Proxifier è§„åˆ™ä¼˜å…ˆçº§</li><li><strong>ç³»ç»Ÿç¯å¢ƒå˜é‡å†²çª</strong> â†’ æ¸…ç©º HTTP_PROXY&#x2F;HTTPS_PROXY</li><li><strong>ä»£ç†å¾ªç¯</strong> â†’ æ·»åŠ  clash_*.exe ç›´è¿è§„åˆ™</li></ol><p><strong>éªŒè¯æˆåŠŸçš„æ ‡å¿—</strong>ï¼š</p><ul><li>âœ… Edge OAuth é¡µé¢æˆåŠŸæ‰“å¼€ï¼ˆç›´è¿ï¼‰</li><li>âœ… ç™»å½•åæˆåŠŸå›è·³åˆ° Antigravity</li><li>âœ… Clash Connections èƒ½çœ‹åˆ° oauth2.googleapis.com èµ°ä»£ç†</li></ul><p>é€šè¿‡éµå¾ªæœ¬æ–‡æ¡£çš„æ ¸å¿ƒé…ç½®æ­¥éª¤å’ŒéªŒè¯æ–¹æ³•ï¼Œå¯ä»¥å»ºç«‹ä¸€ä¸ªç¨³å®šã€å¯é çš„ Antigravity è®¤è¯ç¯å¢ƒã€‚</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;ç³»ç»Ÿæ¶æ„&lt;/strong&gt;ï¼šWindows 10&amp;#x2F;11 + Clash Proxy + Proxifier + Microsoft Edge&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åè®®æ”¯æŒ&lt;/strong&gt;ï¼šSOCKS5 ä»£ç†</summary>
        
      
    
    
    
    <category term="å¼€å‘å·¥å…·" scheme="https://vilaswang.github.io/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"/>
    
    <category term="IDEç¼–è¾‘å™¨" scheme="https://vilaswang.github.io/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/IDE%E7%BC%96%E8%BE%91%E5%99%A8/"/>
    
    
    <category term="Antigravity" scheme="https://vilaswang.github.io/tags/Antigravity/"/>
    
    <category term="ä»£ç†é…ç½®" scheme="https://vilaswang.github.io/tags/%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE/"/>
    
    <category term="OAuthè®¤è¯" scheme="https://vilaswang.github.io/tags/OAuth%E8%AE%A4%E8%AF%81/"/>
    
    <category term="Clash" scheme="https://vilaswang.github.io/tags/Clash/"/>
    
    <category term="Proxifier" scheme="https://vilaswang.github.io/tags/Proxifier/"/>
    
    <category term="ç½‘ç»œé…ç½®" scheme="https://vilaswang.github.io/tags/%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE/"/>
    
    <category term="ä¼ä¸šç¯å¢ƒ" scheme="https://vilaswang.github.io/tags/%E4%BC%81%E4%B8%9A%E7%8E%AF%E5%A2%83/"/>
    
  </entry>
  
  <entry>
    <title>VSCode Qt MSVC é…ç½®æŒ‡å—</title>
    <link href="https://vilaswang.github.io/posts/55a960b4/"/>
    <id>https://vilaswang.github.io/posts/55a960b4/</id>
    <published>2025-12-09T06:09:56.000Z</published>
    <updated>2025-12-17T15:36:29.275Z</updated>
    
    <content type="html"><![CDATA[<h1 id="VSCode-Qt-MSVC-é…ç½®æŒ‡å—"><a href="#VSCode-Qt-MSVC-é…ç½®æŒ‡å—" class="headerlink" title="VSCode Qt MSVC é…ç½®æŒ‡å—"></a>VSCode Qt MSVC é…ç½®æŒ‡å—</h1><blockquote><p><strong>æ–‡æ¡£åˆ›å»ºæ—¶é—´</strong>: 2025-11-14<br><strong>æœ€åæ›´æ–°</strong>: 2025-11-14<br><strong>æ ‡ç­¾</strong>: <code>vscode</code>, <code>qt</code>, <code>msvc</code>, <code>cmake</code>, <code>windows</code>, <code>development</code>, <code>cpp</code></p></blockquote><h2 id="ğŸ“‘-ç›®å½•"><a href="#ğŸ“‘-ç›®å½•" class="headerlink" title="ğŸ“‘ ç›®å½•"></a>ğŸ“‘ ç›®å½•</h2><ul><li><a href="#1-%E6%A6%82%E8%BF%B0">1. æ¦‚è¿°</a></li><li><a href="#2-%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87">2. ç¯å¢ƒå‡†å¤‡</a></li><li><a href="#3-vs-code-%E9%85%8D%E7%BD%AE">3. VS Code é…ç½®</a><ul><li><a href="#31-c-c-%E6%89%A9%E5%B1%95%E9%85%8D%E7%BD%AE">3.1 C&#x2F;C++ æ‰©å±•é…ç½®</a></li><li><a href="#32-%E8%B0%83%E8%AF%95%E5%99%A8%E9%85%8D%E7%BD%AE">3.2 è°ƒè¯•å™¨é…ç½®</a></li><li><a href="#33-%E6%9E%84%E5%BB%BA%E4%BB%BB%E5%8A%A1%E9%85%8D%E7%BD%AE">3.3 æ„å»ºä»»åŠ¡é…ç½®</a></li><li><a href="#34-qt-%E5%8F%AF%E8%A7%86%E5%8C%96%E8%B0%83%E8%AF%95">3.4 Qt å¯è§†åŒ–è°ƒè¯•</a></li></ul></li><li><a href="#4-cmake-%E9%85%8D%E7%BD%AE">4. CMake é…ç½®</a></li><li><a href="#5-%E7%8E%AF%E5%A2%83%E9%AA%8C%E8%AF%81">5. ç¯å¢ƒéªŒè¯</a></li><li><a href="#6-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3">6. å¸¸è§é—®é¢˜è§£å†³</a></li><li><a href="#7-%E5%AE%8C%E6%95%B4%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B">7. å®Œæ•´å·¥ä½œæµç¨‹</a></li></ul><hr><h2 id="1-ğŸ“–-æ¦‚è¿°"><a href="#1-ğŸ“–-æ¦‚è¿°" class="headerlink" title="1. ğŸ“– æ¦‚è¿°"></a>1. ğŸ“– æ¦‚è¿°</h2><p>æœ¬æŒ‡å—è¯¦ç»†ä»‹ç»å¦‚ä½•åœ¨ Windows ç³»ç»Ÿä¸Šé…ç½® VS Code è¿›è¡Œ Qt C++ å¼€å‘ï¼Œä½¿ç”¨ MSVC ç¼–è¯‘å™¨å’Œ CMake æ„å»ºç³»ç»Ÿã€‚</p><h3 id="ğŸ¯-é…ç½®ç›®æ ‡"><a href="#ğŸ¯-é…ç½®ç›®æ ‡" class="headerlink" title="ğŸ¯ é…ç½®ç›®æ ‡"></a>ğŸ¯ é…ç½®ç›®æ ‡</h3><ul><li>âœ… ä½¿ç”¨ MSVC ç¼–è¯‘å™¨è¿›è¡Œ Qt å¼€å‘</li><li>âœ… VS Code å®Œæ•´çš„ IntelliSense æ”¯æŒ</li><li>âœ… é›†æˆçš„è°ƒè¯•å’Œæ„å»ºåŠŸèƒ½</li><li>âœ… è·¨å¹³å° CMake æ„å»ºç³»ç»Ÿ</li></ul><h3 id="ğŸ—ï¸-ç³»ç»Ÿæ¶æ„"><a href="#ğŸ—ï¸-ç³»ç»Ÿæ¶æ„" class="headerlink" title="ğŸ—ï¸ ç³»ç»Ÿæ¶æ„"></a>ğŸ—ï¸ ç³»ç»Ÿæ¶æ„</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">graph TB</span><br><span class="line">    A[VS Code IDE] --&gt; B[C/C++ Extension]</span><br><span class="line">    A --&gt; C[CMake Tools Extension]</span><br><span class="line">    A --&gt; D[Qt Extension]</span><br><span class="line"></span><br><span class="line">    B --&gt; E[IntelliSense Engine]</span><br><span class="line">    C --&gt; F[CMake Configuration]</span><br><span class="line">    D --&gt; G[Qt Tools Integration]</span><br><span class="line"></span><br><span class="line">    E --&gt; H[MSVC Compiler]</span><br><span class="line">    F --&gt; I[Build System]</span><br><span class="line">    G --&gt; J[Qt Libraries]</span><br><span class="line"></span><br><span class="line">    H --&gt; K[cl.exe]</span><br><span class="line">    I --&gt; L[cmake.exe]</span><br><span class="line">    J --&gt; M[Qt5/Qt6]</span><br></pre></td></tr></table></figure><hr><h2 id="2-ğŸ”§-ç¯å¢ƒå‡†å¤‡"><a href="#2-ğŸ”§-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="2. ğŸ”§ ç¯å¢ƒå‡†å¤‡"></a>2. ğŸ”§ ç¯å¢ƒå‡†å¤‡</h2><h3 id="2-1-å¿…éœ€ç»„ä»¶"><a href="#2-1-å¿…éœ€ç»„ä»¶" class="headerlink" title="2.1 å¿…éœ€ç»„ä»¶"></a>2.1 å¿…éœ€ç»„ä»¶</h3><table><thead><tr><th>ç»„ä»¶</th><th>ç‰ˆæœ¬è¦æ±‚</th><th>ä¸‹è½½åœ°å€</th></tr></thead><tbody><tr><td><strong>Visual Studio Build Tools</strong></td><td>2019&#x2F;2022</td><td><a href="https://visualstudio.microsoft.com/downloads/">Microsoftå®˜ç½‘</a></td></tr><tr><td><strong>Qt</strong></td><td>5.6.3+ &#x2F; 6.x</td><td><a href="https://www.qt.io/download">Qtå®˜ç½‘</a></td></tr><tr><td><strong>CMake</strong></td><td>3.15+</td><td><a href="https://cmake.org/download/">CMakeå®˜ç½‘</a></td></tr><tr><td><strong>VS Code</strong></td><td>æœ€æ–°ç‰ˆ</td><td><a href="https://code.visualstudio.com/">VS Codeå®˜ç½‘</a></td></tr></tbody></table><h3 id="2-2-VS-Code-æ‰©å±•å®‰è£…"><a href="#2-2-VS-Code-æ‰©å±•å®‰è£…" class="headerlink" title="2.2 VS Code æ‰©å±•å®‰è£…"></a>2.2 VS Code æ‰©å±•å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># VSCode Qt MSVC é…ç½®æŒ‡å—</span></span><br><span class="line">code --install-extension ms-vscode.cpptools</span><br><span class="line">code --install-extension ms-vscode.cmake-tools</span><br><span class="line">code --install-extension ms-vscode.cpptools-extension-pack</span><br><span class="line"></span><br><span class="line"><span class="comment"># VSCode Qt MSVC é…ç½®æŒ‡å—</span></span><br><span class="line">code --install-extension twxs.cmake</span><br><span class="line">code --install-extension ms-vscode.hexeditor</span><br></pre></td></tr></table></figure><hr><h2 id="3-âš™ï¸-VS-Code-é…ç½®"><a href="#3-âš™ï¸-VS-Code-é…ç½®" class="headerlink" title="3. âš™ï¸ VS Code é…ç½®"></a>3. âš™ï¸ VS Code é…ç½®</h2><h3 id="3-1-ğŸ§ -C-C-æ‰©å±•é…ç½®"><a href="#3-1-ğŸ§ -C-C-æ‰©å±•é…ç½®" class="headerlink" title="3.1 ğŸ§  C&#x2F;C++ æ‰©å±•é…ç½®"></a>3.1 ğŸ§  C&#x2F;C++ æ‰©å±•é…ç½®</h3><p>åˆ›å»º <code>.vscode/c_cpp_properties.json</code>ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;configurations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Win32-MSVC&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;includePath&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;$&#123;workspaceFolder&#125;/**&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="comment">// MSVC æ ‡å‡†åº“è·¯å¾„</span></span><br><span class="line">                <span class="string">&quot;$&#123;env.VCToolsInstallDir&#125;include&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="comment">// Windows SDK è·¯å¾„</span></span><br><span class="line">                <span class="string">&quot;$&#123;env.WindowsSdkDir&#125;Include/$&#123;env.WindowsSDKVersion&#125;/**&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="comment">// Qt åŒ…å«è·¯å¾„ï¼ˆä¿®æ”¹ä¸ºä½ çš„å®é™…è·¯å¾„ï¼‰</span></span><br><span class="line">                <span class="string">&quot;C:/Qt/Qt5.6.3/5.6.3/msvc2015_64/include/**&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;C:/Qt/Qt5.6.3/5.6.3/msvc2015_64/include/QtCore&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;C:/Qt/Qt5.6.3/5.6.3/msvc2015_64/include/QtWidgets&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;C:/Qt/Qt5.6.3/5.6.3/msvc2015_64/include/QtGui&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="comment">// æ·»åŠ å…¶ä»–éœ€è¦çš„ Qt æ¨¡å—</span></span><br><span class="line">                <span class="string">&quot;C:/Qt/Qt5.6.3/5.6.3/msvc2015_64/include/QtNetwork&quot;</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;defines&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;_DEBUG&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;UNICODE&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;_UNICODE&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="comment">// Qt ç›¸å…³å®šä¹‰</span></span><br><span class="line">                <span class="string">&quot;QT_CORE_LIB&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;QT_WIDGETS_LIB&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;QT_GUI_LIB&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;QT_NETWORK_LIB&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;_WIN32_WINNT=0x0601&quot;</span>  <span class="comment">// Windows 7+</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;compilerPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;C:/Program Files (x86)/Microsoft Visual Studio/2019/BuildTools/VC/Tools/MSVC/14.29.30133/bin/Hostx64/x64/cl.exe&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;cStandard&quot;</span><span class="punctuation">:</span> <span class="string">&quot;c17&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;cppStandard&quot;</span><span class="punctuation">:</span> <span class="string">&quot;c++17&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;intelliSenseMode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;windows-msvc-x64&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;windowsSdkVersion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;10.0.19041.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;compileCommands&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceFolder&#125;/build/compile_commands.json&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="number">4</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>âš™ï¸ å…³é”®é…ç½®è¯´æ˜</strong>ï¼š</p><table><thead><tr><th>é…ç½®é¡¹</th><th>è¯´æ˜</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td><strong>compilerPath</strong></td><td>MSVC ç¼–è¯‘å™¨è·¯å¾„</td><td><code>cl.exe</code> å®Œæ•´è·¯å¾„</td></tr><tr><td><strong>intelliSenseMode</strong></td><td>IntelliSense å¼•æ“</td><td><code>windows-msvc-x64</code></td></tr><tr><td><strong>includePath</strong></td><td>å¤´æ–‡ä»¶æœç´¢è·¯å¾„</td><td>Qt å’Œ MSVC åŒ…å«ç›®å½•</td></tr><tr><td><strong>defines</strong></td><td>é¢„å¤„ç†å™¨å®å®šä¹‰</td><td>Qt æ¨¡å—å’Œ Windows å®</td></tr></tbody></table><h3 id="3-2-ğŸ›-è°ƒè¯•å™¨é…ç½®"><a href="#3-2-ğŸ›-è°ƒè¯•å™¨é…ç½®" class="headerlink" title="3.2 ğŸ› è°ƒè¯•å™¨é…ç½®"></a>3.2 ğŸ› è°ƒè¯•å™¨é…ç½®</h3><p>åˆ›å»º <code>.vscode/launch.json</code>ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;configurations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Debug Qt App (MSVC)&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cppvsdbg&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;request&quot;</span><span class="punctuation">:</span> <span class="string">&quot;launch&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;program&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceFolder&#125;/build/Debug/MyQtApp.exe&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;stopAtEntry&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;cwd&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceFolder&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;environment&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;PATH&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;env:Path&#125;;C:/Qt/Qt5.6.3/5.6.3/msvc2015_64/bin;C:/Qt/Qt5.6.3/5.6.3/msvc2015_64/plugins/platforms&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;QT_DEBUG_PLUGINS&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;console&quot;</span><span class="punctuation">:</span> <span class="string">&quot;externalTerminal&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;visualizerFile&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceFolder&#125;/.vscode/qt.natvis&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;preLaunchTask&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cmake: build debug&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;postDebugTask&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cmake: clean&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Release Qt App (MSVC)&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cppvsdbg&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;request&quot;</span><span class="punctuation">:</span> <span class="string">&quot;launch&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;program&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceFolder&#125;/build/Release/MyQtApp.exe&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;stopAtEntry&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;cwd&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceFolder&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;environment&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;PATH&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;env:Path&#125;;C:/Qt/Qt5.6.3/5.6.3/msvc2015_64/bin&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;console&quot;</span><span class="punctuation">:</span> <span class="string">&quot;externalTerminal&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;preLaunchTask&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cmake: build release&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>ğŸ” è°ƒè¯•é…ç½®è¦ç‚¹</strong>ï¼š</p><ul><li><strong>è°ƒè¯•å™¨ç±»å‹</strong>: ä½¿ç”¨ <code>cppvsdbg</code> (MSVC åŸç”Ÿè°ƒè¯•å™¨)</li><li><strong>ç¯å¢ƒå˜é‡</strong>: ç¡®ä¿ Qt DLL å’Œæ’ä»¶è·¯å¾„åœ¨ PATH ä¸­</li><li><strong>ç¨‹åºè·¯å¾„</strong>: Debug å’Œ Release ç‰ˆæœ¬çš„æ­£ç¡®è·¯å¾„</li><li><strong>è°ƒè¯•æ’ä»¶</strong>: <code>QT_DEBUG_PLUGINS=1</code> ç”¨äºè°ƒè¯• Qt æ’ä»¶é—®é¢˜</li></ul><h3 id="3-3-ğŸ”¨-æ„å»ºä»»åŠ¡é…ç½®"><a href="#3-3-ğŸ”¨-æ„å»ºä»»åŠ¡é…ç½®" class="headerlink" title="3.3 ğŸ”¨ æ„å»ºä»»åŠ¡é…ç½®"></a>3.3 ğŸ”¨ æ„å»ºä»»åŠ¡é…ç½®</h3><p>åˆ›å»º <code>.vscode/tasks.json</code>ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;tasks&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cmake: configure&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shell&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cmake&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;-B&quot;</span><span class="punctuation">,</span> <span class="string">&quot;build&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;-G&quot;</span><span class="punctuation">,</span> <span class="string">&quot;Visual Studio 16 2019&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;-A&quot;</span><span class="punctuation">,</span> <span class="string">&quot;x64&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;-DCMAKE_BUILD_TYPE=Debug&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;-DCMAKE_PREFIX_PATH=C:/Qt/Qt5.6.3/5.6.3/msvc2015_64&quot;</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;group&quot;</span><span class="punctuation">:</span> <span class="string">&quot;build&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;problemMatcher&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;detail&quot;</span><span class="punctuation">:</span> <span class="string">&quot;é…ç½® CMake é¡¹ç›®&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cmake: build debug&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shell&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cmake&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;--build&quot;</span><span class="punctuation">,</span> <span class="string">&quot;build&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;--config&quot;</span><span class="punctuation">,</span> <span class="string">&quot;Debug&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;--parallel&quot;</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;group&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;kind&quot;</span><span class="punctuation">:</span> <span class="string">&quot;build&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;isDefault&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;problemMatcher&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;$msCompile&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;detail&quot;</span><span class="punctuation">:</span> <span class="string">&quot;æ„å»º Debug ç‰ˆæœ¬&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;dependsOn&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;cmake: configure&quot;</span><span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cmake: build release&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shell&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cmake&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;--build&quot;</span><span class="punctuation">,</span> <span class="string">&quot;build&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;--config&quot;</span><span class="punctuation">,</span> <span class="string">&quot;Release&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;--parallel&quot;</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;group&quot;</span><span class="punctuation">:</span> <span class="string">&quot;build&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;problemMatcher&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;$msCompile&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;detail&quot;</span><span class="punctuation">:</span> <span class="string">&quot;æ„å»º Release ç‰ˆæœ¬&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cmake: clean&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shell&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cmake&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;--build&quot;</span><span class="punctuation">,</span> <span class="string">&quot;build&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;--target&quot;</span><span class="punctuation">,</span> <span class="string">&quot;clean&quot;</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;group&quot;</span><span class="punctuation">:</span> <span class="string">&quot;build&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;problemMatcher&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;detail&quot;</span><span class="punctuation">:</span> <span class="string">&quot;æ¸…ç†æ„å»ºæ–‡ä»¶&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cmake: install qt dlls&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shell&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;powershell&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;-Command&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;Copy-Item &#x27;C:\\Qt\\Qt5.6.3\\5.6.3\\msvc2015_64\\bin\\*.dll&#x27; &#x27;build\\Debug\\&#x27; -Force; Copy-Item &#x27;C:\\Qt\\Qt5.6.3\\5.6.3\\msvc2015_64\\plugins\\platforms\\qwindows.dll&#x27; &#x27;build\\Debug\\platforms\\&#x27; -Force&quot;</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;group&quot;</span><span class="punctuation">:</span> <span class="string">&quot;build&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;problemMatcher&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;detail&quot;</span><span class="punctuation">:</span> <span class="string">&quot;å¤åˆ¶ Qt è¿è¡Œæ—¶ DLL&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="3-4-ğŸ¨-Qt-å¯è§†åŒ–è°ƒè¯•"><a href="#3-4-ğŸ¨-Qt-å¯è§†åŒ–è°ƒè¯•" class="headerlink" title="3.4 ğŸ¨ Qt å¯è§†åŒ–è°ƒè¯•"></a>3.4 ğŸ¨ Qt å¯è§†åŒ–è°ƒè¯•</h3><p>åˆ›å»º <code>.vscode/qt.natvis</code> æ–‡ä»¶ç”¨äº Qt ç±»å‹å¯è§†åŒ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">AutoVisualizer</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://schemas.microsoft.com/vstudio/debugger/natvis/2010&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Type</span> <span class="attr">Name</span>=<span class="string">&quot;QString&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">DisplayString</span>&gt;</span>&#123;&#123; &#123;reinterpret_cast<span class="tag">&lt;<span class="name">const</span> <span class="attr">wchar_t</span>*&gt;</span>(d-&gt;data()), d-&gt;size&#125; &#125;&#125;<span class="tag">&lt;/<span class="name">DisplayString</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">StringView</span>&gt;</span>d-&gt;data(),d-&gt;size,utf-16<span class="tag">&lt;/<span class="name">StringView</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Expand</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">Item</span> <span class="attr">Name</span>=<span class="string">&quot;[size]&quot;</span>&gt;</span>d-&gt;size<span class="tag">&lt;/<span class="name">Item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">Item</span> <span class="attr">Name</span>=<span class="string">&quot;[raw]&quot;</span>&gt;</span>d-&gt;data(),d-&gt;size<span class="tag">&lt;/<span class="name">Item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Expand</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">Type</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">Type</span> <span class="attr">Name</span>=<span class="string">&quot;QByteArray&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">DisplayString</span>&gt;</span>&#123;&#123; &#123;d-&gt;data(),d-&gt;size&#125; &#125;&#125;<span class="tag">&lt;/<span class="name">DisplayString</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">StringView</span>&gt;</span>d-&gt;data(),d-&gt;size<span class="tag">&lt;/<span class="name">StringView</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Expand</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">Item</span> <span class="attr">Name</span>=<span class="string">&quot;[size]&quot;</span>&gt;</span>d-&gt;size<span class="tag">&lt;/<span class="name">Item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ArrayItems</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Size</span>&gt;</span>d-&gt;size<span class="tag">&lt;/<span class="name">Size</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ValuePointer</span>&gt;</span>d-&gt;data()<span class="tag">&lt;/<span class="name">ValuePointer</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ArrayItems</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Expand</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">Type</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">Type</span> <span class="attr">Name</span>=<span class="string">&quot;QList<span class="symbol">&amp;lt;</span>*<span class="symbol">&amp;gt;</span>&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">DisplayString</span>&gt;</span>&#123;&#123; size=&#123;d-&gt;size&#125; &#125;&#125;<span class="tag">&lt;/<span class="name">DisplayString</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Expand</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">Item</span> <span class="attr">Name</span>=<span class="string">&quot;[size]&quot;</span>&gt;</span>d-&gt;size<span class="tag">&lt;/<span class="name">Item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ArrayItems</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Size</span>&gt;</span>d-&gt;size<span class="tag">&lt;/<span class="name">Size</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ValuePointer</span>&gt;</span>e<span class="tag">&lt;/<span class="name">ValuePointer</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ArrayItems</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Expand</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">Type</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">AutoVisualizer</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h2 id="4-ğŸ“¦-CMake-é…ç½®"><a href="#4-ğŸ“¦-CMake-é…ç½®" class="headerlink" title="4. ğŸ“¦ CMake é…ç½®"></a>4. ğŸ“¦ CMake é…ç½®</h2><h3 id="4-1-ğŸ“„-CMakeLists-txt"><a href="#4-1-ğŸ“„-CMakeLists-txt" class="headerlink" title="4.1 ğŸ“„ CMakeLists.txt"></a>4.1 ğŸ“„ CMakeLists.txt</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.15</span>)</span><br><span class="line"><span class="keyword">project</span>(MyQtApp LANGUAGES CXX)</span><br><span class="line"></span><br><span class="line"><span class="comment"># VSCode Qt MSVC é…ç½®æŒ‡å—</span></span><br><span class="line"><span class="keyword">set</span>(CMAKE_CXX_STANDARD <span class="number">17</span>)</span><br><span class="line"><span class="keyword">set</span>(CMAKE_CXX_STANDARD_REQUIRED <span class="keyword">ON</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># VSCode Qt MSVC é…ç½®æŒ‡å—</span></span><br><span class="line"><span class="keyword">if</span>(MSVC)</span><br><span class="line">    <span class="comment"># è®¾ç½®è¿è¡Œæ—¶åº“</span></span><br><span class="line">    <span class="keyword">set</span>(CMAKE_MSVC_RUNTIME_LIBRARY <span class="string">&quot;MultiThreaded$&lt;$&lt;CONFIG:Debug&gt;:Debug&gt;DLL&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¯ç”¨å¹¶è¡Œç¼–è¯‘</span></span><br><span class="line">    <span class="keyword">add_compile_options</span>(/MP)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è­¦å‘Šè®¾ç½®</span></span><br><span class="line">    <span class="keyword">add_compile_options</span>(/W3)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç¦ç”¨ä¸€äº› MSVC è­¦å‘Š</span></span><br><span class="line">    <span class="keyword">add_compile_definitions</span>(_CRT_SECURE_NO_WARNINGS)</span><br><span class="line"><span class="keyword">endif</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment"># VSCode Qt MSVC é…ç½®æŒ‡å—</span></span><br><span class="line"><span class="keyword">set</span>(CMAKE_PREFIX_PATH <span class="string">&quot;C:/Qt/Qt5.6.3/5.6.3/msvc2015_64&quot;</span>)</span><br><span class="line"><span class="keyword">set</span>(CMAKE_AUTOMOC <span class="keyword">ON</span>)</span><br><span class="line"><span class="keyword">set</span>(CMAKE_AUTOUIC <span class="keyword">ON</span>)</span><br><span class="line"><span class="keyword">set</span>(CMAKE_AUTORCC <span class="keyword">ON</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># VSCode Qt MSVC é…ç½®æŒ‡å—</span></span><br><span class="line"><span class="keyword">find_package</span>(Qt5 COMPONENTS Core Widgets Gui Network REQUIRED)</span><br><span class="line"></span><br><span class="line"><span class="comment"># VSCode Qt MSVC é…ç½®æŒ‡å—</span></span><br><span class="line"><span class="keyword">file</span>(GLOB_RECURSE SOURCES</span><br><span class="line">    <span class="string">&quot;src/*.cpp&quot;</span></span><br><span class="line">    <span class="string">&quot;src/*.h&quot;</span></span><br><span class="line">    <span class="string">&quot;src/*.ui&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># VSCode Qt MSVC é…ç½®æŒ‡å—</span></span><br><span class="line"><span class="keyword">add_executable</span>(MyQtApp <span class="variable">$&#123;SOURCES&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># VSCode Qt MSVC é…ç½®æŒ‡å—</span></span><br><span class="line"><span class="keyword">target_link_libraries</span>(MyQtApp</span><br><span class="line">    Qt5::Core</span><br><span class="line">    Qt5::Widgets</span><br><span class="line">    Qt5::Gui</span><br><span class="line">    Qt5::Network</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># VSCode Qt MSVC é…ç½®æŒ‡å—</span></span><br><span class="line"><span class="keyword">set_target_properties</span>(MyQtApp PROPERTIES</span><br><span class="line">    RUNTIME_OUTPUT_DIRECTORY_DEBUG <span class="variable">$&#123;CMAKE_BINARY_DIR&#125;</span>/Debug</span><br><span class="line">    RUNTIME_OUTPUT_DIRECTORY_RELEASE <span class="variable">$&#123;CMAKE_BINARY_DIR&#125;</span>/Release</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># VSCode Qt MSVC é…ç½®æŒ‡å—</span></span><br><span class="line"><span class="keyword">if</span>(WIN32)</span><br><span class="line">    <span class="comment"># è®¾ç½® Windows å­ç³»ç»Ÿ</span></span><br><span class="line">    <span class="keyword">set_target_properties</span>(MyQtApp PROPERTIES</span><br><span class="line">        WIN32_EXECUTABLE <span class="keyword">TRUE</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¤åˆ¶ Qt DLL åˆ°è¾“å‡ºç›®å½•</span></span><br><span class="line">    <span class="keyword">add_custom_command</span>(<span class="keyword">TARGET</span> MyQtApp POST_BUILD</span><br><span class="line">        <span class="keyword">COMMAND</span> <span class="variable">$&#123;CMAKE_COMMAND&#125;</span> -E copy_directory</span><br><span class="line">        <span class="string">&quot;$&#123;CMAKE_PREFIX_PATH&#125;/bin&quot;</span></span><br><span class="line">        $&lt;TARGET_FILE_DIR:MyQtApp&gt;</span><br><span class="line">        COMMENT <span class="string">&quot;Copying Qt DLLs to output directory&quot;</span></span><br><span class="line">    )</span><br><span class="line"><span class="keyword">endif</span>()</span><br></pre></td></tr></table></figure><h3 id="4-2-ğŸ”§-CMakePresets-json-å¯é€‰"><a href="#4-2-ğŸ”§-CMakePresets-json-å¯é€‰" class="headerlink" title="4.2 ğŸ”§ CMakePresets.json (å¯é€‰)"></a>4.2 ğŸ”§ CMakePresets.json (å¯é€‰)</h3><p>åˆ›å»º <code>CMakePresets.json</code> ç®€åŒ–é…ç½®ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;cmakeMinimumRequired&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;major&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;minor&quot;</span><span class="punctuation">:</span> <span class="number">15</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;patch&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;configurePresets&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;windows-msvc-debug&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;generator&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Visual Studio 16 2019&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;architecture&quot;</span><span class="punctuation">:</span> <span class="string">&quot;x64&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;toolset&quot;</span><span class="punctuation">:</span> <span class="string">&quot;host=x64&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;binaryDir&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;sourceDir&#125;/build&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;cacheVariables&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;CMAKE_BUILD_TYPE&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Debug&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;CMAKE_PREFIX_PATH&quot;</span><span class="punctuation">:</span> <span class="string">&quot;C:/Qt/Qt5.6.3/5.6.3/msvc2015_64&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;CMAKE_MSVC_RUNTIME_LIBRARY&quot;</span><span class="punctuation">:</span> <span class="string">&quot;MultiThreadedDebugDLL&quot;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;windows-msvc-release&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;generator&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Visual Studio 16 2019&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;architecture&quot;</span><span class="punctuation">:</span> <span class="string">&quot;x64&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;toolset&quot;</span><span class="punctuation">:</span> <span class="string">&quot;host=x64&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;binaryDir&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;sourceDir&#125;/build&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;cacheVariables&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;CMAKE_BUILD_TYPE&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Release&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;CMAKE_PREFIX_PATH&quot;</span><span class="punctuation">:</span> <span class="string">&quot;C:/Qt/Qt5.6.3/5.6.3/msvc2015_64&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;CMAKE_MSVC_RUNTIME_LIBRARY&quot;</span><span class="punctuation">:</span> <span class="string">&quot;MultiThreadedDLL&quot;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;buildPresets&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;debug&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;configurePreset&quot;</span><span class="punctuation">:</span> <span class="string">&quot;windows-msvc-debug&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;configuration&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Debug&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;release&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;configurePreset&quot;</span><span class="punctuation">:</span> <span class="string">&quot;windows-msvc-release&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;configuration&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Release&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><hr><h2 id="5-âœ…-ç¯å¢ƒéªŒè¯"><a href="#5-âœ…-ç¯å¢ƒéªŒè¯" class="headerlink" title="5. âœ… ç¯å¢ƒéªŒè¯"></a>5. âœ… ç¯å¢ƒéªŒè¯</h2><h3 id="5-1-ğŸ”-å‘½ä»¤è¡ŒéªŒè¯"><a href="#5-1-ğŸ”-å‘½ä»¤è¡ŒéªŒè¯" class="headerlink" title="5.1 ğŸ” å‘½ä»¤è¡ŒéªŒè¯"></a>5.1 ğŸ” å‘½ä»¤è¡ŒéªŒè¯</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># VSCode Qt MSVC é…ç½®æŒ‡å—</span></span><br><span class="line">cl.exe /?</span><br><span class="line"><span class="comment"># VSCode Qt MSVC é…ç½®æŒ‡å—</span></span><br><span class="line"><span class="comment"># VSCode Qt MSVC é…ç½®æŒ‡å—</span></span><br><span class="line">qmake <span class="literal">-query</span></span><br><span class="line"><span class="comment"># VSCode Qt MSVC é…ç½®æŒ‡å—</span></span><br><span class="line"><span class="comment"># VSCode Qt MSVC é…ç½®æŒ‡å—</span></span><br><span class="line"><span class="comment"># VSCode Qt MSVC é…ç½®æŒ‡å—</span></span><br><span class="line"><span class="comment"># VSCode Qt MSVC é…ç½®æŒ‡å—</span></span><br><span class="line"><span class="comment"># VSCode Qt MSVC é…ç½®æŒ‡å—</span></span><br><span class="line">cmake <span class="literal">-G</span></span><br><span class="line"><span class="comment"># VSCode Qt MSVC é…ç½®æŒ‡å—</span></span><br><span class="line"><span class="comment"># VSCode Qt MSVC é…ç½®æŒ‡å—</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$env:VCToolsInstallDir</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$env:WindowsSdkDir</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$env:WindowsSDKVersion</span></span><br></pre></td></tr></table></figure><h3 id="5-2-ğŸ§ª-æµ‹è¯•é¡¹ç›®åˆ›å»º"><a href="#5-2-ğŸ§ª-æµ‹è¯•é¡¹ç›®åˆ›å»º" class="headerlink" title="5.2 ğŸ§ª æµ‹è¯•é¡¹ç›®åˆ›å»º"></a>5.2 ğŸ§ª æµ‹è¯•é¡¹ç›®åˆ›å»º</h3><p>åˆ›å»ºæµ‹è¯•æºæ–‡ä»¶ <code>src/main.cpp</code>ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QMainWindow&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QLabel&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QVBoxLayout&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QPushButton&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QMessageBox&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDebug&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MainWindow</span> : <span class="keyword">public</span> QMainWindow &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">MainWindow</span>(QWidget *parent = <span class="literal">nullptr</span>) : <span class="built_in">QMainWindow</span>(parent) &#123;</span><br><span class="line">        <span class="built_in">setWindowTitle</span>(<span class="string">&quot;Qt MSVC Test App&quot;</span>);</span><br><span class="line">        <span class="built_in">resize</span>(<span class="number">400</span>, <span class="number">300</span>);</span><br><span class="line"></span><br><span class="line">        QWidget *centralWidget = <span class="keyword">new</span> <span class="built_in">QWidget</span>(<span class="keyword">this</span>);</span><br><span class="line">        <span class="built_in">setCentralWidget</span>(centralWidget);</span><br><span class="line"></span><br><span class="line">        QVBoxLayout *layout = <span class="keyword">new</span> <span class="built_in">QVBoxLayout</span>(centralWidget);</span><br><span class="line"></span><br><span class="line">        QLabel *label = <span class="keyword">new</span> <span class="built_in">QLabel</span>(<span class="string">&quot;Hello Qt with MSVC!&quot;</span>, <span class="keyword">this</span>);</span><br><span class="line">        label-&gt;<span class="built_in">setAlignment</span>(Qt::AlignCenter);</span><br><span class="line">        label-&gt;<span class="built_in">setStyleSheet</span>(<span class="string">&quot;font-size: 18px; font-weight: bold;&quot;</span>);</span><br><span class="line">        layout-&gt;<span class="built_in">addWidget</span>(label);</span><br><span class="line"></span><br><span class="line">        QPushButton *button = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;Test Message&quot;</span>, <span class="keyword">this</span>);</span><br><span class="line">        <span class="built_in">connect</span>(button, &amp;QPushButton::clicked, <span class="keyword">this</span>, &amp;MainWindow::showTestMessage);</span><br><span class="line">        layout-&gt;<span class="built_in">addWidget</span>(button);</span><br><span class="line"></span><br><span class="line">        QPushButton *debugButton = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;Print Debug Info&quot;</span>, <span class="keyword">this</span>);</span><br><span class="line">        <span class="built_in">connect</span>(debugButton, &amp;QPushButton::clicked, <span class="keyword">this</span>, &amp;MainWindow::printDebugInfo);</span><br><span class="line">        layout-&gt;<span class="built_in">addWidget</span>(debugButton);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> slots:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">showTestMessage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        QMessageBox::<span class="built_in">information</span>(<span class="keyword">this</span>, <span class="string">&quot;Test&quot;</span>, <span class="string">&quot;MSVC + Qt é…ç½®æˆåŠŸï¼&quot;</span>);</span><br><span class="line">        <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;Message box shown successfully&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">printDebugInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;=== Qt Configuration Info ===&quot;</span>;</span><br><span class="line">        <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;Qt Version:&quot;</span> &lt;&lt; QT_VERSION_STR;</span><br><span class="line">        <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;Compiler:&quot;</span> &lt;&lt;</span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> _MSC_VER</span></span><br><span class="line">            <span class="string">&quot;MSVC &quot;</span> &lt;&lt; _MSC_VER;</span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line">            <span class="string">&quot;Unknown&quot;</span>;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">        <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;Build Type:&quot;</span> &lt;&lt;</span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> _DEBUG</span></span><br><span class="line">            <span class="string">&quot;Debug&quot;</span>;</span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line">            <span class="string">&quot;Release&quot;</span>;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">        <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;===============================&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">app</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;Starting Qt application...&quot;</span>;</span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;Qt version:&quot;</span> &lt;&lt; QT_VERSION_STR;</span><br><span class="line"></span><br><span class="line">    MainWindow window;</span><br><span class="line">    window.<span class="built_in">show</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> app.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;main.moc&quot;</span></span></span><br></pre></td></tr></table></figure><hr><h2 id="6-ğŸ”§-å¸¸è§é—®é¢˜è§£å†³"><a href="#6-ğŸ”§-å¸¸è§é—®é¢˜è§£å†³" class="headerlink" title="6. ğŸ”§ å¸¸è§é—®é¢˜è§£å†³"></a>6. ğŸ”§ å¸¸è§é—®é¢˜è§£å†³</h2><h3 id="6-1-âŒ-CMake-æ‰¾ä¸åˆ°-Qt"><a href="#6-1-âŒ-CMake-æ‰¾ä¸åˆ°-Qt" class="headerlink" title="6.1 âŒ CMake æ‰¾ä¸åˆ° Qt"></a>6.1 âŒ CMake æ‰¾ä¸åˆ° Qt</h3><p><strong>é”™è¯¯ä¿¡æ¯</strong>: <code>Could NOT find Qt5</code></p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># VSCode Qt MSVC é…ç½®æŒ‡å—</span></span><br><span class="line"><span class="keyword">set</span>(CMAKE_PREFIX_PATH <span class="string">&quot;C:/Qt/Qt5.6.3/5.6.3/msvc2015_64&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># VSCode Qt MSVC é…ç½®æŒ‡å—</span></span><br><span class="line"><span class="keyword">set</span>(ENV&#123;QTDIR&#125; <span class="string">&quot;C:/Qt/Qt5.6.3/5.6.3/msvc2015_64&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="6-2-âŒ-ç¼ºå°‘è¿è¡Œæ—¶åº“"><a href="#6-2-âŒ-ç¼ºå°‘è¿è¡Œæ—¶åº“" class="headerlink" title="6.2 âŒ ç¼ºå°‘è¿è¡Œæ—¶åº“"></a>6.2 âŒ ç¼ºå°‘è¿è¡Œæ—¶åº“</h3><p><strong>é”™è¯¯ä¿¡æ¯</strong>: <code>æ— æ³•å¯åŠ¨æ­¤ç¨‹åºï¼Œå› ä¸ºè®¡ç®—æœºä¸­ç¼ºå°‘ VCRUNTIME140.dll</code></p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    A[ç¼ºå°‘ VCRUNTIME140.dll] --&gt; B&#123;è§£å†³æ–¹æ¡ˆ&#125;</span><br><span class="line">    B --&gt; C[å®‰è£… Visual C++ Redistributable]</span><br><span class="line">    B --&gt; D[é™æ€é“¾æ¥è¿è¡Œæ—¶åº“]</span><br><span class="line">    B --&gt; E[å¤åˆ¶ DLL åˆ°è¾“å‡ºç›®å½•]</span><br><span class="line"></span><br><span class="line">    C --&gt; F[ä¸‹è½½å®‰è£… vc_redist.x64.exe]</span><br><span class="line">    D --&gt; G[è®¾ç½® CMAKE_MSVC_RUNTIME_LIBRARY]</span><br><span class="line">    E --&gt; H[æ‰‹åŠ¨å¤åˆ¶ç³»ç»Ÿ DLL]</span><br></pre></td></tr></table></figure><p><strong>CMake é…ç½®</strong>ï¼š</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># VSCode Qt MSVC é…ç½®æŒ‡å—</span></span><br><span class="line"><span class="keyword">set</span>(CMAKE_MSVC_RUNTIME_LIBRARY <span class="string">&quot;MultiThreaded$&lt;$&lt;CONFIG:Debug&gt;:Debug&gt;&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="6-3-âŒ-Qt-æ’ä»¶åŠ è½½å¤±è´¥"><a href="#6-3-âŒ-Qt-æ’ä»¶åŠ è½½å¤±è´¥" class="headerlink" title="6.3 âŒ Qt æ’ä»¶åŠ è½½å¤±è´¥"></a>6.3 âŒ Qt æ’ä»¶åŠ è½½å¤±è´¥</h3><p><strong>é”™è¯¯ä¿¡æ¯</strong>: <code>This application failed to start because it could not find or load the Qt platform plugin &quot;windows&quot;</code></p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨ launch.json ä¸­æ·»åŠ ç¯å¢ƒå˜é‡</span></span><br><span class="line"><span class="attr">&quot;environment&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;PATH&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;env:Path&#125;;C:/Qt/Qt5.6.3/5.6.3/msvc2015_64/bin;C:/Qt/Qt5.6.3/5.6.3/msvc2015_64/plugins/platforms&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure><h3 id="6-4-âŒ-IntelliSense-ä¸å·¥ä½œ"><a href="#6-4-âŒ-IntelliSense-ä¸å·¥ä½œ" class="headerlink" title="6.4 âŒ IntelliSense ä¸å·¥ä½œ"></a>6.4 âŒ IntelliSense ä¸å·¥ä½œ</h3><p><strong>ç—‡çŠ¶</strong>: Qt å¤´æ–‡ä»¶æ˜¾ç¤ºçº¢è‰²ä¸‹åˆ’çº¿ï¼Œä»£ç è¡¥å…¨ä¸å·¥ä½œ</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><ol><li>æ£€æŸ¥ <code>c_cpp_properties.json</code> ä¸­çš„è·¯å¾„æ˜¯å¦æ­£ç¡®</li><li>ç¡®ä¿ Qt ç‰ˆæœ¬ä¸ç¼–è¯‘å™¨ç‰ˆæœ¬åŒ¹é… (MSVC vs MinGW)</li><li>é‡æ–°åŠ è½½ VS Code çª—å£ (<code>Ctrl+Shift+P</code> â†’ <code>Developer: Reload Window</code>)</li></ol><h3 id="6-5-âŒ-è°ƒè¯•æ—¶æ— æ³•æŸ¥çœ‹-Qt-å¯¹è±¡"><a href="#6-5-âŒ-è°ƒè¯•æ—¶æ— æ³•æŸ¥çœ‹-Qt-å¯¹è±¡" class="headerlink" title="6.5 âŒ è°ƒè¯•æ—¶æ— æ³•æŸ¥çœ‹ Qt å¯¹è±¡"></a>6.5 âŒ è°ƒè¯•æ—¶æ— æ³•æŸ¥çœ‹ Qt å¯¹è±¡</h3><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><ol><li>å®‰è£… <a href="https://marketplace.visualstudio.com/items?itemName=TheQtCompany.QtVisualStudioTools2019">Qt Visual Studio Tools</a></li><li>ä½¿ç”¨è‡ªå®šä¹‰çš„ <code>qt.natvis</code> æ–‡ä»¶</li><li>åœ¨è°ƒè¯•æ—¶æŸ¥çœ‹ <code>this</code> æŒ‡é’ˆå’Œæˆå‘˜å˜é‡</li></ol><hr><h2 id="7-ğŸš€-å®Œæ•´å·¥ä½œæµç¨‹"><a href="#7-ğŸš€-å®Œæ•´å·¥ä½œæµç¨‹" class="headerlink" title="7. ğŸš€ å®Œæ•´å·¥ä½œæµç¨‹"></a>7. ğŸš€ å®Œæ•´å·¥ä½œæµç¨‹</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">flowchart TD</span><br><span class="line">    A[æ‰“å¼€é¡¹ç›®æ–‡ä»¶å¤¹] --&gt; B[VS Code è‡ªåŠ¨æ£€æµ‹ CMake]</span><br><span class="line">    B --&gt; C[é€‰æ‹©é…ç½®é¢„è®¾]</span><br><span class="line">    C --&gt; D[CMake é…ç½®é¡¹ç›®]</span><br><span class="line">    D --&gt; E[IntelliSense åˆå§‹åŒ–å®Œæˆ]</span><br><span class="line">    E --&gt; F[ç¼–å†™ä»£ç ]</span><br><span class="line">    F --&gt; G&#123;æ„å»ºé¡¹ç›®&#125;</span><br><span class="line">    G --&gt; H[Ctrl+Shift+B]</span><br><span class="line">    H --&gt; I[ç¼–è¯‘æˆåŠŸ]</span><br><span class="line">    I --&gt; J&#123;è°ƒè¯•è¿è¡Œ&#125;</span><br><span class="line">    J --&gt; K[F5 å¯åŠ¨è°ƒè¯•]</span><br><span class="line">    K --&gt; L[åº”ç”¨è¿è¡Œ]</span><br><span class="line">    L --&gt; M[è°ƒè¯•å’Œæµ‹è¯•]</span><br><span class="line">    M --&gt; N&#123;ä¿®æ”¹ä»£ç ?&#125;</span><br><span class="line">    N --&gt;|æ˜¯| F</span><br><span class="line">    N --&gt;|å¦| O[å®Œæˆå¼€å‘]</span><br></pre></td></tr></table></figure><h3 id="7-1-ğŸ“-æ—¥å¸¸å¼€å‘æ­¥éª¤"><a href="#7-1-ğŸ“-æ—¥å¸¸å¼€å‘æ­¥éª¤" class="headerlink" title="7.1 ğŸ“ æ—¥å¸¸å¼€å‘æ­¥éª¤"></a>7.1 ğŸ“ æ—¥å¸¸å¼€å‘æ­¥éª¤</h3><ol><li><strong>æ‰“å¼€é¡¹ç›®</strong>ï¼šVS Code æ‰“å¼€é¡¹ç›®æ–‡ä»¶å¤¹</li><li><strong>é…ç½® CMake</strong>ï¼š<code>Ctrl+Shift+P</code> â†’ <code>CMake: Configure</code></li><li><strong>é€‰æ‹©é¢„è®¾</strong>ï¼šåº•éƒ¨çŠ¶æ€æ é€‰æ‹© <code>windows-msvc-debug</code> æˆ– <code>windows-msvc-release</code></li><li><strong>æ™ºèƒ½æç¤º</strong>ï¼šç­‰å¾… IntelliSense å®Œæˆåˆå§‹åŒ–</li><li><strong>ç¼–å†™ä»£ç </strong>ï¼šäº«å—å®Œæ•´çš„ä»£ç è¡¥å…¨å’Œè¯­æ³•é«˜äº®</li><li><strong>æ„å»ºé¡¹ç›®</strong>ï¼š<code>Ctrl+Shift+B</code> æˆ–ç‚¹å‡»åº•éƒ¨çŠ¶æ€æ çš„æ„å»ºæŒ‰é’®</li><li><strong>è¿è¡Œè°ƒè¯•</strong>ï¼š<code>F5</code> å¯åŠ¨è°ƒè¯•ä¼šè¯</li></ol><h3 id="7-2-ğŸ¯-æ¨èå¿«æ·é”®"><a href="#7-2-ğŸ¯-æ¨èå¿«æ·é”®" class="headerlink" title="7.2 ğŸ¯ æ¨èå¿«æ·é”®"></a>7.2 ğŸ¯ æ¨èå¿«æ·é”®</h3><table><thead><tr><th>å¿«æ·é”®</th><th>åŠŸèƒ½</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>Ctrl+Shift+B</code></td><td>æ„å»ºé¡¹ç›®</td><td>æ‰§è¡Œé»˜è®¤æ„å»ºä»»åŠ¡</td></tr><tr><td><code>F5</code></td><td>å¯åŠ¨è°ƒè¯•</td><td>è¿è¡Œå½“å‰é…ç½®çš„è°ƒè¯•ä¼šè¯</td></tr><tr><td><code>Ctrl+Shift+P</code></td><td>å‘½ä»¤é¢æ¿</td><td>è®¿é—®æ‰€æœ‰ VS Code å‘½ä»¤</td></tr><tr><td><code>Ctrl+,</code></td><td>è®¾ç½®</td><td>æ‰“å¼€ VS Code è®¾ç½®</td></tr><tr><td><code>Ctrl+K Ctrl+S</code></td><td>å¿«æ·é”®è®¾ç½®</td><td>è‡ªå®šä¹‰å¿«æ·é”®</td></tr></tbody></table><hr><h2 id="ğŸ“Š-æ€»ç»“"><a href="#ğŸ“Š-æ€»ç»“" class="headerlink" title="ğŸ“Š æ€»ç»“"></a>ğŸ“Š æ€»ç»“</h2><h3 id="âœ…-é…ç½®å®Œæˆæ£€æŸ¥æ¸…å•"><a href="#âœ…-é…ç½®å®Œæˆæ£€æŸ¥æ¸…å•" class="headerlink" title="âœ… é…ç½®å®Œæˆæ£€æŸ¥æ¸…å•"></a>âœ… é…ç½®å®Œæˆæ£€æŸ¥æ¸…å•</h3><ul><li><input checked="" disabled="" type="checkbox"> Visual Studio Build Tools å®‰è£…å®Œæˆ</li><li><input checked="" disabled="" type="checkbox"> Qt MSVC ç‰ˆæœ¬å®‰è£…å®Œæˆ</li><li><input checked="" disabled="" type="checkbox"> VS Code å¿…éœ€æ‰©å±•å®‰è£…</li><li><input checked="" disabled="" type="checkbox"> C&#x2F;C++ é…ç½®æ–‡ä»¶æ­£ç¡®è®¾ç½®</li><li><input checked="" disabled="" type="checkbox"> CMake é…ç½®æ–‡ä»¶æ­£ç¡®è®¾ç½®</li><li><input checked="" disabled="" type="checkbox"> è°ƒè¯•å™¨é…ç½®æ­£ç¡®</li><li><input checked="" disabled="" type="checkbox"> æµ‹è¯•é¡¹ç›®ç¼–è¯‘è¿è¡ŒæˆåŠŸ</li><li><input checked="" disabled="" type="checkbox"> è°ƒè¯•åŠŸèƒ½æ­£å¸¸å·¥ä½œ</li><li><input checked="" disabled="" type="checkbox"> IntelliSense å®Œæ•´æ”¯æŒ</li></ul><h3 id="ğŸ¯-ä¸‹ä¸€æ­¥å»ºè®®"><a href="#ğŸ¯-ä¸‹ä¸€æ­¥å»ºè®®" class="headerlink" title="ğŸ¯ ä¸‹ä¸€æ­¥å»ºè®®"></a>ğŸ¯ ä¸‹ä¸€æ­¥å»ºè®®</h3><ol><li><strong>å­¦ä¹  Qt æ¡†æ¶</strong>ï¼šæŒæ¡ä¿¡å·æ§½ã€UI è®¾è®¡ã€å¤šçº¿ç¨‹ç­‰</li><li><strong>CMake è¿›é˜¶</strong>ï¼šå­¦ä¹ è‡ªå®šä¹‰æ„å»ºè§„åˆ™ã€äº¤å‰ç¼–è¯‘</li><li><strong>è°ƒè¯•æŠ€å·§</strong>ï¼šæŒæ¡æ–­ç‚¹ã€å†…å­˜æŸ¥çœ‹ã€æ€§èƒ½åˆ†æ</li><li><strong>ç‰ˆæœ¬æ§åˆ¶</strong>ï¼šé›†æˆ Git è¿›è¡Œä»£ç ç®¡ç†</li><li><strong>å•å…ƒæµ‹è¯•</strong>ï¼šé›†æˆ Qt Test æˆ– Google Test</li></ol><h3 id="ğŸ“š-æ¨èèµ„æº"><a href="#ğŸ“š-æ¨èèµ„æº" class="headerlink" title="ğŸ“š æ¨èèµ„æº"></a>ğŸ“š æ¨èèµ„æº</h3><ul><li><a href="https://doc.qt.io/">Qt å®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://cmake.org/documentation/">CMake å®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://code.visualstudio.com/docs/cpp/">VS Code C++ æ‰©å±•æ–‡æ¡£</a></li><li><a href="https://docs.microsoft.com/en-us/cpp/">Microsoft C++ æ–‡æ¡£</a></li></ul><hr><blockquote><p><strong>ğŸ’¡ æç¤º</strong>:</p><ul><li>é¦–æ¬¡é…ç½®å¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´ï¼Œè€å¿ƒæŒ‰ç…§æ­¥éª¤æ“ä½œ</li><li>é‡åˆ°é—®é¢˜æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥è·¯å¾„å’Œç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®</li><li>å»ºè®®ä½¿ç”¨ç›¸å¯¹è·¯å¾„å’Œ CMake å˜é‡æé«˜é¡¹ç›®å¯ç§»æ¤æ€§</li><li>å®šæœŸæ›´æ–° VS Code æ‰©å±•ä»¥è·å¾—æœ€æ–°åŠŸèƒ½</li></ul></blockquote>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;VSCode-Qt-MSVC-é…ç½®æŒ‡å—&quot;&gt;&lt;a href=&quot;#VSCode-Qt-MSVC-é…ç½®æŒ‡å—&quot; class=&quot;headerlink&quot; title=&quot;VSCode Qt MSVC é…ç½®æŒ‡å—&quot;&gt;&lt;/a&gt;VSCode Qt MSVC</summary>
        
      
    
    
    
    <category term="å¼€å‘å·¥å…·" scheme="https://vilaswang.github.io/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="æŠ€æœ¯æ–‡æ¡£" scheme="https://vilaswang.github.io/tags/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/"/>
    
    <category term="æŒ‡å—" scheme="https://vilaswang.github.io/tags/%E6%8C%87%E5%8D%97/"/>
    
  </entry>
  
  <entry>
    <title>MariaDB C++ Windows å®‰è£…æŒ‡å—</title>
    <link href="https://vilaswang.github.io/posts/15251b3b/"/>
    <id>https://vilaswang.github.io/posts/15251b3b/</id>
    <published>2025-12-09T06:09:56.000Z</published>
    <updated>2025-12-17T15:36:29.277Z</updated>
    
    <content type="html"><![CDATA[<h1 id="MariaDB-C-Windows-å®‰è£…æŒ‡å—"><a href="#MariaDB-C-Windows-å®‰è£…æŒ‡å—" class="headerlink" title="MariaDB C++ Windows å®‰è£…æŒ‡å—"></a>MariaDB C++ Windows å®‰è£…æŒ‡å—</h1><blockquote><p><strong>æ–‡æ¡£åˆ›å»ºæ—¶é—´</strong>: 2025-11-14<br><strong>æœ€åæ›´æ–°</strong>: 2025-11-14<br><strong>æ ‡ç­¾</strong>: <code>mariadb</code>, <code>cpp</code>, <code>windows</code>, <code>development</code>, <code>database</code>, <code>connector</code></p></blockquote><h2 id="ğŸ“‘-ç›®å½•"><a href="#ğŸ“‘-ç›®å½•" class="headerlink" title="ğŸ“‘ ç›®å½•"></a>ğŸ“‘ ç›®å½•</h2><ul><li><a href="#1-%E6%A6%82%E8%BF%B0">1. æ¦‚è¿°</a></li><li><a href="#2-%E5%AE%89%E8%A3%85-mariadb-%E6%9C%8D%E5%8A%A1%E5%99%A8">2. å®‰è£… MariaDB æœåŠ¡å™¨</a><ul><li><a href="#21-%E8%8E%B7%E5%8F%96%E5%AE%89%E8%A3%85%E7%A8%8B%E5%BA%8F">2.1 è·å–å®‰è£…ç¨‹åº</a></li><li><a href="#22-%E8%BF%90%E8%A1%8C%E5%AE%89%E8%A3%85%E5%90%91%E5%AF%BC">2.2 è¿è¡Œå®‰è£…å‘å¯¼</a></li><li><a href="#23-%E9%AA%8C%E8%AF%81%E5%AE%89%E8%A3%85">2.3 éªŒè¯å®‰è£…</a></li></ul></li><li><a href="#3-%E5%AE%89%E8%A3%85-mariadb-%E8%BF%9E%E6%8E%A5%E5%99%A8">3. å®‰è£… MariaDB è¿æ¥å™¨</a><ul><li><a href="#31-connectorc">3.1 Connector&#x2F;C++</a></li><li><a href="#32-connectorc">3.2 Connector&#x2F;C</a></li><li><a href="#33-%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">3.3 é…ç½®ç¯å¢ƒå˜é‡</a></li></ul></li><li><a href="#4-%E9%85%8D%E7%BD%AE-visual-studio-%E9%A1%B9%E7%9B%AE">4. é…ç½® Visual Studio é¡¹ç›®</a><ul><li><a href="#41-%E5%8C%85%E5%90%AB%E5%A4%B4%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95">4.1 åŒ…å«å¤´æ–‡ä»¶ç›®å½•</a></li><li><a href="#42-%E9%85%8D%E7%BD%AE%E5%BA%93%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95">4.2 é…ç½®åº“æ–‡ä»¶ç›®å½•</a></li><li><a href="#43-%E6%8C%87%E5%AE%9A%E4%BE%9D%E8%B5%96%E7%9A%84%E5%BA%93%E6%96%87%E4%BB%B6">4.3 æŒ‡å®šä¾èµ–çš„åº“æ–‡ä»¶</a></li><li><a href="#44-%E6%8B%B7%E8%B4%9D-dll-%E6%96%87%E4%BB%B6">4.4 æ‹·è´ DLL æ–‡ä»¶</a></li></ul></li><li><a href="#5-%E7%BC%96%E5%86%99%E6%B5%8B%E8%AF%95%E4%BB%A3%E7%A0%81">5. ç¼–å†™æµ‹è¯•ä»£ç </a></li><li><a href="#6-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%92%8C%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88">6. å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ</a></li><li><a href="#7-%E9%AB%98%E7%BA%A7%E9%85%8D%E7%BD%AE">7. é«˜çº§é…ç½®</a></li></ul><hr><h2 id="1-ğŸ“–-æ¦‚è¿°"><a href="#1-ğŸ“–-æ¦‚è¿°" class="headerlink" title="1. ğŸ“– æ¦‚è¿°"></a>1. ğŸ“– æ¦‚è¿°</h2><p>åœ¨Windowsä¸‹è¿›è¡ŒC++å¼€å‘å¹¶ä½¿ç”¨MariaDBï¼Œä¸»è¦æ¶‰åŠMariaDBæœåŠ¡å™¨ç«¯çš„å®‰è£…ã€å¼€å‘åº“çš„é…ç½®ï¼Œä»¥åŠåœ¨ä½ çš„C++é¡¹ç›®ä¸­æ­£ç¡®è¿æ¥å’Œä½¿ç”¨è¿™äº›åº“ã€‚</p><h3 id="ğŸ¯-ç›®æ ‡"><a href="#ğŸ¯-ç›®æ ‡" class="headerlink" title="ğŸ¯ ç›®æ ‡"></a>ğŸ¯ ç›®æ ‡</h3><ul><li>âœ… å®‰è£… MariaDB æœåŠ¡å™¨</li><li>âœ… é…ç½® C++ å¼€å‘ç¯å¢ƒ</li><li>âœ… åˆ›å»ºå¯è¿è¡Œçš„ C++ æ•°æ®åº“ç¨‹åº</li><li>âœ… æŒæ¡åŸºæœ¬çš„æ•°æ®åº“æ“ä½œ</li></ul><h3 id="ğŸ—ï¸-ç³»ç»Ÿæ¶æ„å›¾"><a href="#ğŸ—ï¸-ç³»ç»Ÿæ¶æ„å›¾" class="headerlink" title="ğŸ—ï¸ ç³»ç»Ÿæ¶æ„å›¾"></a>ğŸ—ï¸ ç³»ç»Ÿæ¶æ„å›¾</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    A[C++ Application] --&gt; B[MariaDB Connector/C++]</span><br><span class="line">    B --&gt; C[MariaDB Connector/C]</span><br><span class="line">    C --&gt; D[MariaDB Server]</span><br><span class="line">    D --&gt; E[Database Files]</span><br><span class="line"></span><br><span class="line">    F[Visual Studio IDE] --&gt; G[Project Configuration]</span><br><span class="line">    G --&gt; H[Include Directories]</span><br><span class="line">    G --&gt; I[Library Directories]</span><br><span class="line">    G --&gt; J[Dependencies]</span><br></pre></td></tr></table></figure><hr><h2 id="2-ğŸ’¾-å®‰è£…-MariaDB-æœåŠ¡å™¨"><a href="#2-ğŸ’¾-å®‰è£…-MariaDB-æœåŠ¡å™¨" class="headerlink" title="2. ğŸ’¾ å®‰è£… MariaDB æœåŠ¡å™¨"></a>2. ğŸ’¾ å®‰è£… MariaDB æœåŠ¡å™¨</h2><h3 id="2-1-ğŸ”-è·å–å®‰è£…ç¨‹åº"><a href="#2-1-ğŸ”-è·å–å®‰è£…ç¨‹åº" class="headerlink" title="2.1 ğŸ” è·å–å®‰è£…ç¨‹åº"></a>2.1 ğŸ” è·å–å®‰è£…ç¨‹åº</h3><p>è®¿é—® <a href="https://mariadb.org/download/">MariaDBå®˜æ–¹ç½‘ç«™çš„ä¸‹è½½é¡µé¢</a>ï¼Œé€‰æ‹©é€‚ç”¨äºWindowsçš„å®‰è£…ç¨‹åºã€‚</p><p><strong>æ¨èç‰ˆæœ¬é€‰æ‹©</strong>ï¼š</p><ul><li><strong>ç¨³å®šç‰ˆæœ¬</strong>: MariaDB 11.8 LTS (é•¿æœŸæ”¯æŒç‰ˆæœ¬)</li><li><strong>æ–‡ä»¶æ ¼å¼</strong>: <code>.msi</code> å®‰è£…ç¨‹åº</li><li><strong>æ¶æ„</strong>: æ ¹æ®ä½ çš„ç³»ç»Ÿé€‰æ‹© x64 æˆ– x86</li></ul><h3 id="2-2-âš™ï¸-è¿è¡Œå®‰è£…å‘å¯¼"><a href="#2-2-âš™ï¸-è¿è¡Œå®‰è£…å‘å¯¼" class="headerlink" title="2.2 âš™ï¸ è¿è¡Œå®‰è£…å‘å¯¼"></a>2.2 âš™ï¸ è¿è¡Œå®‰è£…å‘å¯¼</h3><p>è¿è¡Œä¸‹è½½çš„ <code>.msi</code> å®‰è£…ç¨‹åºï¼ŒæŒ‰ç…§å‘å¯¼æ­¥éª¤æ“ä½œï¼š</p><h4 id="ğŸ“‹-é‡è¦é…ç½®é¡¹"><a href="#ğŸ“‹-é‡è¦é…ç½®é¡¹" class="headerlink" title="ğŸ“‹ é‡è¦é…ç½®é¡¹"></a>ğŸ“‹ é‡è¦é…ç½®é¡¹</h4><table><thead><tr><th>é…ç½®é¡¹</th><th>æ¨èè®¾ç½®</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>æ ¹å¯†ç </strong></td><td>å¼ºå¯†ç </td><td>ç®¡ç†æ•°æ®åº“çš„æœ€é«˜æƒé™è´¦æˆ·</td></tr><tr><td><strong>æœåŠ¡å</strong></td><td><code>MariaDB</code> æˆ– <code>MySQL</code></td><td>ä¿æŒé»˜è®¤å³å¯</td></tr><tr><td><strong>ç«¯å£</strong></td><td><code>3306</code></td><td>é»˜è®¤æ•°æ®åº“ç«¯å£</td></tr><tr><td><strong>å­—ç¬¦é›†</strong></td><td><strong>UTF-8</strong></td><td>æ”¯æŒå¤šè¯­è¨€</td></tr><tr><td><strong>å¯ç”¨ç½‘ç»œè®¿é—®</strong></td><td>æ˜¯</td><td>å…è®¸è¿œç¨‹è¿æ¥</td></tr></tbody></table><h4 id="âš ï¸-æƒé™é”™è¯¯å¤„ç†"><a href="#âš ï¸-æƒé™é”™è¯¯å¤„ç†" class="headerlink" title="âš ï¸ æƒé™é”™è¯¯å¤„ç†"></a>âš ï¸ æƒé™é”™è¯¯å¤„ç†</h4><p>å¦‚æœåœ¨å®‰è£…è¿‡ç¨‹ä¸­é‡åˆ°æœåŠ¡æƒé™ç›¸å…³çš„é”™è¯¯ï¼š</p><ol><li><strong>ä¸è¦é€€å‡ºå®‰è£…ç¨‹åº</strong></li><li>æ‰“å¼€ Windows çš„â€æœåŠ¡â€ç®¡ç†ç•Œé¢ (<code>services.msc</code>)</li><li>æ‰¾åˆ° MariaDB æœåŠ¡</li><li>å³é”® â†’ â€œå±æ€§â€ â†’ â€œç™»å½•â€é€‰é¡¹å¡</li><li>å°†ç™»å½•èº«ä»½ä¿®æ”¹ä¸ºâ€<strong>æœ¬åœ°ç³»ç»Ÿè´¦æˆ·</strong>â€œ</li><li>è¿”å›å®‰è£…ç¨‹åºç‚¹å‡»â€<strong>é‡è¯•</strong>â€œ</li></ol><h3 id="2-3-âœ…-éªŒè¯å®‰è£…"><a href="#2-3-âœ…-éªŒè¯å®‰è£…" class="headerlink" title="2.3 âœ… éªŒè¯å®‰è£…"></a>2.3 âœ… éªŒè¯å®‰è£…</h3><p>å®‰è£…å®Œæˆåï¼Œé€šè¿‡ä»¥ä¸‹æ–¹å¼éªŒè¯ï¼š</p><h4 id="æ–¹æ³•ä¸€ï¼šå‘½ä»¤è¡ŒéªŒè¯"><a href="#æ–¹æ³•ä¸€ï¼šå‘½ä»¤è¡ŒéªŒè¯" class="headerlink" title="æ–¹æ³•ä¸€ï¼šå‘½ä»¤è¡ŒéªŒè¯"></a>æ–¹æ³•ä¸€ï¼šå‘½ä»¤è¡ŒéªŒè¯</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># MariaDB C++ Windows å®‰è£…æŒ‡å—</span></span><br><span class="line">mysql -u root -p</span><br><span class="line"></span><br><span class="line"><span class="comment"># MariaDB C++ Windows å®‰è£…æŒ‡å—</span></span><br></pre></td></tr></table></figure><h4 id="æ–¹æ³•äºŒï¼šå›¾å½¢åŒ–å·¥å…·"><a href="#æ–¹æ³•äºŒï¼šå›¾å½¢åŒ–å·¥å…·" class="headerlink" title="æ–¹æ³•äºŒï¼šå›¾å½¢åŒ–å·¥å…·"></a>æ–¹æ³•äºŒï¼šå›¾å½¢åŒ–å·¥å…·</h4><ul><li><strong>HeidiSQL</strong> (å¯èƒ½éšå®‰è£…åŒ…æä¾›)</li><li><strong>DBeaver</strong></li><li><strong>Navicat</strong></li><li><strong>phpMyAdmin</strong></li></ul><hr><h2 id="3-ğŸ”Œ-å®‰è£…-MariaDB-è¿æ¥å™¨"><a href="#3-ğŸ”Œ-å®‰è£…-MariaDB-è¿æ¥å™¨" class="headerlink" title="3. ğŸ”Œ å®‰è£… MariaDB è¿æ¥å™¨"></a>3. ğŸ”Œ å®‰è£… MariaDB è¿æ¥å™¨</h2><h3 id="3-1-ğŸ“¦-Connector-C"><a href="#3-1-ğŸ“¦-Connector-C" class="headerlink" title="3.1 ğŸ“¦ Connector&#x2F;C++"></a>3.1 ğŸ“¦ Connector&#x2F;C++</h3><p>MariaDB Connector&#x2F;C++ æ˜¯å®˜æ–¹çš„ C++ æ•°æ®åº“è¿æ¥å™¨ã€‚</p><p><strong>ä¸‹è½½åœ°å€</strong>ï¼š<br><a href="https://mariadb.com/downloads/connectors/connectors-data-access/cpp-connector">MariaDB Connector&#x2F;C++ å®˜æ–¹ä¸‹è½½é¡µé¢</a></p><p><strong>ç‰ˆæœ¬é€‰æ‹©æŒ‡å—</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">    A[Visual Studioç‰ˆæœ¬] --&gt; B[Connectorç‰ˆæœ¬]</span><br><span class="line">    B --&gt; C[VS 2019/2022]</span><br><span class="line">    B --&gt; D[VS 2017]</span><br><span class="line">    B --&gt; E[VS 2015]</span><br><span class="line">    C --&gt; F[æœ€æ–°ç‰ˆæœ¬]</span><br><span class="line">    D --&gt; G[è¾ƒæ–°ç‰ˆæœ¬]</span><br><span class="line">    E --&gt; H[å…¼å®¹ç‰ˆæœ¬]</span><br></pre></td></tr></table></figure><h3 id="3-2-ğŸ”§-Connector-C-ä¾èµ–é¡¹"><a href="#3-2-ğŸ”§-Connector-C-ä¾èµ–é¡¹" class="headerlink" title="3.2 ğŸ”§ Connector&#x2F;C (ä¾èµ–é¡¹)"></a>3.2 ğŸ”§ Connector&#x2F;C (ä¾èµ–é¡¹)</h3><p><strong>é‡è¦</strong>ï¼š<code>MariaDB Connector/C++</code> ä¾èµ–äº <code>MariaDB Connector/C</code></p><p><strong>ä¸‹è½½åœ°å€</strong>ï¼š<br><a href="https://mariadb.com/downloads/connectors/connectors-data-access/c-connector">MariaDB Connector&#x2F;C å®˜æ–¹ä¸‹è½½é¡µé¢</a></p><h3 id="3-3-ğŸŒ-é…ç½®ç¯å¢ƒå˜é‡"><a href="#3-3-ğŸŒ-é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="3.3 ğŸŒ é…ç½®ç¯å¢ƒå˜é‡"></a>3.3 ğŸŒ é…ç½®ç¯å¢ƒå˜é‡</h3><p>ä¸ºäº†ç¡®ä¿è¿è¡Œæ—¶èƒ½æ‰¾åˆ°å¿…è¦çš„ DLL æ–‡ä»¶ï¼š</p><h4 id="è‡ªåŠ¨é…ç½®ï¼ˆæ¨èï¼‰"><a href="#è‡ªåŠ¨é…ç½®ï¼ˆæ¨èï¼‰" class="headerlink" title="è‡ªåŠ¨é…ç½®ï¼ˆæ¨èï¼‰"></a>è‡ªåŠ¨é…ç½®ï¼ˆæ¨èï¼‰</h4><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># MariaDB C++ Windows å®‰è£…æŒ‡å—</span><br><span class="line">setx <span class="built_in">PATH</span> &quot;<span class="variable">%PATH%</span>;C:\mariadb-connector-c\lib&quot;</span><br></pre></td></tr></table></figure><h4 id="æ‰‹åŠ¨é…ç½®"><a href="#æ‰‹åŠ¨é…ç½®" class="headerlink" title="æ‰‹åŠ¨é…ç½®"></a>æ‰‹åŠ¨é…ç½®</h4><ol><li>å³é”®â€æ­¤ç”µè„‘â€ â†’ â€œå±æ€§â€ â†’ â€œé«˜çº§ç³»ç»Ÿè®¾ç½®â€</li><li>ç‚¹å‡»â€ç¯å¢ƒå˜é‡â€</li><li>åœ¨â€ç³»ç»Ÿå˜é‡â€ä¸­æ‰¾åˆ° <code>Path</code></li><li>ç‚¹å‡»â€ç¼–è¾‘â€ â†’ â€œæ–°å»ºâ€</li><li>æ·»åŠ è·¯å¾„ï¼š<code>C:\mariadb-connector-c\lib</code></li></ol><hr><h2 id="4-ğŸ› ï¸-é…ç½®-Visual-Studio-é¡¹ç›®"><a href="#4-ğŸ› ï¸-é…ç½®-Visual-Studio-é¡¹ç›®" class="headerlink" title="4. ğŸ› ï¸ é…ç½® Visual Studio é¡¹ç›®"></a>4. ğŸ› ï¸ é…ç½® Visual Studio é¡¹ç›®</h2><h3 id="4-1-ğŸ“-åŒ…å«å¤´æ–‡ä»¶ç›®å½•"><a href="#4-1-ğŸ“-åŒ…å«å¤´æ–‡ä»¶ç›®å½•" class="headerlink" title="4.1 ğŸ“ åŒ…å«å¤´æ–‡ä»¶ç›®å½•"></a>4.1 ğŸ“ åŒ…å«å¤´æ–‡ä»¶ç›®å½•</h3><ol><li>åœ¨ Visual Studio ä¸­æ‰“å¼€é¡¹ç›®</li><li>å³é”®ç‚¹å‡»é¡¹ç›®åç§°ï¼Œé€‰æ‹© <strong>â€œå±æ€§â€</strong></li><li>å¯¼èˆªåˆ° <strong>â€œé…ç½®å±æ€§â€ â†’ â€œC&#x2F;C++â€ â†’ â€œå¸¸è§„â€ â†’ â€œé™„åŠ åŒ…å«ç›®å½•â€</strong></li><li>æ·»åŠ ä»¥ä¸‹è·¯å¾„ï¼š<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C:\mariadb-connector-cpp\include</span><br><span class="line">C:\mariadb-connector-c\include</span><br></pre></td></tr></table></figure></li></ol><h3 id="4-2-ğŸ”—-é…ç½®åº“æ–‡ä»¶ç›®å½•"><a href="#4-2-ğŸ”—-é…ç½®åº“æ–‡ä»¶ç›®å½•" class="headerlink" title="4.2 ğŸ”— é…ç½®åº“æ–‡ä»¶ç›®å½•"></a>4.2 ğŸ”— é…ç½®åº“æ–‡ä»¶ç›®å½•</h3><p>åœ¨åŒä¸€ä¸ªå±æ€§é¡µä¸­ï¼š</p><ol><li>å¯¼èˆªåˆ° <strong>â€œé…ç½®å±æ€§â€ â†’ â€œé“¾æ¥å™¨â€ â†’ â€œå¸¸è§„â€ â†’ â€œé™„åŠ åº“ç›®å½•â€</strong></li><li>æ·»åŠ ä»¥ä¸‹è·¯å¾„ï¼š<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C:\mariadb-connector-cpp\lib</span><br><span class="line">C:\mariadb-connector-c\lib</span><br></pre></td></tr></table></figure></li></ol><h3 id="4-3-ğŸ“š-æŒ‡å®šä¾èµ–çš„åº“æ–‡ä»¶"><a href="#4-3-ğŸ“š-æŒ‡å®šä¾èµ–çš„åº“æ–‡ä»¶" class="headerlink" title="4.3 ğŸ“š æŒ‡å®šä¾èµ–çš„åº“æ–‡ä»¶"></a>4.3 ğŸ“š æŒ‡å®šä¾èµ–çš„åº“æ–‡ä»¶</h3><ol><li>å¯¼èˆªåˆ° <strong>â€œé…ç½®å±æ€§â€ â†’ â€œé“¾æ¥å™¨â€ â†’ â€œè¾“å…¥â€ â†’ â€œé™„åŠ ä¾èµ–é¡¹â€</strong></li><li>æ·»åŠ ä»¥ä¸‹åº“æ–‡ä»¶ï¼ˆæ ¹æ®å®é™…æ–‡ä»¶åå¯èƒ½ç•¥æœ‰ä¸åŒï¼‰ï¼š<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mariadbclient.lib</span><br><span class="line">libmariadb.lib</span><br><span class="line">mariadbcpp.lib</span><br></pre></td></tr></table></figure></li></ol><h3 id="4-4-ğŸ“‹-æ‹·è´-DLL-æ–‡ä»¶"><a href="#4-4-ğŸ“‹-æ‹·è´-DLL-æ–‡ä»¶" class="headerlink" title="4.4 ğŸ“‹ æ‹·è´ DLL æ–‡ä»¶"></a>4.4 ğŸ“‹ æ‹·è´ DLL æ–‡ä»¶</h3><p>ç¡®ä¿ç¨‹åºè¿è¡Œæ—¶èƒ½æ‰¾åˆ°å¿…è¦çš„åŠ¨æ€é“¾æ¥åº“ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">    A[Connector/lib] --&gt; B[é¡¹ç›®è¾“å‡ºç›®å½•]</span><br><span class="line">    A --&gt; C[libmariadb.dll]</span><br><span class="line">    A --&gt; D[mariadbcpp.dll]</span><br><span class="line">    B --&gt; E[Debug/Releaseæ–‡ä»¶å¤¹]</span><br></pre></td></tr></table></figure><p><strong>éœ€è¦å¤åˆ¶çš„ DLL æ–‡ä»¶</strong>ï¼š</p><ul><li><code>libmariadb.dll</code> (æ¥è‡ª Connector&#x2F;C)</li><li><code>mariadbcpp.dll</code> (æ¥è‡ª Connector&#x2F;C++)</li><li>å…¶ä»–ä¾èµ–çš„ DLL æ–‡ä»¶</li></ul><hr><h2 id="5-ğŸ’»-ç¼–å†™æµ‹è¯•ä»£ç "><a href="#5-ğŸ’»-ç¼–å†™æµ‹è¯•ä»£ç " class="headerlink" title="5. ğŸ’» ç¼–å†™æµ‹è¯•ä»£ç "></a>5. ğŸ’» ç¼–å†™æµ‹è¯•ä»£ç </h2><h3 id="5-1-ğŸ“„-å®Œæ•´æµ‹è¯•ç¨‹åº"><a href="#5-1-ğŸ“„-å®Œæ•´æµ‹è¯•ç¨‹åº" class="headerlink" title="5.1 ğŸ“„ å®Œæ•´æµ‹è¯•ç¨‹åº"></a>5.1 ğŸ“„ å®Œæ•´æµ‹è¯•ç¨‹åº</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mariadb/conncpp.hpp&gt;</span> <span class="comment">// Connector/C++ çš„ä¸»è¦å¤´æ–‡ä»¶</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ•°æ®åº“é…ç½®ç»“æ„</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">DatabaseConfig</span> &#123;</span><br><span class="line">    std::string host = <span class="string">&quot;localhost&quot;</span>;</span><br><span class="line">    <span class="type">int</span> port = <span class="number">3306</span>;</span><br><span class="line">    std::string database = <span class="string">&quot;test_db&quot;</span>;</span><br><span class="line">    std::string username = <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    std::string password = <span class="string">&quot;your_root_password_here&quot;</span>; <span class="comment">// æ›¿æ¢ä¸ºå®é™…å¯†ç </span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    DatabaseConfig config;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;ğŸ”Œ æ­£åœ¨è¿æ¥åˆ° MariaDB æœåŠ¡å™¨...&quot;</span> &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1. è·å–é©±åŠ¨å®ä¾‹</span></span><br><span class="line">        sql::mariadb::IMariaDBDriver* driver = sql::mariadb::<span class="built_in">get_driver_instance</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. é…ç½®æ•°æ®åº“è¿æ¥å±æ€§</span></span><br><span class="line">        sql::SQLString url = <span class="string">&quot;jdbc:mariadb://&quot;</span> + config.host + <span class="string">&quot;:&quot;</span> +</span><br><span class="line">                           std::<span class="built_in">to_string</span>(config.port) + <span class="string">&quot;/&quot;</span> + config.database;</span><br><span class="line"></span><br><span class="line">        sql::Properties properties;</span><br><span class="line">        properties[<span class="string">&quot;user&quot;</span>] = config.username;</span><br><span class="line">        properties[<span class="string">&quot;password&quot;</span>] = config.password;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. å»ºç«‹è¿æ¥</span></span><br><span class="line">        <span class="function">std::unique_ptr&lt;sql::Connection&gt; <span class="title">conn</span><span class="params">(driver-&gt;connect(url, properties))</span></span>;</span><br><span class="line"></span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;âœ… æˆåŠŸè¿æ¥åˆ° MariaDB æœåŠ¡å™¨ï¼&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;ğŸ“Š æ•°æ®åº“: &quot;</span> &lt;&lt; config.database &lt;&lt; std::endl;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;ğŸŒ ä¸»æœº: &quot;</span> &lt;&lt; config.host &lt;&lt; <span class="string">&quot;:&quot;</span> &lt;&lt; config.port &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4. æ‰§è¡Œç®€å•æŸ¥è¯¢æµ‹è¯•</span></span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;\nğŸ” æ‰§è¡Œæµ‹è¯•æŸ¥è¯¢...&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        <span class="function">std::unique_ptr&lt;sql::Statement&gt; <span class="title">stmt</span><span class="params">(conn-&gt;createStatement())</span></span>;</span><br><span class="line">        <span class="function">std::unique_ptr&lt;sql::ResultSet&gt; <span class="title">res</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">            stmt-&gt;executeQuery(<span class="string">&quot;SELECT VERSION() as version, NOW() as current_time&quot;</span>)</span></span></span><br><span class="line"><span class="params"><span class="function">        )</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (res-&gt;<span class="built_in">next</span>()) &#123;</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;ğŸ“¦ MariaDB ç‰ˆæœ¬: &quot;</span> &lt;&lt; res-&gt;<span class="built_in">getString</span>(<span class="string">&quot;version&quot;</span>) &lt;&lt; std::endl;</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;â° å½“å‰æ—¶é—´: &quot;</span> &lt;&lt; res-&gt;<span class="built_in">getString</span>(<span class="string">&quot;current_time&quot;</span>) &lt;&lt; std::endl;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 5. åˆ›å»ºæµ‹è¯•è¡¨</span></span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;\nğŸ—ï¸  åˆ›å»ºæµ‹è¯•è¡¨...&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        stmt-&gt;<span class="built_in">execute</span>(<span class="string">&quot;DROP TABLE IF EXISTS test_users&quot;</span>);</span><br><span class="line">        stmt-&gt;<span class="built_in">execute</span>(<span class="string">R&quot;(</span></span><br><span class="line"><span class="string">            CREATE TABLE test_users (</span></span><br><span class="line"><span class="string">                id INT AUTO_INCREMENT PRIMARY KEY,</span></span><br><span class="line"><span class="string">                username VARCHAR(50) NOT NULL,</span></span><br><span class="line"><span class="string">                email VARCHAR(100),</span></span><br><span class="line"><span class="string">                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP</span></span><br><span class="line"><span class="string">            )</span></span><br><span class="line"><span class="string">        )&quot;</span>);</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;âœ… æµ‹è¯•è¡¨åˆ›å»ºæˆåŠŸ&quot;</span> &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 6. æ’å…¥æµ‹è¯•æ•°æ®</span></span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;\nğŸ“ æ’å…¥æµ‹è¯•æ•°æ®...&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        <span class="function">std::unique_ptr&lt;sql::PreparedStatement&gt; <span class="title">pstmt</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">            conn-&gt;prepareStatement(<span class="string">&quot;INSERT INTO test_users (username, email) VALUES (?, ?)&quot;</span>)</span></span></span><br><span class="line"><span class="params"><span class="function">        )</span></span>;</span><br><span class="line"></span><br><span class="line">        pstmt-&gt;<span class="built_in">setString</span>(<span class="number">1</span>, <span class="string">&quot;test_user1&quot;</span>);</span><br><span class="line">        pstmt-&gt;<span class="built_in">setString</span>(<span class="number">2</span>, <span class="string">&quot;user1@example.com&quot;</span>);</span><br><span class="line">        pstmt-&gt;<span class="built_in">executeUpdate</span>();</span><br><span class="line"></span><br><span class="line">        pstmt-&gt;<span class="built_in">setString</span>(<span class="number">1</span>, <span class="string">&quot;test_user2&quot;</span>);</span><br><span class="line">        pstmt-&gt;<span class="built_in">setString</span>(<span class="number">2</span>, <span class="string">&quot;user2@example.com&quot;</span>);</span><br><span class="line">        pstmt-&gt;<span class="built_in">executeUpdate</span>();</span><br><span class="line"></span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;âœ… æµ‹è¯•æ•°æ®æ’å…¥æˆåŠŸ&quot;</span> &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 7. æŸ¥è¯¢æµ‹è¯•æ•°æ®</span></span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;\nğŸ“‹ æŸ¥è¯¢æµ‹è¯•æ•°æ®...&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        <span class="function">std::unique_ptr&lt;sql::ResultSet&gt; <span class="title">selectRes</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">            stmt-&gt;executeQuery(<span class="string">&quot;SELECT * FROM test_users ORDER BY id&quot;</span>)</span></span></span><br><span class="line"><span class="params"><span class="function">        )</span></span>;</span><br><span class="line"></span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;+----+------------+---------------------+---------------------+&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;| ID | Username   | Email               | Created At          |&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;+----+------------+---------------------+---------------------+&quot;</span> &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (selectRes-&gt;<span class="built_in">next</span>()) &#123;</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;| &quot;</span> &lt;&lt; std::<span class="built_in">setw</span>(<span class="number">2</span>) &lt;&lt; selectRes-&gt;<span class="built_in">getInt</span>(<span class="string">&quot;id&quot;</span>)</span><br><span class="line">                      &lt;&lt; <span class="string">&quot; | &quot;</span> &lt;&lt; std::<span class="built_in">setw</span>(<span class="number">10</span>) &lt;&lt; selectRes-&gt;<span class="built_in">getString</span>(<span class="string">&quot;username&quot;</span>)</span><br><span class="line">                      &lt;&lt; <span class="string">&quot; | &quot;</span> &lt;&lt; std::<span class="built_in">setw</span>(<span class="number">19</span>) &lt;&lt; selectRes-&gt;<span class="built_in">getString</span>(<span class="string">&quot;email&quot;</span>)</span><br><span class="line">                      &lt;&lt; <span class="string">&quot; | &quot;</span> &lt;&lt; std::<span class="built_in">setw</span>(<span class="number">19</span>) &lt;&lt; selectRes-&gt;<span class="built_in">getString</span>(<span class="string">&quot;created_at&quot;</span>)</span><br><span class="line">                      &lt;&lt; <span class="string">&quot; |&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;+----+------------+---------------------+---------------------+&quot;</span> &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 8. ç»Ÿè®¡è®°å½•æ•°</span></span><br><span class="line">        <span class="function">std::unique_ptr&lt;sql::ResultSet&gt; <span class="title">countRes</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">            stmt-&gt;executeQuery(<span class="string">&quot;SELECT COUNT(*) as total FROM test_users&quot;</span>)</span></span></span><br><span class="line"><span class="params"><span class="function">        )</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (countRes-&gt;<span class="built_in">next</span>()) &#123;</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;\nğŸ“Š æ€»è®°å½•æ•°: &quot;</span> &lt;&lt; countRes-&gt;<span class="built_in">getInt</span>(<span class="string">&quot;total&quot;</span>) &lt;&lt; std::endl;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;\nğŸ‰ æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼MariaDB C++ è¿æ¥é…ç½®æˆåŠŸï¼&quot;</span> &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    &#125; <span class="built_in">catch</span> (sql::SQLException&amp; e) &#123;</span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;âŒ æ•°æ®åº“è¿æ¥æˆ–æŸ¥è¯¢é”™è¯¯:&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;   é”™è¯¯ä¿¡æ¯: &quot;</span> &lt;&lt; e.<span class="built_in">what</span>() &lt;&lt; std::endl;</span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;   é”™è¯¯ä»£ç : &quot;</span> &lt;&lt; e.<span class="built_in">getErrorCode</span>() &lt;&lt; std::endl;</span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;   SQLçŠ¶æ€: &quot;</span> &lt;&lt; e.<span class="built_in">getSQLState</span>() &lt;&lt; std::endl;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    &#125; <span class="built_in">catch</span> (std::exception&amp; e) &#123;</span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;âŒ ç¨‹åºé”™è¯¯: &quot;</span> &lt;&lt; e.<span class="built_in">what</span>() &lt;&lt; std::endl;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-2-ğŸƒâ€â™‚ï¸-è¿è¡Œæµ‹è¯•"><a href="#5-2-ğŸƒâ€â™‚ï¸-è¿è¡Œæµ‹è¯•" class="headerlink" title="5.2 ğŸƒâ€â™‚ï¸ è¿è¡Œæµ‹è¯•"></a>5.2 ğŸƒâ€â™‚ï¸ è¿è¡Œæµ‹è¯•</h3><ol><li><p><strong>ç¼–è¯‘é¡¹ç›®</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Build â†’ Build Solution (Ctrl+Shift+B)</span><br></pre></td></tr></table></figure></li><li><p><strong>è¿è¡Œç¨‹åº</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Debug â†’ Start Without Debugging (Ctrl+F5)</span><br></pre></td></tr></table></figure></li><li><p><strong>é¢„æœŸè¾“å‡º</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">ğŸ”Œ æ­£åœ¨è¿æ¥åˆ° MariaDB æœåŠ¡å™¨...</span><br><span class="line">âœ… æˆåŠŸè¿æ¥åˆ° MariaDB æœåŠ¡å™¨ï¼</span><br><span class="line">ğŸ“Š æ•°æ®åº“: test_db</span><br><span class="line">ğŸŒ ä¸»æœº: localhost:3306</span><br><span class="line"></span><br><span class="line">ğŸ” æ‰§è¡Œæµ‹è¯•æŸ¥è¯¢...</span><br><span class="line">ğŸ“¦ MariaDB ç‰ˆæœ¬: 11.8.0</span><br><span class="line">â° å½“å‰æ—¶é—´: 2025-11-14 16:30:00</span><br><span class="line"></span><br><span class="line">ğŸ—ï¸  åˆ›å»ºæµ‹è¯•è¡¨...</span><br><span class="line">âœ… æµ‹è¯•è¡¨åˆ›å»ºæˆåŠŸ</span><br><span class="line"></span><br><span class="line">ğŸ“ æ’å…¥æµ‹è¯•æ•°æ®...</span><br><span class="line">âœ… æµ‹è¯•æ•°æ®æ’å…¥æˆåŠŸ</span><br><span class="line"></span><br><span class="line">ğŸ“‹ æŸ¥è¯¢æµ‹è¯•æ•°æ®...</span><br><span class="line">+----+------------+---------------------+---------------------+</span><br><span class="line">| ID | Username   | Email               | Created At          |</span><br><span class="line">+----+------------+---------------------+---------------------+</span><br><span class="line">|  1 | test_user1 | user1@example.com   | 2025-11-14 16:30:01 |</span><br><span class="line">|  2 | test_user2 | user2@example.com   | 2025-11-14 16:30:01 |</span><br><span class="line">+----+------------+---------------------+---------------------+</span><br><span class="line"></span><br><span class="line">ğŸ“Š æ€»è®°å½•æ•°: 2</span><br><span class="line"></span><br><span class="line">ğŸ‰ æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼MariaDB C++ è¿æ¥é…ç½®æˆåŠŸï¼</span><br></pre></td></tr></table></figure></li></ol><hr><h2 id="6-ğŸ”§-å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ"><a href="#6-ğŸ”§-å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ" class="headerlink" title="6. ğŸ”§ å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ"></a>6. ğŸ”§ å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ</h2><h3 id="6-1-âŒ-è¿æ¥å¤±è´¥"><a href="#6-1-âŒ-è¿æ¥å¤±è´¥" class="headerlink" title="6.1 âŒ è¿æ¥å¤±è´¥"></a>6.1 âŒ è¿æ¥å¤±è´¥</h3><p><strong>é”™è¯¯ä¿¡æ¯</strong>: <code>Can&#39;t connect to MySQL server</code></p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    A[è¿æ¥å¤±è´¥] --&gt; B&#123;æ£€æŸ¥é¡¹ç›®&#125;</span><br><span class="line">    B --&gt; C[MariaDBæœåŠ¡æ˜¯å¦å¯åŠ¨]</span><br><span class="line">    B --&gt; D[ç«¯å£3306æ˜¯å¦è¢«å ç”¨]</span><br><span class="line">    B --&gt; E[é˜²ç«å¢™è®¾ç½®]</span><br><span class="line">    B --&gt; F[ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡®]</span><br><span class="line"></span><br><span class="line">    C --&gt; G[å¯åŠ¨æœåŠ¡: net start mysql]</span><br><span class="line">    D --&gt; H[æ›´æ¢ç«¯å£æˆ–é‡Šæ”¾ç«¯å£]</span><br><span class="line">    E --&gt; I[æ·»åŠ é˜²ç«å¢™ä¾‹å¤–]</span><br><span class="line">    F --&gt; J[é‡ç½®rootå¯†ç ]</span><br></pre></td></tr></table></figure><h3 id="6-2-âŒ-DLL-æ‰¾ä¸åˆ°"><a href="#6-2-âŒ-DLL-æ‰¾ä¸åˆ°" class="headerlink" title="6.2 âŒ DLL æ‰¾ä¸åˆ°"></a>6.2 âŒ DLL æ‰¾ä¸åˆ°</h3><p><strong>é”™è¯¯ä¿¡æ¯</strong>: <code>æ— æ³•å¯åŠ¨æ­¤ç¨‹åºï¼Œå› ä¸ºè®¡ç®—æœºä¸­ä¸¢å¤± libmariadb.dll</code></p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>:</p><ol><li>ç¡®è®¤ DLL æ–‡ä»¶åœ¨æ­£ç¡®ä½ç½®</li><li>æ£€æŸ¥ PATH ç¯å¢ƒå˜é‡</li><li>å°† DLL å¤åˆ¶åˆ°é¡¹ç›®è¾“å‡ºç›®å½•</li></ol><h3 id="6-3-âŒ-ç¼–è¯‘é”™è¯¯"><a href="#6-3-âŒ-ç¼–è¯‘é”™è¯¯" class="headerlink" title="6.3 âŒ ç¼–è¯‘é”™è¯¯"></a>6.3 âŒ ç¼–è¯‘é”™è¯¯</h3><p><strong>å¸¸è§ç¼–è¯‘é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ</strong>:</p><table><thead><tr><th>é”™è¯¯ä¿¡æ¯</th><th>åŸå› </th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td><code>æ— æ³•æ‰¾åˆ°å¤´æ–‡ä»¶</code></td><td>Include ç›®å½•æœªæ­£ç¡®é…ç½®</td><td>æ£€æŸ¥é™„åŠ åŒ…å«ç›®å½•è®¾ç½®</td></tr><tr><td><code>æ— æ³•è§£æçš„å¤–éƒ¨ç¬¦å·</code></td><td>åº“æ–‡ä»¶æœªæ­£ç¡®é“¾æ¥</td><td>æ£€æŸ¥é™„åŠ ä¾èµ–é¡¹å’Œåº“ç›®å½•</td></tr><tr><td><code>å­—ç¬¦é›†ä¸åŒ¹é…</code></td><td>Unicode&#x2F;ANSI ç¼–ç é—®é¢˜</td><td>åœ¨é¡¹ç›®è®¾ç½®ä¸­ç»Ÿä¸€å­—ç¬¦é›†</td></tr></tbody></table><hr><h2 id="7-ğŸš€-é«˜çº§é…ç½®"><a href="#7-ğŸš€-é«˜çº§é…ç½®" class="headerlink" title="7. ğŸš€ é«˜çº§é…ç½®"></a>7. ğŸš€ é«˜çº§é…ç½®</h2><h3 id="7-1-ğŸ”-è¿æ¥æ± é…ç½®"><a href="#7-1-ğŸ”-è¿æ¥æ± é…ç½®" class="headerlink" title="7.1 ğŸ” è¿æ¥æ± é…ç½®"></a>7.1 ğŸ” è¿æ¥æ± é…ç½®</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mariadb/conncpp.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MariaDBConnectionPool</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    std::unique_ptr&lt;sql::mariadb::IMariaDBDriver&gt; driver;</span><br><span class="line">    sql::SQLString url;</span><br><span class="line">    sql::Properties properties;</span><br><span class="line">    std::vector&lt;std::unique_ptr&lt;sql::Connection&gt;&gt; connections;</span><br><span class="line">    std::mutex mutex;</span><br><span class="line">    <span class="type">int</span> maxConnections;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">MariaDBConnectionPool</span>(<span class="type">const</span> std::string&amp; host, <span class="type">int</span> port,</span><br><span class="line">                         <span class="type">const</span> std::string&amp; database,</span><br><span class="line">                         <span class="type">const</span> std::string&amp; username,</span><br><span class="line">                         <span class="type">const</span> std::string&amp; password,</span><br><span class="line">                         <span class="type">int</span> maxConn = <span class="number">10</span>)</span><br><span class="line">        : <span class="built_in">maxConnections</span>(maxConn) &#123;</span><br><span class="line"></span><br><span class="line">        driver = std::<span class="built_in">unique_ptr</span>&lt;sql::mariadb::IMariaDBDriver&gt;(</span><br><span class="line">            sql::mariadb::<span class="built_in">get_driver_instance</span>()</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        url = <span class="string">&quot;jdbc:mariadb://&quot;</span> + host + <span class="string">&quot;:&quot;</span> + std::<span class="built_in">to_string</span>(port) + <span class="string">&quot;/&quot;</span> + database;</span><br><span class="line"></span><br><span class="line">        properties[<span class="string">&quot;user&quot;</span>] = username;</span><br><span class="line">        properties[<span class="string">&quot;password&quot;</span>] = password;</span><br><span class="line">        properties[<span class="string">&quot;autoReconnect&quot;</span>] = <span class="string">&quot;true&quot;</span>;</span><br><span class="line">        properties[<span class="string">&quot;useSSL&quot;</span>] = <span class="string">&quot;false&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">std::unique_ptr&lt;sql::Connection&gt; <span class="title">getConnection</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="function">std::lock_guard&lt;std::mutex&gt; <span class="title">lock</span><span class="params">(mutex)</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span>&amp; conn : connections) &#123;</span><br><span class="line">            <span class="keyword">if</span> (conn &amp;&amp; !conn-&gt;<span class="built_in">isClosed</span>()) &#123;</span><br><span class="line">                <span class="keyword">return</span> std::<span class="built_in">move</span>(conn);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ›å»ºæ–°è¿æ¥</span></span><br><span class="line">        <span class="keyword">return</span> std::<span class="built_in">unique_ptr</span>&lt;sql::Connection&gt;(</span><br><span class="line">            driver-&gt;<span class="built_in">connect</span>(url, properties)</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">returnConnection</span><span class="params">(std::unique_ptr&lt;sql::Connection&gt; conn)</span> </span>&#123;</span><br><span class="line">        <span class="function">std::lock_guard&lt;std::mutex&gt; <span class="title">lock</span><span class="params">(mutex)</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (conn &amp;&amp; connections.<span class="built_in">size</span>() &lt; maxConnections) &#123;</span><br><span class="line">            connections.<span class="built_in">push_back</span>(std::<span class="built_in">move</span>(conn));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="7-2-ğŸ“-äº‹åŠ¡å¤„ç†"><a href="#7-2-ğŸ“-äº‹åŠ¡å¤„ç†" class="headerlink" title="7.2 ğŸ“ äº‹åŠ¡å¤„ç†"></a>7.2 ğŸ“ äº‹åŠ¡å¤„ç†</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">transactionExample</span><span class="params">(std::unique_ptr&lt;sql::Connection&gt;&amp; conn)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// å¼€å§‹äº‹åŠ¡</span></span><br><span class="line">        <span class="function">std::unique_ptr&lt;sql::Statement&gt; <span class="title">stmt</span><span class="params">(conn-&gt;createStatement())</span></span>;</span><br><span class="line">        stmt-&gt;<span class="built_in">execute</span>(<span class="string">&quot;START TRANSACTION&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ‰§è¡Œå¤šä¸ªSQLæ“ä½œ</span></span><br><span class="line">        <span class="function">std::unique_ptr&lt;sql::PreparedStatement&gt; <span class="title">pstmt</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">            conn-&gt;prepareStatement(<span class="string">&quot;UPDATE accounts SET balance = balance - ? WHERE id = ?&quot;</span>)</span></span></span><br><span class="line"><span class="params"><span class="function">        )</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ‰£æ¬¾</span></span><br><span class="line">        pstmt-&gt;<span class="built_in">setDouble</span>(<span class="number">1</span>, <span class="number">100.0</span>);</span><br><span class="line">        pstmt-&gt;<span class="built_in">setInt</span>(<span class="number">2</span>, <span class="number">1</span>);</span><br><span class="line">        pstmt-&gt;<span class="built_in">executeUpdate</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åŠ æ¬¾</span></span><br><span class="line">        pstmt-&gt;<span class="built_in">setDouble</span>(<span class="number">1</span>, <span class="number">100.0</span>);</span><br><span class="line">        pstmt-&gt;<span class="built_in">setInt</span>(<span class="number">2</span>, <span class="number">2</span>);</span><br><span class="line">        pstmt-&gt;<span class="built_in">executeUpdate</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æäº¤äº‹åŠ¡</span></span><br><span class="line">        conn-&gt;<span class="built_in">commit</span>();</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;âœ… äº‹åŠ¡æ‰§è¡ŒæˆåŠŸ&quot;</span> &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    &#125; <span class="built_in">catch</span> (sql::SQLException&amp; e) &#123;</span><br><span class="line">        <span class="comment">// å›æ»šäº‹åŠ¡</span></span><br><span class="line">        conn-&gt;<span class="built_in">rollback</span>();</span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;âŒ äº‹åŠ¡æ‰§è¡Œå¤±è´¥ï¼Œå·²å›æ»š: &quot;</span> &lt;&lt; e.<span class="built_in">what</span>() &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="7-3-ğŸŒ-å›½é™…åŒ–æ”¯æŒ"><a href="#7-3-ğŸŒ-å›½é™…åŒ–æ”¯æŒ" class="headerlink" title="7.3 ğŸŒ å›½é™…åŒ–æ”¯æŒ"></a>7.3 ğŸŒ å›½é™…åŒ–æ”¯æŒ</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">setupUTF8Connection</span><span class="params">(std::unique_ptr&lt;sql::Connection&gt;&amp; conn)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// è®¾ç½®è¿æ¥å­—ç¬¦é›†</span></span><br><span class="line">        <span class="function">std::unique_ptr&lt;sql::Statement&gt; <span class="title">stmt</span><span class="params">(conn-&gt;createStatement())</span></span>;</span><br><span class="line">        stmt-&gt;<span class="built_in">execute</span>(<span class="string">&quot;SET NAMES &#x27;utf8mb4&#x27;&quot;</span>);</span><br><span class="line">        stmt-&gt;<span class="built_in">execute</span>(<span class="string">&quot;SET CHARACTER SET utf8mb4&quot;</span>);</span><br><span class="line"></span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;âœ… UTF-8 å­—ç¬¦é›†é…ç½®å®Œæˆ&quot;</span> &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æµ‹è¯•ä¸­æ–‡æ”¯æŒ</span></span><br><span class="line">        <span class="function">std::unique_ptr&lt;sql::PreparedStatement&gt; <span class="title">pstmt</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">            conn-&gt;prepareStatement(<span class="string">&quot;INSERT INTO test_table (name) VALUES (?)&quot;</span>)</span></span></span><br><span class="line"><span class="params"><span class="function">        )</span></span>;</span><br><span class="line">        pstmt-&gt;<span class="built_in">setString</span>(<span class="number">1</span>, <span class="string">&quot;æµ‹è¯•ä¸­æ–‡å­—ç¬¦&quot;</span>);</span><br><span class="line">        pstmt-&gt;<span class="built_in">executeUpdate</span>();</span><br><span class="line"></span><br><span class="line">    &#125; <span class="built_in">catch</span> (sql::SQLException&amp; e) &#123;</span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;âŒ UTF-8 é…ç½®å¤±è´¥: &quot;</span> &lt;&lt; e.<span class="built_in">what</span>() &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="ğŸ“Š-æ€»ç»“"><a href="#ğŸ“Š-æ€»ç»“" class="headerlink" title="ğŸ“Š æ€»ç»“"></a>ğŸ“Š æ€»ç»“</h2><h3 id="âœ…-æˆåŠŸæ ‡å¿—"><a href="#âœ…-æˆåŠŸæ ‡å¿—" class="headerlink" title="âœ… æˆåŠŸæ ‡å¿—"></a>âœ… æˆåŠŸæ ‡å¿—</h3><ul><li><input checked="" disabled="" type="checkbox"> MariaDB æœåŠ¡å™¨å®‰è£…å®Œæˆ</li><li><input checked="" disabled="" type="checkbox"> Connector&#x2F;C å’Œ Connector&#x2F;C++ å®‰è£…å®Œæˆ</li><li><input checked="" disabled="" type="checkbox"> Visual Studio é¡¹ç›®é…ç½®æ­£ç¡®</li><li><input checked="" disabled="" type="checkbox"> æµ‹è¯•ç¨‹åºè¿è¡ŒæˆåŠŸ</li><li><input checked="" disabled="" type="checkbox"> åŸºæœ¬æ•°æ®åº“æ“ä½œæ­£å¸¸</li></ul><h3 id="ğŸ¯-ä¸‹ä¸€æ­¥å»ºè®®"><a href="#ğŸ¯-ä¸‹ä¸€æ­¥å»ºè®®" class="headerlink" title="ğŸ¯ ä¸‹ä¸€æ­¥å»ºè®®"></a>ğŸ¯ ä¸‹ä¸€æ­¥å»ºè®®</h3><ol><li><strong>å­¦ä¹ é«˜çº§ SQL æ“ä½œ</strong>ï¼šå­˜å‚¨è¿‡ç¨‹ã€è§¦å‘å™¨ã€è§†å›¾</li><li><strong>æŒæ¡è¿æ¥æ± æŠ€æœ¯</strong>ï¼šæé«˜åº”ç”¨ç¨‹åºæ€§èƒ½</li><li><strong>äº†è§£äº‹åŠ¡å¤„ç†</strong>ï¼šç¡®ä¿æ•°æ®ä¸€è‡´æ€§</li><li><strong>å®ç°é”™è¯¯å¤„ç†</strong>ï¼šå¢å¼ºç¨‹åºå¥å£®æ€§</li><li><strong>å®‰å…¨é…ç½®</strong>ï¼šé˜²æ­¢ SQL æ³¨å…¥æ”»å‡»</li></ol><h3 id="ğŸ“š-æ¨èèµ„æº"><a href="#ğŸ“š-æ¨èèµ„æº" class="headerlink" title="ğŸ“š æ¨èèµ„æº"></a>ğŸ“š æ¨èèµ„æº</h3><ul><li><a href="https://mariadb.com/docs/clients/connector-cpp/">MariaDB Connector&#x2F;C++ å®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://www.w3schools.com/sql/">SQL åŸºç¡€æ•™ç¨‹</a></li><li><a href="https://isocpp.org/">C++ æ•°æ®åº“ç¼–ç¨‹æœ€ä½³å®è·µ</a></li></ul><hr><blockquote><p><strong>ğŸ’¡ æç¤º</strong>: åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œè¯·åŠ¡å¿…ï¼š</p><ul><li>ä½¿ç”¨å¼ºå¯†ç å’Œè¿æ¥åŠ å¯†</li><li>å®æ–½é€‚å½“çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•</li><li>å®šæœŸå¤‡ä»½æ•°æ®åº“</li><li>ç›‘æ§æ•°æ®åº“æ€§èƒ½å’Œå®‰å…¨</li></ul></blockquote>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;MariaDB-C-Windows-å®‰è£…æŒ‡å—&quot;&gt;&lt;a href=&quot;#MariaDB-C-Windows-å®‰è£…æŒ‡å—&quot; class=&quot;headerlink&quot; title=&quot;MariaDB C++ Windows å®‰è£…æŒ‡å—&quot;&gt;&lt;/a&gt;MariaDB C++</summary>
        
      
    
    
    
    <category term="æ•°æ®åº“ç³»ç»Ÿ" scheme="https://vilaswang.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F/"/>
    
    <category term="å…³ç³»å‹æ•°æ®åº“" scheme="https://vilaswang.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F/%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="æŠ€æœ¯æ–‡æ¡£" scheme="https://vilaswang.github.io/tags/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/"/>
    
    <category term="æŒ‡å—" scheme="https://vilaswang.github.io/tags/%E6%8C%87%E5%8D%97/"/>
    
  </entry>
  
  <entry>
    <title>PostgreSQL C++ Windows å®‰è£…æŒ‡å—</title>
    <link href="https://vilaswang.github.io/posts/b71a62b0/"/>
    <id>https://vilaswang.github.io/posts/b71a62b0/</id>
    <published>2025-12-09T06:09:56.000Z</published>
    <updated>2025-12-17T15:36:29.279Z</updated>
    
    <content type="html"><![CDATA[<h1 id="PostgreSQL-C-Windows-å®‰è£…æŒ‡å—"><a href="#PostgreSQL-C-Windows-å®‰è£…æŒ‡å—" class="headerlink" title="PostgreSQL C++ Windows å®‰è£…æŒ‡å—"></a>PostgreSQL C++ Windows å®‰è£…æŒ‡å—</h1><blockquote><p><strong>æ–‡æ¡£åˆ›å»ºæ—¶é—´</strong>: 2025-11-14<br><strong>æœ€åæ›´æ–°</strong>: 2025-11-14<br><strong>æ ‡ç­¾</strong>: <code>postgresql</code>, <code>c</code>, <code>windows</code>, <code>development</code>, <code>database</code>, <code>libpq</code></p></blockquote><h2 id="ğŸ“‘-ç›®å½•"><a href="#ğŸ“‘-ç›®å½•" class="headerlink" title="ğŸ“‘ ç›®å½•"></a>ğŸ“‘ ç›®å½•</h2><ul><li><a href="#1-%E6%A6%82%E8%BF%B0">1. æ¦‚è¿°</a></li><li><a href="#2-%E7%B3%BB%E7%BB%9F%E7%BB%84%E4%BB%B6">2. ç³»ç»Ÿç»„ä»¶</a></li><li><a href="#3-postgresql-%E5%AE%89%E8%A3%85">3. PostgreSQL å®‰è£…</a><ul><li><a href="#31-%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E5%8C%85">3.1 ä¸‹è½½å®‰è£…åŒ…</a></li><li><a href="#32-%E8%BF%90%E8%A1%8C%E5%AE%89%E8%A3%85%E7%A8%8B%E5%BA%8F">3.2 è¿è¡Œå®‰è£…ç¨‹åº</a></li></ul></li><li><a href="#4-c-%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE">4. C å¼€å‘ç¯å¢ƒé…ç½®</a><ul><li><a href="#41-%E5%8C%85%E5%90%AB%E5%A4%B4%E6%96%87%E4%BB%B6%E9%85%8D%E7%BD%AE">4.1 åŒ…å«å¤´æ–‡ä»¶é…ç½®</a></li><li><a href="#42-%E9%93%BE%E6%8E%A5%E5%BA%93%E9%85%8D%E7%BD%AE">4.2 é“¾æ¥åº“é…ç½®</a></li><li><a href="#43-%E8%BF%90%E8%A1%8C%E6%97%B6%E4%BE%9D%E8%B5%96%E9%85%8D%E7%BD%AE">4.3 è¿è¡Œæ—¶ä¾èµ–é…ç½®</a></li></ul></li><li><a href="#5-%E9%AA%8C%E8%AF%81%E4%B8%8E%E6%B5%8B%E8%AF%95">5. éªŒè¯ä¸æµ‹è¯•</a></li><li><a href="#6-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3">6. å¸¸è§é—®é¢˜è§£å†³</a></li><li><a href="#7-%E9%AB%98%E7%BA%A7%E9%85%8D%E7%BD%AE">7. é«˜çº§é…ç½®</a></li></ul><hr><h2 id="1-ğŸ“–-æ¦‚è¿°"><a href="#1-ğŸ“–-æ¦‚è¿°" class="headerlink" title="1. ğŸ“– æ¦‚è¿°"></a>1. ğŸ“– æ¦‚è¿°</h2><p>æœ¬æŒ‡å—è¯¦ç»†è¯´æ˜å¦‚ä½•åœ¨ Windows ç³»ç»Ÿä¸Šé…ç½® PostgreSQL çš„ C è¯­è¨€å¼€å‘ç¯å¢ƒï¼ŒåŒ…æ‹¬æœåŠ¡å™¨å®‰è£…ã€å®¢æˆ·ç«¯åº“é…ç½®å’Œå¼€å‘ç¯å¢ƒè®¾ç½®ã€‚</p><h3 id="ğŸ¯-é…ç½®ç›®æ ‡"><a href="#ğŸ¯-é…ç½®ç›®æ ‡" class="headerlink" title="ğŸ¯ é…ç½®ç›®æ ‡"></a>ğŸ¯ é…ç½®ç›®æ ‡</h3><ul><li>âœ… å®‰è£… PostgreSQL æ•°æ®åº“æœåŠ¡å™¨</li><li>âœ… é…ç½® C è¯­è¨€å®¢æˆ·ç«¯åº“ (libpq)</li><li>âœ… è®¾ç½®å¼€å‘ç¯å¢ƒå’Œç¼–è¯‘é€‰é¡¹</li><li>âœ… åˆ›å»ºå¯è¿è¡Œçš„ C æ•°æ®åº“åº”ç”¨ç¨‹åº</li></ul><h3 id="ğŸ—ï¸-ç³»ç»Ÿæ¶æ„"><a href="#ğŸ—ï¸-ç³»ç»Ÿæ¶æ„" class="headerlink" title="ğŸ—ï¸ ç³»ç»Ÿæ¶æ„"></a>ğŸ—ï¸ ç³»ç»Ÿæ¶æ„</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    A[C Application] --&gt; B[libpq Client Library]</span><br><span class="line">    B --&gt; C[PostgreSQL Server]</span><br><span class="line">    C --&gt; D[Database Files]</span><br><span class="line"></span><br><span class="line">    E[Visual Studio] --&gt; F[Project Configuration]</span><br><span class="line">    F --&gt; G[Include Directories]</span><br><span class="line">    F --&gt; H[Library Directories]</span><br><span class="line">    F --&gt; I[Dependencies]</span><br><span class="line"></span><br><span class="line">    G --&gt; J[postgresql/include]</span><br><span class="line">    H --&gt; K[postgresql/lib]</span><br><span class="line">    I --&gt; L[libpq.lib]</span><br></pre></td></tr></table></figure><hr><h2 id="2-ğŸ”§-ç³»ç»Ÿç»„ä»¶"><a href="#2-ğŸ”§-ç³»ç»Ÿç»„ä»¶" class="headerlink" title="2. ğŸ”§ ç³»ç»Ÿç»„ä»¶"></a>2. ğŸ”§ ç³»ç»Ÿç»„ä»¶</h2><table><thead><tr><th>ç»„ä»¶</th><th>ä¸»è¦ä½œç”¨</th><th>è·å–ä¸è¯´æ˜</th></tr></thead><tbody><tr><td><strong>PostgreSQL æœåŠ¡å™¨</strong></td><td>æä¾›æ•°æ®åº“æœåŠ¡æ ¸å¿ƒï¼ŒåŒ…å«è¿è¡Œå®ä¾‹æ‰€éœ€çš„æ‰€æœ‰ç¨‹åº</td><td>ä»å®˜ç½‘ä¸‹è½½å®‰è£…åŒ…ï¼Œé€šå¸¸è‡ªåŠ¨å®‰è£…</td></tr><tr><td><strong>Cå®¢æˆ·ç«¯åº“ (libpq)</strong></td><td>Cç¨‹åºè¿æ¥å’Œæ“ä½œPostgreSQLæ•°æ®åº“çš„ä¸»è¦åº“ï¼ŒåŒ…å«å¤´æ–‡ä»¶å’Œé“¾æ¥åº“</td><td><strong>å®‰è£…æ—¶å¿…é¡»å‹¾é€‰ â€œPostgreSQL C Libraries (libpq)â€</strong></td></tr><tr><td><strong>Command Line Tools</strong></td><td>æä¾› <code>psql</code> ç­‰å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºæ•°æ®åº“ç®¡ç†å’Œè°ƒè¯•</td><td>æ¨èå®‰è£…ï¼Œä¾¿äºå¼€å‘å’Œæµ‹è¯•</td></tr><tr><td><strong>pgAdmin</strong></td><td>å›¾å½¢åŒ–ç®¡ç†å·¥å…·ï¼Œå¯è§†åŒ–ç®¡ç†æ•°æ®åº“</td><td>å¯é€‰å®‰è£…ï¼Œä¾¿äºæ—¥å¸¸ç®¡ç†</td></tr></tbody></table><hr><h2 id="3-ğŸ’¾-PostgreSQL-å®‰è£…"><a href="#3-ğŸ’¾-PostgreSQL-å®‰è£…" class="headerlink" title="3. ğŸ’¾ PostgreSQL å®‰è£…"></a>3. ğŸ’¾ PostgreSQL å®‰è£…</h2><h3 id="3-1-ğŸŒ-ä¸‹è½½å®‰è£…åŒ…"><a href="#3-1-ğŸŒ-ä¸‹è½½å®‰è£…åŒ…" class="headerlink" title="3.1 ğŸŒ ä¸‹è½½å®‰è£…åŒ…"></a>3.1 ğŸŒ ä¸‹è½½å®‰è£…åŒ…</h3><p>è®¿é—® <a href="https://www.postgresql.org/download/windows/">PostgreSQLå®˜ç½‘ä¸‹è½½é¡µé¢</a>ï¼š</p><p><strong>æ¨èç‰ˆæœ¬é€‰æ‹©</strong>ï¼š</p><ul><li><strong>æœ€æ–°ç¨³å®šç‰ˆ</strong>: PostgreSQL 16.x</li><li><strong>æ¶æ„</strong>: x64 (64ä½)</li><li><strong>å®‰è£…åŒ…æ ¼å¼</strong>: Windows exe å®‰è£…ç¨‹åº</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">    A[è®¿é—®å®˜ç½‘] --&gt; B[é€‰æ‹©Windowsç‰ˆæœ¬]</span><br><span class="line">    B --&gt; C[ä¸‹è½½å®‰è£…åŒ…]</span><br><span class="line">    C --&gt; D[è¿è¡Œå®‰è£…ç¨‹åº]</span><br><span class="line">    D --&gt; E[é…ç½®ç»„ä»¶é€‰æ‹©]</span><br><span class="line">    E --&gt; F[å®Œæˆå®‰è£…]</span><br></pre></td></tr></table></figure><h3 id="3-2-âš™ï¸-è¿è¡Œå®‰è£…ç¨‹åº"><a href="#3-2-âš™ï¸-è¿è¡Œå®‰è£…ç¨‹åº" class="headerlink" title="3.2 âš™ï¸ è¿è¡Œå®‰è£…ç¨‹åº"></a>3.2 âš™ï¸ è¿è¡Œå®‰è£…ç¨‹åº</h3><ol><li><p><strong>å¯åŠ¨å®‰è£…ç¨‹åº</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä»¥ç®¡ç†å‘˜æƒé™è¿è¡Œ</span></span><br><span class="line">postgresql-16.1-1-windows-x64.exe</span><br></pre></td></tr></table></figure></li><li><p><strong>ç»„ä»¶é€‰æ‹©ç•Œé¢</strong></p><p><strong>å…³é”®æ­¥éª¤</strong>ï¼šåœ¨ <strong>â€œSelect Componentsâ€</strong> ç•Œé¢ï¼Œè¯·ç¡®ä¿å‹¾é€‰ä»¥ä¸‹é€‰é¡¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">âœ… PostgreSQL Server                    (å¿…é¡»)</span><br><span class="line">âœ… Command Line Tools                  (æ¨è)</span><br><span class="line">âœ… PostgreSQL C Libraries (libpq)     (å¿…é¡»)</span><br><span class="line">âœ… pgAdmin 4                          (å¯é€‰)</span><br></pre></td></tr></table></figure></li><li><p><strong>é‡è¦é…ç½®é¡¹</strong></p><table><thead><tr><th>é…ç½®é¡¹</th><th>æ¨èè®¾ç½®</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>å®‰è£…ç›®å½•</strong></td><td><code>C:\Program Files\PostgreSQL\16</code></td><td>é»˜è®¤è·¯å¾„ï¼Œé¿å…åŒ…å«ç©ºæ ¼æˆ–ä¸­æ–‡</td></tr><tr><td><strong>æ•°æ®ç›®å½•</strong></td><td><code>C:\Program Files\PostgreSQL\16\data</code></td><td>æ•°æ®åº“å­˜å‚¨ä½ç½®</td></tr><tr><td><strong>è¶…çº§ç”¨æˆ·å¯†ç </strong></td><td>å¼ºå¯†ç </td><td>è®°ä½postgresç”¨æˆ·å¯†ç </td></tr><tr><td><strong>ç«¯å£</strong></td><td><code>5432</code></td><td>é»˜è®¤ç«¯å£ï¼Œç¡®ä¿æœªè¢«å ç”¨</td></tr><tr><td><strong>åŒºåŸŸè®¾ç½®</strong></td><td><code>Chinese (Simplified), China</code></td><td>æˆ–æ ¹æ®éœ€è¦é€‰æ‹©</td></tr></tbody></table></li><li><p><strong>å®‰è£…å®ŒæˆéªŒè¯</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ£€æŸ¥æœåŠ¡çŠ¶æ€</span></span><br><span class="line">services.msc  <span class="comment"># æŸ¥çœ‹postgresqlæœåŠ¡æ˜¯å¦è¿è¡Œ</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯•è¿æ¥</span></span><br><span class="line">psql -U postgres -h localhost</span><br></pre></td></tr></table></figure></li></ol><hr><h2 id="4-ğŸ› ï¸-C-å¼€å‘ç¯å¢ƒé…ç½®"><a href="#4-ğŸ› ï¸-C-å¼€å‘ç¯å¢ƒé…ç½®" class="headerlink" title="4. ğŸ› ï¸ C å¼€å‘ç¯å¢ƒé…ç½®"></a>4. ğŸ› ï¸ C å¼€å‘ç¯å¢ƒé…ç½®</h2><p>å®‰è£…å®Œæˆåï¼ŒPostgreSQL é€šå¸¸ä½äº <code>C:\Program Files\PostgreSQL\16</code> ç›®å½•ã€‚</p><h3 id="4-1-ğŸ“-åŒ…å«å¤´æ–‡ä»¶é…ç½®"><a href="#4-1-ğŸ“-åŒ…å«å¤´æ–‡ä»¶é…ç½®" class="headerlink" title="4.1 ğŸ“ åŒ…å«å¤´æ–‡ä»¶é…ç½®"></a>4.1 ğŸ“ åŒ…å«å¤´æ–‡ä»¶é…ç½®</h3><p><strong>å¤´æ–‡ä»¶è·¯å¾„</strong>: <code>C:\Program Files\PostgreSQL\16\include</code></p><p><strong>å…³é”®å¤´æ–‡ä»¶</strong>:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;libpq-fe.h&gt;</span>          <span class="comment">// ä¸»è¦çš„å®¢æˆ·ç«¯æ¥å£</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;libpq/libpq-fs.h&gt;</span>    <span class="comment">// å¤§å¯¹è±¡æ”¯æŒ</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;postgres_ext.h&gt;</span>      <span class="comment">// PostgreSQL æ‰©å±•å®šä¹‰</span></span></span><br></pre></td></tr></table></figure><p><strong>Visual Studio é…ç½®</strong>:</p><ol><li>å³é”®é¡¹ç›® â†’ å±æ€§</li><li><strong>é…ç½®å±æ€§</strong> â†’ <strong>C&#x2F;C++</strong> â†’ <strong>å¸¸è§„</strong></li><li><strong>é™„åŠ åŒ…å«ç›®å½•</strong> æ·»åŠ ï¼š<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Program Files\PostgreSQL\16\include</span><br></pre></td></tr></table></figure></li></ol><h3 id="4-2-ğŸ”—-é“¾æ¥åº“é…ç½®"><a href="#4-2-ğŸ”—-é“¾æ¥åº“é…ç½®" class="headerlink" title="4.2 ğŸ”— é“¾æ¥åº“é…ç½®"></a>4.2 ğŸ”— é“¾æ¥åº“é…ç½®</h3><p><strong>åº“æ–‡ä»¶è·¯å¾„</strong>: <code>C:\Program Files\PostgreSQL\16\lib</code></p><p><strong>ä¸»è¦åº“æ–‡ä»¶</strong>:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">libpq.lib        // ä¸»è¦çš„å®¢æˆ·ç«¯åº“</span><br><span class="line">ws2_32.lib       // Windows Socket åº“</span><br><span class="line">advapi32.lib     // Windows API åº“</span><br></pre></td></tr></table></figure><p><strong>Visual Studio é…ç½®</strong>:</p><ol><li><p><strong>é…ç½®å±æ€§</strong> â†’ <strong>é“¾æ¥å™¨</strong> â†’ <strong>å¸¸è§„</strong></p></li><li><p><strong>é™„åŠ åº“ç›®å½•</strong> æ·»åŠ ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Program Files\PostgreSQL\16\lib</span><br></pre></td></tr></table></figure></li><li><p><strong>é…ç½®å±æ€§</strong> â†’ <strong>é“¾æ¥å™¨</strong> â†’ <strong>è¾“å…¥</strong></p></li><li><p><strong>é™„åŠ ä¾èµ–é¡¹</strong> æ·»åŠ ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">libpq.lib;ws2_32.lib;advapi32.lib;</span><br></pre></td></tr></table></figure></li></ol><h3 id="4-3-ğŸ”„-è¿è¡Œæ—¶ä¾èµ–é…ç½®"><a href="#4-3-ğŸ”„-è¿è¡Œæ—¶ä¾èµ–é…ç½®" class="headerlink" title="4.3 ğŸ”„ è¿è¡Œæ—¶ä¾èµ–é…ç½®"></a>4.3 ğŸ”„ è¿è¡Œæ—¶ä¾èµ–é…ç½®</h3><p><strong>DLL æ–‡ä»¶</strong>: <code>C:\Program Files\PostgreSQL\16\bin\libpq.dll</code></p><p><strong>é…ç½®æ–¹æ³• (ä¸‰é€‰ä¸€)</strong>:</p><h4 id="æ–¹æ³•ä¸€ï¼šç¯å¢ƒå˜é‡é…ç½®-æ¨è"><a href="#æ–¹æ³•ä¸€ï¼šç¯å¢ƒå˜é‡é…ç½®-æ¨è" class="headerlink" title="æ–¹æ³•ä¸€ï¼šç¯å¢ƒå˜é‡é…ç½® (æ¨è)"></a>æ–¹æ³•ä¸€ï¼šç¯å¢ƒå˜é‡é…ç½® (æ¨è)</h4><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># PostgreSQL C++ Windows å®‰è£…æŒ‡å—</span><br><span class="line">setx <span class="built_in">PATH</span> &quot;<span class="variable">%PATH%</span>;C:\Program Files\PostgreSQL\<span class="number">16</span>\bin&quot;</span><br><span class="line"></span><br><span class="line"># PostgreSQL C++ Windows å®‰è£…æŒ‡å—</span><br><span class="line"># PostgreSQL C++ Windows å®‰è£…æŒ‡å—</span><br></pre></td></tr></table></figure><h4 id="æ–¹æ³•äºŒï¼šé¡¹ç›®é…ç½®"><a href="#æ–¹æ³•äºŒï¼šé¡¹ç›®é…ç½®" class="headerlink" title="æ–¹æ³•äºŒï¼šé¡¹ç›®é…ç½®"></a>æ–¹æ³•äºŒï¼šé¡¹ç›®é…ç½®</h4><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># PostgreSQL C++ Windows å®‰è£…æŒ‡å—</span><br><span class="line"><span class="built_in">set</span> <span class="built_in">PATH</span>=C:\Program Files\PostgreSQL\<span class="number">16</span>\bin;<span class="variable">%PATH%</span></span><br><span class="line">your_app.exe</span><br></pre></td></tr></table></figure><h4 id="æ–¹æ³•ä¸‰ï¼šå¤åˆ¶-DLL"><a href="#æ–¹æ³•ä¸‰ï¼šå¤åˆ¶-DLL" class="headerlink" title="æ–¹æ³•ä¸‰ï¼šå¤åˆ¶ DLL"></a>æ–¹æ³•ä¸‰ï¼šå¤åˆ¶ DLL</h4><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># PostgreSQL C++ Windows å®‰è£…æŒ‡å—</span><br><span class="line"><span class="built_in">copy</span> &quot;C:\Program Files\PostgreSQL\<span class="number">16</span>\bin\libpq.dll&quot; &quot;your_project_dir\Debug\&quot;</span><br><span class="line"><span class="built_in">copy</span> &quot;C:\Program Files\PostgreSQL\<span class="number">16</span>\bin\libpq.dll&quot; &quot;your_project_dir\Release\&quot;</span><br></pre></td></tr></table></figure><hr><h2 id="5-ğŸ§ª-éªŒè¯ä¸æµ‹è¯•"><a href="#5-ğŸ§ª-éªŒè¯ä¸æµ‹è¯•" class="headerlink" title="5. ğŸ§ª éªŒè¯ä¸æµ‹è¯•"></a>5. ğŸ§ª éªŒè¯ä¸æµ‹è¯•</h2><h3 id="5-1-ğŸ“„-æµ‹è¯•ç¨‹åº"><a href="#5-1-ğŸ“„-æµ‹è¯•ç¨‹åº" class="headerlink" title="5.1 ğŸ“„ æµ‹è¯•ç¨‹åº"></a>5.1 ğŸ“„ æµ‹è¯•ç¨‹åº</h3><p>åˆ›å»ºæµ‹è¯•æ–‡ä»¶ <code>test_pgsql.c</code>:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;libpq-fe.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;ğŸ˜ PostgreSQL C Development Environment Test\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;=============================================\n\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1. æ£€æŸ¥ libpq ç‰ˆæœ¬</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;ğŸ“‹ libpq Library Information:\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;   Version: %s\n&quot;</span>, PQlibVersion());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. è¿æ¥å­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="type">const</span> <span class="type">char</span> *conninfo = <span class="string">&quot;host=localhost port=5432 dbname=postgres user=postgres password=your_password&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\nğŸ”Œ Attempting to connect to PostgreSQL...\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. å»ºç«‹è¿æ¥</span></span><br><span class="line">    PGconn *conn = PQconnectdb(conninfo);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (PQstatus(conn) != CONNECTION_OK) &#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">&quot;âŒ Connection failed: %s\n&quot;</span>, PQerrorMessage(conn));</span><br><span class="line">        PQfinish(conn);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;âœ… Connection established successfully!\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 4. è·å–æœåŠ¡å™¨ä¿¡æ¯</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\nğŸ“Š Server Information:\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;   Host: %s\n&quot;</span>, PQhost(conn));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;   Port: %s\n&quot;</span>, PQport(conn));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;   Database: %s\n&quot;</span>, PQdb(conn));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;   User: %s\n&quot;</span>, PQuser(conn));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 5. æ‰§è¡Œç®€å•æŸ¥è¯¢</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\nğŸ” Executing test query...\n&quot;</span>);</span><br><span class="line">    PGresult *res = PQexec(conn, <span class="string">&quot;SELECT version() as version, current_database() as database&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (PQresultStatus(res) != PGRES_TUPLES_OK) &#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>, <span class="string">&quot;âŒ Query failed: %s\n&quot;</span>, PQerrorMessage(conn));</span><br><span class="line">        PQclear(res);</span><br><span class="line">        PQfinish(conn);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 6. æ˜¾ç¤ºæŸ¥è¯¢ç»“æœ</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;âœ… Query executed successfully!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;ğŸ“‹ Query Results:\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> rows = PQntuples(res);</span><br><span class="line">    <span class="type">int</span> cols = PQnfields(res);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; rows; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; cols; j++) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;   %s: %s\n&quot;</span>, PQfname(res, j), PQgetvalue(res, i, j));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 7. æ¸…ç†èµ„æº</span></span><br><span class="line">    PQclear(res);</span><br><span class="line">    PQfinish(conn);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\nğŸ‰ All tests completed successfully!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;ğŸš€ Your PostgreSQL C development environment is ready!\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-2-ğŸ”¨-ç¼–è¯‘å‘½ä»¤"><a href="#5-2-ğŸ”¨-ç¼–è¯‘å‘½ä»¤" class="headerlink" title="5.2 ğŸ”¨ ç¼–è¯‘å‘½ä»¤"></a>5.2 ğŸ”¨ ç¼–è¯‘å‘½ä»¤</h3><h4 id="Visual-Studio-ç¼–è¯‘"><a href="#Visual-Studio-ç¼–è¯‘" class="headerlink" title="Visual Studio ç¼–è¯‘"></a>Visual Studio ç¼–è¯‘</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># PostgreSQL C++ Windows å®‰è£…æŒ‡å—</span></span><br><span class="line"><span class="comment"># PostgreSQL C++ Windows å®‰è£…æŒ‡å—</span></span><br><span class="line">msbuild YourProject.vcxproj /p:Configuration=Debug</span><br></pre></td></tr></table></figure><h4 id="å‘½ä»¤è¡Œç¼–è¯‘-cl-exe"><a href="#å‘½ä»¤è¡Œç¼–è¯‘-cl-exe" class="headerlink" title="å‘½ä»¤è¡Œç¼–è¯‘ (cl.exe)"></a>å‘½ä»¤è¡Œç¼–è¯‘ (cl.exe)</h4><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># PostgreSQL C++ Windows å®‰è£…æŒ‡å—</span><br><span class="line">&quot;C:\Program Files (x86)\Microsoft Visual Studio\<span class="number">2019</span>\Enterprise\VC\Auxiliary\Build\vcvars64.bat&quot;</span><br><span class="line"></span><br><span class="line"># PostgreSQL C++ Windows å®‰è£…æŒ‡å—</span><br><span class="line">cl /EHsc /I&quot;C:\Program Files\PostgreSQL\<span class="number">16</span>\include&quot; ^</span><br><span class="line">   test_pgsql.c /link ^</span><br><span class="line">   /LIBPATH:&quot;C:\Program Files\PostgreSQL\<span class="number">16</span>\lib&quot; ^</span><br><span class="line">   libpq.lib ws2_32.lib advapi32.lib</span><br></pre></td></tr></table></figure><h4 id="GCC-MinGW-ç¼–è¯‘"><a href="#GCC-MinGW-ç¼–è¯‘" class="headerlink" title="GCC (MinGW) ç¼–è¯‘"></a>GCC (MinGW) ç¼–è¯‘</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gcc -o test_pgsql test_pgsql.c ^</span><br><span class="line">   -I<span class="string">&quot;C:\Program Files\PostgreSQL\16\include&quot;</span> ^</span><br><span class="line">   -L<span class="string">&quot;C:\Program Files\PostgreSQL\16\lib&quot;</span> ^</span><br><span class="line">   -lpq -lws2_32 -ladvapi32</span><br></pre></td></tr></table></figure><h3 id="5-3-âœ…-é¢„æœŸè¾“å‡º"><a href="#5-3-âœ…-é¢„æœŸè¾“å‡º" class="headerlink" title="5.3 âœ… é¢„æœŸè¾“å‡º"></a>5.3 âœ… é¢„æœŸè¾“å‡º</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">ğŸ˜ PostgreSQL C Development Environment Test</span><br><span class="line">=============================================</span><br><span class="line"></span><br><span class="line">ğŸ“‹ libpq Library Information:</span><br><span class="line">   Version: 160001</span><br><span class="line"></span><br><span class="line">ğŸ”Œ Attempting to connect to PostgreSQL...</span><br><span class="line">âœ… Connection established successfully!</span><br><span class="line"></span><br><span class="line">ğŸ“Š Server Information:</span><br><span class="line">   Host: localhost</span><br><span class="line">   Port: 5432</span><br><span class="line">   Database: postgres</span><br><span class="line">   User: postgres</span><br><span class="line"></span><br><span class="line">ğŸ” Executing test query...</span><br><span class="line">âœ… Query executed successfully!</span><br><span class="line">ğŸ“‹ Query Results:</span><br><span class="line">   version: PostgreSQL 16.1, compiled by Visual C++ build 1938, 64-bit</span><br><span class="line">   database: postgres</span><br><span class="line"></span><br><span class="line">ğŸ‰ All tests completed successfully!</span><br><span class="line">ğŸš€ Your PostgreSQL C development environment is ready!</span><br></pre></td></tr></table></figure><hr><h2 id="6-ğŸ”§-å¸¸è§é—®é¢˜è§£å†³"><a href="#6-ğŸ”§-å¸¸è§é—®é¢˜è§£å†³" class="headerlink" title="6. ğŸ”§ å¸¸è§é—®é¢˜è§£å†³"></a>6. ğŸ”§ å¸¸è§é—®é¢˜è§£å†³</h2><h3 id="6-1-âŒ-ç¼–è¯‘é”™è¯¯"><a href="#6-1-âŒ-ç¼–è¯‘é”™è¯¯" class="headerlink" title="6.1 âŒ ç¼–è¯‘é”™è¯¯"></a>6.1 âŒ ç¼–è¯‘é”™è¯¯</h3><h4 id="é”™è¯¯-æ— æ³•æ‰“å¼€æºæ–‡ä»¶-libpq-fe-h"><a href="#é”™è¯¯-æ— æ³•æ‰“å¼€æºæ–‡ä»¶-libpq-fe-h" class="headerlink" title="é”™è¯¯: æ— æ³•æ‰“å¼€æºæ–‡ä»¶: &#39;libpq-fe.h&#39;"></a>é”™è¯¯: <code>æ— æ³•æ‰“å¼€æºæ–‡ä»¶: &#39;libpq-fe.h&#39;</code></h4><p><strong>è§£å†³æ–¹æ¡ˆ</strong>:</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># PostgreSQL C++ Windows å®‰è£…æŒ‡å—</span></span><br><span class="line"><span class="comment"># PostgreSQL C++ Windows å®‰è£…æŒ‡å—</span></span><br><span class="line"><span class="keyword">include_directories</span>(<span class="string">&quot;C:/Program Files/PostgreSQL/16/include&quot;</span>)</span><br></pre></td></tr></table></figure><h4 id="é”™è¯¯-æ— æ³•è§£æçš„å¤–éƒ¨ç¬¦å·-PQconnectdb"><a href="#é”™è¯¯-æ— æ³•è§£æçš„å¤–éƒ¨ç¬¦å·-PQconnectdb" class="headerlink" title="é”™è¯¯: æ— æ³•è§£æçš„å¤–éƒ¨ç¬¦å· _PQconnectdb"></a>é”™è¯¯: <code>æ— æ³•è§£æçš„å¤–éƒ¨ç¬¦å· _PQconnectdb</code></h4><p><strong>è§£å†³æ–¹æ¡ˆ</strong>:</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># PostgreSQL C++ Windows å®‰è£…æŒ‡å—</span></span><br><span class="line"><span class="comment"># PostgreSQL C++ Windows å®‰è£…æŒ‡å—</span></span><br><span class="line"><span class="keyword">link_directories</span>(<span class="string">&quot;C:/Program Files/PostgreSQL/16/lib&quot;</span>)</span><br><span class="line"><span class="keyword">target_link_libraries</span>(your_target libpq ws2_32 advapi32)</span><br></pre></td></tr></table></figure><h3 id="6-2-âŒ-è¿è¡Œæ—¶é”™è¯¯"><a href="#6-2-âŒ-è¿è¡Œæ—¶é”™è¯¯" class="headerlink" title="6.2 âŒ è¿è¡Œæ—¶é”™è¯¯"></a>6.2 âŒ è¿è¡Œæ—¶é”™è¯¯</h3><h4 id="é”™è¯¯-æ— æ³•å¯åŠ¨æ­¤ç¨‹åºï¼Œå› ä¸ºè®¡ç®—æœºä¸­ç¼ºå°‘-libpq-dll"><a href="#é”™è¯¯-æ— æ³•å¯åŠ¨æ­¤ç¨‹åºï¼Œå› ä¸ºè®¡ç®—æœºä¸­ç¼ºå°‘-libpq-dll" class="headerlink" title="é”™è¯¯: æ— æ³•å¯åŠ¨æ­¤ç¨‹åºï¼Œå› ä¸ºè®¡ç®—æœºä¸­ç¼ºå°‘ libpq.dll"></a>é”™è¯¯: <code>æ— æ³•å¯åŠ¨æ­¤ç¨‹åºï¼Œå› ä¸ºè®¡ç®—æœºä¸­ç¼ºå°‘ libpq.dll</code></h4><p><strong>è§£å†³æ–¹æ¡ˆ</strong>:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    A[ç¼ºå°‘ libpq.dll] --&gt; B&#123;è§£å†³æ–¹æ¡ˆ&#125;</span><br><span class="line">    B --&gt; C[æ·»åŠ  PATH ç¯å¢ƒå˜é‡]</span><br><span class="line">    B --&gt; D[å¤åˆ¶ DLL åˆ°ç¨‹åºç›®å½•]</span><br><span class="line">    B --&gt; E[ä½¿ç”¨ Visual Studio è°ƒè¯•ç¯å¢ƒ]</span><br><span class="line"></span><br><span class="line">    C --&gt; F[ç³»ç»Ÿå±æ€§ â†’ ç¯å¢ƒå˜é‡ â†’ PATH]</span><br><span class="line">    D --&gt; G[å¤åˆ¶åˆ° Debug/Release æ–‡ä»¶å¤¹]</span><br><span class="line">    E --&gt; H[é¡¹ç›®å±æ€§ â†’ è°ƒè¯• â†’ ç¯å¢ƒ]</span><br></pre></td></tr></table></figure><h4 id="é”™è¯¯-connection-to-server-at-localhost-1-port-5432-failed"><a href="#é”™è¯¯-connection-to-server-at-localhost-1-port-5432-failed" class="headerlink" title="é”™è¯¯: connection to server at &quot;localhost&quot; (::1), port 5432 failed"></a>é”™è¯¯: <code>connection to server at &quot;localhost&quot; (::1), port 5432 failed</code></h4><p><strong>è§£å†³æ–¹æ¡ˆ</strong>:</p><ol><li>æ£€æŸ¥ PostgreSQL æœåŠ¡æ˜¯å¦å¯åŠ¨</li><li>éªŒè¯ç«¯å£å’Œä¸»æœºé…ç½®</li><li>æ£€æŸ¥é˜²ç«å¢™è®¾ç½®</li></ol><h3 id="6-3-âŒ-æƒé™é—®é¢˜"><a href="#6-3-âŒ-æƒé™é—®é¢˜" class="headerlink" title="6.3 âŒ æƒé™é—®é¢˜"></a>6.3 âŒ æƒé™é—®é¢˜</h3><h4 id="é”™è¯¯-FATAL-password-authentication-failed-for-user-postgres"><a href="#é”™è¯¯-FATAL-password-authentication-failed-for-user-postgres" class="headerlink" title="é”™è¯¯: FATAL: password authentication failed for user &quot;postgres&quot;"></a>é”™è¯¯: <code>FATAL: password authentication failed for user &quot;postgres&quot;</code></h4><p><strong>è§£å†³æ–¹æ¡ˆ</strong>:</p><ol><li>ç¡®è®¤å¯†ç æ­£ç¡®</li><li>æ£€æŸ¥ <code>pg_hba.conf</code> è®¤è¯é…ç½®</li><li>é‡ç½® postgres ç”¨æˆ·å¯†ç </li></ol><hr><h2 id="7-ğŸš€-é«˜çº§é…ç½®"><a href="#7-ğŸš€-é«˜çº§é…ç½®" class="headerlink" title="7. ğŸš€ é«˜çº§é…ç½®"></a>7. ğŸš€ é«˜çº§é…ç½®</h2><h3 id="7-1-ğŸ“-CMake-é…ç½®ç¤ºä¾‹"><a href="#7-1-ğŸ“-CMake-é…ç½®ç¤ºä¾‹" class="headerlink" title="7.1 ğŸ“ CMake é…ç½®ç¤ºä¾‹"></a>7.1 ğŸ“ CMake é…ç½®ç¤ºä¾‹</h3><p>åˆ›å»º <code>CMakeLists.txt</code>:</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.10</span>)</span><br><span class="line"><span class="keyword">project</span>(PostgreSQLCTest)</span><br><span class="line"></span><br><span class="line"><span class="comment"># PostgreSQL C++ Windows å®‰è£…æŒ‡å—</span></span><br><span class="line"><span class="keyword">set</span>(CMAKE_C_STANDARD <span class="number">99</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># PostgreSQL C++ Windows å®‰è£…æŒ‡å—</span></span><br><span class="line"><span class="keyword">find_package</span>(PostgreSQL REQUIRED)</span><br><span class="line"></span><br><span class="line"><span class="comment"># PostgreSQL C++ Windows å®‰è£…æŒ‡å—</span></span><br><span class="line"><span class="keyword">include_directories</span>(<span class="variable">$&#123;PostgreSQL_INCLUDE_DIRS&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># PostgreSQL C++ Windows å®‰è£…æŒ‡å—</span></span><br><span class="line"><span class="keyword">add_executable</span>(test_pgsql test_pgsql.c)</span><br><span class="line"></span><br><span class="line"><span class="comment"># PostgreSQL C++ Windows å®‰è£…æŒ‡å—</span></span><br><span class="line"><span class="keyword">target_link_libraries</span>(test_pgsql <span class="variable">$&#123;PostgreSQL_LIBRARIES&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># PostgreSQL C++ Windows å®‰è£…æŒ‡å—</span></span><br><span class="line"><span class="keyword">if</span>(WIN32)</span><br><span class="line">    <span class="keyword">target_link_libraries</span>(test_pgsql ws2_32 advapi32)</span><br><span class="line"><span class="keyword">endif</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment"># PostgreSQL C++ Windows å®‰è£…æŒ‡å—</span></span><br><span class="line"><span class="keyword">message</span>(STATUS <span class="string">&quot;PostgreSQL version: $&#123;PostgreSQL_VERSION&#125;&quot;</span>)</span><br><span class="line"><span class="keyword">message</span>(STATUS <span class="string">&quot;PostgreSQL include dir: $&#123;PostgreSQL_INCLUDE_DIRS&#125;&quot;</span>)</span><br><span class="line"><span class="keyword">message</span>(STATUS <span class="string">&quot;PostgreSQL libraries: $&#123;PostgreSQL_LIBRARIES&#125;&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="7-2-ğŸ”’-å®‰å…¨è¿æ¥é…ç½®"><a href="#7-2-ğŸ”’-å®‰å…¨è¿æ¥é…ç½®" class="headerlink" title="7.2 ğŸ”’ å®‰å…¨è¿æ¥é…ç½®"></a>7.2 ğŸ”’ å®‰å…¨è¿æ¥é…ç½®</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SSL è¿æ¥ç¤ºä¾‹</span></span><br><span class="line"><span class="type">const</span> <span class="type">char</span> *conninfo = <span class="string">&quot;host=localhost &quot;</span></span><br><span class="line">                      <span class="string">&quot;port=5432 &quot;</span></span><br><span class="line">                      <span class="string">&quot;dbname=postgres &quot;</span></span><br><span class="line">                      <span class="string">&quot;user=postgres &quot;</span></span><br><span class="line">                      <span class="string">&quot;password=your_password &quot;</span></span><br><span class="line">                      <span class="string">&quot;sslmode=require &quot;</span></span><br><span class="line">                      <span class="string">&quot;sslcert=client.crt &quot;</span></span><br><span class="line">                      <span class="string">&quot;sslkey=client.key&quot;</span>;</span><br><span class="line"></span><br><span class="line">PGconn *conn = PQconnectdb(conninfo);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ£€æŸ¥ SSL çŠ¶æ€</span></span><br><span class="line"><span class="keyword">if</span> (PQsslInUse(conn)) &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;âœ… SSL connection established\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;   SSL Protocol: %s\n&quot;</span>, PQsslAttribute(conn, <span class="string">&quot;protocol&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="7-3-ğŸ“Š-æ€§èƒ½ä¼˜åŒ–é…ç½®"><a href="#7-3-ğŸ“Š-æ€§èƒ½ä¼˜åŒ–é…ç½®" class="headerlink" title="7.3 ğŸ“Š æ€§èƒ½ä¼˜åŒ–é…ç½®"></a>7.3 ğŸ“Š æ€§èƒ½ä¼˜åŒ–é…ç½®</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿æ¥æ± é…ç½®ç¤ºä¾‹</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAX_CONNECTIONS 10</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    PGconn *connections[MAX_CONNECTIONS];</span><br><span class="line">    <span class="type">int</span> available[MAX_CONNECTIONS];</span><br><span class="line">    <span class="type">int</span> count;</span><br><span class="line">&#125; ConnectionPool;</span><br><span class="line"></span><br><span class="line">ConnectionPool* <span class="title function_">create_pool</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* conninfo)</span> &#123;</span><br><span class="line">    ConnectionPool *pool = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(ConnectionPool));</span><br><span class="line">    pool-&gt;count = MAX_CONNECTIONS;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; MAX_CONNECTIONS; i++) &#123;</span><br><span class="line">        pool-&gt;connections[i] = PQconnectdb(conninfo);</span><br><span class="line">        pool-&gt;available[i] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> pool;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">PGconn* <span class="title function_">get_connection</span><span class="params">(ConnectionPool *pool)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; pool-&gt;count; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (pool-&gt;available[i]) &#123;</span><br><span class="line">            pool-&gt;available[i] = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">return</span> pool-&gt;connections[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NULL</span>; <span class="comment">// æ‰€æœ‰è¿æ¥éƒ½åœ¨ä½¿ç”¨ä¸­</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="ğŸ“Š-æ€»ç»“"><a href="#ğŸ“Š-æ€»ç»“" class="headerlink" title="ğŸ“Š æ€»ç»“"></a>ğŸ“Š æ€»ç»“</h2><h3 id="âœ…-é…ç½®å®Œæˆæ£€æŸ¥æ¸…å•"><a href="#âœ…-é…ç½®å®Œæˆæ£€æŸ¥æ¸…å•" class="headerlink" title="âœ… é…ç½®å®Œæˆæ£€æŸ¥æ¸…å•"></a>âœ… é…ç½®å®Œæˆæ£€æŸ¥æ¸…å•</h3><ul><li><input checked="" disabled="" type="checkbox"> PostgreSQL æœåŠ¡å™¨å®‰è£…å®Œæˆ</li><li><input checked="" disabled="" type="checkbox"> C å®¢æˆ·ç«¯åº“ (libpq) å®‰è£…å®Œæˆ</li><li><input checked="" disabled="" type="checkbox"> å¼€å‘ç¯å¢ƒé…ç½®æ­£ç¡®</li><li><input checked="" disabled="" type="checkbox"> æµ‹è¯•ç¨‹åºç¼–è¯‘è¿è¡ŒæˆåŠŸ</li><li><input checked="" disabled="" type="checkbox"> åŸºæœ¬æ•°æ®åº“æ“ä½œæ­£å¸¸å·¥ä½œ</li><li><input checked="" disabled="" type="checkbox"> é”™è¯¯å¤„ç†æœºåˆ¶å®Œå–„</li></ul><h3 id="ğŸ¯-ä¸‹ä¸€æ­¥å»ºè®®"><a href="#ğŸ¯-ä¸‹ä¸€æ­¥å»ºè®®" class="headerlink" title="ğŸ¯ ä¸‹ä¸€æ­¥å»ºè®®"></a>ğŸ¯ ä¸‹ä¸€æ­¥å»ºè®®</h3><ol><li><strong>å­¦ä¹  libpq API</strong>ï¼šæŒæ¡è¿æ¥ç®¡ç†ã€æŸ¥è¯¢æ‰§è¡Œã€ç»“æœå¤„ç†</li><li><strong>å®ç°è¿æ¥æ± </strong>ï¼šæé«˜åº”ç”¨ç¨‹åºæ€§èƒ½</li><li><strong>å¼‚æ­¥ç¼–ç¨‹</strong>ï¼šä½¿ç”¨éé˜»å¡æ“ä½œæå‡å“åº”æ€§</li><li><strong>é”™è¯¯å¤„ç†</strong>ï¼šå®Œå–„å¼‚å¸¸æƒ…å†µå’Œèµ„æºæ¸…ç†</li><li><strong>äº‹åŠ¡ç®¡ç†</strong>ï¼šç¡®ä¿æ•°æ®ä¸€è‡´æ€§</li></ol><h3 id="ğŸ“š-æ¨èèµ„æº"><a href="#ğŸ“š-æ¨èèµ„æº" class="headerlink" title="ğŸ“š æ¨èèµ„æº"></a>ğŸ“š æ¨èèµ„æº</h3><ul><li><a href="https://www.postgresql.org/docs/current/libpq.html">PostgreSQL å®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://www.postgresql.org/docs/current/libpq-C.html">libpq C API å‚è€ƒ</a></li><li><a href="https://www.postgresqltutorial.com/">PostgreSQL æ•™ç¨‹</a></li><li><a href="https://isocpp.org/">C æ•°æ®åº“ç¼–ç¨‹æœ€ä½³å®è·µ</a></li></ul><hr><blockquote><p><strong>ğŸ’¡ æç¤º</strong>:</p><ul><li>é¦–æ¬¡é…ç½®å¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´ï¼Œè¯·è€å¿ƒæŒ‰ç…§æ­¥éª¤æ“ä½œ</li><li>ç”Ÿäº§ç¯å¢ƒä¸­è¯·ä½¿ç”¨ SSL è¿æ¥å’Œå¼ºå¯†ç </li><li>å®šæœŸå¤‡ä»½æ•°æ®åº“å’Œé…ç½®æ–‡ä»¶</li><li>ç›‘æ§æ•°æ®åº“æ€§èƒ½å’Œè¿æ¥çŠ¶æ€</li></ul></blockquote>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;PostgreSQL-C-Windows-å®‰è£…æŒ‡å—&quot;&gt;&lt;a href=&quot;#PostgreSQL-C-Windows-å®‰è£…æŒ‡å—&quot; class=&quot;headerlink&quot; title=&quot;PostgreSQL C++ Windows</summary>
        
      
    
    
    
    <category term="æ•°æ®åº“ç³»ç»Ÿ" scheme="https://vilaswang.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F/"/>
    
    <category term="å…³ç³»å‹æ•°æ®åº“" scheme="https://vilaswang.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F/%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="æŠ€æœ¯æ–‡æ¡£" scheme="https://vilaswang.github.io/tags/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/"/>
    
    <category term="æŒ‡å—" scheme="https://vilaswang.github.io/tags/%E6%8C%87%E5%8D%97/"/>
    
  </entry>
  
  <entry>
    <title>Web è®¤è¯æ–¹æ³•æŒ‡å—</title>
    <link href="https://vilaswang.github.io/posts/f2ed900f/"/>
    <id>https://vilaswang.github.io/posts/f2ed900f/</id>
    <published>2025-12-09T06:09:56.000Z</published>
    <updated>2025-12-17T15:36:29.299Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Web-è®¤è¯æ–¹æ³•æŒ‡å—"><a href="#Web-è®¤è¯æ–¹æ³•æŒ‡å—" class="headerlink" title="Web è®¤è¯æ–¹æ³•æŒ‡å—"></a>Web è®¤è¯æ–¹æ³•æŒ‡å—</h1><blockquote><p><strong>æ–‡æ¡£åˆ›å»ºæ—¶é—´</strong>: 2025-11-14<br><strong>æœ€åæ›´æ–°</strong>: 2025-11-14<br><strong>æ ‡ç­¾</strong>: <code>web</code>, <code>authentication</code>, <code>authorization</code>, <code>security</code>, <code>session</code>, <code>jwt</code>, <code>oauth</code></p></blockquote><h2 id="ğŸ“‘-ç›®å½•"><a href="#ğŸ“‘-ç›®å½•" class="headerlink" title="ğŸ“‘ ç›®å½•"></a>ğŸ“‘ ç›®å½•</h2><ul><li><a href="#1-%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5">1. æ ¸å¿ƒæ¦‚å¿µ</a><ul><li><a href="#11-%E8%AE%A4%E8%AF%81-vs-%E6%8E%88%E6%9D%83">1.1 è®¤è¯ vs. æˆæƒ</a></li></ul></li><li><a href="#2-session-cookie-%E8%AE%A4%E8%AF%81">2. Session-Cookie è®¤è¯</a><ul><li><a href="#21-%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86">2.1 å·¥ä½œåŸç†</a></li><li><a href="#22-%E5%AE%9E%E7%8E%B0%E7%A4%BA%E4%BE%8B">2.2 å®ç°ç¤ºä¾‹</a></li><li><a href="#23-%E4%BC%98%E7%BC%BA%E7%82%B9">2.3 ä¼˜ç¼ºç‚¹</a></li></ul></li><li><a href="#3-token-%E8%AE%A4%E8%AF%81jwt">3. Token è®¤è¯ï¼ˆJWTï¼‰</a><ul><li><a href="#31-%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86">3.1 å·¥ä½œåŸç†</a></li><li><a href="#32-%E5%AE%9E%E7%8E%B0%E7%A4%BA%E4%BE%8B">3.2 å®ç°ç¤ºä¾‹</a></li><li><a href="#33-%E4%BC%98%E7%BC%BA%E7%82%B9">3.3 ä¼˜ç¼ºç‚¹</a></li></ul></li><li><a href="#4-oauth-%E8%AE%A4%E8%AF%81">4. OAuth è®¤è¯</a><ul><li><a href="#41-%E8%AE%A4%E8%AF%81%E6%B5%81%E7%A8%8B">4.1 è®¤è¯æµç¨‹</a></li><li><a href="#42-%E5%AE%9E%E7%8E%B0%E7%A4%BA%E4%BE%8B">4.2 å®ç°ç¤ºä¾‹</a></li></ul></li><li><a href="#5-%E6%96%B9%E6%A1%88%E5%AF%B9%E6%AF%94%E4%B8%8E%E9%80%89%E6%8B%A9">5. æ–¹æ¡ˆå¯¹æ¯”ä¸é€‰æ‹©</a><ul><li><a href="#51-%E5%AF%B9%E6%AF%94%E8%A1%A8">5.1 å¯¹æ¯”è¡¨</a></li><li><a href="#52-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF">5.2 ä½¿ç”¨åœºæ™¯</a></li></ul></li></ul><hr><h2 id="1-æ ¸å¿ƒæ¦‚å¿µ"><a href="#1-æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="1. æ ¸å¿ƒæ¦‚å¿µ"></a>1. æ ¸å¿ƒæ¦‚å¿µ</h2><h3 id="1-1-ğŸ”-è®¤è¯-vs-æˆæƒ"><a href="#1-1-ğŸ”-è®¤è¯-vs-æˆæƒ" class="headerlink" title="1.1 ğŸ” è®¤è¯ vs. æˆæƒ"></a>1.1 ğŸ” è®¤è¯ vs. æˆæƒ</h3><table><thead><tr><th>æ¦‚å¿µ</th><th>é—®é¢˜</th><th>è§£å†³æ–¹æ¡ˆ</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><strong>è®¤è¯</strong></td><td>â€œä½ æ˜¯è°ï¼Ÿâ€</td><td>éªŒè¯ç”¨æˆ·èº«ä»½</td><td>ç”¨æˆ·åå¯†ç ç™»å½•</td></tr><tr><td><strong>æˆæƒ</strong></td><td>â€œä½ èƒ½åšä»€ä¹ˆï¼Ÿâ€</td><td>éªŒè¯ç”¨æˆ·æƒé™</td><td>æ˜¯å¦å…è®¸åˆ é™¤æ–‡ç« </td></tr></tbody></table><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">    A[ç”¨æˆ·] --&gt; B[è®¤è¯ Authentication]</span><br><span class="line">    B --&gt; C[ä½ æ˜¯è°ï¼Ÿ]</span><br><span class="line">    B --&gt; D[èº«ä»½éªŒè¯]</span><br><span class="line">    D --&gt; E[æˆæƒ Authorization]</span><br><span class="line">    E --&gt; F[ä½ èƒ½åšä»€ä¹ˆï¼Ÿ]</span><br><span class="line">    E --&gt; G[æƒé™æ£€æŸ¥]</span><br></pre></td></tr></table></figure><hr><h2 id="2-Session-Cookie-è®¤è¯"><a href="#2-Session-Cookie-è®¤è¯" class="headerlink" title="2. Session-Cookie è®¤è¯"></a>2. Session-Cookie è®¤è¯</h2><p>è¿™æ˜¯æœ€ä¼ ç»Ÿã€æœ€æ˜“äºç†è§£çš„è®¤è¯æ–¹å¼ã€‚å®ƒä¾èµ–äºæœåŠ¡å™¨ç«¯çš„ Session å­˜å‚¨å’Œå®¢æˆ·ç«¯çš„ Cookieã€‚</p><h3 id="2-1-âš™ï¸-å·¥ä½œåŸç†"><a href="#2-1-âš™ï¸-å·¥ä½œåŸç†" class="headerlink" title="2.1 âš™ï¸ å·¥ä½œåŸç†"></a>2.1 âš™ï¸ å·¥ä½œåŸç†</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">    participant U as User</span><br><span class="line">    participant B as Browser</span><br><span class="line">    participant S as Server</span><br><span class="line">    participant DB as Session Store</span><br><span class="line"></span><br><span class="line">    U-&gt;&gt;B: è¾“å…¥ç”¨æˆ·åå¯†ç </span><br><span class="line">    B-&gt;&gt;S: POST /login</span><br><span class="line">    S-&gt;&gt;DB: éªŒè¯ç”¨æˆ·å‡­æ®</span><br><span class="line">    DB--&gt;&gt;S: è¿”å›ç”¨æˆ·ä¿¡æ¯</span><br><span class="line">    S-&gt;&gt;DB: åˆ›å»ºSession</span><br><span class="line">    DB--&gt;&gt;S: è¿”å›Session ID</span><br><span class="line">    S--&gt;&gt;B: Set-Cookie: session_id</span><br><span class="line">    B-&gt;&gt;S: GET /protected (Cookie)</span><br><span class="line">    S-&gt;&gt;DB: éªŒè¯Session ID</span><br><span class="line">    DB--&gt;&gt;S: è¿”å›Sessionæ•°æ®</span><br><span class="line">    S--&gt;&gt;B: è¿”å›å—ä¿æŠ¤å†…å®¹</span><br></pre></td></tr></table></figure><p><strong>å·¥ä½œæµç¨‹</strong>ï¼š</p><ol><li>ç”¨æˆ·ç™»å½•ï¼ŒæœåŠ¡å™¨éªŒè¯ç”¨æˆ·åå’Œå¯†ç </li><li>éªŒè¯é€šè¿‡åï¼ŒæœåŠ¡å™¨åœ¨å†…å­˜æˆ–æ•°æ®åº“ä¸­åˆ›å»ºå”¯ä¸€çš„ <code>Session</code> è®°å½•</li><li>æœåŠ¡å™¨é€šè¿‡ <code>Set-Cookie</code> å°† <code>Session ID</code> è¿”å›ç»™æµè§ˆå™¨</li><li>æµè§ˆå™¨åç»­è¯·æ±‚è‡ªåŠ¨é€šè¿‡ <code>Cookie</code> æºå¸¦ <code>Session ID</code></li><li>æœåŠ¡å™¨éªŒè¯ <code>Session ID</code> ç¡®è®¤ç”¨æˆ·èº«ä»½</li></ol><h3 id="2-2-ğŸ’»-å®ç°ç¤ºä¾‹"><a href="#2-2-ğŸ’»-å®ç°ç¤ºä¾‹" class="headerlink" title="2.2 ğŸ’» å®ç°ç¤ºä¾‹"></a>2.2 ğŸ’» å®ç°ç¤ºä¾‹</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> session = <span class="built_in">require</span>(<span class="string">&#x27;express-session&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// é…ç½® session ä¸­é—´ä»¶</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">session</span>(&#123;</span><br><span class="line">  <span class="attr">secret</span>: <span class="string">&#x27;your_secret_key&#x27;</span>, <span class="comment">// ç”¨äºåŠ å¯† session ID çš„å¯†é’¥ï¼Œéå¸¸é‡è¦</span></span><br><span class="line">  <span class="attr">resave</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">saveUninitialized</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">cookie</span>: &#123;</span><br><span class="line">    <span class="attr">secure</span>: <span class="literal">false</span>, <span class="comment">// ç”Ÿäº§ç¯å¢ƒåº”è®¾ä¸º true (ä»… HTTPS)</span></span><br><span class="line">    <span class="attr">maxAge</span>: <span class="number">60000</span>, <span class="comment">// 1åˆ†é’Ÿ</span></span><br><span class="line">    <span class="attr">httpOnly</span>: <span class="literal">true</span> <span class="comment">// é˜²æ­¢ XSS æ”»å‡»</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;));</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç™»å½•è·¯ç”±</span></span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/login&#x27;</span>, express.<span class="title function_">json</span>(), <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; username, password &#125; = req.<span class="property">body</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 1. éªŒè¯ç”¨æˆ·åå’Œå¯†ç  (è¿™é‡Œåº”ä¸ºæ•°æ®åº“æŸ¥è¯¢å’Œå¯†ç æ¯”å¯¹)</span></span><br><span class="line">  <span class="keyword">if</span> (username === <span class="string">&#x27;admin&#x27;</span> &amp;&amp; password === <span class="string">&#x27;123456&#x27;</span>) &#123;</span><br><span class="line">    <span class="comment">// 2. è®¤è¯æˆåŠŸï¼Œå°†ç”¨æˆ·ä¿¡æ¯å­˜å…¥ session</span></span><br><span class="line">    req.<span class="property">session</span>.<span class="property">isLoggedIn</span> = <span class="literal">true</span>;</span><br><span class="line">    req.<span class="property">session</span>.<span class="property">user</span> = &#123;</span><br><span class="line">      <span class="attr">username</span>: username,</span><br><span class="line">      <span class="attr">loginTime</span>: <span class="keyword">new</span> <span class="title class_">Date</span>()</span><br><span class="line">    &#125;;</span><br><span class="line">    res.<span class="title function_">json</span>(&#123; <span class="attr">message</span>: <span class="string">&#x27;ç™»å½•æˆåŠŸï¼&#x27;</span> &#125;);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    res.<span class="title function_">status</span>(<span class="number">401</span>).<span class="title function_">json</span>(&#123; <span class="attr">error</span>: <span class="string">&#x27;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯&#x27;</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å—ä¿æŠ¤çš„è·¯ç”±ï¼Œéœ€è¦ç™»å½•æ‰èƒ½è®¿é—®</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/profile&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 3. æ£€æŸ¥ session ä¸­æ˜¯å¦å­˜åœ¨ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">  <span class="keyword">if</span> (req.<span class="property">session</span>.<span class="property">isLoggedIn</span>) &#123;</span><br><span class="line">    res.<span class="title function_">json</span>(&#123;</span><br><span class="line">      <span class="attr">message</span>: <span class="string">`æ¬¢è¿å›æ¥, <span class="subst">$&#123;req.session.user.username&#125;</span>`</span>,</span><br><span class="line">      <span class="attr">loginTime</span>: req.<span class="property">session</span>.<span class="property">user</span>.<span class="property">loginTime</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    res.<span class="title function_">status</span>(<span class="number">401</span>).<span class="title function_">json</span>(&#123; <span class="attr">error</span>: <span class="string">&#x27;è¯·å…ˆç™»å½•ï¼&#x27;</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç™»å‡ºè·¯ç”±</span></span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/logout&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 4. é”€æ¯ session</span></span><br><span class="line">  req.<span class="property">session</span>.<span class="title function_">destroy</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">500</span>).<span class="title function_">json</span>(&#123; <span class="attr">error</span>: <span class="string">&#x27;ç™»å‡ºå¤±è´¥&#x27;</span> &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    res.<span class="title function_">clearCookie</span>(<span class="string">&#x27;connect.sid&#x27;</span>); <span class="comment">// æ¸…é™¤ Cookie</span></span><br><span class="line">    res.<span class="title function_">json</span>(&#123; <span class="attr">message</span>: <span class="string">&#x27;å·²ç™»å‡º&#x27;</span> &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>);</span><br></pre></td></tr></table></figure><h3 id="2-3-âœ…-ä¼˜ç¼ºç‚¹"><a href="#2-3-âœ…-ä¼˜ç¼ºç‚¹" class="headerlink" title="2.3 âœ… ä¼˜ç¼ºç‚¹"></a>2.3 âœ… ä¼˜ç¼ºç‚¹</h3><table><thead><tr><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>âœ… æŠ€æœ¯æˆç†Ÿï¼Œæ˜“äºç†è§£</td><td>âŒ åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­éœ€è¦å…±äº« Session å­˜å‚¨</td></tr><tr><td>âœ… æ˜“äºæ§åˆ¶ï¼ˆæœåŠ¡ç«¯å¯å¼ºåˆ¶å¤±æ•ˆï¼‰</td><td>âŒ ä¾èµ– Cookieï¼Œè·¨åŸŸåœºæ™¯å¤æ‚</td></tr><tr><td>âœ… å®‰å…¨æ€§è¾ƒé«˜ï¼ˆhttpOnly Cookieï¼‰</td><td>âŒ å ç”¨æœåŠ¡å™¨å­˜å‚¨èµ„æº</td></tr><tr><td>âœ… é€‚åˆä¼ ç»Ÿçš„æœåŠ¡å™¨ç«¯æ¸²æŸ“åº”ç”¨</td><td>âŒ CSRF æ”»å‡»é£é™©</td></tr></tbody></table><hr><h2 id="3-Token-è®¤è¯ï¼ˆJWTï¼‰"><a href="#3-Token-è®¤è¯ï¼ˆJWTï¼‰" class="headerlink" title="3. Token è®¤è¯ï¼ˆJWTï¼‰"></a>3. Token è®¤è¯ï¼ˆJWTï¼‰</h2><p>è¿™æ˜¯ä¸€ç§<strong>æ— çŠ¶æ€</strong>çš„è®¤è¯æ–¹å¼ã€‚æœåŠ¡å™¨ä¸å†å­˜å‚¨ä¼šè¯ä¿¡æ¯ï¼Œè€Œæ˜¯å°†æ‰€æœ‰è®¤è¯ä¿¡æ¯åŠ å¯†åå½¢æˆä¸€ä¸ªä»¤ç‰Œï¼ˆTokenï¼‰ã€‚</p><h3 id="3-1-âš™ï¸-å·¥ä½œåŸç†"><a href="#3-1-âš™ï¸-å·¥ä½œåŸç†" class="headerlink" title="3.1 âš™ï¸ å·¥ä½œåŸç†"></a>3.1 âš™ï¸ å·¥ä½œåŸç†</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">    participant U as User</span><br><span class="line">    participant C as Client</span><br><span class="line">    participant S as Server</span><br><span class="line"></span><br><span class="line">    U-&gt;&gt;C: è¾“å…¥ç”¨æˆ·åå¯†ç </span><br><span class="line">    C-&gt;&gt;S: POST /login</span><br><span class="line">    S-&gt;&gt;S: éªŒè¯ç”¨æˆ·å‡­æ®</span><br><span class="line">    S-&gt;&gt;S: ç”ŸæˆJWT Token</span><br><span class="line">    S--&gt;&gt;C: è¿”å›JWT Token</span><br><span class="line">    C-&gt;&gt;C: å­˜å‚¨ Token (localStorage)</span><br><span class="line"></span><br><span class="line">    Note over C,S: åç»­è¯·æ±‚</span><br><span class="line">    C-&gt;&gt;S: GET /api/data&lt;br/&gt;Authorization: Bearer &lt;token&gt;</span><br><span class="line">    S-&gt;&gt;S: éªŒè¯ Token ç­¾å</span><br><span class="line">    S--&gt;&gt;C: è¿”å›æ•°æ®</span><br></pre></td></tr></table></figure><p><strong>JWT ç»“æ„</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Header.Payload.Signature</span><br><span class="line"></span><br><span class="line">ä¾‹å¦‚ï¼š</span><br><span class="line">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImFkbWluIiwicm9sZSI6InVzZXIiLCJpYXQiOjE2MzU2Nzg5MDJ9.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c</span><br></pre></td></tr></table></figure><h3 id="3-2-ğŸ’»-å®ç°ç¤ºä¾‹"><a href="#3-2-ğŸ’»-å®ç°ç¤ºä¾‹" class="headerlink" title="3.2 ğŸ’» å®ç°ç¤ºä¾‹"></a>3.2 ğŸ’» å®ç°ç¤ºä¾‹</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> jwt = <span class="built_in">require</span>(<span class="string">&#x27;jsonwebtoken&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">SECRET_KEY</span> = <span class="string">&#x27;your_super_secret_jwt_key&#x27;</span>; <span class="comment">// å¿…é¡»éå¸¸å¤æ‚ï¼Œä¸”å¦¥å–„ä¿ç®¡</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç™»å½•è·¯ç”±ï¼Œé¢å‘ Token</span></span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/login&#x27;</span>, express.<span class="title function_">json</span>(), <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; username, password &#125; = req.<span class="property">body</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 1. éªŒè¯ç”¨æˆ·åå’Œå¯†ç </span></span><br><span class="line">  <span class="keyword">if</span> (username === <span class="string">&#x27;admin&#x27;</span> &amp;&amp; password === <span class="string">&#x27;123456&#x27;</span>) &#123;</span><br><span class="line">    <span class="comment">// 2. è®¤è¯æˆåŠŸï¼Œç”Ÿæˆ JWT</span></span><br><span class="line">    <span class="keyword">const</span> token = jwt.<span class="title function_">sign</span>(</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">username</span>: username,</span><br><span class="line">        <span class="attr">role</span>: <span class="string">&#x27;user&#x27;</span>,</span><br><span class="line">        <span class="attr">iat</span>: <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Date</span>.<span class="title function_">now</span>() / <span class="number">1000</span>) <span class="comment">// ç­¾å‘æ—¶é—´</span></span><br><span class="line">      &#125;, <span class="comment">// Payload (æœ‰æ•ˆè½½è·)ï¼Œå­˜æ”¾ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">      <span class="variable constant_">SECRET_KEY</span>,</span><br><span class="line">      &#123; <span class="attr">expiresIn</span>: <span class="string">&#x27;1h&#x27;</span> &#125; <span class="comment">// Token æœ‰æ•ˆæœŸ 1 å°æ—¶</span></span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    res.<span class="title function_">json</span>(&#123;</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;ç™»å½•æˆåŠŸï¼&#x27;</span>,</span><br><span class="line">      <span class="attr">token</span>: token,</span><br><span class="line">      <span class="attr">expiresIn</span>: <span class="string">&#x27;1h&#x27;</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    res.<span class="title function_">status</span>(<span class="number">401</span>).<span class="title function_">json</span>(&#123; <span class="attr">error</span>: <span class="string">&#x27;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯&#x27;</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸­é—´ä»¶ï¼šéªŒè¯ Token</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">authenticateJWT</span> = (<span class="params">req, res, next</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> authHeader = req.<span class="property">headers</span>.<span class="property">authorization</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (authHeader) &#123;</span><br><span class="line">    <span class="keyword">const</span> token = authHeader.<span class="title function_">split</span>(<span class="string">&#x27; &#x27;</span>)[<span class="number">1</span>]; <span class="comment">// æ ¼å¼ï¼šBearer &lt;token&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. éªŒè¯ Token</span></span><br><span class="line">    jwt.<span class="title function_">verify</span>(token, <span class="variable constant_">SECRET_KEY</span>, <span class="function">(<span class="params">err, decoded</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">403</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">          <span class="attr">error</span>: <span class="string">&#x27;Token æ— æ•ˆæˆ–è¿‡æœŸ&#x27;</span>,</span><br><span class="line">          <span class="attr">details</span>: err.<span class="property">message</span></span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">      req.<span class="property">user</span> = decoded; <span class="comment">// å°†è§£ç å‡ºçš„ç”¨æˆ·ä¿¡æ¯æŒ‚è½½åˆ° req å¯¹è±¡ä¸Š</span></span><br><span class="line">      <span class="title function_">next</span>(); <span class="comment">// éªŒè¯é€šè¿‡ï¼Œç»§ç»­åç»­å¤„ç†</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    res.<span class="title function_">status</span>(<span class="number">401</span>).<span class="title function_">json</span>(&#123; <span class="attr">error</span>: <span class="string">&#x27;è¯·æ±‚å¤´ä¸­æ²¡æœ‰ Token&#x27;</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å—ä¿æŠ¤çš„è·¯ç”±ï¼Œéœ€è¦æœ‰æ•ˆçš„ Token æ‰èƒ½è®¿é—®</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/profile&#x27;</span>, authenticateJWT, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">json</span>(&#123;</span><br><span class="line">    <span class="attr">message</span>: <span class="string">`æ¬¢è¿å›æ¥, <span class="subst">$&#123;req.user.username&#125;</span>`</span>,</span><br><span class="line">    <span class="attr">role</span>: req.<span class="property">user</span>.<span class="property">role</span>,</span><br><span class="line">    <span class="attr">tokenInfo</span>: &#123;</span><br><span class="line">      <span class="attr">issuedAt</span>: <span class="keyword">new</span> <span class="title class_">Date</span>(req.<span class="property">user</span>.<span class="property">iat</span> * <span class="number">1000</span>),</span><br><span class="line">      <span class="comment">// æ³¨æ„ï¼šå®é™…åº”ç”¨ä¸­åº”è¯¥ä»å…¶ä»–åœ°æ–¹è·å–è¿‡æœŸæ—¶é—´</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Token åˆ·æ–°è·¯ç”±</span></span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/refresh&#x27;</span>, express.<span class="title function_">json</span>(), <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; token &#125; = req.<span class="property">body</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!token) &#123;</span><br><span class="line">    <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">401</span>).<span class="title function_">json</span>(&#123; <span class="attr">error</span>: <span class="string">&#x27;éœ€è¦æä¾› Token&#x27;</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> decoded = jwt.<span class="title function_">verify</span>(token, <span class="variable constant_">SECRET_KEY</span>, &#123; <span class="attr">ignoreExpiration</span>: <span class="literal">true</span> &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ£€æŸ¥æ˜¯å¦åœ¨åˆ·æ–°çª—å£æœŸå†…ï¼ˆä¾‹å¦‚ï¼šè¿‡æœŸå15åˆ†é’Ÿå†…ï¼‰</span></span><br><span class="line">    <span class="keyword">const</span> now = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Date</span>.<span class="title function_">now</span>() / <span class="number">1000</span>);</span><br><span class="line">    <span class="keyword">const</span> isWithinRefreshWindow = (now - decoded.<span class="property">exp</span>) &lt; <span class="number">900</span>; <span class="comment">// 15åˆ†é’Ÿ</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!isWithinRefreshWindow) &#123;</span><br><span class="line">      <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">403</span>).<span class="title function_">json</span>(&#123; <span class="attr">error</span>: <span class="string">&#x27;Token è¿‡æœŸå¤ªä¹…ï¼Œè¯·é‡æ–°ç™»å½•&#x27;</span> &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”Ÿæˆæ–°çš„ Token</span></span><br><span class="line">    <span class="keyword">const</span> newToken = jwt.<span class="title function_">sign</span>(</span><br><span class="line">      &#123; <span class="attr">username</span>: decoded.<span class="property">username</span>, <span class="attr">role</span>: decoded.<span class="property">role</span> &#125;,</span><br><span class="line">      <span class="variable constant_">SECRET_KEY</span>,</span><br><span class="line">      &#123; <span class="attr">expiresIn</span>: <span class="string">&#x27;1h&#x27;</span> &#125;</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    res.<span class="title function_">json</span>(&#123; <span class="attr">token</span>: newToken &#125;);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    res.<span class="title function_">status</span>(<span class="number">403</span>).<span class="title function_">json</span>(&#123; <span class="attr">error</span>: <span class="string">&#x27;æ— æ•ˆçš„ Token&#x27;</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>);</span><br></pre></td></tr></table></figure><h3 id="3-3-âœ…-ä¼˜ç¼ºç‚¹"><a href="#3-3-âœ…-ä¼˜ç¼ºç‚¹" class="headerlink" title="3.3 âœ… ä¼˜ç¼ºç‚¹"></a>3.3 âœ… ä¼˜ç¼ºç‚¹</h3><table><thead><tr><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>âœ… æ— çŠ¶æ€ï¼Œæ˜“äºæ‰©å±•</td><td>âŒ Token ä¸€æ—¦ç­¾å‘ï¼Œåœ¨æœ‰æ•ˆæœŸå†…æ— æ³•å¼ºåˆ¶å¤±æ•ˆ</td></tr><tr><td>âœ… å¤©ç„¶æ”¯æŒè·¨åŸŸ</td><td>âŒ Token ç®¡ç†æ›´å¤æ‚ï¼ˆå¦‚å¤±æ•ˆé—®é¢˜ï¼‰</td></tr><tr><td>âœ… é€‚åˆåˆ†å¸ƒå¼&#x2F;API æœåŠ¡</td><td>âŒ å­˜å‚¨ Token çš„å®‰å…¨æ€§é—®é¢˜</td></tr><tr><td>âœ… å‡å°‘æœåŠ¡å™¨å­˜å‚¨å‹åŠ›</td><td>âŒ éœ€è¦å¤„ç† Token åˆ·æ–°æœºåˆ¶</td></tr></tbody></table><hr><h2 id="4-OAuth-è®¤è¯"><a href="#4-OAuth-è®¤è¯" class="headerlink" title="4. OAuth è®¤è¯"></a>4. OAuth è®¤è¯</h2><p>OAuth 2.0 æ˜¯ä¸€ä¸ª<strong>æˆæƒæ¡†æ¶</strong>ï¼Œå®ƒå…è®¸ç”¨æˆ·æˆæƒç¬¬ä¸‰æ–¹åº”ç”¨è®¿é—®ä»–ä»¬å­˜å‚¨åœ¨å¦ä¸€å°æœåŠ¡æä¾›å•†ä¸Šçš„ä¿¡æ¯ï¼Œè€Œæ— éœ€å°†ç”¨æˆ·åå’Œå¯†ç æä¾›ç»™ç¬¬ä¸‰æ–¹åº”ç”¨ã€‚</p><h3 id="4-1-ğŸ”„-è®¤è¯æµç¨‹"><a href="#4-1-ğŸ”„-è®¤è¯æµç¨‹" class="headerlink" title="4.1 ğŸ”„ è®¤è¯æµç¨‹"></a>4.1 ğŸ”„ è®¤è¯æµç¨‹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">    participant U as User</span><br><span class="line">    participant C as Client App</span><br><span class="line">    participant A as Auth Server</span><br><span class="line">    participant R as Resource Server</span><br><span class="line"></span><br><span class="line">    U-&gt;&gt;C: ç‚¹å‡»&quot;ä½¿ç”¨GitHubç™»å½•&quot;</span><br><span class="line">    C-&gt;&gt;A: é‡å®šå‘åˆ°æˆæƒé¡µé¢</span><br><span class="line">    U-&gt;&gt;A: ç™»å½•å¹¶æˆæƒ</span><br><span class="line">    A-&gt;&gt;C: é‡å®šå‘å›è°ƒ + æˆæƒç </span><br><span class="line">    C-&gt;&gt;A: ç”¨æˆæƒç äº¤æ¢è®¿é—®ä»¤ç‰Œ</span><br><span class="line">    A-&gt;&gt;C: è¿”å›è®¿é—®ä»¤ç‰Œ</span><br><span class="line">    C-&gt;&gt;R: ç”¨è®¿é—®ä»¤ç‰Œè¯·æ±‚ç”¨æˆ·èµ„æº</span><br><span class="line">    R-&gt;&gt;A: éªŒè¯è®¿é—®ä»¤ç‰Œ</span><br><span class="line">    A--&gt;&gt;R: ä»¤ç‰Œæœ‰æ•ˆ</span><br><span class="line">    R--&gt;&gt;C: è¿”å›ç”¨æˆ·èµ„æº</span><br></pre></td></tr></table></figure><h3 id="4-2-ğŸ’»-å®ç°ç¤ºä¾‹"><a href="#4-2-ğŸ’»-å®ç°ç¤ºä¾‹" class="headerlink" title="4.2 ğŸ’» å®ç°ç¤ºä¾‹"></a>4.2 ğŸ’» å®ç°ç¤ºä¾‹</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> axios = <span class="built_in">require</span>(<span class="string">&#x27;axios&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> querystring = <span class="built_in">require</span>(<span class="string">&#x27;querystring&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// GitHub OAuth é…ç½®</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">GITHUB_CLIENT_ID</span> = <span class="string">&#x27;your_github_client_id&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">GITHUB_CLIENT_SECRET</span> = <span class="string">&#x27;your_github_client_secret&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">REDIRECT_URI</span> = <span class="string">&#x27;http://localhost:3000/auth/github/callback&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. é‡å®šå‘ç”¨æˆ·åˆ° GitHub</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/auth/github&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> params = querystring.<span class="title function_">stringify</span>(&#123;</span><br><span class="line">    <span class="attr">client_id</span>: <span class="variable constant_">GITHUB_CLIENT_ID</span>,</span><br><span class="line">    <span class="attr">redirect_uri</span>: <span class="variable constant_">REDIRECT_URI</span>,</span><br><span class="line">    <span class="attr">scope</span>: <span class="string">&#x27;user:email&#x27;</span>, <span class="comment">// è¯·æ±‚çš„æƒé™èŒƒå›´</span></span><br><span class="line">    <span class="attr">state</span>: <span class="title class_">Math</span>.<span class="title function_">random</span>().<span class="title function_">toString</span>(<span class="number">36</span>).<span class="title function_">substring</span>(<span class="number">7</span>) <span class="comment">// CSRF ä¿æŠ¤</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> githubAuthUrl = <span class="string">`https://github.com/login/oauth/authorize?<span class="subst">$&#123;params&#125;</span>`</span>;</span><br><span class="line">  res.<span class="title function_">redirect</span>(githubAuthUrl);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. GitHub å›è°ƒåœ°å€</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/auth/github/callback&#x27;</span>, <span class="title function_">async</span> (req, res) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; code, state &#125; = req.<span class="property">query</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// 3. ç”¨ code æ¢å– access_token</span></span><br><span class="line">    <span class="keyword">const</span> tokenResponse = <span class="keyword">await</span> axios.<span class="title function_">post</span>(<span class="string">&#x27;https://github.com/login/oauth/access_token&#x27;</span>, &#123;</span><br><span class="line">      <span class="attr">client_id</span>: <span class="variable constant_">GITHUB_CLIENT_ID</span>,</span><br><span class="line">      <span class="attr">client_secret</span>: <span class="variable constant_">GITHUB_CLIENT_SECRET</span>,</span><br><span class="line">      <span class="attr">code</span>: code,</span><br><span class="line">      <span class="attr">state</span>: state <span class="comment">// éªŒè¯ state é˜²æ­¢ CSRF</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">      <span class="attr">headers</span>: &#123; <span class="string">&#x27;Accept&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> tokenData = tokenResponse.<span class="property">data</span>;</span><br><span class="line">    <span class="keyword">const</span> accessToken = tokenData.<span class="property">access_token</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 4. ä½¿ç”¨ access_token è·å–ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">const</span> userResponse = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;https://api.github.com/user&#x27;</span>, &#123;</span><br><span class="line">      <span class="attr">headers</span>: &#123; <span class="string">&#x27;Authorization&#x27;</span>: <span class="string">`token <span class="subst">$&#123;accessToken&#125;</span>`</span> &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 5. è·å–ç”¨æˆ·é‚®ç®±ï¼ˆå¦‚æœè®¾ç½®äº†é‚®ç®±ä¸ºç§æœ‰ï¼‰</span></span><br><span class="line">    <span class="keyword">const</span> emailResponse = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;https://api.github.com/user/emails&#x27;</span>, &#123;</span><br><span class="line">      <span class="attr">headers</span>: &#123; <span class="string">&#x27;Authorization&#x27;</span>: <span class="string">`token <span class="subst">$&#123;accessToken&#125;</span>`</span> &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> userData = userResponse.<span class="property">data</span>;</span><br><span class="line">    <span class="keyword">const</span> emails = emailResponse.<span class="property">data</span>;</span><br><span class="line">    <span class="keyword">const</span> primaryEmail = emails.<span class="title function_">find</span>(<span class="function"><span class="params">email</span> =&gt;</span> email.<span class="property">primary</span>)?.<span class="property">email</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 6. æ ¹æ® userData å¤„ç†æœ¬åœ°ç”¨æˆ·ç™»å½•å’Œ session/jwt åˆ›å»º</span></span><br><span class="line">    <span class="keyword">const</span> user = <span class="keyword">await</span> <span class="title function_">findOrCreateUser</span>(&#123;</span><br><span class="line">      <span class="attr">githubId</span>: userData.<span class="property">id</span>,</span><br><span class="line">      <span class="attr">username</span>: userData.<span class="property">login</span>,</span><br><span class="line">      <span class="attr">email</span>: primaryEmail,</span><br><span class="line">      <span class="attr">avatar</span>: userData.<span class="property">avatar_url</span></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿™é‡Œå¯ä»¥åˆ›å»º session æˆ– JWT</span></span><br><span class="line">    <span class="keyword">const</span> sessionToken = <span class="title function_">createSessionForUser</span>(user);</span><br><span class="line"></span><br><span class="line">    res.<span class="title function_">redirect</span>(<span class="string">`/dashboard?token=<span class="subst">$&#123;sessionToken&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;GitHub OAuth error:&#x27;</span>, error);</span><br><span class="line">    res.<span class="title function_">status</span>(<span class="number">500</span>).<span class="title function_">json</span>(&#123; <span class="attr">error</span>: <span class="string">&#x27;OAuth æˆæƒå¤±è´¥&#x27;</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾…åŠ©å‡½æ•°ï¼šæŸ¥æ‰¾æˆ–åˆ›å»ºç”¨æˆ·</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">findOrCreateUser</span>(<span class="params">githubData</span>) &#123;</span><br><span class="line">  <span class="comment">// è¿™é‡Œåº”è¯¥è¿æ¥æ•°æ®åº“æŸ¥æ‰¾æˆ–åˆ›å»ºç”¨æˆ·</span></span><br><span class="line">  <span class="comment">// è¿”å›ç”¨æˆ·å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">id</span>: githubData.<span class="property">githubId</span>,</span><br><span class="line">    <span class="attr">username</span>: githubData.<span class="property">username</span>,</span><br><span class="line">    <span class="attr">email</span>: githubData.<span class="property">email</span>,</span><br><span class="line">    <span class="attr">avatar</span>: githubData.<span class="property">avatar</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾…åŠ©å‡½æ•°ï¼šä¸ºç”¨æˆ·åˆ›å»ºä¼šè¯</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createSessionForUser</span>(<span class="params">user</span>) &#123;</span><br><span class="line">  <span class="comment">// è¿™é‡Œå¯ä»¥åˆ›å»º JWT æˆ– session</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;generated_session_token&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>);</span><br></pre></td></tr></table></figure><hr><h2 id="5-æ–¹æ¡ˆå¯¹æ¯”ä¸é€‰æ‹©"><a href="#5-æ–¹æ¡ˆå¯¹æ¯”ä¸é€‰æ‹©" class="headerlink" title="5. æ–¹æ¡ˆå¯¹æ¯”ä¸é€‰æ‹©"></a>5. æ–¹æ¡ˆå¯¹æ¯”ä¸é€‰æ‹©</h2><h3 id="5-1-ğŸ“Š-å¯¹æ¯”è¡¨"><a href="#5-1-ğŸ“Š-å¯¹æ¯”è¡¨" class="headerlink" title="5.1 ğŸ“Š å¯¹æ¯”è¡¨"></a>5.1 ğŸ“Š å¯¹æ¯”è¡¨</h3><table><thead><tr><th>è®¤è¯æ–¹å¼</th><th>é€‚ç”¨åœºæ™¯</th><th>çŠ¶æ€ç®¡ç†</th><th>è·¨åŸŸæ”¯æŒ</th><th>æ‰©å±•æ€§</th><th>å®‰å…¨æ€§</th><th>å®ç°å¤æ‚åº¦</th></tr></thead><tbody><tr><td><strong>Session-Cookie</strong></td><td>ä¼ ç»Ÿçš„æœåŠ¡å™¨ç«¯æ¸²æŸ“ Web åº”ç”¨</td><td>æœ‰çŠ¶æ€</td><td>âš ï¸ éœ€è¦é…ç½®</td><td>âš ï¸ éœ€è¦å…±äº«å­˜å‚¨</td><td>âœ… é«˜</td><td>ğŸŸ¢ ç®€å•</td></tr><tr><td><strong>Token (JWT)</strong></td><td>å‰åç«¯åˆ†ç¦» SPAã€ç§»åŠ¨ç«¯ APPã€API æ¥å£</td><td>æ— çŠ¶æ€</td><td>âœ… åŸç”Ÿæ”¯æŒ</td><td>âœ… æå¥½</td><td>âœ… ä¸­é«˜</td><td>ğŸŸ¡ ä¸­ç­‰</td></tr><tr><td><strong>OAuth</strong></td><td>éœ€è¦ç¬¬ä¸‰æ–¹ç™»å½•åŠŸèƒ½çš„ä»»ä½•åº”ç”¨</td><td>æ··åˆ</td><td>âœ… åŸç”Ÿæ”¯æŒ</td><td>âœ… æå¥½</td><td>âœ… é«˜</td><td>ğŸ”´ å¤æ‚</td></tr></tbody></table><h3 id="5-2-ğŸ¯-ä½¿ç”¨åœºæ™¯"><a href="#5-2-ğŸ¯-ä½¿ç”¨åœºæ™¯" class="headerlink" title="5.2 ğŸ¯ ä½¿ç”¨åœºæ™¯"></a>5.2 ğŸ¯ ä½¿ç”¨åœºæ™¯</h3><h4 id="ğŸŒ-Web-åº”ç”¨"><a href="#ğŸŒ-Web-åº”ç”¨" class="headerlink" title="ğŸŒ Web åº”ç”¨"></a>ğŸŒ Web åº”ç”¨</h4><ul><li><strong>ä¼ ç»Ÿ Web åº”ç”¨</strong>ï¼šSession-Cookie</li><li><strong>ç°ä»£ SPA</strong>ï¼šJWT Token</li><li><strong>æ··åˆæ¨¡å¼</strong>ï¼šJWT + å¯é€‰ Session</li></ul><h4 id="ğŸ“±-ç§»åŠ¨ç«¯åº”ç”¨"><a href="#ğŸ“±-ç§»åŠ¨ç«¯åº”ç”¨" class="headerlink" title="ğŸ“± ç§»åŠ¨ç«¯åº”ç”¨"></a>ğŸ“± ç§»åŠ¨ç«¯åº”ç”¨</h4><ul><li><strong>Native App</strong>ï¼šJWT Token</li><li><strong>Hybrid App</strong>ï¼šJWT Token</li><li><strong>å°ç¨‹åº</strong>ï¼šSession-Cookie æˆ– JWT</li></ul><h4 id="ğŸ”—-API-æœåŠ¡"><a href="#ğŸ”—-API-æœåŠ¡" class="headerlink" title="ğŸ”— API æœåŠ¡"></a>ğŸ”— API æœåŠ¡</h4><ul><li><strong>RESTful API</strong>ï¼šJWT Token</li><li><strong>GraphQL API</strong>ï¼šJWT Token</li><li><strong>å¾®æœåŠ¡æ¶æ„</strong>ï¼šJWT Token</li></ul><h4 id="ğŸ¤-å•ç‚¹ç™»å½•-SSO"><a href="#ğŸ¤-å•ç‚¹ç™»å½•-SSO" class="headerlink" title="ğŸ¤ å•ç‚¹ç™»å½• (SSO)"></a>ğŸ¤ å•ç‚¹ç™»å½• (SSO)</h4><ul><li><strong>ä¼ä¸šå†…åº”ç”¨</strong>ï¼šOAuth 2.0 &#x2F; SAML</li><li><strong>è·¨å¹³å°åº”ç”¨</strong>ï¼šOAuth 2.0</li><li><strong>ç¬¬ä¸‰æ–¹ç™»å½•</strong>ï¼šOAuth 2.0</li></ul><h3 id="5-3-ğŸ”„-å¸¸è§ç»„åˆ"><a href="#5-3-ğŸ”„-å¸¸è§ç»„åˆ" class="headerlink" title="5.3 ğŸ”„ å¸¸è§ç»„åˆ"></a>5.3 ğŸ”„ å¸¸è§ç»„åˆ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    A[Webåº”ç”¨] --&gt; B[ä¸»è®¤è¯æ–¹å¼]</span><br><span class="line">    A --&gt; C[è¾…åŠ©è®¤è¯æ–¹å¼]</span><br><span class="line"></span><br><span class="line">    B --&gt; D[Session-Cookie&lt;br/&gt;ä¼ ç»ŸWebåº”ç”¨]</span><br><span class="line">    B --&gt; E[JWT Token&lt;br/&gt;SPA/ç§»åŠ¨ç«¯]</span><br><span class="line">    B --&gt; F[OAuth&lt;br/&gt;ç¬¬ä¸‰æ–¹ç™»å½•]</span><br><span class="line"></span><br><span class="line">    C --&gt; G[CSRFä¿æŠ¤]</span><br><span class="line">    C --&gt; H[HTTPSå¼ºåˆ¶]</span><br><span class="line">    C --&gt; I[Rate Limiting]</span><br><span class="line">    C --&gt; J[è¾“å…¥éªŒè¯]</span><br></pre></td></tr></table></figure><p><strong>ç°ä»£å¸¸è§ç»„åˆ</strong>ï¼š</p><ul><li><strong>Web App</strong>ï¼š<strong>Session</strong> æˆ– <strong>JWT</strong> + HTTPS + CSRF Protection</li><li><strong>Mobile&#x2F;Native App</strong>ï¼š<strong>JWT</strong> + HTTPS + Device Fingerprinting</li><li><strong>å•ç‚¹ç™»å½•</strong>ï¼š<strong>OAuth</strong> æˆ– <strong>JWT</strong> + Centralized Auth Server</li><li><strong>ç¬¬ä¸‰æ–¹ç™»å½•</strong>ï¼š<strong>OAuth</strong> + Local Account Binding</li></ul><hr><h2 id="âš ï¸-å®‰å…¨æœ€ä½³å®è·µ"><a href="#âš ï¸-å®‰å…¨æœ€ä½³å®è·µ" class="headerlink" title="âš ï¸ å®‰å…¨æœ€ä½³å®è·µ"></a>âš ï¸ å®‰å…¨æœ€ä½³å®è·µ</h2><p>æ— è®ºé€‰æ‹©å“ªç§è®¤è¯æ–¹å¼ï¼Œéƒ½åŠ¡å¿…éµå¾ªä»¥ä¸‹å®‰å…¨åŸåˆ™ï¼š</p><ol><li><strong>ğŸ”’ ä½¿ç”¨ HTTPS</strong> - ä¿è¯ä¼ è¾“è¿‡ç¨‹çš„å®‰å…¨</li><li><strong>ğŸ• è®¾ç½®åˆç†çš„è¿‡æœŸæ—¶é—´</strong> - Token å’Œ Session éƒ½ä¸åº”é•¿æœŸæœ‰æ•ˆ</li><li><strong>ğŸ›¡ï¸ é˜²èŒƒå¸¸è§æ”»å‡»</strong>ï¼š<ul><li>XSS (Cross-Site Scripting)</li><li>CSRF (Cross-Site Request Forgery)</li><li>ç‚¹å‡»åŠ«æŒ (Clickjacking)</li></ul></li><li><strong>ğŸ“ è®°å½•å®‰å…¨æ—¥å¿—</strong> - ç›‘æ§å¼‚å¸¸ç™»å½•è¡Œä¸º</li><li><strong>ğŸ”„ å®šæœŸè½®æ¢å¯†é’¥</strong> - å®šæœŸæ›´æ¢ JWT å¯†é’¥å’Œä¼šè¯å¯†é’¥</li><li><strong>âœ… å®æ–½æœ€å°æƒé™åŸåˆ™</strong> - åªæˆäºˆå¿…è¦çš„æƒé™</li></ol><hr><h2 id="ğŸ“š-å‚è€ƒèµ„æº"><a href="#ğŸ“š-å‚è€ƒèµ„æº" class="headerlink" title="ğŸ“š å‚è€ƒèµ„æº"></a>ğŸ“š å‚è€ƒèµ„æº</h2><ul><li><a href="https://tools.ietf.org/html/rfc6749">RFC 6749 - OAuth 2.0</a></li><li><a href="https://jwt.io/">JWT.io - JWT åœ¨çº¿å·¥å…·</a></li><li><a href="https://cheatsheetseries.owasp.org/cheatsheets/Authentication_Cheat_Sheet.html">OWASP Authentication Cheat Sheet</a></li><li><a href="https://expressjs.com/">Express.js å®˜æ–¹æ–‡æ¡£</a></li></ul><hr><blockquote><p><strong>ğŸ’¡ æç¤º</strong>: åœ¨é€‰æ‹©è®¤è¯æ–¹æ¡ˆæ—¶ï¼Œè¯·ç»¼åˆè€ƒè™‘ï¼š</p><ul><li>åº”ç”¨æ¶æ„å’Œéƒ¨ç½²ç¯å¢ƒ</li><li>ç”¨æˆ·ä½“éªŒéœ€æ±‚</li><li>å®‰å…¨æ€§è¦æ±‚</li><li>å¼€å‘å’Œç»´æŠ¤æˆæœ¬</li><li>å›¢é˜ŸæŠ€æœ¯æ ˆç†Ÿæ‚‰åº¦</li></ul></blockquote>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;Web-è®¤è¯æ–¹æ³•æŒ‡å—&quot;&gt;&lt;a href=&quot;#Web-è®¤è¯æ–¹æ³•æŒ‡å—&quot; class=&quot;headerlink&quot; title=&quot;Web è®¤è¯æ–¹æ³•æŒ‡å—&quot;&gt;&lt;/a&gt;Web è®¤è¯æ–¹æ³•æŒ‡å—&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;æ–‡æ¡£åˆ›å»ºæ—¶é—´&lt;/strong&gt;:</summary>
        
      
    
    
    
    <category term="Webæ¶æ„å®‰å…¨" scheme="https://vilaswang.github.io/categories/Web%E6%9E%B6%E6%9E%84%E5%AE%89%E5%85%A8/"/>
    
    
    <category term="æŠ€æœ¯æ–‡æ¡£" scheme="https://vilaswang.github.io/tags/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/"/>
    
    <category term="æŒ‡å—" scheme="https://vilaswang.github.io/tags/%E6%8C%87%E5%8D%97/"/>
    
  </entry>
  
  <entry>
    <title>è®¤è¯ç³»ç»Ÿæ¶æ„</title>
    <link href="https://vilaswang.github.io/posts/ab2eaca1/"/>
    <id>https://vilaswang.github.io/posts/ab2eaca1/</id>
    <published>2025-12-09T06:09:56.000Z</published>
    <updated>2025-12-17T15:36:29.299Z</updated>
    
    <content type="html"><![CDATA[<h1 id="è®¤è¯ç³»ç»Ÿæ¶æ„"><a href="#è®¤è¯ç³»ç»Ÿæ¶æ„" class="headerlink" title="è®¤è¯ç³»ç»Ÿæ¶æ„"></a>è®¤è¯ç³»ç»Ÿæ¶æ„</h1><blockquote><p><strong>æ–‡æ¡£åˆ›å»ºæ—¶é—´</strong>: 2025-11-14<br><strong>æœ€åæ›´æ–°</strong>: 2025-11-14<br><strong>æ ‡ç­¾</strong>: <code>authentication</code>, <code>authorization</code>, <code>jwt</code>, <code>oauth</code>, <code>security</code>, <code>api</code></p></blockquote><h2 id="ğŸ“‘-ç›®å½•"><a href="#ğŸ“‘-ç›®å½•" class="headerlink" title="ğŸ“‘ ç›®å½•"></a>ğŸ“‘ ç›®å½•</h2><ul><li><a href="#1-%E8%AE%A4%E8%AF%81%E6%96%B9%E5%BC%8F%E6%A6%82%E8%BF%B0">1. è®¤è¯æ–¹å¼æ¦‚è¿°</a></li><li><a href="#2-%E6%9C%AC%E5%9C%B0%E8%AE%A4%E8%AF%81%E6%B5%81%E7%A8%8B">2. æœ¬åœ°è®¤è¯æµç¨‹</a><ul><li><a href="#21-%E6%B3%A8%E5%86%8C%E6%B5%81%E7%A8%8B">2.1 æ³¨å†Œæµç¨‹</a></li><li><a href="#22-%E7%99%BB%E5%BD%95%E6%B5%81%E7%A8%8B">2.2 ç™»å½•æµç¨‹</a></li><li><a href="#23-token-%E9%AA%8C%E8%AF%81%E6%B5%81%E7%A8%8B">2.3 Token éªŒè¯æµç¨‹</a></li></ul></li><li><a href="#3-google-oauth-%E8%AE%A4%E8%AF%81%E6%B5%81%E7%A8%8B">3. Google OAuth è®¤è¯æµç¨‹</a><ul><li><a href="#31-%E9%85%8D%E7%BD%AE">3.1 é…ç½®</a></li><li><a href="#32-%E8%AE%A4%E8%AF%81%E6%B5%81%E7%A8%8B">3.2 è®¤è¯æµç¨‹</a></li><li><a href="#33-%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86">3.3 ä¼šè¯ç®¡ç†</a></li></ul></li><li><a href="#4-%E5%AE%89%E5%85%A8%E7%89%B9%E6%80%A7">4. å®‰å…¨ç‰¹æ€§</a><ul><li><a href="#41-%E9%80%9F%E7%8E%87%E9%99%90%E5%88%B6">4.1 é€Ÿç‡é™åˆ¶</a></li><li><a href="#42-cors-%E9%85%8D%E7%BD%AE">4.2 CORS é…ç½®</a></li><li><a href="#43-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86">4.3 é”™è¯¯å¤„ç†</a></li></ul></li><li><a href="#5-%E4%B8%AD%E9%97%B4%E4%BB%B6%E9%93%BE">5. ä¸­é—´ä»¶é“¾</a></li><li><a href="#6-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE">6. ç¯å¢ƒé…ç½®</a></li></ul><hr><h2 id="1-è®¤è¯æ–¹å¼æ¦‚è¿°"><a href="#1-è®¤è¯æ–¹å¼æ¦‚è¿°" class="headerlink" title="1. è®¤è¯æ–¹å¼æ¦‚è¿°"></a>1. è®¤è¯æ–¹å¼æ¦‚è¿°</h2><p>ç³»ç»Ÿæ”¯æŒä¸¤ç§ä¸»è¦çš„è®¤è¯æ–¹å¼ï¼š</p><ol><li><strong>ğŸ”‘ æœ¬åœ°ç”¨æˆ·åå¯†ç è®¤è¯</strong>ï¼ˆJWT Tokenï¼‰</li><li><strong>ğŸŒ Google OAuth 2.0 è®¤è¯</strong></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">    A[ç”¨æˆ·] --&gt; B[è®¤è¯é€‰æ‹©]</span><br><span class="line">    B --&gt; C[æœ¬åœ°è®¤è¯]</span><br><span class="line">    B --&gt; D[OAuthè®¤è¯]</span><br><span class="line">    C --&gt; E[JWT Token]</span><br><span class="line">    D --&gt; F[Googleæˆæƒ]</span><br><span class="line">    E --&gt; G[è®¿é—®API]</span><br><span class="line">    F --&gt; G</span><br></pre></td></tr></table></figure><hr><h2 id="2-æœ¬åœ°è®¤è¯æµç¨‹"><a href="#2-æœ¬åœ°è®¤è¯æµç¨‹" class="headerlink" title="2. æœ¬åœ°è®¤è¯æµç¨‹"></a>2. æœ¬åœ°è®¤è¯æµç¨‹</h2><h3 id="2-1-ğŸ”§-æ³¨å†Œæµç¨‹"><a href="#2-1-ğŸ”§-æ³¨å†Œæµç¨‹" class="headerlink" title="2.1 ğŸ”§ æ³¨å†Œæµç¨‹"></a>2.1 ğŸ”§ æ³¨å†Œæµç¨‹</h3><ol><li>å®¢æˆ·ç«¯å‘é€ <code>POST</code> è¯·æ±‚åˆ° <code>/api/v1/auth/register</code></li><li>è¯·æ±‚ç»è¿‡é€Ÿç‡é™åˆ¶ä¸­é—´ä»¶ï¼ˆRate Limiterï¼‰æ£€æŸ¥</li><li>é€šè¿‡æ³¨å†ŒéªŒè¯å™¨ï¼ˆregisterValidatorï¼‰éªŒè¯è¯·æ±‚æ•°æ®</li><li>æ§åˆ¶å™¨å¤„ç†æ³¨å†Œé€»è¾‘ï¼Œåˆ›å»ºæ–°ç”¨æˆ·</li><li>è¿”å›æ³¨å†Œç»“æœ</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">    participant C as Client</span><br><span class="line">    participant R as Rate Limiter</span><br><span class="line">    participant V as Validator</span><br><span class="line">    participant Ctrl as Controller</span><br><span class="line">    participant DB as Database</span><br><span class="line"></span><br><span class="line">    C-&gt;&gt;R: POST /api/v1/auth/register</span><br><span class="line">    R-&gt;&gt;V: éªŒè¯è¯·æ±‚æ•°æ®</span><br><span class="line">    V-&gt;&gt;Ctrl: å¤„ç†æ³¨å†Œé€»è¾‘</span><br><span class="line">    Ctrl-&gt;&gt;DB: åˆ›å»ºæ–°ç”¨æˆ·</span><br><span class="line">    DB--&gt;&gt;Ctrl: è¿”å›ç”¨æˆ·ä¿¡æ¯</span><br><span class="line">    Ctrl--&gt;&gt;C: è¿”å›æ³¨å†Œç»“æœ</span><br></pre></td></tr></table></figure><h3 id="2-2-ğŸ”-ç™»å½•æµç¨‹"><a href="#2-2-ğŸ”-ç™»å½•æµç¨‹" class="headerlink" title="2.2 ğŸ” ç™»å½•æµç¨‹"></a>2.2 ğŸ” ç™»å½•æµç¨‹</h3><ol><li>å®¢æˆ·ç«¯å‘é€ <code>POST</code> è¯·æ±‚åˆ° <code>/api/v1/auth/login</code></li><li>è¯·æ±‚ç»è¿‡é€Ÿç‡é™åˆ¶ä¸­é—´ä»¶æ£€æŸ¥</li><li>é€šè¿‡ç™»å½•éªŒè¯å™¨ï¼ˆloginValidatorï¼‰éªŒè¯è¯·æ±‚æ•°æ®</li><li>æ§åˆ¶å™¨éªŒè¯ç”¨æˆ·åå’Œå¯†ç </li><li>ç”Ÿæˆ JWT Tokenï¼ˆæœ‰æ•ˆæœŸ24å°æ—¶ï¼‰</li><li>è¿”å› Token ç»™å®¢æˆ·ç«¯</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">    participant C as Client</span><br><span class="line">    participant R as Rate Limiter</span><br><span class="line">    participant V as Validator</span><br><span class="line">    participant Ctrl as Controller</span><br><span class="line">    participant JWT as JWT Service</span><br><span class="line"></span><br><span class="line">    C-&gt;&gt;R: POST /api/v1/auth/login</span><br><span class="line">    R-&gt;&gt;V: éªŒè¯ç™»å½•æ•°æ®</span><br><span class="line">    V-&gt;&gt;Ctrl: éªŒè¯ç”¨æˆ·å‡­æ®</span><br><span class="line">    Ctrl-&gt;&gt;JWT: ç”ŸæˆToken</span><br><span class="line">    JWT--&gt;&gt;Ctrl: è¿”å›JWT Token</span><br><span class="line">    Ctrl--&gt;&gt;C: è¿”å›Tokenä¿¡æ¯</span><br></pre></td></tr></table></figure><h3 id="2-3-ğŸ›¡ï¸-Token-éªŒè¯æµç¨‹"><a href="#2-3-ğŸ›¡ï¸-Token-éªŒè¯æµç¨‹" class="headerlink" title="2.3 ğŸ›¡ï¸ Token éªŒè¯æµç¨‹"></a>2.3 ğŸ›¡ï¸ Token éªŒè¯æµç¨‹</h3><ol><li>å®¢æˆ·ç«¯åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦ Tokenï¼š<code>Authorization: Bearer &lt;token&gt;</code></li><li><code>authenticateToken</code> ä¸­é—´ä»¶éªŒè¯ Tokenï¼š<ul><li>æ£€æŸ¥ Token æ˜¯å¦å­˜åœ¨</li><li>éªŒè¯ Token æœ‰æ•ˆæ€§</li><li>ä» Token ä¸­è§£æç”¨æˆ·ä¿¡æ¯</li><li>å°†ç”¨æˆ·ä¿¡æ¯é™„åŠ åˆ°è¯·æ±‚å¯¹è±¡</li></ul></li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Token éªŒè¯ä¸­é—´ä»¶ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">authenticateToken</span> = (<span class="params">req, res, next</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> authHeader = req.<span class="property">headers</span>[<span class="string">&#x27;authorization&#x27;</span>];</span><br><span class="line">  <span class="keyword">const</span> token = authHeader &amp;&amp; authHeader.<span class="title function_">split</span>(<span class="string">&#x27; &#x27;</span>)[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!token) &#123;</span><br><span class="line">    <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">401</span>).<span class="title function_">json</span>(&#123; <span class="attr">error</span>: <span class="string">&#x27;Access token required&#x27;</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  jwt.<span class="title function_">verify</span>(token, process.<span class="property">env</span>.<span class="property">JWT_SECRET</span>, <span class="function">(<span class="params">err, user</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">403</span>).<span class="title function_">json</span>(&#123; <span class="attr">error</span>: <span class="string">&#x27;Invalid or expired token&#x27;</span> &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    req.<span class="property">user</span> = user;</span><br><span class="line">    <span class="title function_">next</span>();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><hr><h2 id="3-Google-OAuth-è®¤è¯æµç¨‹"><a href="#3-Google-OAuth-è®¤è¯æµç¨‹" class="headerlink" title="3. Google OAuth è®¤è¯æµç¨‹"></a>3. Google OAuth è®¤è¯æµç¨‹</h2><h3 id="3-1-âš™ï¸-é…ç½®"><a href="#3-1-âš™ï¸-é…ç½®" class="headerlink" title="3.1 âš™ï¸ é…ç½®"></a>3.1 âš™ï¸ é…ç½®</h3><ul><li>ä½¿ç”¨ Passport.js çš„ Google ç­–ç•¥</li><li>é…ç½®äº† Google Client ID å’Œ Secret</li><li>è®¾ç½®äº†å›è°ƒ URL</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Google OAuth é…ç½®ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">GoogleStrategy</span> = <span class="built_in">require</span>(<span class="string">&#x27;passport-google-oauth20&#x27;</span>).<span class="property">Strategy</span>;</span><br><span class="line"></span><br><span class="line">passport.<span class="title function_">use</span>(<span class="keyword">new</span> <span class="title class_">GoogleStrategy</span>(&#123;</span><br><span class="line">  <span class="attr">clientID</span>: process.<span class="property">env</span>.<span class="property">GOOGLE_CLIENT_ID</span>,</span><br><span class="line">  <span class="attr">clientSecret</span>: process.<span class="property">env</span>.<span class="property">GOOGLE_CLIENT_SECRET</span>,</span><br><span class="line">  <span class="attr">callbackURL</span>: <span class="string">&quot;/api/v1/auth/google/callback&quot;</span></span><br><span class="line">&#125;, <span class="function">(<span class="params">accessToken, refreshToken, profile, done</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ç”¨æˆ·éªŒè¯é€»è¾‘</span></span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure><h3 id="3-2-ğŸ”„-è®¤è¯æµç¨‹"><a href="#3-2-ğŸ”„-è®¤è¯æµç¨‹" class="headerlink" title="3.2 ğŸ”„ è®¤è¯æµç¨‹"></a>3.2 ğŸ”„ è®¤è¯æµç¨‹</h3><ol><li>ç”¨æˆ·è®¿é—® <code>/api/v1/auth/oauth/google</code></li><li>é‡å®šå‘åˆ° Google ç™»å½•é¡µé¢</li><li>ç”¨æˆ·æˆæƒåï¼ŒGoogle é‡å®šå‘å›å›è°ƒ URL</li><li>Passport å¤„ç†å›è°ƒï¼š<ul><li>éªŒè¯ç”¨æˆ·ä¿¡æ¯</li><li>å¦‚æœç”¨æˆ·ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°ç”¨æˆ·</li><li>ç”Ÿæˆä¼šè¯</li></ul></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">    participant U as User</span><br><span class="line">    participant A as App</span><br><span class="line">    participant G as Google</span><br><span class="line">    participant DB as Database</span><br><span class="line"></span><br><span class="line">    U-&gt;&gt;A: è®¿é—®OAuthç«¯ç‚¹</span><br><span class="line">    A-&gt;&gt;G: é‡å®šå‘åˆ°Google</span><br><span class="line">    U-&gt;&gt;G: ç™»å½•å¹¶æˆæƒ</span><br><span class="line">    G-&gt;&gt;A: å›è°ƒæˆæƒç </span><br><span class="line">    A-&gt;&gt;G: äº¤æ¢è®¿é—®ä»¤ç‰Œ</span><br><span class="line">    G-&gt;&gt;A: è¿”å›ç”¨æˆ·ä¿¡æ¯</span><br><span class="line">    A-&gt;&gt;DB: æŸ¥æ‰¾/åˆ›å»ºç”¨æˆ·</span><br><span class="line">    A-&gt;&gt;U: å»ºç«‹ä¼šè¯</span><br></pre></td></tr></table></figure><h3 id="3-3-ğŸ“‹-ä¼šè¯ç®¡ç†"><a href="#3-3-ğŸ“‹-ä¼šè¯ç®¡ç†" class="headerlink" title="3.3 ğŸ“‹ ä¼šè¯ç®¡ç†"></a>3.3 ğŸ“‹ ä¼šè¯ç®¡ç†</h3><ul><li>ä½¿ç”¨ <code>express-session</code> ç®¡ç†ä¼šè¯</li><li>é…ç½®äº†ä¼šè¯å¯†é’¥å’Œé€‰é¡¹</li><li>å®ç°äº†ç”¨æˆ·åºåˆ—åŒ–å’Œååºåˆ—åŒ–</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¼šè¯é…ç½®ç¤ºä¾‹</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">session</span>(&#123;</span><br><span class="line">  <span class="attr">secret</span>: process.<span class="property">env</span>.<span class="property">SESSION_SECRET</span>,</span><br><span class="line">  <span class="attr">resave</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">saveUninitialized</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">cookie</span>: &#123;</span><br><span class="line">    <span class="attr">secure</span>: process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&#x27;production&#x27;</span>,</span><br><span class="line">    <span class="attr">maxAge</span>: <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span> <span class="comment">// 24å°æ—¶</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure><hr><h2 id="4-å®‰å…¨ç‰¹æ€§"><a href="#4-å®‰å…¨ç‰¹æ€§" class="headerlink" title="4. å®‰å…¨ç‰¹æ€§"></a>4. å®‰å…¨ç‰¹æ€§</h2><h3 id="4-1-ğŸš¦-é€Ÿç‡é™åˆ¶"><a href="#4-1-ğŸš¦-é€Ÿç‡é™åˆ¶" class="headerlink" title="4.1 ğŸš¦ é€Ÿç‡é™åˆ¶"></a>4.1 ğŸš¦ é€Ÿç‡é™åˆ¶</h3><ul><li>ä½¿ç”¨ <code>express-rate-limit</code> å®ç°</li><li>é»˜è®¤é™åˆ¶ï¼š15åˆ†é’Ÿå†…æ¯ä¸ª IP æœ€å¤š 100 ä¸ªè¯·æ±‚</li><li>åº”ç”¨äºç™»å½•å’Œæ³¨å†Œæ¥å£</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€Ÿç‡é™åˆ¶é…ç½®ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">const</span> rateLimiter = <span class="title function_">rateLimit</span>(&#123;</span><br><span class="line">  <span class="attr">windowMs</span>: <span class="number">15</span> * <span class="number">60</span> * <span class="number">1000</span>, <span class="comment">// 15åˆ†é’Ÿ</span></span><br><span class="line">  <span class="attr">max</span>: <span class="number">100</span>, <span class="comment">// æœ€å¤§è¯·æ±‚æ•°</span></span><br><span class="line">  <span class="attr">message</span>: <span class="string">&#x27;Too many requests from this IP&#x27;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="4-2-ğŸŒ-CORS-é…ç½®"><a href="#4-2-ğŸŒ-CORS-é…ç½®" class="headerlink" title="4.2 ğŸŒ CORS é…ç½®"></a>4.2 ğŸŒ CORS é…ç½®</h3><ul><li>å¯é…ç½®å…è®¸çš„æºï¼ˆé»˜è®¤å…è®¸æ‰€æœ‰ï¼‰</li><li>é™åˆ¶å…è®¸çš„ HTTP æ–¹æ³•</li><li>é…ç½®å…è®¸çš„è¯·æ±‚å¤´</li><li>æ”¯æŒå‡­è¯ï¼ˆcredentialsï¼‰</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// CORS é…ç½®ç¤ºä¾‹</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">cors</span>(&#123;</span><br><span class="line">  <span class="attr">origin</span>: process.<span class="property">env</span>.<span class="property">ALLOWED_ORIGINS</span>?.<span class="title function_">split</span>(<span class="string">&#x27;,&#x27;</span>) || <span class="string">&#x27;*&#x27;</span>,</span><br><span class="line">  <span class="attr">methods</span>: [<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>, <span class="string">&#x27;PUT&#x27;</span>, <span class="string">&#x27;DELETE&#x27;</span>],</span><br><span class="line">  <span class="attr">allowedHeaders</span>: [<span class="string">&#x27;Content-Type&#x27;</span>, <span class="string">&#x27;Authorization&#x27;</span>],</span><br><span class="line">  <span class="attr">credentials</span>: <span class="literal">true</span></span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure><h3 id="4-3-âš ï¸-é”™è¯¯å¤„ç†"><a href="#4-3-âš ï¸-é”™è¯¯å¤„ç†" class="headerlink" title="4.3 âš ï¸ é”™è¯¯å¤„ç†"></a>4.3 âš ï¸ é”™è¯¯å¤„ç†</h3><ul><li>ç»Ÿä¸€çš„é”™è¯¯å¤„ç†ä¸­é—´ä»¶</li><li>åŒºåˆ†å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒçš„é”™è¯¯å“åº”</li><li>è¯¦ç»†çš„é”™è¯¯æ—¥å¿—è®°å½•</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é”™è¯¯å¤„ç†ä¸­é—´ä»¶ç¤ºä¾‹</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">err, req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(err.<span class="property">stack</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&#x27;development&#x27;</span>) &#123;</span><br><span class="line">    res.<span class="title function_">status</span>(<span class="number">500</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">      <span class="attr">error</span>: err.<span class="property">message</span>,</span><br><span class="line">      <span class="attr">stack</span>: err.<span class="property">stack</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    res.<span class="title function_">status</span>(<span class="number">500</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">      <span class="attr">error</span>: <span class="string">&#x27;Internal Server Error&#x27;</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><hr><h2 id="5-ğŸ”—-ä¸­é—´ä»¶é“¾"><a href="#5-ğŸ”—-ä¸­é—´ä»¶é“¾" class="headerlink" title="5. ğŸ”— ä¸­é—´ä»¶é“¾"></a>5. ğŸ”— ä¸­é—´ä»¶é“¾</h2><p>è¯·æ±‚å¤„ç†æµç¨‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    A[å®¢æˆ·ç«¯è¯·æ±‚] --&gt; B[æ—¥å¿—ä¸­é—´ä»¶]</span><br><span class="line">    B --&gt; C[åŸºç¡€ä¸­é—´ä»¶]</span><br><span class="line">    C --&gt; D[CORSä¸­é—´ä»¶]</span><br><span class="line">    D --&gt; E[ä¼šè¯ä¸­é—´ä»¶]</span><br><span class="line">    E --&gt; F[Passportåˆå§‹åŒ–]</span><br><span class="line">    F --&gt; G[è·¯ç”±å¤„ç†]</span><br><span class="line">    G --&gt; H[æ§åˆ¶å™¨é€»è¾‘]</span><br><span class="line">    H --&gt; I[å“åº”è¿”å›]</span><br><span class="line">    I --&gt; J[é”™è¯¯å¤„ç†ä¸­é—´ä»¶]</span><br></pre></td></tr></table></figure><ol><li><strong>æ—¥å¿—ä¸­é—´ä»¶</strong>ï¼ˆè¯·æ±‚è®°å½•ï¼‰</li><li><strong>åŸºç¡€ä¸­é—´ä»¶</strong>ï¼ˆJSONè§£æã€CORSç­‰ï¼‰</li><li><strong>ä¼šè¯ä¸­é—´ä»¶</strong></li><li><strong>Passport åˆå§‹åŒ–</strong></li><li><strong>è·¯ç”±å¤„ç†</strong></li><li><strong>é”™è¯¯å¤„ç†ä¸­é—´ä»¶</strong></li></ol><hr><h2 id="6-ğŸ› ï¸-ç¯å¢ƒé…ç½®"><a href="#6-ğŸ› ï¸-ç¯å¢ƒé…ç½®" class="headerlink" title="6. ğŸ› ï¸ ç¯å¢ƒé…ç½®"></a>6. ğŸ› ï¸ ç¯å¢ƒé…ç½®</h2><p>å…³é”®é…ç½®é¡¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"># è®¤è¯ç³»ç»Ÿæ¶æ„</span><br><span class="line">JWT_SECRET=your-super-secret-jwt-key</span><br><span class="line">JWT_EXPIRES_IN=24h</span><br><span class="line"></span><br><span class="line"># è®¤è¯ç³»ç»Ÿæ¶æ„</span><br><span class="line">SESSION_SECRET=your-session-secret</span><br><span class="line"></span><br><span class="line"># è®¤è¯ç³»ç»Ÿæ¶æ„</span><br><span class="line">GOOGLE_CLIENT_ID=your-google-client-id</span><br><span class="line">GOOGLE_CLIENT_SECRET=your-google-client-secret</span><br><span class="line"></span><br><span class="line"># è®¤è¯ç³»ç»Ÿæ¶æ„</span><br><span class="line">DB_HOST=localhost</span><br><span class="line">DB_PORT=3306</span><br><span class="line">DB_NAME=your-database-name</span><br><span class="line">DB_USER=your-username</span><br><span class="line">DB_PASSWORD=your-password</span><br><span class="line"></span><br><span class="line"># è®¤è¯ç³»ç»Ÿæ¶æ„</span><br><span class="line">UPLOAD_DIR=./uploads</span><br><span class="line">MAX_FILE_SIZE=10485760</span><br><span class="line"></span><br><span class="line"># è®¤è¯ç³»ç»Ÿæ¶æ„</span><br><span class="line">ALLOWED_ORIGINS=http://localhost:3000,https://yourdomain.com</span><br><span class="line"></span><br><span class="line"># è®¤è¯ç³»ç»Ÿæ¶æ„</span><br><span class="line">RATE_LIMIT_WINDOW_MS=900000</span><br><span class="line">RATE_LIMIT_MAX_REQUESTS=100</span><br></pre></td></tr></table></figure><hr><h2 id="ğŸ“Š-æ€»ç»“"><a href="#ğŸ“Š-æ€»ç»“" class="headerlink" title="ğŸ“Š æ€»ç»“"></a>ğŸ“Š æ€»ç»“</h2><p>è¿™ä¸ªè®¤è¯ç³»ç»Ÿé‡‡ç”¨äº†å¤šé‡å®‰å…¨æœºåˆ¶ï¼ŒåŒ…æ‹¬ï¼š</p><ul><li>âœ… <strong>JWT Token</strong> è®¤è¯</li><li>âœ… <strong>OAuth 2.0</strong> ç¬¬ä¸‰æ–¹ç™»å½•</li><li>âœ… <strong>é€Ÿç‡é™åˆ¶</strong> é˜²æ­¢æš´åŠ›æ”»å‡»</li><li>âœ… <strong>CORS</strong> è·¨åŸŸä¿æŠ¤</li><li>âœ… <strong>ç»Ÿä¸€é”™è¯¯å¤„ç†</strong> æå‡ç”¨æˆ·ä½“éªŒ</li></ul><p>é€šè¿‡ä¸­é—´ä»¶é“¾çš„æ–¹å¼ï¼Œå®ç°äº†çµæ´»çš„è®¤è¯æµç¨‹æ§åˆ¶ï¼Œèƒ½å¤Ÿæœ‰æ•ˆä¿æŠ¤ API æ¥å£çš„å®‰å…¨ã€‚</p><hr><blockquote><p><strong>ğŸ’¡ æç¤º</strong>: åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œè¯·ç¡®ä¿ï¼š</p><ul><li>ä½¿ç”¨å¼ºå¯†ç ä½œä¸ºå¯†é’¥</li><li>å¯ç”¨ HTTPS</li><li>å®šæœŸè½®æ¢å¯†é’¥</li><li>ç›‘æ§å¼‚å¸¸è®¿é—®è¡Œä¸º</li></ul></blockquote>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;è®¤è¯ç³»ç»Ÿæ¶æ„&quot;&gt;&lt;a href=&quot;#è®¤è¯ç³»ç»Ÿæ¶æ„&quot; class=&quot;headerlink&quot; title=&quot;è®¤è¯ç³»ç»Ÿæ¶æ„&quot;&gt;&lt;/a&gt;è®¤è¯ç³»ç»Ÿæ¶æ„&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;æ–‡æ¡£åˆ›å»ºæ—¶é—´&lt;/strong&gt;:</summary>
        
      
    
    
    
    <category term="Webæ¶æ„å®‰å…¨" scheme="https://vilaswang.github.io/categories/Web%E6%9E%B6%E6%9E%84%E5%AE%89%E5%85%A8/"/>
    
    
    <category term="æŠ€æœ¯æ–‡æ¡£" scheme="https://vilaswang.github.io/tags/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/"/>
    
    <category term="æŒ‡å—" scheme="https://vilaswang.github.io/tags/%E6%8C%87%E5%8D%97/"/>
    
  </entry>
  
  <entry>
    <title>IO äº‹ä»¶åˆ†ç±»æ¦‚å¿µ</title>
    <link href="https://vilaswang.github.io/posts/ecdf807f/"/>
    <id>https://vilaswang.github.io/posts/ecdf807f/</id>
    <published>2025-12-09T06:09:55.000Z</published>
    <updated>2025-12-17T15:36:29.263Z</updated>
    
    <content type="html"><![CDATA[<h1 id="IO-äº‹ä»¶åˆ†ç±»æ¦‚å¿µ"><a href="#IO-äº‹ä»¶åˆ†ç±»æ¦‚å¿µ" class="headerlink" title="IO äº‹ä»¶åˆ†ç±»æ¦‚å¿µ"></a>IO äº‹ä»¶åˆ†ç±»æ¦‚å¿µ</h1><blockquote><p><strong>æ–‡æ¡£åˆ›å»ºæ—¶é—´</strong>: 2025-11-14<br><strong>æœ€åæ›´æ–°</strong>: 2025-11-14<br><strong>æ ‡ç­¾</strong>: <code>io</code>, <code>events</code>, <code>networking</code>, <code>system-programming</code>, <code>poll</code>, <code>epoll</code></p></blockquote><h2 id="ğŸ“‘-ç›®å½•"><a href="#ğŸ“‘-ç›®å½•" class="headerlink" title="ğŸ“‘ ç›®å½•"></a>ğŸ“‘ ç›®å½•</h2><ul><li><a href="#1-%E6%A6%82%E8%BF%B0">1. æ¦‚è¿°</a></li><li><a href="#2-io-%E4%BA%8B%E4%BB%B6%E7%B1%BB%E5%9E%8B">2. I&#x2F;O äº‹ä»¶ç±»å‹</a><ul><li><a href="#21-%E7%BD%91%E7%BB%9Cio%E4%BA%8B%E4%BB%B6">2.1 ç½‘ç»œI&#x2F;Oäº‹ä»¶</a></li><li><a href="#22-%E6%96%87%E4%BB%B6io%E4%BA%8B%E4%BB%B6">2.2 æ–‡ä»¶I&#x2F;Oäº‹ä»¶</a></li><li><a href="#23-%E8%AE%BE%E5%A4%87io%E4%BA%8B%E4%BB%B6">2.3 è®¾å¤‡I&#x2F;Oäº‹ä»¶</a></li><li><a href="#24-%E5%AE%9A%E6%97%B6%E5%99%A8%E4%BA%8B%E4%BB%B6">2.4 å®šæ—¶å™¨äº‹ä»¶</a></li><li><a href="#25-%E4%BF%A1%E5%8F%B7%E4%BA%8B%E4%BB%B6">2.5 ä¿¡å·äº‹ä»¶</a></li></ul></li><li><a href="#3-%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E4%B8%AD%E7%9A%84io%E4%BA%8B%E4%BB%B6">3. ç½‘ç»œç¼–ç¨‹ä¸­çš„I&#x2F;Oäº‹ä»¶</a></li><li><a href="#4-%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5">4. äº‹ä»¶å¤„ç†æœ€ä½³å®è·µ</a></li></ul><hr><h2 id="1-ğŸ“–-æ¦‚è¿°"><a href="#1-ğŸ“–-æ¦‚è¿°" class="headerlink" title="1. ğŸ“– æ¦‚è¿°"></a>1. ğŸ“– æ¦‚è¿°</h2><p>åœ¨è®¡ç®—æœºç³»ç»Ÿä¸­ï¼ŒI&#x2F;Oï¼ˆè¾“å…¥&#x2F;è¾“å‡ºï¼‰äº‹ä»¶æ˜¯ç³»ç»Ÿé€šçŸ¥ç¨‹åºæŸä¸ª I&#x2F;O æ“ä½œçŠ¶æ€å˜åŒ–çš„æœºåˆ¶ã€‚æ­£ç¡®ç†è§£å’Œåˆ†ç±»è¿™äº›äº‹ä»¶å¯¹äºé«˜æ•ˆçš„ç½‘ç»œç¼–ç¨‹è‡³å…³é‡è¦ã€‚</p><hr><h2 id="2-ğŸ”§-I-O-äº‹ä»¶ç±»å‹"><a href="#2-ğŸ”§-I-O-äº‹ä»¶ç±»å‹" class="headerlink" title="2. ğŸ”§ I&#x2F;O äº‹ä»¶ç±»å‹"></a>2. ğŸ”§ I&#x2F;O äº‹ä»¶ç±»å‹</h2><h3 id="2-1-ğŸŒ-ç½‘ç»œI-Oäº‹ä»¶"><a href="#2-1-ğŸŒ-ç½‘ç»œI-Oäº‹ä»¶" class="headerlink" title="2.1 ğŸŒ ç½‘ç»œI&#x2F;Oäº‹ä»¶"></a>2.1 ğŸŒ ç½‘ç»œI&#x2F;Oäº‹ä»¶</h3><p>ç½‘ç»œç¼–ç¨‹ä¸­æœ€å¸¸è§çš„ I&#x2F;O äº‹ä»¶ç±»å‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    A[ç½‘ç»œI/Oäº‹ä»¶] --&gt; B[å¯è¯»äº‹ä»¶]</span><br><span class="line">    A --&gt; C[å¯å†™äº‹ä»¶]</span><br><span class="line">    A --&gt; D[é”™è¯¯äº‹ä»¶]</span><br><span class="line">    A --&gt; E[æŒ‚èµ·äº‹ä»¶]</span><br><span class="line"></span><br><span class="line">    B --&gt; B1[æ•°æ®åˆ°è¾¾]</span><br><span class="line">    B --&gt; B2[æ–°è¿æ¥è¯·æ±‚]</span><br><span class="line">    B --&gt; B3[å¯¹ç«¯å…³é—­]</span><br><span class="line"></span><br><span class="line">    C --&gt; C1[ç¼“å†²åŒºæœ‰ç©ºé—´]</span><br><span class="line">    C --&gt; C2[è¿æ¥å»ºç«‹å®Œæˆ]</span><br><span class="line"></span><br><span class="line">    D --&gt; D1[è¿æ¥å¼‚å¸¸]</span><br><span class="line">    D --&gt; D2[åè®®é”™è¯¯]</span><br><span class="line"></span><br><span class="line">    E --&gt; E1[å¯¹ç«¯ä¸»åŠ¨å…³é—­]</span><br><span class="line">    E --&gt; E2[è¿æ¥æ–­å¼€]</span><br></pre></td></tr></table></figure><h4 id="å¯è¯»äº‹ä»¶ï¼ˆRead-Eventï¼‰"><a href="#å¯è¯»äº‹ä»¶ï¼ˆRead-Eventï¼‰" class="headerlink" title="å¯è¯»äº‹ä»¶ï¼ˆRead Eventï¼‰"></a>å¯è¯»äº‹ä»¶ï¼ˆRead Eventï¼‰</h4><ul><li><strong>å®šä¹‰</strong>: æ•°æ®åˆ°è¾¾ï¼Œå¯ä»¥è¯»å–</li><li><strong>åœºæ™¯</strong>:<ul><li>æ¥æ”¶åˆ°ç½‘ç»œæ•°æ®</li><li>æ–°çš„è¿æ¥è¯·æ±‚ï¼ˆç›‘å¬å¥—æ¥å­—ï¼‰</li><li>å¯¹ç«¯å…³é—­è¿æ¥ï¼ˆè¯»å–è¿”å›0ï¼‰</li></ul></li></ul><h4 id="å¯å†™äº‹ä»¶ï¼ˆWrite-Eventï¼‰"><a href="#å¯å†™äº‹ä»¶ï¼ˆWrite-Eventï¼‰" class="headerlink" title="å¯å†™äº‹ä»¶ï¼ˆWrite Eventï¼‰"></a>å¯å†™äº‹ä»¶ï¼ˆWrite Eventï¼‰</h4><ul><li><strong>å®šä¹‰</strong>: ç¼“å†²åŒºæœ‰ç©ºé—´ï¼Œå¯ä»¥å†™å…¥æ•°æ®</li><li><strong>åœºæ™¯</strong>:<ul><li>å‘é€ç¼“å†²åŒºæœ‰ç©ºé—´</li><li>éé˜»å¡è¿æ¥å»ºç«‹å®Œæˆ</li></ul></li></ul><h4 id="é”™è¯¯äº‹ä»¶ï¼ˆError-Eventï¼‰"><a href="#é”™è¯¯äº‹ä»¶ï¼ˆError-Eventï¼‰" class="headerlink" title="é”™è¯¯äº‹ä»¶ï¼ˆError Eventï¼‰"></a>é”™è¯¯äº‹ä»¶ï¼ˆError Eventï¼‰</h4><ul><li><strong>å®šä¹‰</strong>: è¿æ¥å‡ºç°é”™è¯¯</li><li><strong>åœºæ™¯</strong>:<ul><li>ç½‘ç»œè¿æ¥å¼‚å¸¸</li><li>åè®®é”™è¯¯</li><li>èµ„æºä¸è¶³</li></ul></li></ul><h4 id="æŒ‚èµ·äº‹ä»¶ï¼ˆHangup-Eventï¼‰"><a href="#æŒ‚èµ·äº‹ä»¶ï¼ˆHangup-Eventï¼‰" class="headerlink" title="æŒ‚èµ·äº‹ä»¶ï¼ˆHangup Eventï¼‰"></a>æŒ‚èµ·äº‹ä»¶ï¼ˆHangup Eventï¼‰</h4><ul><li><strong>å®šä¹‰</strong>: è¿æ¥è¢«å¯¹ç«¯å…³é—­</li><li><strong>åœºæ™¯</strong>:<ul><li>å¯¹ç«¯ä¸»åŠ¨å…³é—­è¿æ¥</li><li>è¿æ¥æ–­å¼€</li></ul></li></ul><h3 id="2-2-ğŸ“-æ–‡ä»¶I-Oäº‹ä»¶"><a href="#2-2-ğŸ“-æ–‡ä»¶I-Oäº‹ä»¶" class="headerlink" title="2.2 ğŸ“ æ–‡ä»¶I&#x2F;Oäº‹ä»¶"></a>2.2 ğŸ“ æ–‡ä»¶I&#x2F;Oäº‹ä»¶</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">    A[æ–‡ä»¶I/Oäº‹ä»¶] --&gt; B[è¯»å†™äº‹ä»¶]</span><br><span class="line">    A --&gt; C[çŠ¶æ€å˜åŒ–]</span><br><span class="line"></span><br><span class="line">    B --&gt; B1[æ–‡ä»¶å¯è¯»]</span><br><span class="line">    B --&gt; B2[æ–‡ä»¶å¯å†™]</span><br><span class="line"></span><br><span class="line">    C --&gt; C1[æ–‡ä»¶ä¿®æ”¹]</span><br><span class="line">    C --&gt; C2[æ–‡ä»¶åˆ é™¤]</span><br><span class="line">    C --&gt; C3[æƒé™å˜åŒ–]</span><br></pre></td></tr></table></figure><h4 id="è¯»å†™äº‹ä»¶"><a href="#è¯»å†™äº‹ä»¶" class="headerlink" title="è¯»å†™äº‹ä»¶"></a>è¯»å†™äº‹ä»¶</h4><ul><li><strong>æ–‡ä»¶å¯è¯»</strong>: æ–‡ä»¶æè¿°ç¬¦å¯ä»¥è¿›è¡Œè¯»æ“ä½œ</li><li><strong>æ–‡ä»¶å¯å†™</strong>: æ–‡ä»¶æè¿°ç¬¦å¯ä»¥è¿›è¡Œå†™æ“ä½œ</li></ul><h4 id="çŠ¶æ€å˜åŒ–äº‹ä»¶"><a href="#çŠ¶æ€å˜åŒ–äº‹ä»¶" class="headerlink" title="çŠ¶æ€å˜åŒ–äº‹ä»¶"></a>çŠ¶æ€å˜åŒ–äº‹ä»¶</h4><ul><li><strong>æ–‡ä»¶ä¿®æ”¹</strong>: æ–‡ä»¶å†…å®¹è¢«ä¿®æ”¹</li><li><strong>æ–‡ä»¶åˆ é™¤</strong>: æ–‡ä»¶è¢«åˆ é™¤</li><li><strong>æƒé™å˜åŒ–</strong>: æ–‡ä»¶æƒé™æˆ–æ‰€æœ‰è€…æ”¹å˜</li></ul><h3 id="2-3-ğŸ”Œ-è®¾å¤‡I-Oäº‹ä»¶"><a href="#2-3-ğŸ”Œ-è®¾å¤‡I-Oäº‹ä»¶" class="headerlink" title="2.3 ğŸ”Œ è®¾å¤‡I&#x2F;Oäº‹ä»¶"></a>2.3 ğŸ”Œ è®¾å¤‡I&#x2F;Oäº‹ä»¶</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    A[è®¾å¤‡I/Oäº‹ä»¶] --&gt; B[ç»ˆç«¯äº‹ä»¶]</span><br><span class="line">    A --&gt; C[ä¸²å£äº‹ä»¶]</span><br><span class="line">    A --&gt; D[ç¡¬ä»¶è®¾å¤‡äº‹ä»¶]</span><br><span class="line"></span><br><span class="line">    B --&gt; B1[é”®ç›˜è¾“å…¥]</span><br><span class="line">    B --&gt; B2[é¼ æ ‡äº‹ä»¶]</span><br><span class="line"></span><br><span class="line">    C --&gt; C1[ä¸²å£æ•°æ®åˆ°è¾¾]</span><br><span class="line">    C --&gt; C2[ä¸²å£å¯å‘é€]</span><br><span class="line"></span><br><span class="line">    D --&gt; D1[USBè®¾å¤‡æ’æ‹”]</span><br><span class="line">    D --&gt; D2[ç¡¬ä»¶çŠ¶æ€å˜åŒ–]</span><br></pre></td></tr></table></figure><h3 id="2-4-â°-å®šæ—¶å™¨äº‹ä»¶"><a href="#2-4-â°-å®šæ—¶å™¨äº‹ä»¶" class="headerlink" title="2.4 â° å®šæ—¶å™¨äº‹ä»¶"></a>2.4 â° å®šæ—¶å™¨äº‹ä»¶</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">    A[å®šæ—¶å™¨äº‹ä»¶] --&gt; B[è¶…æ—¶äº‹ä»¶]</span><br><span class="line"></span><br><span class="line">    B --&gt; B1[å•æ¬¡å®šæ—¶å™¨]</span><br><span class="line">    B --&gt; B2[å‘¨æœŸæ€§å®šæ—¶å™¨]</span><br><span class="line">    B --&gt; B3[ç›¸å¯¹å®šæ—¶å™¨]</span><br><span class="line">    B --&gt; B4[ç»å¯¹å®šæ—¶å™¨]</span><br></pre></td></tr></table></figure><h3 id="2-5-ğŸ“¢-ä¿¡å·äº‹ä»¶"><a href="#2-5-ğŸ“¢-ä¿¡å·äº‹ä»¶" class="headerlink" title="2.5 ğŸ“¢ ä¿¡å·äº‹ä»¶"></a>2.5 ğŸ“¢ ä¿¡å·äº‹ä»¶</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    A[ä¿¡å·äº‹ä»¶] --&gt; B[ç³»ç»Ÿä¿¡å·]</span><br><span class="line">    A --&gt; C[ç”¨æˆ·è‡ªå®šä¹‰ä¿¡å·]</span><br><span class="line"></span><br><span class="line">    B --&gt; B1[SIGTERM]</span><br><span class="line">    B --&gt; B2[SIGINT]</span><br><span class="line">    B --&gt; B3[SIGKILL]</span><br><span class="line">    B --&gt; B4[SIGUSR1]</span><br><span class="line">    B --&gt; B5[SIGUSR2]</span><br></pre></td></tr></table></figure><hr><h2 id="3-ğŸŒ-ç½‘ç»œç¼–ç¨‹ä¸­çš„I-Oäº‹ä»¶"><a href="#3-ğŸŒ-ç½‘ç»œç¼–ç¨‹ä¸­çš„I-Oäº‹ä»¶" class="headerlink" title="3. ğŸŒ ç½‘ç»œç¼–ç¨‹ä¸­çš„I&#x2F;Oäº‹ä»¶"></a>3. ğŸŒ ç½‘ç»œç¼–ç¨‹ä¸­çš„I&#x2F;Oäº‹ä»¶</h2><h3 id="3-1-ğŸ“‹-äº‹ä»¶ç±»å‹è¯¦è§£"><a href="#3-1-ğŸ“‹-äº‹ä»¶ç±»å‹è¯¦è§£" class="headerlink" title="3.1 ğŸ“‹ äº‹ä»¶ç±»å‹è¯¦è§£"></a>3.1 ğŸ“‹ äº‹ä»¶ç±»å‹è¯¦è§£</h3><h4 id="1-å¯è¯»äº‹ä»¶ï¼ˆPOLLIN-POLLPRIï¼‰"><a href="#1-å¯è¯»äº‹ä»¶ï¼ˆPOLLIN-POLLPRIï¼‰" class="headerlink" title="1. å¯è¯»äº‹ä»¶ï¼ˆPOLLIN&#x2F;POLLPRIï¼‰"></a>1. å¯è¯»äº‹ä»¶ï¼ˆPOLLIN&#x2F;POLLPRIï¼‰</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨ poll ç›‘å¬å¯è¯»äº‹ä»¶</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">pollfd</span> <span class="title">fds</span>[1];</span></span><br><span class="line">fds[<span class="number">0</span>].fd = sockfd;</span><br><span class="line">fds[<span class="number">0</span>].events = POLLIN;  <span class="comment">// ç›‘å¬å¯è¯»äº‹ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> ret = poll(fds, <span class="number">1</span>, timeout);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (fds[<span class="number">0</span>].revents &amp; POLLIN) &#123;</span><br><span class="line">    <span class="comment">// å¤„ç†å¯è¯»äº‹ä»¶</span></span><br><span class="line">    handle_read_event(sockfd);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¡¨ç¤ºçš„æƒ…å†µ</strong>:</p><ul><li>âœ… æœ‰æ–°æ•°æ®åˆ°è¾¾ï¼Œå¯ä»¥è¯»å–</li><li>âœ… æ–°çš„è¿æ¥è¯·æ±‚åˆ°è¾¾ï¼ˆå¯¹äºç›‘å¬å¥—æ¥å­—ï¼‰</li><li>âœ… å¯¹ç«¯å…³é—­è¿æ¥ï¼ˆè¯»å–æ—¶ä¼šè¿”å›0ï¼‰</li></ul><h4 id="2-å¯å†™äº‹ä»¶ï¼ˆPOLLOUTï¼‰"><a href="#2-å¯å†™äº‹ä»¶ï¼ˆPOLLOUTï¼‰" class="headerlink" title="2. å¯å†™äº‹ä»¶ï¼ˆPOLLOUTï¼‰"></a>2. å¯å†™äº‹ä»¶ï¼ˆPOLLOUTï¼‰</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç›‘å¬å¯å†™äº‹ä»¶</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">pollfd</span> <span class="title">fds</span>[1];</span></span><br><span class="line">fds[<span class="number">0</span>].fd = sockfd;</span><br><span class="line">fds[<span class="number">0</span>].events = POLLOUT;  <span class="comment">// ç›‘å¬å¯å†™äº‹ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> ret = poll(fds, <span class="number">1</span>, timeout);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (fds[<span class="number">0</span>].revents &amp; POLLOUT) &#123;</span><br><span class="line">    <span class="comment">// å¤„ç†å¯å†™äº‹ä»¶</span></span><br><span class="line">    handle_write_event(sockfd);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¡¨ç¤ºçš„æƒ…å†µ</strong>:</p><ul><li>âœ… å‘é€ç¼“å†²åŒºæœ‰ç©ºé—´</li><li>âœ… è¿æ¥å»ºç«‹å®Œæˆï¼ˆå¯¹äºéé˜»å¡è¿æ¥ï¼‰</li></ul><h4 id="3-é”™è¯¯äº‹ä»¶ï¼ˆPOLLERRï¼‰"><a href="#3-é”™è¯¯äº‹ä»¶ï¼ˆPOLLERRï¼‰" class="headerlink" title="3. é”™è¯¯äº‹ä»¶ï¼ˆPOLLERRï¼‰"></a>3. é”™è¯¯äº‹ä»¶ï¼ˆPOLLERRï¼‰</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ£€æŸ¥é”™è¯¯äº‹ä»¶</span></span><br><span class="line"><span class="keyword">if</span> (fds[<span class="number">0</span>].revents &amp; POLLERR) &#123;</span><br><span class="line">    <span class="comment">// å¤„ç†é”™è¯¯äº‹ä»¶</span></span><br><span class="line">    handle_error_event(sockfd);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¡¨ç¤ºçš„æƒ…å†µ</strong>:</p><ul><li>âŒ è¿æ¥å¼‚å¸¸</li><li>âŒ åè®®é”™è¯¯</li><li>âŒ ç½‘ç»œä¸å¯è¾¾</li></ul><h4 id="4-æŒ‚èµ·äº‹ä»¶ï¼ˆPOLLHUPï¼‰"><a href="#4-æŒ‚èµ·äº‹ä»¶ï¼ˆPOLLHUPï¼‰" class="headerlink" title="4. æŒ‚èµ·äº‹ä»¶ï¼ˆPOLLHUPï¼‰"></a>4. æŒ‚èµ·äº‹ä»¶ï¼ˆPOLLHUPï¼‰</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ£€æŸ¥æŒ‚èµ·äº‹ä»¶</span></span><br><span class="line"><span class="keyword">if</span> (fds[<span class="number">0</span>].revents &amp; POLLHUP) &#123;</span><br><span class="line">    <span class="comment">// å¤„ç†è¿æ¥å…³é—­</span></span><br><span class="line">    handle_hangup_event(sockfd);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¡¨ç¤ºçš„æƒ…å†µ</strong>:</p><ul><li>âš ï¸ å¯¹ç«¯ä¸»åŠ¨å…³é—­è¿æ¥</li><li>âš ï¸ è¿æ¥æ–­å¼€</li></ul><h4 id="5-æ— æ•ˆäº‹ä»¶ï¼ˆPOLLNVALï¼‰"><a href="#5-æ— æ•ˆäº‹ä»¶ï¼ˆPOLLNVALï¼‰" class="headerlink" title="5. æ— æ•ˆäº‹ä»¶ï¼ˆPOLLNVALï¼‰"></a>5. æ— æ•ˆäº‹ä»¶ï¼ˆPOLLNVALï¼‰</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ£€æŸ¥æ— æ•ˆäº‹ä»¶</span></span><br><span class="line"><span class="keyword">if</span> (fds[<span class="number">0</span>].revents &amp; POLLNVAL) &#123;</span><br><span class="line">    <span class="comment">// å¤„ç†æ— æ•ˆæ–‡ä»¶æè¿°ç¬¦</span></span><br><span class="line">    handle_invalid_event(sockfd);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¡¨ç¤ºçš„æƒ…å†µ</strong>:</p><ul><li>âŒ æ–‡ä»¶æè¿°ç¬¦æœªæ‰“å¼€æˆ–å·²å…³é—­</li></ul><h3 id="3-2-ğŸ”„-äº‹ä»¶å¤„ç†æµç¨‹"><a href="#3-2-ğŸ”„-äº‹ä»¶å¤„ç†æµç¨‹" class="headerlink" title="3.2 ğŸ”„ äº‹ä»¶å¤„ç†æµç¨‹"></a>3.2 ğŸ”„ äº‹ä»¶å¤„ç†æµç¨‹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">    participant App as åº”ç”¨ç¨‹åº</span><br><span class="line">    participant Kernel as å†…æ ¸</span><br><span class="line">    participant Network as ç½‘ç»œ</span><br><span class="line"></span><br><span class="line">    App-&gt;&gt;Kernel: poll/epoll_wait</span><br><span class="line">    Kernel-&gt;&gt;Network: ç›‘å¬äº‹ä»¶</span><br><span class="line">    Network-&gt;&gt;Kernel: äº‹ä»¶å‘ç”Ÿ</span><br><span class="line">    Kernel-&gt;&gt;App: è¿”å›å°±ç»ªäº‹ä»¶</span><br><span class="line">    App-&gt;&gt;App: å¤„ç†äº‹ä»¶</span><br><span class="line">    App-&gt;&gt;Kernel: ç»§ç»­ç›‘å¬</span><br></pre></td></tr></table></figure><hr><h2 id="4-ğŸ’¡-äº‹ä»¶å¤„ç†æœ€ä½³å®è·µ"><a href="#4-ğŸ’¡-äº‹ä»¶å¤„ç†æœ€ä½³å®è·µ" class="headerlink" title="4. ğŸ’¡ äº‹ä»¶å¤„ç†æœ€ä½³å®è·µ"></a>4. ğŸ’¡ äº‹ä»¶å¤„ç†æœ€ä½³å®è·µ</h2><h3 id="4-1-ğŸ¯-äº‹ä»¶å¤„ç†ç­–ç•¥"><a href="#4-1-ğŸ¯-äº‹ä»¶å¤„ç†ç­–ç•¥" class="headerlink" title="4.1 ğŸ¯ äº‹ä»¶å¤„ç†ç­–ç•¥"></a>4.1 ğŸ¯ äº‹ä»¶å¤„ç†ç­–ç•¥</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// äº‹ä»¶å¤„ç†çš„æœ€ä½³å®è·µç¤ºä¾‹</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">handle_events</span><span class="params">(<span class="keyword">struct</span> pollfd *fds, <span class="type">int</span> nfds)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; nfds; i++) &#123;</span><br><span class="line">        <span class="type">int</span> fd = fds[i].fd;</span><br><span class="line">        <span class="type">short</span> revents = fds[i].revents;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (revents == <span class="number">0</span>) <span class="keyword">continue</span>;  <span class="comment">// æ— äº‹ä»¶</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä¼˜å…ˆå¤„ç†é”™è¯¯å’ŒæŒ‚èµ·äº‹ä»¶</span></span><br><span class="line">        <span class="keyword">if</span> (revents &amp; POLLNVAL) &#123;</span><br><span class="line">            close(fd);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (revents &amp; POLLERR) &#123;</span><br><span class="line">            handle_socket_error(fd);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (revents &amp; POLLHUP) &#123;</span><br><span class="line">            handle_socket_hangup(fd);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¤„ç†å¯è¯»äº‹ä»¶</span></span><br><span class="line">        <span class="keyword">if</span> (revents &amp; POLLIN) &#123;</span><br><span class="line">            handle_read_event(fd);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¤„ç†å¯å†™äº‹ä»¶</span></span><br><span class="line">        <span class="keyword">if</span> (revents &amp; POLLOUT) &#123;</span><br><span class="line">            handle_write_event(fd);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¤„ç†ç´§æ€¥æ•°æ®</span></span><br><span class="line">        <span class="keyword">if</span> (revents &amp; POLLPRI) &#123;</span><br><span class="line">            handle_urgent_data(fd);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-2-âš ï¸-æ³¨æ„äº‹é¡¹"><a href="#4-2-âš ï¸-æ³¨æ„äº‹é¡¹" class="headerlink" title="4.2 âš ï¸ æ³¨æ„äº‹é¡¹"></a>4.2 âš ï¸ æ³¨æ„äº‹é¡¹</h3><ol><li><strong>äº‹ä»¶ä¼˜å…ˆçº§</strong>: é”™è¯¯äº‹ä»¶ &gt; æŒ‚èµ·äº‹ä»¶ &gt; è¯»å†™äº‹ä»¶</li><li><strong>è¾¹ç¼˜è§¦å‘</strong>: ä½¿ç”¨ ET æ¨¡å¼æ—¶è¦ç¡®ä¿å¤„ç†å®Œæ‰€æœ‰æ•°æ®</li><li><strong>èµ„æºç®¡ç†</strong>: åŠæ—¶å…³é—­æ— æ•ˆçš„æ–‡ä»¶æè¿°ç¬¦</li><li><strong>æ€§èƒ½ä¼˜åŒ–</strong>: é¿å…ä¸å¿…è¦çš„äº‹ä»¶ç›‘å¬</li></ol><h3 id="4-3-ğŸ”§-å¸¸è§é—®é¢˜è§£å†³"><a href="#4-3-ğŸ”§-å¸¸è§é—®é¢˜è§£å†³" class="headerlink" title="4.3 ğŸ”§ å¸¸è§é—®é¢˜è§£å†³"></a>4.3 ğŸ”§ å¸¸è§é—®é¢˜è§£å†³</h3><table><thead><tr><th>é—®é¢˜</th><th>åŸå› </th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td><strong>CPUå ç”¨è¿‡é«˜</strong></td><td>å¿™ç­‰å¾…æˆ–äº‹ä»¶å¤„ç†ä¸å½“</td><td>ä½¿ç”¨é˜»å¡I&#x2F;Oæˆ–ä¼˜åŒ–äº‹ä»¶å¾ªç¯</td></tr><tr><td><strong>äº‹ä»¶ä¸¢å¤±</strong></td><td>è¾¹ç¼˜è§¦å‘æ¨¡å¼å¤„ç†ä¸å®Œæ•´</td><td>ä½¿ç”¨æ°´å¹³è§¦å‘æˆ–ç¡®ä¿æ•°æ®è¯»å®Œ</td></tr><tr><td><strong>è¿æ¥æ³„æ¼</strong></td><td>é”™è¯¯äº‹ä»¶å¤„ç†ä¸å½“</td><td>åŠæ—¶æ¸…ç†å’Œå…³é—­è¿æ¥</td></tr></tbody></table><hr><h2 id="ğŸ“Š-æ€»ç»“"><a href="#ğŸ“Š-æ€»ç»“" class="headerlink" title="ğŸ“Š æ€»ç»“"></a>ğŸ“Š æ€»ç»“</h2><h3 id="âœ…-æ ¸å¿ƒè¦ç‚¹"><a href="#âœ…-æ ¸å¿ƒè¦ç‚¹" class="headerlink" title="âœ… æ ¸å¿ƒè¦ç‚¹"></a>âœ… æ ¸å¿ƒè¦ç‚¹</h3><ul><li><strong>I&#x2F;Oäº‹ä»¶åˆ†ç±»</strong>: ç½‘ç»œã€æ–‡ä»¶ã€è®¾å¤‡ã€å®šæ—¶å™¨ã€ä¿¡å·</li><li><strong>ç½‘ç»œäº‹ä»¶å¤„ç†</strong>: å¯è¯»ã€å¯å†™ã€é”™è¯¯ã€æŒ‚èµ·ã€æ— æ•ˆ</li><li><strong>æœ€ä½³å®è·µ</strong>: äº‹ä»¶ä¼˜å…ˆçº§ã€èµ„æºç®¡ç†ã€æ€§èƒ½ä¼˜åŒ–</li></ul><h3 id="ğŸ¯-å®é™…åº”ç”¨"><a href="#ğŸ¯-å®é™…åº”ç”¨" class="headerlink" title="ğŸ¯ å®é™…åº”ç”¨"></a>ğŸ¯ å®é™…åº”ç”¨</h3><ul><li><strong>WebæœåŠ¡å™¨</strong>: å¤„ç†HTTPè¯·æ±‚å’Œå“åº”</li><li><strong>ä»£ç†æœåŠ¡å™¨</strong>: è½¬å‘å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨æ•°æ®</li><li><strong>èŠå¤©åº”ç”¨</strong>: å®æ—¶æ¶ˆæ¯ä¼ è¾“</li><li><strong>æ–‡ä»¶ç›‘æ§</strong>: ç›‘æ§æ–‡ä»¶ç³»ç»Ÿå˜åŒ–</li></ul><h3 id="ğŸ“š-æ‰©å±•å­¦ä¹ "><a href="#ğŸ“š-æ‰©å±•å­¦ä¹ " class="headerlink" title="ğŸ“š æ‰©å±•å­¦ä¹ "></a>ğŸ“š æ‰©å±•å­¦ä¹ </h3><ul><li><a href="https://man7.org/linux/man-pages/man2/poll.2.html">Linux I&#x2F;O å¤šè·¯å¤ç”¨</a></li><li><a href="https://man7.org/linux/man-pages/man7/epoll.7.html">epoll ç¼–ç¨‹æŒ‡å—</a></li><li><a href="https://github.com/ideawu/immerse">é«˜æ€§èƒ½ç½‘ç»œç¼–ç¨‹</a></li></ul><hr><blockquote><p><strong>ğŸ’¡ æç¤º</strong>: åœ¨å®é™…å¼€å‘ä¸­ï¼Œå»ºè®®ä½¿ç”¨æˆç†Ÿçš„ç½‘ç»œåº“ï¼ˆå¦‚ libeventã€libuvï¼‰æ¥å¤„ç†å¤æ‚çš„äº‹ä»¶ç®¡ç†ï¼Œè¿™äº›åº“å·²ç»å¤„ç†äº†å¤§éƒ¨åˆ†è¾¹ç•Œæƒ…å†µå’Œä¼˜åŒ–ã€‚</p></blockquote>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;IO-äº‹ä»¶åˆ†ç±»æ¦‚å¿µ&quot;&gt;&lt;a href=&quot;#IO-äº‹ä»¶åˆ†ç±»æ¦‚å¿µ&quot; class=&quot;headerlink&quot; title=&quot;IO äº‹ä»¶åˆ†ç±»æ¦‚å¿µ&quot;&gt;&lt;/a&gt;IO äº‹ä»¶åˆ†ç±»æ¦‚å¿µ&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;æ–‡æ¡£åˆ›å»ºæ—¶é—´&lt;/strong&gt;:</summary>
        
      
    
    
    
    <category term="ç³»ç»Ÿçº§ç¼–ç¨‹" scheme="https://vilaswang.github.io/categories/%E7%B3%BB%E7%BB%9F%E7%BA%A7%E7%BC%96%E7%A8%8B/"/>
    
    
    <category term="æŠ€æœ¯æ–‡æ¡£" scheme="https://vilaswang.github.io/tags/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/"/>
    
    <category term="æŒ‡å—" scheme="https://vilaswang.github.io/tags/%E6%8C%87%E5%8D%97/"/>
    
  </entry>
  
  <entry>
    <title>Graphviz æµç¨‹å›¾æŒ‡å—</title>
    <link href="https://vilaswang.github.io/posts/445c44cb/"/>
    <id>https://vilaswang.github.io/posts/445c44cb/</id>
    <published>2025-12-09T06:09:55.000Z</published>
    <updated>2025-12-17T15:36:29.273Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Graphviz-æµç¨‹å›¾æŒ‡å—"><a href="#Graphviz-æµç¨‹å›¾æŒ‡å—" class="headerlink" title="Graphviz æµç¨‹å›¾æŒ‡å—"></a>Graphviz æµç¨‹å›¾æŒ‡å—</h1><blockquote><p><strong>æ–‡æ¡£åˆ›å»ºæ—¶é—´</strong>: 2025-11-14<br><strong>æœ€åæ›´æ–°</strong>: 2025-11-14<br><strong>æ ‡ç­¾</strong>: <code>graphviz</code>, <code>flowchart</code>, <code>diagram</code>, <code>visualization</code>, <code>documentation</code></p></blockquote><h2 id="ğŸ“‘-ç›®å½•"><a href="#ğŸ“‘-ç›®å½•" class="headerlink" title="ğŸ“‘ ç›®å½•"></a>ğŸ“‘ ç›®å½•</h2><ul><li><a href="#1-%E6%A6%82%E8%BF%B0">1. æ¦‚è¿°</a></li><li><a href="#2-%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87">2. ç¯å¢ƒå‡†å¤‡</a></li><li><a href="#3-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8">3. åŸºæœ¬ä½¿ç”¨</a></li><li><a href="#4-%E8%BE%93%E5%87%BA%E6%A0%BC%E5%BC%8F">4. è¾“å‡ºæ ¼å¼</a></li><li><a href="#5-%E5%B8%B8%E8%A7%81%E7%94%A8%E4%BE%8B">5. å¸¸è§ç”¨ä¾‹</a></li><li><a href="#6-%E9%AB%98%E7%BA%A7%E9%85%8D%E7%BD%AE">6. é«˜çº§é…ç½®</a></li></ul><hr><h2 id="1-ğŸ“–-æ¦‚è¿°"><a href="#1-ğŸ“–-æ¦‚è¿°" class="headerlink" title="1. ğŸ“– æ¦‚è¿°"></a>1. ğŸ“– æ¦‚è¿°</h2><p>Graphviz æ˜¯ä¸€ä¸ªå¼€æºçš„å›¾å½¢å¯è§†åŒ–è½¯ä»¶ï¼Œç‰¹åˆ«é€‚åˆç”Ÿæˆå„ç§æµç¨‹å›¾ã€æ¶æ„å›¾å’Œå…³ç³»å›¾ã€‚</p><h3 id="ğŸ¯-ä¸»è¦ç”¨é€”"><a href="#ğŸ¯-ä¸»è¦ç”¨é€”" class="headerlink" title="ğŸ¯ ä¸»è¦ç”¨é€”"></a>ğŸ¯ ä¸»è¦ç”¨é€”</h3><ul><li>âœ… æµç¨‹å›¾ç”Ÿæˆ</li><li>âœ… ç³»ç»Ÿæ¶æ„å›¾</li><li>âœ… ç±»å…³ç³»å›¾</li><li>âœ… ä¾èµ–å…³ç³»å›¾</li><li>âœ… çŠ¶æ€æœºå›¾</li></ul><hr><h2 id="2-ğŸ”§-ç¯å¢ƒå‡†å¤‡"><a href="#2-ğŸ”§-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="2. ğŸ”§ ç¯å¢ƒå‡†å¤‡"></a>2. ğŸ”§ ç¯å¢ƒå‡†å¤‡</h2><h3 id="2-1-å®‰è£…ä¾èµ–"><a href="#2-1-å®‰è£…ä¾èµ–" class="headerlink" title="2.1 å®‰è£…ä¾èµ–"></a>2.1 å®‰è£…ä¾èµ–</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Graphviz æµç¨‹å›¾æŒ‡å—</span></span><br><span class="line">pip install graphviz</span><br><span class="line"></span><br><span class="line"><span class="comment"># Graphviz æµç¨‹å›¾æŒ‡å—</span></span><br><span class="line">conda install python-graphviz</span><br><span class="line"></span><br><span class="line"><span class="comment"># Graphviz æµç¨‹å›¾æŒ‡å—</span></span><br><span class="line"><span class="built_in">sudo</span> apt-get install graphviz</span><br></pre></td></tr></table></figure><h3 id="2-2-éªŒè¯å®‰è£…"><a href="#2-2-éªŒè¯å®‰è£…" class="headerlink" title="2.2 éªŒè¯å®‰è£…"></a>2.2 éªŒè¯å®‰è£…</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> graphviz</span><br><span class="line"></span><br><span class="line"><span class="comment"># Graphviz æµç¨‹å›¾æŒ‡å—</span></span><br><span class="line">dot = graphviz.Digraph(comment=<span class="string">&#x27;Test Graph&#x27;</span>)</span><br><span class="line">dot.node(<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;Test Node&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(dot.source)  <span class="comment"># è¾“å‡º DOT æºç </span></span><br></pre></td></tr></table></figure><hr><h2 id="3-ğŸš€-åŸºæœ¬ä½¿ç”¨"><a href="#3-ğŸš€-åŸºæœ¬ä½¿ç”¨" class="headerlink" title="3. ğŸš€ åŸºæœ¬ä½¿ç”¨"></a>3. ğŸš€ åŸºæœ¬ä½¿ç”¨</h2><h3 id="3-1-ç”Ÿæˆæµç¨‹å›¾"><a href="#3-1-ç”Ÿæˆæµç¨‹å›¾" class="headerlink" title="3.1 ç”Ÿæˆæµç¨‹å›¾"></a>3.1 ç”Ÿæˆæµç¨‹å›¾</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Graphviz æµç¨‹å›¾æŒ‡å—</span></span><br><span class="line">python drogon_flow_diagram.py</span><br></pre></td></tr></table></figure><h3 id="3-2-åŸºæœ¬ç¤ºä¾‹"><a href="#3-2-åŸºæœ¬ç¤ºä¾‹" class="headerlink" title="3.2 åŸºæœ¬ç¤ºä¾‹"></a>3.2 åŸºæœ¬ç¤ºä¾‹</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> graphviz <span class="keyword">import</span> Digraph</span><br><span class="line"></span><br><span class="line"><span class="comment"># Graphviz æµç¨‹å›¾æŒ‡å—</span></span><br><span class="line">dot = Digraph(comment=<span class="string">&#x27;Simple Flowchart&#x27;</span>)</span><br><span class="line">dot.attr(rankdir=<span class="string">&#x27;LR&#x27;</span>)  <span class="comment"># ä»å·¦åˆ°å³å¸ƒå±€</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Graphviz æµç¨‹å›¾æŒ‡å—</span></span><br><span class="line">dot.node(<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;å¼€å§‹&#x27;</span>)</span><br><span class="line">dot.node(<span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;å¤„ç†&#x27;</span>)</span><br><span class="line">dot.node(<span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;ç»“æŸ&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Graphviz æµç¨‹å›¾æŒ‡å—</span></span><br><span class="line">dot.edges([<span class="string">&#x27;AB&#x27;</span>, <span class="string">&#x27;BC&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># Graphviz æµç¨‹å›¾æŒ‡å—</span></span><br><span class="line">dot.render(<span class="string">&#x27;flowchart&#x27;</span>, <span class="built_in">format</span>=<span class="string">&#x27;png&#x27;</span>, cleanup=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><hr><h2 id="4-ğŸ“-è¾“å‡ºæ ¼å¼"><a href="#4-ğŸ“-è¾“å‡ºæ ¼å¼" class="headerlink" title="4. ğŸ“ è¾“å‡ºæ ¼å¼"></a>4. ğŸ“ è¾“å‡ºæ ¼å¼</h2><p>ç”Ÿæˆçš„æ–‡ä»¶åŒ…æ‹¬ï¼š</p><table><thead><tr><th>æ–‡ä»¶å</th><th>æ ¼å¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>drogon_http_flow.png</code></td><td>PNG</td><td>ä½å›¾æ ¼å¼ï¼Œé€‚åˆç½‘é¡µæ˜¾ç¤º</td></tr><tr><td><code>drogon_http_flow.svg</code></td><td>SVG</td><td>çŸ¢é‡å›¾ï¼Œå¯ç¼©æ”¾</td></tr><tr><td><code>drogon_http_flow.pdf</code></td><td>PDF</td><td>é€‚åˆæ‰“å°å’Œæ–‡æ¡£</td></tr><tr><td><code>drogon_http_flow.dot</code></td><td>DOT</td><td>Graphviz æºç </td></tr></tbody></table><hr><h2 id="5-ğŸ’¡-å¸¸è§ç”¨ä¾‹"><a href="#5-ğŸ’¡-å¸¸è§ç”¨ä¾‹" class="headerlink" title="5. ğŸ’¡ å¸¸è§ç”¨ä¾‹"></a>5. ğŸ’¡ å¸¸è§ç”¨ä¾‹</h2><h3 id="5-1-ç³»ç»Ÿæ¶æ„å›¾"><a href="#5-1-ç³»ç»Ÿæ¶æ„å›¾" class="headerlink" title="5.1 ç³»ç»Ÿæ¶æ„å›¾"></a>5.1 ç³»ç»Ÿæ¶æ„å›¾</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">dot = Digraph(comment=<span class="string">&#x27;System Architecture&#x27;</span>)</span><br><span class="line">dot.attr(rankdir=<span class="string">&#x27;TB&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Graphviz æµç¨‹å›¾æŒ‡å—</span></span><br><span class="line"><span class="keyword">with</span> dot.subgraph(name=<span class="string">&#x27;cluster_frontend&#x27;</span>) <span class="keyword">as</span> c:</span><br><span class="line">    c.attr(label=<span class="string">&#x27;Frontend&#x27;</span>)</span><br><span class="line">    c.node(<span class="string">&#x27;web&#x27;</span>, <span class="string">&#x27;Web App&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> dot.subgraph(name=<span class="string">&#x27;cluster_backend&#x27;</span>) <span class="keyword">as</span> c:</span><br><span class="line">    c.attr(label=<span class="string">&#x27;Backend&#x27;</span>)</span><br><span class="line">    c.node(<span class="string">&#x27;api&#x27;</span>, <span class="string">&#x27;API Server&#x27;</span>)</span><br><span class="line">    c.node(<span class="string">&#x27;db&#x27;</span>, <span class="string">&#x27;Database&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Graphviz æµç¨‹å›¾æŒ‡å—</span></span><br><span class="line">dot.edge(<span class="string">&#x27;web&#x27;</span>, <span class="string">&#x27;api&#x27;</span>)</span><br><span class="line">dot.edge(<span class="string">&#x27;api&#x27;</span>, <span class="string">&#x27;db&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="5-2-ç±»å…³ç³»å›¾"><a href="#5-2-ç±»å…³ç³»å›¾" class="headerlink" title="5.2 ç±»å…³ç³»å›¾"></a>5.2 ç±»å…³ç³»å›¾</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">dot = Digraph(comment=<span class="string">&#x27;Class Diagram&#x27;</span>)</span><br><span class="line">dot.attr(rankdir=<span class="string">&#x27;TB&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Graphviz æµç¨‹å›¾æŒ‡å—</span></span><br><span class="line">dot.node(<span class="string">&#x27;Base&#x27;</span>, <span class="string">&#x27;Base Class&#x27;</span>, shape=<span class="string">&#x27;record&#x27;</span>)</span><br><span class="line">dot.node(<span class="string">&#x27;Derived&#x27;</span>, <span class="string">&#x27;Derived Class&#x27;</span>, shape=<span class="string">&#x27;record&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Graphviz æµç¨‹å›¾æŒ‡å—</span></span><br><span class="line">dot.edge(<span class="string">&#x27;Base&#x27;</span>, <span class="string">&#x27;Derived&#x27;</span>, arrowhead=<span class="string">&#x27;empty&#x27;</span>)</span><br></pre></td></tr></table></figure><hr><h2 id="6-âš™ï¸-é«˜çº§é…ç½®"><a href="#6-âš™ï¸-é«˜çº§é…ç½®" class="headerlink" title="6. âš™ï¸ é«˜çº§é…ç½®"></a>6. âš™ï¸ é«˜çº§é…ç½®</h2><h3 id="6-1-æ ·å¼å®šåˆ¶"><a href="#6-1-æ ·å¼å®šåˆ¶" class="headerlink" title="6.1 æ ·å¼å®šåˆ¶"></a>6.1 æ ·å¼å®šåˆ¶</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dot.attr(<span class="string">&#x27;node&#x27;</span>, shape=<span class="string">&#x27;box&#x27;</span>, style=<span class="string">&#x27;rounded,filled&#x27;</span>, fillcolor=<span class="string">&#x27;lightblue&#x27;</span>)</span><br><span class="line">dot.attr(<span class="string">&#x27;edge&#x27;</span>, color=<span class="string">&#x27;darkblue&#x27;</span>, fontcolor=<span class="string">&#x27;darkblue&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="6-2-å­å›¾ç»„ç»‡"><a href="#6-2-å­å›¾ç»„ç»‡" class="headerlink" title="6.2 å­å›¾ç»„ç»‡"></a>6.2 å­å›¾ç»„ç»‡</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> dot.subgraph(name=<span class="string">&#x27;cluster_module1&#x27;</span>) <span class="keyword">as</span> c:</span><br><span class="line">    c.attr(label=<span class="string">&#x27;Module 1&#x27;</span>, style=<span class="string">&#x27;filled&#x27;</span>, color=<span class="string">&#x27;lightgrey&#x27;</span>)</span><br><span class="line">    c.node(<span class="string">&#x27;m1_a&#x27;</span>, <span class="string">&#x27;Component A&#x27;</span>)</span><br><span class="line">    c.node(<span class="string">&#x27;m1_b&#x27;</span>, <span class="string">&#x27;Component B&#x27;</span>)</span><br></pre></td></tr></table></figure><hr><h2 id="ğŸ“š-ç›¸å…³èµ„æº"><a href="#ğŸ“š-ç›¸å…³èµ„æº" class="headerlink" title="ğŸ“š ç›¸å…³èµ„æº"></a>ğŸ“š ç›¸å…³èµ„æº</h2><ul><li><a href="https://graphviz.org/documentation/">Graphviz å®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://graphviz.readthedocs.io/">Python graphviz åº“</a></li><li><a href="https://graphviz.org/doc/info/lang.html">DOT è¯­è¨€æŒ‡å—</a></li></ul><hr><blockquote><p><strong>ğŸ’¡ æç¤º</strong>: Graphviz ç‰¹åˆ«é€‚åˆç”ŸæˆæŠ€æœ¯æ–‡æ¡£ä¸­çš„æ¶æ„å›¾å’Œæµç¨‹å›¾ï¼Œå»ºè®®ä¸å…¶ä»–æ–‡æ¡£ç”Ÿæˆå·¥å…·é…åˆä½¿ç”¨ã€‚</p></blockquote>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;Graphviz-æµç¨‹å›¾æŒ‡å—&quot;&gt;&lt;a href=&quot;#Graphviz-æµç¨‹å›¾æŒ‡å—&quot; class=&quot;headerlink&quot; title=&quot;Graphviz æµç¨‹å›¾æŒ‡å—&quot;&gt;&lt;/a&gt;Graphviz</summary>
        
      
    
    
    
    <category term="å¼€å‘å·¥å…·" scheme="https://vilaswang.github.io/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="æŠ€æœ¯æ–‡æ¡£" scheme="https://vilaswang.github.io/tags/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/"/>
    
    <category term="æŒ‡å—" scheme="https://vilaswang.github.io/tags/%E6%8C%87%E5%8D%97/"/>
    
  </entry>
  
  <entry>
    <title>Drogon Windows æ„å»ºæŒ‡å—</title>
    <link href="https://vilaswang.github.io/posts/58c0a1f/"/>
    <id>https://vilaswang.github.io/posts/58c0a1f/</id>
    <published>2025-12-09T06:09:55.000Z</published>
    <updated>2025-12-17T15:36:29.310Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Drogon-Windows-æ„å»ºæŒ‡å—"><a href="#Drogon-Windows-æ„å»ºæŒ‡å—" class="headerlink" title="Drogon Windows æ„å»ºæŒ‡å—"></a>Drogon Windows æ„å»ºæŒ‡å—</h1><blockquote><p><strong>æ–‡æ¡£åˆ›å»ºæ—¶é—´</strong>: 2025-11-14<br><strong>æœ€åæ›´æ–°</strong>: 2025-11-14<br><strong>æ ‡ç­¾</strong>: <code>drogon</code>, <code>cpp</code>, <code>windows</code>, <code>source-build</code>, <code>cmake</code>, <code>conan</code></p></blockquote><h2 id="ğŸ“‘-ç›®å½•"><a href="#ğŸ“‘-ç›®å½•" class="headerlink" title="ğŸ“‘ ç›®å½•"></a>ğŸ“‘ ç›®å½•</h2><ul><li><a href="#1-%E6%A6%82%E8%BF%B0">1. æ¦‚è¿°</a></li><li><a href="#2-%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87">2. ç¯å¢ƒå‡†å¤‡</a></li><li><a href="#3-%E6%BA%90%E7%A0%81%E4%B8%8B%E8%BD%BD">3. æºç ä¸‹è½½</a></li><li><a href="#4-%E4%BE%9D%E8%B5%96%E5%AE%89%E8%A3%85">4. ä¾èµ–å®‰è£…</a></li><li><a href="#5-%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85">5. ç¼–è¯‘å®‰è£…</a></li><li><a href="#6-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE">6. ç¯å¢ƒé…ç½®</a></li><li><a href="#7-%E5%88%9B%E5%BB%BA%E6%96%B0%E9%A1%B9%E7%9B%AE">7. åˆ›å»ºæ–°é¡¹ç›®</a></li><li><a href="#8-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98">8. å¸¸è§é—®é¢˜</a></li></ul><hr><h2 id="1-ğŸ“–-æ¦‚è¿°"><a href="#1-ğŸ“–-æ¦‚è¿°" class="headerlink" title="1. ğŸ“– æ¦‚è¿°"></a>1. ğŸ“– æ¦‚è¿°</h2><p>Drogon æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„ C++ Web æ¡†æ¶ã€‚æœ¬æŒ‡å—ä»‹ç»å¦‚ä½•åœ¨ Windows ç³»ç»Ÿä¸Šä»æºç ç¼–è¯‘å®‰è£… Drogonã€‚</p><h3 id="ğŸ¯-å®‰è£…ç›®æ ‡"><a href="#ğŸ¯-å®‰è£…ç›®æ ‡" class="headerlink" title="ğŸ¯ å®‰è£…ç›®æ ‡"></a>ğŸ¯ å®‰è£…ç›®æ ‡</h3><ul><li>âœ… ä»æºç ç¼–è¯‘ Drogon æ¡†æ¶</li><li>âœ… é…ç½®å¼€å‘ç¯å¢ƒ</li><li>âœ… åˆ›å»ºç¬¬ä¸€ä¸ª Drogon é¡¹ç›®</li><li>âœ… éªŒè¯å®‰è£…æˆåŠŸ</li></ul><hr><h2 id="2-ğŸ”§-ç¯å¢ƒå‡†å¤‡"><a href="#2-ğŸ”§-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="2. ğŸ”§ ç¯å¢ƒå‡†å¤‡"></a>2. ğŸ”§ ç¯å¢ƒå‡†å¤‡</h2><h3 id="2-1-å¿…éœ€å·¥å…·"><a href="#2-1-å¿…éœ€å·¥å…·" class="headerlink" title="2.1 å¿…éœ€å·¥å…·"></a>2.1 å¿…éœ€å·¥å…·</h3><ul><li><strong>Visual Studio 2019+</strong> - C++ ç¼–è¯‘å™¨</li><li><strong>Git</strong> - æºç ç®¡ç†</li><li><strong>CMake 3.15+</strong> - æ„å»ºç³»ç»Ÿ</li><li><strong>Conan</strong> - C++ åŒ…ç®¡ç†å™¨</li></ul><h3 id="2-2-å®‰è£…-Conan"><a href="#2-2-å®‰è£…-Conan" class="headerlink" title="2.2 å®‰è£… Conan"></a>2.2 å®‰è£… Conan</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Drogon Windows æ„å»ºæŒ‡å—</span></span><br><span class="line">pip install conan</span><br><span class="line"></span><br><span class="line"><span class="comment"># Drogon Windows æ„å»ºæŒ‡å—</span></span><br><span class="line">choco install conan</span><br></pre></td></tr></table></figure><hr><h2 id="3-ğŸ“¥-æºç ä¸‹è½½"><a href="#3-ğŸ“¥-æºç ä¸‹è½½" class="headerlink" title="3. ğŸ“¥ æºç ä¸‹è½½"></a>3. ğŸ“¥ æºç ä¸‹è½½</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Drogon Windows æ„å»ºæŒ‡å—</span></span><br><span class="line"><span class="built_in">cd</span> %WORK_PATH%</span><br><span class="line"></span><br><span class="line"><span class="comment"># Drogon Windows æ„å»ºæŒ‡å—</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/drogonframework/drogon</span><br><span class="line"><span class="built_in">cd</span> drogon</span><br><span class="line"></span><br><span class="line"><span class="comment"># Drogon Windows æ„å»ºæŒ‡å—</span></span><br><span class="line">git submodule update --init</span><br></pre></td></tr></table></figure><hr><h2 id="4-ğŸ“¦-ä¾èµ–å®‰è£…"><a href="#4-ğŸ“¦-ä¾èµ–å®‰è£…" class="headerlink" title="4. ğŸ“¦ ä¾èµ–å®‰è£…"></a>4. ğŸ“¦ ä¾èµ–å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Drogon Windows æ„å»ºæŒ‡å—</span></span><br><span class="line"><span class="built_in">mkdir</span> build</span><br><span class="line"><span class="built_in">cd</span> build</span><br><span class="line"></span><br><span class="line"><span class="comment"># Drogon Windows æ„å»ºæŒ‡å—</span></span><br><span class="line">conan profile detect --force</span><br><span class="line"></span><br><span class="line"><span class="comment"># Drogon Windows æ„å»ºæŒ‡å—</span></span><br><span class="line">conan install .. \</span><br><span class="line">    -s compiler=<span class="string">&quot;msvc&quot;</span> \</span><br><span class="line">    -s compiler.version=194 \</span><br><span class="line">    -s compiler.cppstd=17 \</span><br><span class="line">    -s build_type=Debug \</span><br><span class="line">    --output-folder . \</span><br><span class="line">    --build=missing</span><br></pre></td></tr></table></figure><h3 id="4-1-è‡ªå®šä¹‰ä¾èµ–"><a href="#4-1-è‡ªå®šä¹‰ä¾èµ–" class="headerlink" title="4.1 è‡ªå®šä¹‰ä¾èµ–"></a>4.1 è‡ªå®šä¹‰ä¾èµ–</h3><p>ç¼–è¾‘ <code>conanfile.txt</code> å¯ä»¥æ·»åŠ æˆ–ä¿®æ”¹ä¾èµ–ï¼š</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[requires]</span><br><span class="line"># Drogon Windows æ„å»ºæŒ‡å—</span><br><span class="line">[generators]</span><br><span class="line">CMakeDeps</span><br><span class="line">CMakeToolchain</span><br><span class="line"></span><br><span class="line">[options]</span><br><span class="line">shared=False</span><br></pre></td></tr></table></figure><hr><h2 id="5-ğŸ”¨-ç¼–è¯‘å®‰è£…"><a href="#5-ğŸ”¨-ç¼–è¯‘å®‰è£…" class="headerlink" title="5. ğŸ”¨ ç¼–è¯‘å®‰è£…"></a>5. ğŸ”¨ ç¼–è¯‘å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Drogon Windows æ„å»ºæŒ‡å—</span></span><br><span class="line">cmake .. \</span><br><span class="line">    -DCMAKE_BUILD_TYPE=Debug \</span><br><span class="line">    -DCMAKE_TOOLCHAIN_FILE=<span class="string">&quot;conan_toolchain.cmake&quot;</span> \</span><br><span class="line">    -DCMAKE_POLICY_DEFAULT_CMP0091=NEW \</span><br><span class="line">    -DCMAKE_INSTALL_PREFIX=<span class="string">&quot;D:\ThirdParty\drogon&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Drogon Windows æ„å»ºæŒ‡å—</span></span><br><span class="line">cmake --build . --parallel --target install</span><br></pre></td></tr></table></figure><h3 id="5-1-âš ï¸-é‡è¦è¯´æ˜"><a href="#5-1-âš ï¸-é‡è¦è¯´æ˜" class="headerlink" title="5.1 âš ï¸ é‡è¦è¯´æ˜"></a>5.1 âš ï¸ é‡è¦è¯´æ˜</h3><ul><li>Conan å’Œ CMake çš„ build type å¿…é¡»ä¿æŒä¸€è‡´</li><li>Release æ„å»ºæ—¶å°† <code>Debug</code> æ”¹ä¸º <code>Release</code></li><li>å¯æ ¹æ®éœ€è¦ä¿®æ”¹å®‰è£…è·¯å¾„</li></ul><hr><h2 id="6-ğŸ”—-ç¯å¢ƒé…ç½®"><a href="#6-ğŸ”—-ç¯å¢ƒé…ç½®" class="headerlink" title="6. ğŸ”— ç¯å¢ƒé…ç½®"></a>6. ğŸ”— ç¯å¢ƒé…ç½®</h2><h3 id="6-1-å®‰è£…ç»“æœ"><a href="#6-1-å®‰è£…ç»“æœ" class="headerlink" title="6.1 å®‰è£…ç»“æœ"></a>6.1 å®‰è£…ç»“æœ</h3><p>ç¼–è¯‘å®Œæˆåï¼Œä»¥ä¸‹æ–‡ä»¶å°†è¢«å®‰è£…åˆ°æŒ‡å®šç›®å½•ï¼š</p><table><thead><tr><th>æ–‡ä»¶ç±»å‹</th><th>å®‰è£…è·¯å¾„</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>å¤´æ–‡ä»¶</strong></td><td><code>D:\ThirdParty\drogon\include\drogon</code></td><td>Drogon ä¸»è¦å¤´æ–‡ä»¶</td></tr><tr><td><strong>åº“æ–‡ä»¶</strong></td><td><code>D:\ThirdParty\drogon\bin</code></td><td>drogon.dll</td></tr><tr><td><strong>å‘½ä»¤å·¥å…·</strong></td><td><code>D:\ThirdParty\drogon\bin</code></td><td>drogon_ctl.exe</td></tr><tr><td><strong>Trantorå¤´æ–‡ä»¶</strong></td><td><code>D:\ThirdParty\drogon\include\trantor</code></td><td>ä¾èµ–åº“å¤´æ–‡ä»¶</td></tr><tr><td><strong>Trantoråº“æ–‡ä»¶</strong></td><td><code>D:\ThirdParty\drogon\bin</code></td><td>trantor.dll</td></tr></tbody></table><h3 id="6-2-ç¯å¢ƒå˜é‡"><a href="#6-2-ç¯å¢ƒå˜é‡" class="headerlink" title="6.2 ç¯å¢ƒå˜é‡"></a>6.2 ç¯å¢ƒå˜é‡</h3><p>æ·»åŠ ä»¥ä¸‹è·¯å¾„åˆ°ç³»ç»Ÿ <code>PATH</code> ç¯å¢ƒå˜é‡ï¼š</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">D:\<span class="title">ThirdParty</span>\<span class="title">drogon</span>\<span class="title">bin</span></span></span><br><span class="line"><span class="function"><span class="title">D</span>:\<span class="title">ThirdParty</span>\<span class="title">drogon</span>\<span class="title">lib</span>\<span class="title">cmake</span>\<span class="title">Drogon</span></span></span><br><span class="line"><span class="function"><span class="title">D</span>:\<span class="title">ThirdParty</span>\<span class="title">drogon</span>\<span class="title">lib</span>\<span class="title">cmake</span>\<span class="title">Trantor</span></span></span><br></pre></td></tr></table></figure><hr><h2 id="7-ğŸš€-åˆ›å»ºæ–°é¡¹ç›®"><a href="#7-ğŸš€-åˆ›å»ºæ–°é¡¹ç›®" class="headerlink" title="7. ğŸš€ åˆ›å»ºæ–°é¡¹ç›®"></a>7. ğŸš€ åˆ›å»ºæ–°é¡¹ç›®</h2><h3 id="7-1-ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·"><a href="#7-1-ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·" class="headerlink" title="7.1 ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·"></a>7.1 ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Drogon Windows æ„å»ºæŒ‡å—</span></span><br><span class="line">drogon_ctl create project your_project_name</span><br><span class="line"></span><br><span class="line"><span class="comment"># Drogon Windows æ„å»ºæŒ‡å—</span></span><br><span class="line">copy drogon\conanfile.txt your_project_name\</span><br><span class="line"></span><br><span class="line"><span class="comment"># Drogon Windows æ„å»ºæŒ‡å—</span></span><br><span class="line"><span class="built_in">cd</span> your_project_name</span><br><span class="line"></span><br><span class="line"><span class="comment"># Drogon Windows æ„å»ºæŒ‡å—</span></span><br><span class="line"><span class="built_in">mkdir</span> build</span><br><span class="line"><span class="built_in">cd</span> build</span><br><span class="line">conan profile detect --force</span><br><span class="line">conan install .. \</span><br><span class="line">    -s compiler=<span class="string">&quot;msvc&quot;</span> \</span><br><span class="line">    -s compiler.version=194 \</span><br><span class="line">    -s compiler.cppstd=17 \</span><br><span class="line">    -s build_type=Debug \</span><br><span class="line">    --output-folder . \</span><br><span class="line">    --build=missing</span><br><span class="line"></span><br><span class="line">cmake .. \</span><br><span class="line">    -DCMAKE_BUILD_TYPE=Debug \</span><br><span class="line">    -DCMAKE_TOOLCHAIN_FILE=<span class="string">&quot;conan_toolchain.cmake&quot;</span> \</span><br><span class="line">    -DCMAKE_POLICY_DEFAULT_CMP0091=NEW</span><br><span class="line"></span><br><span class="line">cmake --build . --parallel</span><br></pre></td></tr></table></figure><h3 id="7-2-é¡¹ç›®ç»“æ„"><a href="#7-2-é¡¹ç›®ç»“æ„" class="headerlink" title="7.2 é¡¹ç›®ç»“æ„"></a>7.2 é¡¹ç›®ç»“æ„</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">your_project_name/</span><br><span class="line">â”œâ”€â”€ build/</span><br><span class="line">â”œâ”€â”€ config.json</span><br><span class="line">â”œâ”€â”€ CMakeLists.txt</span><br><span class="line">â”œâ”€â”€ conanfile.txt</span><br><span class="line">â”œâ”€â”€ main.cc</span><br><span class="line">â”œâ”€â”€ plugins/</span><br><span class="line">â”œâ”€â”€ run.bat</span><br><span class="line">â””â”€â”€ tests/</span><br></pre></td></tr></table></figure><hr><h2 id="8-ğŸ”§-å¸¸è§é—®é¢˜"><a href="#8-ğŸ”§-å¸¸è§é—®é¢˜" class="headerlink" title="8. ğŸ”§ å¸¸è§é—®é¢˜"></a>8. ğŸ”§ å¸¸è§é—®é¢˜</h2><h3 id="8-1-ç¼–è¯‘é”™è¯¯"><a href="#8-1-ç¼–è¯‘é”™è¯¯" class="headerlink" title="8.1 ç¼–è¯‘é”™è¯¯"></a>8.1 ç¼–è¯‘é”™è¯¯</h3><ul><li><strong>VS ç‰ˆæœ¬ä¸åŒ¹é…</strong>: ç¡®è®¤ compiler.version ä¸å®‰è£…çš„ Visual Studio ç‰ˆæœ¬ä¸€è‡´</li><li><strong>C++ æ ‡å‡†é—®é¢˜</strong>: ç¡®ä¿ compiler.cppstd è®¾ç½®æ­£ç¡®</li><li><strong>ä¾èµ–ç¼ºå¤±</strong>: ä½¿ç”¨ <code>--build=missing</code> å¼ºåˆ¶æ„å»ºç¼ºå¤±çš„ä¾èµ–</li></ul><h3 id="8-2-é“¾æ¥é”™è¯¯"><a href="#8-2-é“¾æ¥é”™è¯¯" class="headerlink" title="8.2 é“¾æ¥é”™è¯¯"></a>8.2 é“¾æ¥é”™è¯¯</h3><ul><li><strong>DLL æ‰¾ä¸åˆ°</strong>: æ£€æŸ¥ PATH ç¯å¢ƒå˜é‡è®¾ç½®</li><li><strong>åº“æ–‡ä»¶è·¯å¾„</strong>: ç¡®è®¤ CMAKE_PREFIX_PATH è®¾ç½®æ­£ç¡®</li></ul><h3 id="8-3-è¿è¡Œæ—¶é”™è¯¯"><a href="#8-3-è¿è¡Œæ—¶é”™è¯¯" class="headerlink" title="8.3 è¿è¡Œæ—¶é”™è¯¯"></a>8.3 è¿è¡Œæ—¶é”™è¯¯</h3><ul><li><strong>é…ç½®æ–‡ä»¶</strong>: æ£€æŸ¥ <code>config.json</code> é…ç½®æ˜¯å¦æ­£ç¡®</li><li><strong>ç«¯å£å ç”¨</strong>: ç¡®è®¤é…ç½®çš„ç«¯å£æœªè¢«å ç”¨</li></ul><hr><h2 id="ğŸ“š-ç›¸å…³èµ„æº"><a href="#ğŸ“š-ç›¸å…³èµ„æº" class="headerlink" title="ğŸ“š ç›¸å…³èµ„æº"></a>ğŸ“š ç›¸å…³èµ„æº</h2><ul><li><a href="https://drogon.docs.sguanheng.com/">Drogon å®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://conan.io/">Conan åŒ…ç®¡ç†å™¨</a></li><li><a href="https://cmake.org/documentation/">CMake å®˜æ–¹æ–‡æ¡£</a></li></ul><hr><blockquote><p><strong>ğŸ’¡ æç¤º</strong>:</p><ul><li>é¦–æ¬¡ç¼–è¯‘å¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´</li><li>å»ºè®®ä½¿ç”¨ Release æ¨¡å¼è¿›è¡Œç”Ÿäº§æ„å»º</li><li>å®šæœŸæ›´æ–° Drogon æºç ä»¥è·å¾—æœ€æ–°åŠŸèƒ½</li></ul></blockquote>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;Drogon-Windows-æ„å»ºæŒ‡å—&quot;&gt;&lt;a href=&quot;#Drogon-Windows-æ„å»ºæŒ‡å—&quot; class=&quot;headerlink&quot; title=&quot;Drogon Windows æ„å»ºæŒ‡å—&quot;&gt;&lt;/a&gt;Drogon Windows</summary>
        
      
    
    
    
    <category term="æ¡†æ¶åº“" scheme="https://vilaswang.github.io/categories/%E6%A1%86%E6%9E%B6%E5%BA%93/"/>
    
    
    <category term="æŠ€æœ¯æ–‡æ¡£" scheme="https://vilaswang.github.io/tags/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/"/>
    
    <category term="æŒ‡å—" scheme="https://vilaswang.github.io/tags/%E6%8C%87%E5%8D%97/"/>
    
  </entry>
  
  <entry>
    <title>æœåŠ¡å™¨è®¤è¯ API è§„èŒƒ</title>
    <link href="https://vilaswang.github.io/posts/ec4e5506/"/>
    <id>https://vilaswang.github.io/posts/ec4e5506/</id>
    <published>2025-12-09T06:09:55.000Z</published>
    <updated>2025-12-17T15:36:29.303Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æœåŠ¡å™¨è®¤è¯-API-è§„èŒƒ"><a href="#æœåŠ¡å™¨è®¤è¯-API-è§„èŒƒ" class="headerlink" title="æœåŠ¡å™¨è®¤è¯ API è§„èŒƒ"></a>æœåŠ¡å™¨è®¤è¯ API è§„èŒƒ</h1><blockquote><p><strong>æ–‡æ¡£åˆ›å»ºæ—¶é—´</strong>: 2025-11-14<br><strong>æœ€åæ›´æ–°</strong>: 2025-11-14<br><strong>æ ‡ç­¾</strong>: <code>authentication</code>, <code>api</code>, <code>security</code>, <code>jwt</code>, <code>express</code>, <code>nodejs</code>, <code>middleware</code></p></blockquote><h2 id="ğŸ“‘-ç›®å½•"><a href="#ğŸ“‘-ç›®å½•" class="headerlink" title="ğŸ“‘ ç›®å½•"></a>ğŸ“‘ ç›®å½•</h2><ul><li><a href="#1-%E6%A6%82%E8%BF%B0">1. æ¦‚è¿°</a></li><li><a href="#2-%E8%AE%A4%E8%AF%81%E4%B8%AD%E9%97%B4%E4%BB%B6">2. è®¤è¯ä¸­é—´ä»¶</a></li><li><a href="#3-%E8%AE%A4%E8%AF%81%E6%B5%81%E7%A8%8B">3. è®¤è¯æµç¨‹</a><ul><li><a href="#31-%E6%B3%A8%E5%86%8C%E6%B5%81%E7%A8%8B">3.1 æ³¨å†Œæµç¨‹</a></li><li><a href="#32-%E7%99%BB%E5%BD%95%E6%B5%81%E7%A8%8B">3.2 ç™»å½•æµç¨‹</a></li><li><a href="#33-token-%E9%AA%8C%E8%AF%81%E6%B5%81%E7%A8%8B">3.3 Token éªŒè¯æµç¨‹</a></li></ul></li><li><a href="#4-%E5%AE%89%E5%85%A8%E6%8E%AA%E6%96%BD">4. å®‰å…¨æªæ–½</a><ul><li><a href="#41-%E8%BE%93%E5%85%A5%E9%AA%8C%E8%AF%81">4.1 è¾“å…¥éªŒè¯</a></li><li><a href="#42-%E8%AF%B7%E6%B1%82%E9%A2%91%E7%8E%87%E9%99%90%E5%88%B6">4.2 è¯·æ±‚é¢‘ç‡é™åˆ¶</a></li><li><a href="#43-cors-%E9%85%8D%E7%BD%AE">4.3 CORS é…ç½®</a></li></ul></li><li><a href="#5-%E7%94%A8%E6%88%B7%E6%A8%A1%E5%9E%8B">5. ç”¨æˆ·æ¨¡å‹</a></li><li><a href="#6-%E5%8F%97%E4%BF%9D%E6%8A%A4%E7%9A%84%E8%B7%AF%E7%94%B1">6. å—ä¿æŠ¤çš„è·¯ç”±</a></li><li><a href="#7-%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%BD%BF%E7%94%A8">7. å®¢æˆ·ç«¯ä½¿ç”¨</a></li><li><a href="#8-%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7">8. é«˜çº§ç‰¹æ€§</a></li><li><a href="#9-%E6%B5%8B%E8%AF%95%E4%B8%8E%E8%B0%83%E8%AF%95">9. æµ‹è¯•ä¸è°ƒè¯•</a></li></ul><hr><h2 id="1-ğŸ“–-æ¦‚è¿°"><a href="#1-ğŸ“–-æ¦‚è¿°" class="headerlink" title="1. ğŸ“– æ¦‚è¿°"></a>1. ğŸ“– æ¦‚è¿°</h2><p>æœ¬æŒ‡å—è¯¦ç»†è¯´æ˜å¦‚ä½•å®ç°æœåŠ¡å™¨ç«¯çš„ç”¨æˆ·è®¤è¯ç³»ç»Ÿï¼ŒåŒ…æ‹¬æ³¨å†Œã€ç™»å½•ã€Token éªŒè¯ä»¥åŠç›¸å…³å®‰å…¨æªæ–½ã€‚</p><h3 id="ğŸ¯-è®¤è¯ç³»ç»Ÿç‰¹æ€§"><a href="#ğŸ¯-è®¤è¯ç³»ç»Ÿç‰¹æ€§" class="headerlink" title="ğŸ¯ è®¤è¯ç³»ç»Ÿç‰¹æ€§"></a>ğŸ¯ è®¤è¯ç³»ç»Ÿç‰¹æ€§</h3><ul><li>âœ… <strong>JWT Token è®¤è¯</strong></li><li>âœ… <strong>å¯†ç åŠ å¯†å­˜å‚¨</strong></li><li>âœ… <strong>è¯·æ±‚é¢‘ç‡é™åˆ¶</strong></li><li>âœ… <strong>è¾“å…¥éªŒè¯å’Œæ¸…ç†</strong></li><li>âœ… <strong>CORS è·¨åŸŸä¿æŠ¤</strong></li><li>âœ… <strong>é”™è¯¯å¤„ç†å’Œå®‰å…¨æ—¥å¿—</strong></li></ul><h3 id="ğŸ—ï¸-ç³»ç»Ÿæ¶æ„"><a href="#ğŸ—ï¸-ç³»ç»Ÿæ¶æ„" class="headerlink" title="ğŸ—ï¸ ç³»ç»Ÿæ¶æ„"></a>ğŸ—ï¸ ç³»ç»Ÿæ¶æ„</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    A[Client Request] --&gt; B[Rate Limiting]</span><br><span class="line">    B --&gt; C[Input Validation]</span><br><span class="line">    C --&gt; D[Auth Middleware]</span><br><span class="line">    D --&gt; E&#123;Public Route?&#125;</span><br><span class="line">    E --&gt;|Yes| F[Business Logic]</span><br><span class="line">    E --&gt;|No| G[JWT Verification]</span><br><span class="line">    G --&gt; H[User Extraction]</span><br><span class="line">    H --&gt; F</span><br><span class="line">    F --&gt; I[Response]</span><br></pre></td></tr></table></figure><hr><h2 id="2-ğŸ”-è®¤è¯ä¸­é—´ä»¶"><a href="#2-ğŸ”-è®¤è¯ä¸­é—´ä»¶" class="headerlink" title="2. ğŸ” è®¤è¯ä¸­é—´ä»¶"></a>2. ğŸ” è®¤è¯ä¸­é—´ä»¶</h2><h3 id="2-1-ğŸ“„-ä¸­é—´ä»¶å®ç°-src-middleware-auth-js"><a href="#2-1-ğŸ“„-ä¸­é—´ä»¶å®ç°-src-middleware-auth-js" class="headerlink" title="2.1 ğŸ“„ ä¸­é—´ä»¶å®ç° (src/middleware/auth.js)"></a>2.1 ğŸ“„ ä¸­é—´ä»¶å®ç° (<code>src/middleware/auth.js</code>)</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> jwt = <span class="built_in">require</span>(<span class="string">&#x27;jsonwebtoken&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> rateLimit = <span class="built_in">require</span>(<span class="string">&#x27;express-rate-limit&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> helmet = <span class="built_in">require</span>(<span class="string">&#x27;helmet&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * JWT Token è®¤è¯ä¸­é—´ä»¶</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Object</span>&#125; <span class="variable">req</span> - Express è¯·æ±‚å¯¹è±¡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Object</span>&#125; <span class="variable">res</span> - Express å“åº”å¯¹è±¡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Function</span>&#125; <span class="variable">next</span> - Express ä¸‹ä¸€ä¸ªä¸­é—´ä»¶å‡½æ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">authenticateToken</span> = (<span class="params">req, res, next</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// ä»è¯·æ±‚å¤´è·å– Bearer Token</span></span><br><span class="line">        <span class="keyword">const</span> authHeader = req.<span class="property">headers</span>[<span class="string">&#x27;authorization&#x27;</span>];</span><br><span class="line">        <span class="keyword">const</span> token = authHeader &amp;&amp; authHeader.<span class="title function_">split</span>(<span class="string">&#x27; &#x27;</span>)[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// éªŒè¯ Token æ ¼å¼</span></span><br><span class="line">        <span class="keyword">if</span> (!token) &#123;</span><br><span class="line">            <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">401</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">                <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">                <span class="attr">message</span>: <span class="string">&#x27;Access token is required&#x27;</span>,</span><br><span class="line">                <span class="attr">code</span>: <span class="string">&#x27;TOKEN_MISSING&#x27;</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!authHeader.<span class="title function_">startsWith</span>(<span class="string">&#x27;Bearer &#x27;</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">401</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">                <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">                <span class="attr">message</span>: <span class="string">&#x27;Invalid token format. Expected: Bearer &lt;token&gt;&#x27;</span>,</span><br><span class="line">                <span class="attr">code</span>: <span class="string">&#x27;TOKEN_FORMAT_INVALID&#x27;</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// éªŒè¯ JWT Token</span></span><br><span class="line">        jwt.<span class="title function_">verify</span>(token, process.<span class="property">env</span>.<span class="property">JWT_SECRET</span>, &#123;</span><br><span class="line">            <span class="attr">algorithms</span>: [<span class="string">&#x27;HS256&#x27;</span>],</span><br><span class="line">            <span class="attr">clockTolerance</span>: <span class="number">30</span> <span class="comment">// å…è®¸30ç§’æ—¶é’Ÿåå·®</span></span><br><span class="line">        &#125;, <span class="function">(<span class="params">err, decoded</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (err) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">`JWT Verification failed: <span class="subst">$&#123;err.message&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">403</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">                    <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">                    <span class="attr">message</span>: <span class="string">&#x27;Invalid or expired token&#x27;</span>,</span><br><span class="line">                    <span class="attr">code</span>: <span class="string">&#x27;TOKEN_INVALID&#x27;</span>,</span><br><span class="line">                    <span class="attr">details</span>: err.<span class="property">name</span> <span class="comment">// å¯é€‰ï¼šç”Ÿäº§ç¯å¢ƒå¯èƒ½è¦éšè—</span></span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å°†ç”¨æˆ·ä¿¡æ¯é™„åŠ åˆ°è¯·æ±‚å¯¹è±¡</span></span><br><span class="line">            req.<span class="property">user</span> = &#123;</span><br><span class="line">                <span class="attr">id</span>: decoded.<span class="property">userId</span>,</span><br><span class="line">                <span class="attr">iat</span>: decoded.<span class="property">iat</span>,</span><br><span class="line">                <span class="attr">exp</span>: decoded.<span class="property">exp</span></span><br><span class="line">            &#125;;</span><br><span class="line"></span><br><span class="line">            <span class="title function_">next</span>();</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Authentication middleware error:&#x27;</span>, error);</span><br><span class="line">        <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">500</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">            <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">message</span>: <span class="string">&#x27;Internal server error during authentication&#x27;</span>,</span><br><span class="line">            <span class="attr">code</span>: <span class="string">&#x27;AUTH_ERROR&#x27;</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¯é€‰çš„è®¤è¯ä¸­é—´ä»¶ - Token å¯é€‰çš„è·¯ç”±</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">optionalAuth</span> = (<span class="params">req, res, next</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> authHeader = req.<span class="property">headers</span>[<span class="string">&#x27;authorization&#x27;</span>];</span><br><span class="line">    <span class="keyword">const</span> token = authHeader &amp;&amp; authHeader.<span class="title function_">split</span>(<span class="string">&#x27; &#x27;</span>)[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (token) &#123;</span><br><span class="line">        <span class="title function_">authenticateToken</span>(req, res, next);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_">next</span>(); <span class="comment">// æ²¡æœ‰ Token æ—¶ç»§ç»­æ‰§è¡Œ</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    authenticateToken,</span><br><span class="line">    optionalAuth</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="2-2-ğŸš¦-è¯·æ±‚é¢‘ç‡é™åˆ¶"><a href="#2-2-ğŸš¦-è¯·æ±‚é¢‘ç‡é™åˆ¶" class="headerlink" title="2.2 ğŸš¦ è¯·æ±‚é¢‘ç‡é™åˆ¶"></a>2.2 ğŸš¦ è¯·æ±‚é¢‘ç‡é™åˆ¶</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è®¤è¯ç›¸å…³çš„é¢‘ç‡é™åˆ¶</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> authLimiter = <span class="title function_">rateLimit</span>(&#123;</span><br><span class="line">    <span class="attr">windowMs</span>: <span class="number">15</span> * <span class="number">60</span> * <span class="number">1000</span>,  <span class="comment">// 15åˆ†é’Ÿçª—å£æœŸ</span></span><br><span class="line">    <span class="attr">max</span>: <span class="number">5</span>,                    <span class="comment">// æœ€å¤š5æ¬¡å°è¯•</span></span><br><span class="line">    <span class="attr">message</span>: &#123;</span><br><span class="line">        <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">message</span>: <span class="string">&#x27;Too many authentication attempts, please try again later&#x27;</span>,</span><br><span class="line">        <span class="attr">code</span>: <span class="string">&#x27;RATE_LIMIT_EXCEEDED&#x27;</span>,</span><br><span class="line">        <span class="attr">retryAfter</span>: <span class="string">&#x27;15 minutes&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">standardHeaders</span>: <span class="literal">true</span>,      <span class="comment">// è¿”å›é€Ÿç‡é™åˆ¶ä¿¡æ¯åœ¨ headers</span></span><br><span class="line">    <span class="attr">legacyHeaders</span>: <span class="literal">false</span>,      <span class="comment">// ç¦ç”¨ `X-RateLimit-*` headers</span></span><br><span class="line">    <span class="attr">handler</span>: <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">        res.<span class="title function_">status</span>(<span class="number">429</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">            <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">message</span>: <span class="string">&#x27;Too many authentication attempts, please try again later&#x27;</span>,</span><br><span class="line">            <span class="attr">code</span>: <span class="string">&#x27;RATE_LIMIT_EXCEEDED&#x27;</span>,</span><br><span class="line">            <span class="attr">retryAfter</span>: <span class="string">&#x27;15 minutes&#x27;</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¸€èˆ¬ API çš„é¢‘ç‡é™åˆ¶</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> apiLimiter = <span class="title function_">rateLimit</span>(&#123;</span><br><span class="line">    <span class="attr">windowMs</span>: <span class="number">15</span> * <span class="number">60</span> * <span class="number">1000</span>,  <span class="comment">// 15åˆ†é’Ÿ</span></span><br><span class="line">    <span class="attr">max</span>: <span class="number">100</span>,                  <span class="comment">// æœ€å¤š100æ¬¡è¯·æ±‚</span></span><br><span class="line">    <span class="attr">message</span>: &#123;</span><br><span class="line">        <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">message</span>: <span class="string">&#x27;API rate limit exceeded&#x27;</span>,</span><br><span class="line">        <span class="attr">code</span>: <span class="string">&#x27;API_RATE_LIMIT_EXCEEDED&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    authLimiter,</span><br><span class="line">    apiLimiter</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><hr><h2 id="3-ğŸ”‘-è®¤è¯æµç¨‹"><a href="#3-ğŸ”‘-è®¤è¯æµç¨‹" class="headerlink" title="3. ğŸ”‘ è®¤è¯æµç¨‹"></a>3. ğŸ”‘ è®¤è¯æµç¨‹</h2><h3 id="3-1-ğŸ“-æ³¨å†Œæµç¨‹-auth-register"><a href="#3-1-ğŸ“-æ³¨å†Œæµç¨‹-auth-register" class="headerlink" title="3.1 ğŸ“ æ³¨å†Œæµç¨‹ (/auth/register)"></a>3.1 ğŸ“ æ³¨å†Œæµç¨‹ (<code>/auth/register</code>)</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; body, validationResult &#125; = <span class="built_in">require</span>(<span class="string">&#x27;express-validator&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> bcrypt = <span class="built_in">require</span>(<span class="string">&#x27;bcrypt&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> router = express.<span class="title class_">Router</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨å†ŒéªŒè¯è§„åˆ™</span></span><br><span class="line"><span class="keyword">const</span> registerValidation = [</span><br><span class="line">    <span class="title function_">body</span>(<span class="string">&#x27;username&#x27;</span>)</span><br><span class="line">        .<span class="title function_">trim</span>()</span><br><span class="line">        .<span class="title function_">isLength</span>(&#123; <span class="attr">min</span>: <span class="number">3</span>, <span class="attr">max</span>: <span class="number">20</span> &#125;)</span><br><span class="line">        .<span class="title function_">withMessage</span>(<span class="string">&#x27;Username must be 3-20 characters long&#x27;</span>)</span><br><span class="line">        .<span class="title function_">matches</span>(<span class="regexp">/^[a-zA-Z0-9_]+$/</span>)</span><br><span class="line">        .<span class="title function_">withMessage</span>(<span class="string">&#x27;Username can only contain letters, numbers and underscores&#x27;</span>),</span><br><span class="line"></span><br><span class="line">    <span class="title function_">body</span>(<span class="string">&#x27;email&#x27;</span>)</span><br><span class="line">        .<span class="title function_">isEmail</span>()</span><br><span class="line">        .<span class="title function_">normalizeEmail</span>()</span><br><span class="line">        .<span class="title function_">withMessage</span>(<span class="string">&#x27;Valid email address is required&#x27;</span>),</span><br><span class="line"></span><br><span class="line">    <span class="title function_">body</span>(<span class="string">&#x27;password&#x27;</span>)</span><br><span class="line">        .<span class="title function_">isLength</span>(&#123; <span class="attr">min</span>: <span class="number">6</span> &#125;)</span><br><span class="line">        .<span class="title function_">withMessage</span>(<span class="string">&#x27;Password must be at least 6 characters long&#x27;</span>)</span><br><span class="line">        .<span class="title function_">matches</span>(<span class="regexp">/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$/</span>)</span><br><span class="line">        .<span class="title function_">withMessage</span>(<span class="string">&#x27;Password must contain at least one uppercase letter, one lowercase letter, and one number&#x27;</span>)</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”¨æˆ·æ³¨å†Œè·¯ç”±</span></span><br><span class="line"><span class="comment"> * POST /auth/register</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/register&#x27;</span>,</span><br><span class="line">    registerValidation,  <span class="comment">// è¾“å…¥éªŒè¯</span></span><br><span class="line">    validate,            <span class="comment">// éªŒè¯ç»“æœå¤„ç†</span></span><br><span class="line">    authLimiter,        <span class="comment">// è¯·æ±‚é¢‘ç‡é™åˆ¶</span></span><br><span class="line">    <span class="title function_">async</span> (req, res) =&gt; &#123;</span><br><span class="line">        <span class="keyword">const</span> transaction = <span class="keyword">await</span> pool.<span class="title function_">beginTransaction</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> &#123; username, password, email &#125; = req.<span class="property">body</span>;</span><br><span class="line"></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">`Registration attempt: username=<span class="subst">$&#123;username&#125;</span>, email=<span class="subst">$&#123;email&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 1. æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å·²å­˜åœ¨</span></span><br><span class="line">            <span class="keyword">const</span> [existingUser] = <span class="keyword">await</span> pool.<span class="title function_">execute</span>(</span><br><span class="line">                <span class="string">&#x27;SELECT id FROM users WHERE username = ? OR email = ?&#x27;</span>,</span><br><span class="line">                [username, email]</span><br><span class="line">            );</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (existingUser.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">await</span> transaction.<span class="title function_">rollback</span>();</span><br><span class="line">                <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">400</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">                    <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">                    <span class="attr">message</span>: existingUser[<span class="number">0</span>].<span class="property">username</span> === username</span><br><span class="line">                        ? <span class="string">&#x27;Username is already taken&#x27;</span></span><br><span class="line">                        : <span class="string">&#x27;Email is already registered&#x27;</span>,</span><br><span class="line">                    <span class="attr">code</span>: <span class="string">&#x27;USER_EXISTS&#x27;</span></span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2. å¯†ç åŠ å¯†</span></span><br><span class="line">            <span class="keyword">const</span> saltRounds = <span class="number">12</span>;</span><br><span class="line">            <span class="keyword">const</span> hashedPassword = <span class="keyword">await</span> bcrypt.<span class="title function_">hash</span>(password, saltRounds);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 3. åˆ›å»ºæ–°ç”¨æˆ·</span></span><br><span class="line">            <span class="keyword">const</span> [result] = <span class="keyword">await</span> pool.<span class="title function_">execute</span>(</span><br><span class="line">                <span class="string">&#x27;INSERT INTO users (username, password, email, created_at, updated_at) VALUES (?, ?, ?, NOW(), NOW())&#x27;</span>,</span><br><span class="line">                [username, hashedPassword, email]</span><br><span class="line">            );</span><br><span class="line"></span><br><span class="line">            <span class="keyword">const</span> userId = result.<span class="property">insertId</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 4. ç”Ÿæˆ JWT Token</span></span><br><span class="line">            <span class="keyword">const</span> token = jwt.<span class="title function_">sign</span>(</span><br><span class="line">                &#123;</span><br><span class="line">                    userId,</span><br><span class="line">                    username,</span><br><span class="line">                    <span class="attr">type</span>: <span class="string">&#x27;access&#x27;</span></span><br><span class="line">                &#125;,</span><br><span class="line">                process.<span class="property">env</span>.<span class="property">JWT_SECRET</span>,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">expiresIn</span>: <span class="string">&#x27;24h&#x27;</span>,</span><br><span class="line">                    <span class="attr">algorithm</span>: <span class="string">&#x27;HS256&#x27;</span>,</span><br><span class="line">                    <span class="attr">issuer</span>: <span class="string">&#x27;your-app-name&#x27;</span>,</span><br><span class="line">                    <span class="attr">audience</span>: <span class="string">&#x27;your-app-users&#x27;</span></span><br><span class="line">                &#125;</span><br><span class="line">            );</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 5. ç”Ÿæˆ Refresh Token (å¯é€‰)</span></span><br><span class="line">            <span class="keyword">const</span> refreshToken = jwt.<span class="title function_">sign</span>(</span><br><span class="line">                &#123;</span><br><span class="line">                    userId,</span><br><span class="line">                    <span class="attr">type</span>: <span class="string">&#x27;refresh&#x27;</span></span><br><span class="line">                &#125;,</span><br><span class="line">                process.<span class="property">env</span>.<span class="property">JWT_REFRESH_SECRET</span>,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">expiresIn</span>: <span class="string">&#x27;7d&#x27;</span>,</span><br><span class="line">                    <span class="attr">algorithm</span>: <span class="string">&#x27;HS256&#x27;</span></span><br><span class="line">                &#125;</span><br><span class="line">            );</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 6. ä¿å­˜ Refresh Token åˆ°æ•°æ®åº“ (å¯é€‰)</span></span><br><span class="line">            <span class="keyword">await</span> pool.<span class="title function_">execute</span>(</span><br><span class="line">                <span class="string">&#x27;UPDATE users SET refresh_token = ? WHERE id = ?&#x27;</span>,</span><br><span class="line">                [refreshToken, userId]</span><br><span class="line">            );</span><br><span class="line"></span><br><span class="line">            <span class="keyword">await</span> transaction.<span class="title function_">commit</span>();</span><br><span class="line"></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">`User registered successfully: userId=<span class="subst">$&#123;userId&#125;</span>, username=<span class="subst">$&#123;username&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 7. è¿”å›æˆåŠŸå“åº” (ä¸åŒ…å«æ•æ„Ÿä¿¡æ¯)</span></span><br><span class="line">            res.<span class="title function_">status</span>(<span class="number">201</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">                <span class="attr">success</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="attr">message</span>: <span class="string">&#x27;Registration successful&#x27;</span>,</span><br><span class="line">                <span class="attr">data</span>: &#123;</span><br><span class="line">                    <span class="attr">user</span>: &#123;</span><br><span class="line">                        <span class="attr">id</span>: userId,</span><br><span class="line">                        <span class="attr">username</span>: username,</span><br><span class="line">                        <span class="attr">email</span>: email,</span><br><span class="line">                        <span class="attr">created_at</span>: <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">toISOString</span>()</span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="attr">tokens</span>: &#123;</span><br><span class="line">                        <span class="attr">access_token</span>: token,</span><br><span class="line">                        <span class="attr">refresh_token</span>: refreshToken,</span><br><span class="line">                        <span class="attr">token_type</span>: <span class="string">&#x27;Bearer&#x27;</span>,</span><br><span class="line">                        <span class="attr">expires_in</span>: <span class="number">86400</span> <span class="comment">// 24å°æ—¶</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="keyword">await</span> transaction.<span class="title function_">rollback</span>();</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Registration error:&#x27;</span>, error);</span><br><span class="line"></span><br><span class="line">            res.<span class="title function_">status</span>(<span class="number">500</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">                <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">                <span class="attr">message</span>: <span class="string">&#x27;Registration failed due to server error&#x27;</span>,</span><br><span class="line">                <span class="attr">code</span>: <span class="string">&#x27;REGISTRATION_ERROR&#x27;</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="3-2-ğŸ”-ç™»å½•æµç¨‹-auth-login"><a href="#3-2-ğŸ”-ç™»å½•æµç¨‹-auth-login" class="headerlink" title="3.2 ğŸ” ç™»å½•æµç¨‹ (/auth/login)"></a>3.2 ğŸ” ç™»å½•æµç¨‹ (<code>/auth/login</code>)</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”¨æˆ·ç™»å½•è·¯ç”±</span></span><br><span class="line"><span class="comment"> * POST /auth/login</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">    authLimiter,      <span class="comment">// è¯·æ±‚é¢‘ç‡é™åˆ¶</span></span><br><span class="line">    [</span><br><span class="line">        <span class="title function_">body</span>(<span class="string">&#x27;username&#x27;</span>)</span><br><span class="line">            .<span class="title function_">trim</span>()</span><br><span class="line">            .<span class="title function_">notEmpty</span>()</span><br><span class="line">            .<span class="title function_">withMessage</span>(<span class="string">&#x27;Username or email is required&#x27;</span>),</span><br><span class="line"></span><br><span class="line">        <span class="title function_">body</span>(<span class="string">&#x27;password&#x27;</span>)</span><br><span class="line">            .<span class="title function_">notEmpty</span>()</span><br><span class="line">            .<span class="title function_">withMessage</span>(<span class="string">&#x27;Password is required&#x27;</span>)</span><br><span class="line">    ],</span><br><span class="line">    validate,         <span class="comment">// éªŒè¯ç»“æœå¤„ç†</span></span><br><span class="line">    <span class="title function_">async</span> (req, res) =&gt; &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> &#123; username, password &#125; = req.<span class="property">body</span>;</span><br><span class="line"></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">`Login attempt: username=<span class="subst">$&#123;username&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 1. æŸ¥æ‰¾ç”¨æˆ· (æ”¯æŒç”¨æˆ·åæˆ–é‚®ç®±ç™»å½•)</span></span><br><span class="line">            <span class="keyword">const</span> [users] = <span class="keyword">await</span> pool.<span class="title function_">execute</span>(</span><br><span class="line">                <span class="string">&#x27;SELECT id, username, email, password, refresh_token, failed_login_attempts, locked_until FROM users WHERE username = ? OR email = ?&#x27;</span>,</span><br><span class="line">                [username, username]</span><br><span class="line">            );</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (users.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">401</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">                    <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">                    <span class="attr">message</span>: <span class="string">&#x27;Invalid username or password&#x27;</span>,</span><br><span class="line">                    <span class="attr">code</span>: <span class="string">&#x27;INVALID_CREDENTIALS&#x27;</span></span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">const</span> user = users[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2. æ£€æŸ¥è´¦æˆ·æ˜¯å¦è¢«é”å®š</span></span><br><span class="line">            <span class="keyword">if</span> (user.<span class="property">locked_until</span> &amp;&amp; <span class="keyword">new</span> <span class="title class_">Date</span>() &lt; <span class="keyword">new</span> <span class="title class_">Date</span>(user.<span class="property">locked_until</span>)) &#123;</span><br><span class="line">                <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">423</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">                    <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">                    <span class="attr">message</span>: <span class="string">&#x27;Account is temporarily locked due to too many failed login attempts&#x27;</span>,</span><br><span class="line">                    <span class="attr">code</span>: <span class="string">&#x27;ACCOUNT_LOCKED&#x27;</span>,</span><br><span class="line">                    <span class="attr">locked_until</span>: user.<span class="property">locked_until</span></span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 3. éªŒè¯å¯†ç </span></span><br><span class="line">            <span class="keyword">const</span> isValidPassword = <span class="keyword">await</span> bcrypt.<span class="title function_">compare</span>(password, user.<span class="property">password</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (!isValidPassword) &#123;</span><br><span class="line">                <span class="comment">// å¢åŠ å¤±è´¥æ¬¡æ•°</span></span><br><span class="line">                <span class="keyword">const</span> newFailedAttempts = user.<span class="property">failed_login_attempts</span> + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">const</span> lockAccount = newFailedAttempts &gt;= <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">await</span> pool.<span class="title function_">execute</span>(</span><br><span class="line">                    <span class="string">`UPDATE users SET</span></span><br><span class="line"><span class="string">                     failed_login_attempts = ?,</span></span><br><span class="line"><span class="string">                     locked_until = ?</span></span><br><span class="line"><span class="string">                     WHERE id = ?`</span>,</span><br><span class="line">                    [</span><br><span class="line">                        lockAccount ? <span class="number">0</span> : newFailedAttempts,</span><br><span class="line">                        lockAccount ? <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="title class_">Date</span>.<span class="title function_">now</span>() + <span class="number">30</span> * <span class="number">60</span> * <span class="number">1000</span>) : <span class="literal">null</span>, <span class="comment">// 30åˆ†é’Ÿé”å®š</span></span><br><span class="line">                        user.<span class="property">id</span></span><br><span class="line">                    ]</span><br><span class="line">                );</span><br><span class="line"></span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">`Failed login attempt: username=<span class="subst">$&#123;username&#125;</span>, attempts=<span class="subst">$&#123;newFailedAttempts&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">401</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">                    <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">                    <span class="attr">message</span>: <span class="string">&#x27;Invalid username or password&#x27;</span>,</span><br><span class="line">                    <span class="attr">code</span>: <span class="string">&#x27;INVALID_CREDENTIALS&#x27;</span>,</span><br><span class="line">                    <span class="attr">remaining_attempts</span>: <span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="number">0</span>, <span class="number">5</span> - newFailedAttempts)</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 4. ç™»å½•æˆåŠŸ - é‡ç½®å¤±è´¥æ¬¡æ•°</span></span><br><span class="line">            <span class="keyword">await</span> pool.<span class="title function_">execute</span>(</span><br><span class="line">                <span class="string">&#x27;UPDATE users SET failed_login_attempts = 0, locked_until = NULL, last_login = NOW() WHERE id = ?&#x27;</span>,</span><br><span class="line">                [user.<span class="property">id</span>]</span><br><span class="line">            );</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 5. ç”Ÿæˆ JWT Token</span></span><br><span class="line">            <span class="keyword">const</span> token = jwt.<span class="title function_">sign</span>(</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">userId</span>: user.<span class="property">id</span>,</span><br><span class="line">                    <span class="attr">username</span>: user.<span class="property">username</span>,</span><br><span class="line">                    <span class="attr">type</span>: <span class="string">&#x27;access&#x27;</span></span><br><span class="line">                &#125;,</span><br><span class="line">                process.<span class="property">env</span>.<span class="property">JWT_SECRET</span>,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">expiresIn</span>: <span class="string">&#x27;24h&#x27;</span>,</span><br><span class="line">                    <span class="attr">algorithm</span>: <span class="string">&#x27;HS256&#x27;</span>,</span><br><span class="line">                    <span class="attr">issuer</span>: <span class="string">&#x27;your-app-name&#x27;</span>,</span><br><span class="line">                    <span class="attr">audience</span>: <span class="string">&#x27;your-app-users&#x27;</span></span><br><span class="line">                &#125;</span><br><span class="line">            );</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 6. ç”Ÿæˆæ–°çš„ Refresh Token</span></span><br><span class="line">            <span class="keyword">const</span> refreshToken = jwt.<span class="title function_">sign</span>(</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">userId</span>: user.<span class="property">id</span>,</span><br><span class="line">                    <span class="attr">type</span>: <span class="string">&#x27;refresh&#x27;</span></span><br><span class="line">                &#125;,</span><br><span class="line">                process.<span class="property">env</span>.<span class="property">JWT_REFRESH_SECRET</span>,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">expiresIn</span>: <span class="string">&#x27;7d&#x27;</span>,</span><br><span class="line">                    <span class="attr">algorithm</span>: <span class="string">&#x27;HS256&#x27;</span></span><br><span class="line">                &#125;</span><br><span class="line">            );</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 7. æ›´æ–° Refresh Token</span></span><br><span class="line">            <span class="keyword">await</span> pool.<span class="title function_">execute</span>(</span><br><span class="line">                <span class="string">&#x27;UPDATE users SET refresh_token = ? WHERE id = ?&#x27;</span>,</span><br><span class="line">                [refreshToken, user.<span class="property">id</span>]</span><br><span class="line">            );</span><br><span class="line"></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">`User logged in successfully: userId=<span class="subst">$&#123;user.id&#125;</span>, username=<span class="subst">$&#123;user.username&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line">            res.<span class="title function_">json</span>(&#123;</span><br><span class="line">                <span class="attr">success</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="attr">message</span>: <span class="string">&#x27;Login successful&#x27;</span>,</span><br><span class="line">                <span class="attr">data</span>: &#123;</span><br><span class="line">                    <span class="attr">user</span>: &#123;</span><br><span class="line">                        <span class="attr">id</span>: user.<span class="property">id</span>,</span><br><span class="line">                        <span class="attr">username</span>: user.<span class="property">username</span>,</span><br><span class="line">                        <span class="attr">email</span>: user.<span class="property">email</span>,</span><br><span class="line">                        <span class="attr">last_login</span>: <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">toISOString</span>()</span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="attr">tokens</span>: &#123;</span><br><span class="line">                        <span class="attr">access_token</span>: token,</span><br><span class="line">                        <span class="attr">refresh_token</span>: refreshToken,</span><br><span class="line">                        <span class="attr">token_type</span>: <span class="string">&#x27;Bearer&#x27;</span>,</span><br><span class="line">                        <span class="attr">expires_in</span>: <span class="number">86400</span> <span class="comment">// 24å°æ—¶</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Login error:&#x27;</span>, error);</span><br><span class="line"></span><br><span class="line">            res.<span class="title function_">status</span>(<span class="number">500</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">                <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">                <span class="attr">message</span>: <span class="string">&#x27;Login failed due to server error&#x27;</span>,</span><br><span class="line">                <span class="attr">code</span>: <span class="string">&#x27;LOGIN_ERROR&#x27;</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="3-3-ğŸ”„-Token-åˆ·æ–°æµç¨‹"><a href="#3-3-ğŸ”„-Token-åˆ·æ–°æµç¨‹" class="headerlink" title="3.3 ğŸ”„ Token åˆ·æ–°æµç¨‹"></a>3.3 ğŸ”„ Token åˆ·æ–°æµç¨‹</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ·æ–°è®¿é—®ä»¤ç‰Œ</span></span><br><span class="line"><span class="comment"> * POST /auth/refresh</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/refresh&#x27;</span>,</span><br><span class="line">    <span class="title function_">async</span> (req, res) =&gt; &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> &#123; refresh_token &#125; = req.<span class="property">body</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (!refresh_token) &#123;</span><br><span class="line">                <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">401</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">                    <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">                    <span class="attr">message</span>: <span class="string">&#x27;Refresh token is required&#x27;</span>,</span><br><span class="line">                    <span class="attr">code</span>: <span class="string">&#x27;REFRESH_TOKEN_MISSING&#x27;</span></span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// éªŒè¯ Refresh Token</span></span><br><span class="line">            jwt.<span class="title function_">verify</span>(refresh_token, process.<span class="property">env</span>.<span class="property">JWT_REFRESH_SECRET</span>, <span class="title function_">async</span> (err, decoded) =&gt; &#123;</span><br><span class="line">                <span class="keyword">if</span> (err) &#123;</span><br><span class="line">                    <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">403</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">                        <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">                        <span class="attr">message</span>: <span class="string">&#x27;Invalid refresh token&#x27;</span>,</span><br><span class="line">                        <span class="attr">code</span>: <span class="string">&#x27;REFRESH_TOKEN_INVALID&#x27;</span></span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// æ£€æŸ¥æ•°æ®åº“ä¸­çš„ Refresh Token</span></span><br><span class="line">                <span class="keyword">const</span> [users] = <span class="keyword">await</span> pool.<span class="title function_">execute</span>(</span><br><span class="line">                    <span class="string">&#x27;SELECT id, username, refresh_token FROM users WHERE id = ?&#x27;</span>,</span><br><span class="line">                    [decoded.<span class="property">userId</span>]</span><br><span class="line">                );</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (users.<span class="property">length</span> === <span class="number">0</span> || users[<span class="number">0</span>].<span class="property">refresh_token</span> !== refresh_token) &#123;</span><br><span class="line">                    <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">403</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">                        <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">                        <span class="attr">message</span>: <span class="string">&#x27;Invalid refresh token&#x27;</span>,</span><br><span class="line">                        <span class="attr">code</span>: <span class="string">&#x27;REFRESH_TOKEN_MISMATCH&#x27;</span></span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// ç”Ÿæˆæ–°çš„ Access Token</span></span><br><span class="line">                <span class="keyword">const</span> newAccessToken = jwt.<span class="title function_">sign</span>(</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">userId</span>: decoded.<span class="property">userId</span>,</span><br><span class="line">                        <span class="attr">username</span>: users[<span class="number">0</span>].<span class="property">username</span>,</span><br><span class="line">                        <span class="attr">type</span>: <span class="string">&#x27;access&#x27;</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    process.<span class="property">env</span>.<span class="property">JWT_SECRET</span>,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">expiresIn</span>: <span class="string">&#x27;24h&#x27;</span>,</span><br><span class="line">                        <span class="attr">algorithm</span>: <span class="string">&#x27;HS256&#x27;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                );</span><br><span class="line"></span><br><span class="line">                res.<span class="title function_">json</span>(&#123;</span><br><span class="line">                    <span class="attr">success</span>: <span class="literal">true</span>,</span><br><span class="line">                    <span class="attr">message</span>: <span class="string">&#x27;Token refreshed successfully&#x27;</span>,</span><br><span class="line">                    <span class="attr">data</span>: &#123;</span><br><span class="line">                        <span class="attr">access_token</span>: newAccessToken,</span><br><span class="line">                        <span class="attr">token_type</span>: <span class="string">&#x27;Bearer&#x27;</span>,</span><br><span class="line">                        <span class="attr">expires_in</span>: <span class="number">86400</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Token refresh error:&#x27;</span>, error);</span><br><span class="line"></span><br><span class="line">            res.<span class="title function_">status</span>(<span class="number">500</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">                <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">                <span class="attr">message</span>: <span class="string">&#x27;Token refresh failed&#x27;</span>,</span><br><span class="line">                <span class="attr">code</span>: <span class="string">&#x27;REFRESH_ERROR&#x27;</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><hr><h2 id="4-ğŸ›¡ï¸-å®‰å…¨æªæ–½"><a href="#4-ğŸ›¡ï¸-å®‰å…¨æªæ–½" class="headerlink" title="4. ğŸ›¡ï¸ å®‰å…¨æªæ–½"></a>4. ğŸ›¡ï¸ å®‰å…¨æªæ–½</h2><h3 id="4-1-âœ…-è¾“å…¥éªŒè¯"><a href="#4-1-âœ…-è¾“å…¥éªŒè¯" class="headerlink" title="4.1 âœ… è¾“å…¥éªŒè¯"></a>4.1 âœ… è¾“å…¥éªŒè¯</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; body, validationResult &#125; = <span class="built_in">require</span>(<span class="string">&#x27;express-validator&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// éªŒè¯ç»“æœå¤„ç†ä¸­é—´ä»¶</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">validate</span> = (<span class="params">req, res, next</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> errors = <span class="title function_">validationResult</span>(req);</span><br><span class="line">    <span class="keyword">if</span> (!errors.<span class="title function_">isEmpty</span>()) &#123;</span><br><span class="line">        <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">400</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">            <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">message</span>: <span class="string">&#x27;Validation failed&#x27;</span>,</span><br><span class="line">            <span class="attr">code</span>: <span class="string">&#x27;VALIDATION_ERROR&#x27;</span>,</span><br><span class="line">            <span class="attr">errors</span>: errors.<span class="title function_">array</span>()</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">next</span>();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šç”¨éªŒè¯è§„åˆ™</span></span><br><span class="line"><span class="keyword">const</span> commonValidation = &#123;</span><br><span class="line">    <span class="attr">username</span>: [</span><br><span class="line">        <span class="title function_">body</span>(<span class="string">&#x27;username&#x27;</span>)</span><br><span class="line">            .<span class="title function_">trim</span>()</span><br><span class="line">            .<span class="title function_">isLength</span>(&#123; <span class="attr">min</span>: <span class="number">3</span>, <span class="attr">max</span>: <span class="number">20</span> &#125;)</span><br><span class="line">            .<span class="title function_">matches</span>(<span class="regexp">/^[a-zA-Z0-9_]+$/</span>)</span><br><span class="line">    ],</span><br><span class="line"></span><br><span class="line">    <span class="attr">email</span>: [</span><br><span class="line">        <span class="title function_">body</span>(<span class="string">&#x27;email&#x27;</span>)</span><br><span class="line">            .<span class="title function_">isEmail</span>()</span><br><span class="line">            .<span class="title function_">normalizeEmail</span>()</span><br><span class="line">    ],</span><br><span class="line"></span><br><span class="line">    <span class="attr">password</span>: [</span><br><span class="line">        <span class="title function_">body</span>(<span class="string">&#x27;password&#x27;</span>)</span><br><span class="line">            .<span class="title function_">isLength</span>(&#123; <span class="attr">min</span>: <span class="number">8</span> &#125;)</span><br><span class="line">            .<span class="title function_">matches</span>(<span class="regexp">/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@$!%*?&amp;]).*$/</span>)</span><br><span class="line">            .<span class="title function_">withMessage</span>(<span class="string">&#x27;Password must be at least 8 characters long and contain uppercase, lowercase, number, and special character&#x27;</span>)</span><br><span class="line">    ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="4-2-ğŸš¦-CORS-é…ç½®"><a href="#4-2-ğŸš¦-CORS-é…ç½®" class="headerlink" title="4.2 ğŸš¦ CORS é…ç½®"></a>4.2 ğŸš¦ CORS é…ç½®</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cors = <span class="built_in">require</span>(<span class="string">&#x27;cors&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> corsOptions = &#123;</span><br><span class="line">    <span class="attr">origin</span>: <span class="keyword">function</span> (<span class="params">origin, callback</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> allowedOrigins = process.<span class="property">env</span>.<span class="property">ALLOWED_ORIGINS</span>?.<span class="title function_">split</span>(<span class="string">&#x27;,&#x27;</span>) || [<span class="string">&#x27;http://localhost:3000&#x27;</span>];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å…è®¸æ²¡æœ‰ origin çš„è¯·æ±‚ (å¦‚ç§»åŠ¨åº”ç”¨)</span></span><br><span class="line">        <span class="keyword">if</span> (!origin) <span class="keyword">return</span> <span class="title function_">callback</span>(<span class="literal">null</span>, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (allowedOrigins.<span class="title function_">includes</span>(origin)) &#123;</span><br><span class="line">            <span class="title function_">callback</span>(<span class="literal">null</span>, <span class="literal">true</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="title function_">callback</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;Not allowed by CORS&#x27;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">methods</span>: [<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>, <span class="string">&#x27;PUT&#x27;</span>, <span class="string">&#x27;DELETE&#x27;</span>, <span class="string">&#x27;OPTIONS&#x27;</span>],</span><br><span class="line">    <span class="attr">allowedHeaders</span>: [<span class="string">&#x27;Content-Type&#x27;</span>, <span class="string">&#x27;Authorization&#x27;</span>, <span class="string">&#x27;X-Requested-With&#x27;</span>],</span><br><span class="line">    <span class="attr">credentials</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">optionsSuccessStatus</span>: <span class="number">200</span>,</span><br><span class="line">    <span class="attr">maxAge</span>: <span class="number">86400</span> <span class="comment">// 24å°æ—¶</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">cors</span>(corsOptions));</span><br></pre></td></tr></table></figure><h3 id="4-3-ğŸ”’-å®‰å…¨å¤´éƒ¨"><a href="#4-3-ğŸ”’-å®‰å…¨å¤´éƒ¨" class="headerlink" title="4.3 ğŸ”’ å®‰å…¨å¤´éƒ¨"></a>4.3 ğŸ”’ å®‰å…¨å¤´éƒ¨</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> helmet = <span class="built_in">require</span>(<span class="string">&#x27;helmet&#x27;</span>);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">helmet</span>(&#123;</span><br><span class="line">    <span class="attr">contentSecurityPolicy</span>: &#123;</span><br><span class="line">        <span class="attr">directives</span>: &#123;</span><br><span class="line">            <span class="attr">defaultSrc</span>: [<span class="string">&quot;&#x27;self&#x27;&quot;</span>],</span><br><span class="line">            <span class="attr">styleSrc</span>: [<span class="string">&quot;&#x27;self&#x27;&quot;</span>, <span class="string">&quot;&#x27;unsafe-inline&#x27;&quot;</span>],</span><br><span class="line">            <span class="attr">scriptSrc</span>: [<span class="string">&quot;&#x27;self&#x27;&quot;</span>],</span><br><span class="line">            <span class="attr">imgSrc</span>: [<span class="string">&quot;&#x27;self&#x27;&quot;</span>, <span class="string">&quot;data:&quot;</span>, <span class="string">&quot;https:&quot;</span>],</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">hsts</span>: &#123;</span><br><span class="line">        <span class="attr">maxAge</span>: <span class="number">31536000</span>,</span><br><span class="line">        <span class="attr">includeSubDomains</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">preload</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure><hr><h2 id="5-ğŸ‘¤-ç”¨æˆ·æ¨¡å‹"><a href="#5-ğŸ‘¤-ç”¨æˆ·æ¨¡å‹" class="headerlink" title="5. ğŸ‘¤ ç”¨æˆ·æ¨¡å‹"></a>5. ğŸ‘¤ ç”¨æˆ·æ¨¡å‹</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bcrypt = <span class="built_in">require</span>(<span class="string">&#x27;bcrypt&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> pool = <span class="built_in">require</span>(<span class="string">&#x27;../database/connection&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ›å»ºç”¨æˆ·</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">username</span> - ç”¨æˆ·å</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">password</span> - æ˜æ–‡å¯†ç </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">email</span> - é‚®ç®±</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@returns</span> &#123;<span class="type">Promise&lt;number&gt;</span>&#125; ç”¨æˆ·ID</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">async</span> <span class="title function_">createUser</span>(<span class="params">username, password, email</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> hashedPassword = <span class="keyword">await</span> bcrypt.<span class="title function_">hash</span>(password, <span class="number">12</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> [result] = <span class="keyword">await</span> pool.<span class="title function_">execute</span>(</span><br><span class="line">            <span class="string">&#x27;INSERT INTO users (username, password, email, created_at, updated_at) VALUES (?, ?, ?, NOW(), NOW())&#x27;</span>,</span><br><span class="line">            [username, hashedPassword, email]</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result.<span class="property">insertId</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®ç”¨æˆ·åæŸ¥æ‰¾ç”¨æˆ·</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">username</span> - ç”¨æˆ·å</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@returns</span> &#123;<span class="type">Promise&lt;Object|null&gt;</span>&#125; ç”¨æˆ·å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">async</span> <span class="title function_">findUserByUsername</span>(<span class="params">username</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> [users] = <span class="keyword">await</span> pool.<span class="title function_">execute</span>(</span><br><span class="line">            <span class="string">&#x27;SELECT id, username, email, password, created_at, updated_at FROM users WHERE username = ?&#x27;</span>,</span><br><span class="line">            [username]</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> users[<span class="number">0</span>] || <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®é‚®ç®±æŸ¥æ‰¾ç”¨æˆ·</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">email</span> - é‚®ç®±</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@returns</span> &#123;<span class="type">Promise&lt;Object|null&gt;</span>&#125; ç”¨æˆ·å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">async</span> <span class="title function_">findUserByEmail</span>(<span class="params">email</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> [users] = <span class="keyword">await</span> pool.<span class="title function_">execute</span>(</span><br><span class="line">            <span class="string">&#x27;SELECT id, username, email, password, created_at, updated_at FROM users WHERE email = ?&#x27;</span>,</span><br><span class="line">            [email]</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> users[<span class="number">0</span>] || <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * éªŒè¯å¯†ç </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">password</span> - æ˜æ–‡å¯†ç </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">hashedPassword</span> - å“ˆå¸Œå¯†ç </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@returns</span> &#123;<span class="type">Promise&lt;boolean&gt;</span>&#125; éªŒè¯ç»“æœ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">async</span> <span class="title function_">verifyPassword</span>(<span class="params">password, hashedPassword</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">await</span> bcrypt.<span class="title function_">compare</span>(password, hashedPassword);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ›´æ–°ç”¨æˆ·æœ€åç™»å½•æ—¶é—´</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">userId</span> - ç”¨æˆ·ID</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@returns</span> &#123;<span class="type">Promise&lt;void&gt;</span>&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">async</span> <span class="title function_">updateLastLogin</span>(<span class="params">userId</span>) &#123;</span><br><span class="line">        <span class="keyword">await</span> pool.<span class="title function_">execute</span>(</span><br><span class="line">            <span class="string">&#x27;UPDATE users SET last_login = NOW() WHERE id = ?&#x27;</span>,</span><br><span class="line">            [userId]</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å­˜åœ¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">username</span> - ç”¨æˆ·å</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">email</span> - é‚®ç®±</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@returns</span> &#123;<span class="type">Promise&lt;boolean&gt;</span>&#125; æ˜¯å¦å­˜åœ¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">async</span> <span class="title function_">userExists</span>(<span class="params">username, email</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> [users] = <span class="keyword">await</span> pool.<span class="title function_">execute</span>(</span><br><span class="line">            <span class="string">&#x27;SELECT id FROM users WHERE username = ? OR email = ?&#x27;</span>,</span><br><span class="line">            [username, email]</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> users.<span class="property">length</span> &gt; <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title class_">User</span>;</span><br></pre></td></tr></table></figure><hr><h2 id="6-ğŸ›¡ï¸-å—ä¿æŠ¤çš„è·¯ç”±"><a href="#6-ğŸ›¡ï¸-å—ä¿æŠ¤çš„è·¯ç”±" class="headerlink" title="6. ğŸ›¡ï¸ å—ä¿æŠ¤çš„è·¯ç”±"></a>6. ğŸ›¡ï¸ å—ä¿æŠ¤çš„è·¯ç”±</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; authenticateToken &#125; = <span class="built_in">require</span>(<span class="string">&#x27;../middleware/auth&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> router = express.<span class="title class_">Router</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * GET /api/user/profile</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/profile&#x27;</span>, authenticateToken, <span class="title function_">async</span> (req, res) =&gt; &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> userId = req.<span class="property">user</span>.<span class="property">id</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> [users] = <span class="keyword">await</span> pool.<span class="title function_">execute</span>(</span><br><span class="line">            <span class="string">&#x27;SELECT id, username, email, created_at, last_login FROM users WHERE id = ?&#x27;</span>,</span><br><span class="line">            [userId]</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (users.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">404</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">                <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">                <span class="attr">message</span>: <span class="string">&#x27;User not found&#x27;</span>,</span><br><span class="line">                <span class="attr">code</span>: <span class="string">&#x27;USER_NOT_FOUND&#x27;</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        res.<span class="title function_">json</span>(&#123;</span><br><span class="line">            <span class="attr">success</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">data</span>: &#123;</span><br><span class="line">                <span class="attr">user</span>: users[<span class="number">0</span>]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Profile fetch error:&#x27;</span>, error);</span><br><span class="line">        res.<span class="title function_">status</span>(<span class="number">500</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">            <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">message</span>: <span class="string">&#x27;Failed to fetch profile&#x27;</span>,</span><br><span class="line">            <span class="attr">code</span>: <span class="string">&#x27;PROFILE_ERROR&#x27;</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ–‡ä»¶ä¸Šä¼ è·¯ç”±</span></span><br><span class="line"><span class="comment"> * POST /api/files/upload</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/upload&#x27;</span>,</span><br><span class="line">    authenticateToken,</span><br><span class="line">    upload.<span class="title function_">single</span>(<span class="string">&#x27;file&#x27;</span>),</span><br><span class="line">    <span class="title function_">async</span> (req, res) =&gt; &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (!req.<span class="property">file</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">400</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">                    <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">                    <span class="attr">message</span>: <span class="string">&#x27;No file uploaded&#x27;</span>,</span><br><span class="line">                    <span class="attr">code</span>: <span class="string">&#x27;NO_FILE_UPLOADED&#x27;</span></span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ–‡ä»¶å¤„ç†é€»è¾‘...</span></span><br><span class="line">            res.<span class="title function_">json</span>(&#123;</span><br><span class="line">                <span class="attr">success</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="attr">message</span>: <span class="string">&#x27;File uploaded successfully&#x27;</span>,</span><br><span class="line">                <span class="attr">data</span>: &#123;</span><br><span class="line">                    <span class="attr">filename</span>: req.<span class="property">file</span>.<span class="property">filename</span>,</span><br><span class="line">                    <span class="attr">size</span>: req.<span class="property">file</span>.<span class="property">size</span>,</span><br><span class="line">                    <span class="attr">mimetype</span>: req.<span class="property">file</span>.<span class="property">mimetype</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;File upload error:&#x27;</span>, error);</span><br><span class="line">            res.<span class="title function_">status</span>(<span class="number">500</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">                <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">                <span class="attr">message</span>: <span class="string">&#x27;File upload failed&#x27;</span>,</span><br><span class="line">                <span class="attr">code</span>: <span class="string">&#x27;UPLOAD_ERROR&#x27;</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><hr><h2 id="7-ğŸ’»-å®¢æˆ·ç«¯ä½¿ç”¨"><a href="#7-ğŸ’»-å®¢æˆ·ç«¯ä½¿ç”¨" class="headerlink" title="7. ğŸ’» å®¢æˆ·ç«¯ä½¿ç”¨"></a>7. ğŸ’» å®¢æˆ·ç«¯ä½¿ç”¨</h2><h3 id="7-1-ğŸ”-ç™»å½•ç¤ºä¾‹"><a href="#7-1-ğŸ”-ç™»å½•ç¤ºä¾‹" class="headerlink" title="7.1 ğŸ” ç™»å½•ç¤ºä¾‹"></a>7.1 ğŸ” ç™»å½•ç¤ºä¾‹</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">AuthClient</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">baseURL</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">baseURL</span> = baseURL;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">token</span> = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”¨æˆ·ç™»å½•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">username</span> - ç”¨æˆ·åæˆ–é‚®ç®±</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">password</span> - å¯†ç </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@returns</span> &#123;<span class="type">Promise&lt;Object&gt;</span>&#125; ç™»å½•ç»“æœ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">login</span>(<span class="params">username, password</span>) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.baseURL&#125;</span>/auth/login`</span>, &#123;</span><br><span class="line">                <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">                <span class="attr">headers</span>: &#123;</span><br><span class="line">                    <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; username, password &#125;)</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">const</span> data = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (data.<span class="property">success</span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">token</span> = data.<span class="property">data</span>.<span class="property">tokens</span>.<span class="property">access_token</span>;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">refreshToken</span> = data.<span class="property">data</span>.<span class="property">tokens</span>.<span class="property">refresh_token</span>;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// å­˜å‚¨åˆ° localStorage</span></span><br><span class="line">                <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;access_token&#x27;</span>, <span class="variable language_">this</span>.<span class="property">token</span>);</span><br><span class="line">                <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;refresh_token&#x27;</span>, <span class="variable language_">this</span>.<span class="property">refreshToken</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> data;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Login error:&#x27;</span>, error);</span><br><span class="line">            <span class="keyword">throw</span> error;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¸¦è®¤è¯çš„è¯·æ±‚</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">url</span> - è¯·æ±‚URL</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">Object</span>&#125; <span class="variable">options</span> - è¯·æ±‚é€‰é¡¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@returns</span> &#123;<span class="type">Promise&lt;Response&gt;</span>&#125; å“åº”å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">authenticatedRequest</span>(<span class="params">url, options = &#123;&#125;</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">token</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;No authentication token available&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> defaultOptions = &#123;</span><br><span class="line">            <span class="attr">headers</span>: &#123;</span><br><span class="line">                <span class="string">&#x27;Authorization&#x27;</span>: <span class="string">`Bearer <span class="subst">$&#123;<span class="variable language_">this</span>.token&#125;</span>`</span>,</span><br><span class="line">                <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            ...options</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(url, defaultOptions);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Token è¿‡æœŸæ—¶è‡ªåŠ¨åˆ·æ–°</span></span><br><span class="line">        <span class="keyword">if</span> (response.<span class="property">status</span> === <span class="number">403</span>) &#123;</span><br><span class="line">            <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">refreshAccessToken</span>();</span><br><span class="line">            defaultOptions.<span class="property">headers</span>.<span class="property">Authorization</span> = <span class="string">`Bearer <span class="subst">$&#123;<span class="variable language_">this</span>.token&#125;</span>`</span>;</span><br><span class="line">            response = <span class="keyword">await</span> <span class="title function_">fetch</span>(url, defaultOptions);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> response;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ·æ–°è®¿é—®ä»¤ç‰Œ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">refreshAccessToken</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.baseURL&#125;</span>/auth/refresh`</span>, &#123;</span><br><span class="line">                <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">                <span class="attr">headers</span>: &#123;</span><br><span class="line">                    <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;</span><br><span class="line">                    <span class="attr">refresh_token</span>: <span class="variable language_">this</span>.<span class="property">refreshToken</span></span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">const</span> data = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (data.<span class="property">success</span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">token</span> = data.<span class="property">data</span>.<span class="property">access_token</span>;</span><br><span class="line">                <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;access_token&#x27;</span>, <span class="variable language_">this</span>.<span class="property">token</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;Token refresh failed&#x27;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Token refresh error:&#x27;</span>, error);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">logout</span>();</span><br><span class="line">            <span class="keyword">throw</span> error;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”¨æˆ·ç™»å‡º</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="title function_">logout</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">token</span> = <span class="literal">null</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">refreshToken</span> = <span class="literal">null</span>;</span><br><span class="line">        <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&#x27;access_token&#x27;</span>);</span><br><span class="line">        <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&#x27;refresh_token&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">const</span> authClient = <span class="keyword">new</span> <span class="title class_">AuthClient</span>(<span class="string">&#x27;http://localhost:3000/api&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç™»å½•</span></span><br><span class="line"><span class="keyword">const</span> loginResult = <span class="keyword">await</span> authClient.<span class="title function_">login</span>(<span class="string">&#x27;username&#x27;</span>, <span class="string">&#x27;password&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘é€è®¤è¯è¯·æ±‚</span></span><br><span class="line"><span class="keyword">const</span> profileResponse = <span class="keyword">await</span> authClient.<span class="title function_">authenticatedRequest</span>(<span class="string">&#x27;/user/profile&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> profileData = <span class="keyword">await</span> profileResponse.<span class="title function_">json</span>();</span><br></pre></td></tr></table></figure><hr><h2 id="8-ğŸš€-é«˜çº§ç‰¹æ€§"><a href="#8-ğŸš€-é«˜çº§ç‰¹æ€§" class="headerlink" title="8. ğŸš€ é«˜çº§ç‰¹æ€§"></a>8. ğŸš€ é«˜çº§ç‰¹æ€§</h2><h3 id="8-1-ğŸ”„-åŒå› ç´ è®¤è¯-2FA"><a href="#8-1-ğŸ”„-åŒå› ç´ è®¤è¯-2FA" class="headerlink" title="8.1 ğŸ”„ åŒå› ç´ è®¤è¯ (2FA)"></a>8.1 ğŸ”„ åŒå› ç´ è®¤è¯ (2FA)</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> speakeasy = <span class="built_in">require</span>(<span class="string">&#x27;speakeasy&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> qrcode = <span class="built_in">require</span>(<span class="string">&#x27;qrcode&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¯ç”¨åŒå› ç´ è®¤è¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/2fa/enable&#x27;</span>, authenticateToken, <span class="title function_">async</span> (req, res) =&gt; &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> userId = req.<span class="property">user</span>.<span class="property">id</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç”Ÿæˆå¯†é’¥</span></span><br><span class="line">        <span class="keyword">const</span> secret = speakeasy.<span class="title function_">generateSecret</span>(&#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">`YourApp (<span class="subst">$&#123;req.user.username&#125;</span>)`</span>,</span><br><span class="line">            <span class="attr">issuer</span>: <span class="string">&#x27;YourApp&#x27;</span>,</span><br><span class="line">            <span class="attr">length</span>: <span class="number">32</span></span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä¿å­˜å¯†é’¥åˆ°æ•°æ®åº“ (æœªéªŒè¯çŠ¶æ€)</span></span><br><span class="line">        <span class="keyword">await</span> pool.<span class="title function_">execute</span>(</span><br><span class="line">            <span class="string">&#x27;UPDATE users SET two_factor_secret = ?, two_factor_enabled = FALSE WHERE id = ?&#x27;</span>,</span><br><span class="line">            [secret.<span class="property">base32</span>, userId]</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç”ŸæˆäºŒç»´ç </span></span><br><span class="line">        <span class="keyword">const</span> qrCodeUrl = <span class="keyword">await</span> qrcode.<span class="title function_">toDataURL</span>(secret.<span class="property">otpauth_url</span>);</span><br><span class="line"></span><br><span class="line">        res.<span class="title function_">json</span>(&#123;</span><br><span class="line">            <span class="attr">success</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">message</span>: <span class="string">&#x27;2FA setup initiated&#x27;</span>,</span><br><span class="line">            <span class="attr">data</span>: &#123;</span><br><span class="line">                <span class="attr">secret</span>: secret.<span class="property">base32</span>,</span><br><span class="line">                <span class="attr">qr_code</span>: qrCodeUrl,</span><br><span class="line">                <span class="attr">backup_codes</span>: <span class="title function_">generateBackupCodes</span>()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;2FA enable error:&#x27;</span>, error);</span><br><span class="line">        res.<span class="title function_">status</span>(<span class="number">500</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">            <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">message</span>: <span class="string">&#x27;Failed to enable 2FA&#x27;</span>,</span><br><span class="line">            <span class="attr">code</span>: <span class="string">&#x27;TWO_FA_ENABLE_ERROR&#x27;</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * éªŒè¯åŒå› ç´ è®¤è¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/2fa/verify&#x27;</span>, authenticateToken, <span class="title function_">async</span> (req, res) =&gt; &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; token &#125; = req.<span class="property">body</span>;</span><br><span class="line">        <span class="keyword">const</span> userId = req.<span class="property">user</span>.<span class="property">id</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å–ç”¨æˆ·çš„å¯†é’¥</span></span><br><span class="line">        <span class="keyword">const</span> [users] = <span class="keyword">await</span> pool.<span class="title function_">execute</span>(</span><br><span class="line">            <span class="string">&#x27;SELECT two_factor_secret FROM users WHERE id = ?&#x27;</span>,</span><br><span class="line">            [userId]</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (users.<span class="property">length</span> === <span class="number">0</span> || !users[<span class="number">0</span>].<span class="property">two_factor_secret</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">400</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">                <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">                <span class="attr">message</span>: <span class="string">&#x27;2FA not set up for this user&#x27;</span>,</span><br><span class="line">                <span class="attr">code</span>: <span class="string">&#x27;TWO_FA_NOT_SETUP&#x27;</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// éªŒè¯ä»¤ç‰Œ</span></span><br><span class="line">        <span class="keyword">const</span> verified = speakeasy.<span class="property">totp</span>.<span class="title function_">verify</span>(&#123;</span><br><span class="line">            <span class="attr">secret</span>: users[<span class="number">0</span>].<span class="property">two_factor_secret</span>,</span><br><span class="line">            <span class="attr">encoding</span>: <span class="string">&#x27;base32&#x27;</span>,</span><br><span class="line">            <span class="attr">token</span>: token,</span><br><span class="line">            <span class="attr">window</span>: <span class="number">2</span> <span class="comment">// å…è®¸2ä¸ªæ—¶é—´çª—å£çš„åå·®</span></span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!verified) &#123;</span><br><span class="line">            <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">400</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">                <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">                <span class="attr">message</span>: <span class="string">&#x27;Invalid 2FA token&#x27;</span>,</span><br><span class="line">                <span class="attr">code</span>: <span class="string">&#x27;TWO_FA_INVALID_TOKEN&#x27;</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¯ç”¨åŒå› ç´ è®¤è¯</span></span><br><span class="line">        <span class="keyword">await</span> pool.<span class="title function_">execute</span>(</span><br><span class="line">            <span class="string">&#x27;UPDATE users SET two_factor_enabled = TRUE WHERE id = ?&#x27;</span>,</span><br><span class="line">            [userId]</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        res.<span class="title function_">json</span>(&#123;</span><br><span class="line">            <span class="attr">success</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">message</span>: <span class="string">&#x27;2FA enabled successfully&#x27;</span></span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;2FA verification error:&#x27;</span>, error);</span><br><span class="line">        res.<span class="title function_">status</span>(<span class="number">500</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">            <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">message</span>: <span class="string">&#x27;Failed to verify 2FA&#x27;</span>,</span><br><span class="line">            <span class="attr">code</span>: <span class="string">&#x27;TWO_FA_VERIFY_ERROR&#x27;</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="8-2-ğŸ“-å®¡è®¡æ—¥å¿—"><a href="#8-2-ğŸ“-å®¡è®¡æ—¥å¿—" class="headerlink" title="8.2 ğŸ“ å®¡è®¡æ—¥å¿—"></a>8.2 ğŸ“ å®¡è®¡æ—¥å¿—</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è®°å½•å®‰å…¨äº‹ä»¶</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">logSecurityEvent</span>(<span class="params">userId, eventType, details, ipAddress, userAgent</span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">await</span> pool.<span class="title function_">execute</span>(</span><br><span class="line">            <span class="string">`INSERT INTO security_logs</span></span><br><span class="line"><span class="string">             (user_id, event_type, details, ip_address, user_agent, created_at)</span></span><br><span class="line"><span class="string">             VALUES (?, ?, ?, ?, ?, NOW())`</span>,</span><br><span class="line">            [userId, eventType, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(details), ipAddress, userAgent]</span><br><span class="line">        );</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Failed to log security event:&#x27;</span>, error);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨è®¤è¯è·¯ç”±ä¸­ä½¿ç”¨</span></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/login&#x27;</span>, authLimiter, <span class="title function_">async</span> (req, res) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> ipAddress = req.<span class="property">ip</span>;</span><br><span class="line">    <span class="keyword">const</span> userAgent = req.<span class="title function_">get</span>(<span class="string">&#x27;User-Agent&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ... ç™»å½•é€»è¾‘ ...</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (loginSuccessful) &#123;</span><br><span class="line">        <span class="keyword">await</span> <span class="title function_">logSecurityEvent</span>(</span><br><span class="line">            user.<span class="property">id</span>,</span><br><span class="line">            <span class="string">&#x27;LOGIN_SUCCESS&#x27;</span>,</span><br><span class="line">            &#123; username &#125;,</span><br><span class="line">            ipAddress,</span><br><span class="line">            userAgent</span><br><span class="line">        );</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">await</span> <span class="title function_">logSecurityEvent</span>(</span><br><span class="line">            <span class="literal">null</span>, <span class="comment">// æœªçŸ¥ç”¨æˆ·</span></span><br><span class="line">            <span class="string">&#x27;LOGIN_FAILED&#x27;</span>,</span><br><span class="line">            &#123; username, <span class="attr">reason</span>: <span class="string">&#x27;invalid_credentials&#x27;</span> &#125;,</span><br><span class="line">            ipAddress,</span><br><span class="line">            userAgent</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><hr><h2 id="9-ğŸ§ª-æµ‹è¯•ä¸è°ƒè¯•"><a href="#9-ğŸ§ª-æµ‹è¯•ä¸è°ƒè¯•" class="headerlink" title="9. ğŸ§ª æµ‹è¯•ä¸è°ƒè¯•"></a>9. ğŸ§ª æµ‹è¯•ä¸è°ƒè¯•</h2><h3 id="9-1-ğŸ§ª-å•å…ƒæµ‹è¯•"><a href="#9-1-ğŸ§ª-å•å…ƒæµ‹è¯•" class="headerlink" title="9.1 ğŸ§ª å•å…ƒæµ‹è¯•"></a>9.1 ğŸ§ª å•å…ƒæµ‹è¯•</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> request = <span class="built_in">require</span>(<span class="string">&#x27;supertest&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="built_in">require</span>(<span class="string">&#x27;../app&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> pool = <span class="built_in">require</span>(<span class="string">&#x27;../database/connection&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_">describe</span>(<span class="string">&#x27;Authentication API&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">beforeEach</span>(<span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">        <span class="comment">// æ¸…ç†æµ‹è¯•æ•°æ®</span></span><br><span class="line">        <span class="keyword">await</span> pool.<span class="title function_">execute</span>(<span class="string">&#x27;DELETE FROM users WHERE username LIKE &quot;test_%&quot;&#x27;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="title function_">afterAll</span>(<span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">        <span class="comment">// å…³é—­æ•°æ®åº“è¿æ¥</span></span><br><span class="line">        <span class="keyword">await</span> pool.<span class="title function_">end</span>();</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="title function_">describe</span>(<span class="string">&#x27;POST /auth/register&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">it</span>(<span class="string">&#x27;should register a new user successfully&#x27;</span>, <span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">            <span class="keyword">const</span> userData = &#123;</span><br><span class="line">                <span class="attr">username</span>: <span class="string">&#x27;test_user&#x27;</span>,</span><br><span class="line">                <span class="attr">email</span>: <span class="string">&#x27;test@example.com&#x27;</span>,</span><br><span class="line">                <span class="attr">password</span>: <span class="string">&#x27;TestPass123!&#x27;</span></span><br><span class="line">            &#125;;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">request</span>(app)</span><br><span class="line">                .<span class="title function_">post</span>(<span class="string">&#x27;/auth/register&#x27;</span>)</span><br><span class="line">                .<span class="title function_">send</span>(userData)</span><br><span class="line">                .<span class="title function_">expect</span>(<span class="number">201</span>);</span><br><span class="line"></span><br><span class="line">            <span class="title function_">expect</span>(response.<span class="property">body</span>.<span class="property">success</span>).<span class="title function_">toBe</span>(<span class="literal">true</span>);</span><br><span class="line">            <span class="title function_">expect</span>(response.<span class="property">body</span>.<span class="property">data</span>.<span class="property">user</span>.<span class="property">username</span>).<span class="title function_">toBe</span>(userData.<span class="property">username</span>);</span><br><span class="line">            <span class="title function_">expect</span>(response.<span class="property">body</span>.<span class="property">data</span>.<span class="property">tokens</span>.<span class="property">access_token</span>).<span class="title function_">toBeDefined</span>();</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="title function_">it</span>(<span class="string">&#x27;should reject duplicate username&#x27;</span>, <span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">            <span class="keyword">const</span> userData = &#123;</span><br><span class="line">                <span class="attr">username</span>: <span class="string">&#x27;test_user&#x27;</span>,</span><br><span class="line">                <span class="attr">email</span>: <span class="string">&#x27;test@example.com&#x27;</span>,</span><br><span class="line">                <span class="attr">password</span>: <span class="string">&#x27;TestPass123!&#x27;</span></span><br><span class="line">            &#125;;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// ç¬¬ä¸€æ¬¡æ³¨å†ŒæˆåŠŸ</span></span><br><span class="line">            <span class="keyword">await</span> <span class="title function_">request</span>(app)</span><br><span class="line">                .<span class="title function_">post</span>(<span class="string">&#x27;/auth/register&#x27;</span>)</span><br><span class="line">                .<span class="title function_">send</span>(userData)</span><br><span class="line">                .<span class="title function_">expect</span>(<span class="number">201</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// ç¬¬äºŒæ¬¡æ³¨å†Œå¤±è´¥</span></span><br><span class="line">            <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">request</span>(app)</span><br><span class="line">                .<span class="title function_">post</span>(<span class="string">&#x27;/auth/register&#x27;</span>)</span><br><span class="line">                .<span class="title function_">send</span>(userData)</span><br><span class="line">                .<span class="title function_">expect</span>(<span class="number">400</span>);</span><br><span class="line"></span><br><span class="line">            <span class="title function_">expect</span>(response.<span class="property">body</span>.<span class="property">success</span>).<span class="title function_">toBe</span>(<span class="literal">false</span>);</span><br><span class="line">            <span class="title function_">expect</span>(response.<span class="property">body</span>.<span class="property">code</span>).<span class="title function_">toBe</span>(<span class="string">&#x27;USER_EXISTS&#x27;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="title function_">describe</span>(<span class="string">&#x27;POST /auth/login&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">beforeEach</span>(<span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">            <span class="comment">// åˆ›å»ºæµ‹è¯•ç”¨æˆ·</span></span><br><span class="line">            <span class="keyword">await</span> <span class="title function_">request</span>(app)</span><br><span class="line">                .<span class="title function_">post</span>(<span class="string">&#x27;/auth/register&#x27;</span>)</span><br><span class="line">                .<span class="title function_">send</span>(&#123;</span><br><span class="line">                    <span class="attr">username</span>: <span class="string">&#x27;test_user&#x27;</span>,</span><br><span class="line">                    <span class="attr">email</span>: <span class="string">&#x27;test@example.com&#x27;</span>,</span><br><span class="line">                    <span class="attr">password</span>: <span class="string">&#x27;TestPass123!&#x27;</span></span><br><span class="line">                &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="title function_">it</span>(<span class="string">&#x27;should login with valid credentials&#x27;</span>, <span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">            <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">request</span>(app)</span><br><span class="line">                .<span class="title function_">post</span>(<span class="string">&#x27;/auth/login&#x27;</span>)</span><br><span class="line">                .<span class="title function_">send</span>(&#123;</span><br><span class="line">                    <span class="attr">username</span>: <span class="string">&#x27;test_user&#x27;</span>,</span><br><span class="line">                    <span class="attr">password</span>: <span class="string">&#x27;TestPass123!&#x27;</span></span><br><span class="line">                &#125;)</span><br><span class="line">                .<span class="title function_">expect</span>(<span class="number">200</span>);</span><br><span class="line"></span><br><span class="line">            <span class="title function_">expect</span>(response.<span class="property">body</span>.<span class="property">success</span>).<span class="title function_">toBe</span>(<span class="literal">true</span>);</span><br><span class="line">            <span class="title function_">expect</span>(response.<span class="property">body</span>.<span class="property">data</span>.<span class="property">tokens</span>.<span class="property">access_token</span>).<span class="title function_">toBeDefined</span>();</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="title function_">it</span>(<span class="string">&#x27;should reject invalid credentials&#x27;</span>, <span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">            <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">request</span>(app)</span><br><span class="line">                .<span class="title function_">post</span>(<span class="string">&#x27;/auth/login&#x27;</span>)</span><br><span class="line">                .<span class="title function_">send</span>(&#123;</span><br><span class="line">                    <span class="attr">username</span>: <span class="string">&#x27;test_user&#x27;</span>,</span><br><span class="line">                    <span class="attr">password</span>: <span class="string">&#x27;wrongpassword&#x27;</span></span><br><span class="line">                &#125;)</span><br><span class="line">                .<span class="title function_">expect</span>(<span class="number">401</span>);</span><br><span class="line"></span><br><span class="line">            <span class="title function_">expect</span>(response.<span class="property">body</span>.<span class="property">success</span>).<span class="title function_">toBe</span>(<span class="literal">false</span>);</span><br><span class="line">            <span class="title function_">expect</span>(response.<span class="property">body</span>.<span class="property">code</span>).<span class="title function_">toBe</span>(<span class="string">&#x27;INVALID_CREDENTIALS&#x27;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="9-2-ğŸ”-è°ƒè¯•å·¥å…·"><a href="#9-2-ğŸ”-è°ƒè¯•å·¥å…·" class="headerlink" title="9.2 ğŸ” è°ƒè¯•å·¥å…·"></a>9.2 ğŸ” è°ƒè¯•å·¥å…·</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Token è°ƒè¯•å·¥å…·</span></span><br><span class="line"><span class="keyword">const</span> jwt = <span class="built_in">require</span>(<span class="string">&#x27;jsonwebtoken&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">debugToken</span>(<span class="params">token</span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> decoded = jwt.<span class="title function_">decode</span>(token, &#123; <span class="attr">complete</span>: <span class="literal">true</span> &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Token Debug Info:&#x27;</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Header:&#x27;</span>, decoded.<span class="property">header</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Payload:&#x27;</span>, decoded.<span class="property">payload</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Signature:&#x27;</span>, decoded.<span class="property">signature</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// éªŒè¯ token</span></span><br><span class="line">        <span class="keyword">const</span> verified = jwt.<span class="title function_">verify</span>(token, process.<span class="property">env</span>.<span class="property">JWT_SECRET</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Verification:&#x27;</span>, <span class="string">&#x27;âœ… Valid&#x27;</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Expiration:&#x27;</span>, <span class="keyword">new</span> <span class="title class_">Date</span>(verified.<span class="property">exp</span> * <span class="number">1000</span>));</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Verification:&#x27;</span>, <span class="string">&#x27;âŒ Invalid&#x27;</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Error:&#x27;</span>, error.<span class="property">message</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨æ–¹å¼</span></span><br><span class="line"><span class="title function_">debugToken</span>(<span class="string">&#x27;your.jwt.token.here&#x27;</span>);</span><br></pre></td></tr></table></figure><hr><h2 id="ğŸ“Š-æ€»ç»“"><a href="#ğŸ“Š-æ€»ç»“" class="headerlink" title="ğŸ“Š æ€»ç»“"></a>ğŸ“Š æ€»ç»“</h2><h3 id="âœ…-è®¤è¯ç³»ç»Ÿç‰¹æ€§"><a href="#âœ…-è®¤è¯ç³»ç»Ÿç‰¹æ€§" class="headerlink" title="âœ… è®¤è¯ç³»ç»Ÿç‰¹æ€§"></a>âœ… è®¤è¯ç³»ç»Ÿç‰¹æ€§</h3><ul><li>âœ… <strong>å®‰å…¨çš„å¯†ç å­˜å‚¨</strong> (bcrypt)</li><li>âœ… <strong>JWT Token è®¤è¯</strong></li><li>âœ… <strong>è¯·æ±‚é¢‘ç‡é™åˆ¶</strong></li><li>âœ… <strong>è¾“å…¥éªŒè¯å’Œæ¸…ç†</strong></li><li>âœ… <strong>CORS è·¨åŸŸä¿æŠ¤</strong></li><li>âœ… <strong>é”™è¯¯å¤„ç†å’Œå®‰å…¨æ—¥å¿—</strong></li><li>âœ… <strong>åŒå› ç´ è®¤è¯æ”¯æŒ</strong></li><li>âœ… <strong>å®¡è®¡æ—¥å¿—è®°å½•</strong></li></ul><h3 id="ğŸ¯-å®‰å…¨æœ€ä½³å®è·µ"><a href="#ğŸ¯-å®‰å…¨æœ€ä½³å®è·µ" class="headerlink" title="ğŸ¯ å®‰å…¨æœ€ä½³å®è·µ"></a>ğŸ¯ å®‰å…¨æœ€ä½³å®è·µ</h3><ol><li><strong>ä½¿ç”¨ HTTPS</strong> - æ‰€æœ‰è®¤è¯è¯·æ±‚å¿…é¡»é€šè¿‡ HTTPS</li><li><strong>å¯†ç ç­–ç•¥</strong> - å¼ºåˆ¶ä½¿ç”¨å¤æ‚å¯†ç </li><li><strong>Token ç®¡ç†</strong> - åˆç†è®¾ç½®è¿‡æœŸæ—¶é—´</li><li><strong>ç›‘æ§æ—¥å¿—</strong> - è®°å½•æ‰€æœ‰å®‰å…¨ç›¸å…³äº‹ä»¶</li><li><strong>å®šæœŸæ›´æ–°</strong> - ä¿æŒä¾èµ–åº“æœ€æ–°ç‰ˆæœ¬</li></ol><h3 id="ğŸ“š-æ‰©å±•å»ºè®®"><a href="#ğŸ“š-æ‰©å±•å»ºè®®" class="headerlink" title="ğŸ“š æ‰©å±•å»ºè®®"></a>ğŸ“š æ‰©å±•å»ºè®®</h3><ul><li>å®ç°å¯†ç é‡ç½®åŠŸèƒ½</li><li>æ·»åŠ è´¦æˆ·é‚®ç®±éªŒè¯</li><li>å®ç°ç¤¾äº¤ç™»å½•é›†æˆ</li><li>æ·»åŠ è®¾å¤‡ç®¡ç†åŠŸèƒ½</li><li>å®ç°ç»†ç²’åº¦æƒé™æ§åˆ¶</li></ul><hr><blockquote><p><strong>ğŸ’¡ æç¤º</strong>: åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œè¯·ç¡®ä¿ï¼š</p><ul><li>ä½¿ç”¨å¼ºå¯†é’¥å’Œå®šæœŸè½®æ¢</li><li>å¯ç”¨è¯¦ç»†çš„æ—¥å¿—è®°å½•</li><li>å®æ–½ç›‘æ§å’Œå‘Šè­¦æœºåˆ¶</li><li>å®šæœŸè¿›è¡Œå®‰å…¨å®¡è®¡</li></ul></blockquote>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;æœåŠ¡å™¨è®¤è¯-API-è§„èŒƒ&quot;&gt;&lt;a href=&quot;#æœåŠ¡å™¨è®¤è¯-API-è§„èŒƒ&quot; class=&quot;headerlink&quot; title=&quot;æœåŠ¡å™¨è®¤è¯ API è§„èŒƒ&quot;&gt;&lt;/a&gt;æœåŠ¡å™¨è®¤è¯ API</summary>
        
      
    
    
    
    <category term="Webæ¶æ„å®‰å…¨" scheme="https://vilaswang.github.io/categories/Web%E6%9E%B6%E6%9E%84%E5%AE%89%E5%85%A8/"/>
    
    
    <category term="æŠ€æœ¯æ–‡æ¡£" scheme="https://vilaswang.github.io/tags/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/"/>
    
    <category term="æŒ‡å—" scheme="https://vilaswang.github.io/tags/%E6%8C%87%E5%8D%97/"/>
    
  </entry>
  
  <entry>
    <title>C++ Web ä»£ç†è®¾è®¡æ¶æ„</title>
    <link href="https://vilaswang.github.io/posts/95bf2167/"/>
    <id>https://vilaswang.github.io/posts/95bf2167/</id>
    <published>2025-12-09T06:09:55.000Z</published>
    <updated>2025-12-17T15:36:29.259Z</updated>
    
    <content type="html"><![CDATA[<h1 id="C-Web-ä»£ç†è®¾è®¡æ¶æ„"><a href="#C-Web-ä»£ç†è®¾è®¡æ¶æ„" class="headerlink" title="C++ Web ä»£ç†è®¾è®¡æ¶æ„"></a>C++ Web ä»£ç†è®¾è®¡æ¶æ„</h1><blockquote><p><strong>æ–‡æ¡£åˆ›å»ºæ—¶é—´</strong>: 2025-11-14<br><strong>æœ€åæ›´æ–°</strong>: 2025-11-14<br><strong>æ ‡ç­¾</strong>: <code>agents</code>, <code>cpp</code>, <code>web-development</code>, <code>specialization</code>, <code>ai-assistants</code>, <code>claude-code</code></p></blockquote><h2 id="ğŸ“‘-ç›®å½•"><a href="#ğŸ“‘-ç›®å½•" class="headerlink" title="ğŸ“‘ ç›®å½•"></a>ğŸ“‘ ç›®å½•</h2><ul><li><a href="#1-%E6%A6%82%E8%BF%B0">1. æ¦‚è¿°</a></li><li><a href="#2-%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99">2. è®¾è®¡åŸåˆ™</a></li><li><a href="#3-agent-%E6%9E%B6%E6%9E%84">3. Agent æ¶æ„</a></li><li><a href="#4-%E6%A0%B8%E5%BF%83%E5%9B%A2%E9%98%9F-agents">4. æ ¸å¿ƒå›¢é˜Ÿ Agents</a><ul><li><a href="#41-project-architect-agent">4.1 Project Architect Agent</a></li><li><a href="#42-api-designer-agent">4.2 API Designer Agent</a></li><li><a href="#43-core-logic-developer-agent">4.3 Core Logic Developer Agent</a></li><li><a href="#44-web-service-integrator-agent">4.4 Web Service Integrator Agent</a></li><li><a href="#45-build--dependency-expert-agent">4.5 Build &amp; Dependency Expert Agent</a></li><li><a href="#46-qa-specialist-agent">4.6 QA Specialist Agent</a></li><li><a href="#47-deployment-operator-agent">4.7 Deployment Operator Agent</a></li></ul></li><li><a href="#5-%E5%8D%8F%E4%BD%9C%E6%B5%81%E7%A8%8B">5. åä½œæµç¨‹</a></li><li><a href="#6-%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97">6. ä½¿ç”¨æŒ‡å—</a></li><li><a href="#7-%E6%89%A9%E5%B1%95%E5%92%8C%E7%BB%B4%E6%8A%A4">7. æ‰©å±•å’Œç»´æŠ¤</a></li></ul><hr><h2 id="1-ğŸ“–-æ¦‚è¿°"><a href="#1-ğŸ“–-æ¦‚è¿°" class="headerlink" title="1. ğŸ“– æ¦‚è¿°"></a>1. ğŸ“– æ¦‚è¿°</h2><p>æœ¬æŒ‡å—è¯¦ç»†è¯´æ˜å¦‚ä½•ä¸º C++ Web é¡¹ç›®åˆ›å»ºä¸“é—¨åŒ–çš„ AI Agent å›¢é˜Ÿï¼Œæ¯ä¸ª Agent éƒ½å…·æœ‰ç‰¹å®šçš„èŒè´£å’Œä¸“ä¸šèƒ½åŠ›ï¼Œé€šè¿‡ååŒå·¥ä½œå®Œæˆä»è®¾è®¡åˆ°éƒ¨ç½²çš„å®Œæ•´å¼€å‘æµç¨‹ã€‚</p><h3 id="ğŸ¯-è®¾è®¡ç›®æ ‡"><a href="#ğŸ¯-è®¾è®¡ç›®æ ‡" class="headerlink" title="ğŸ¯ è®¾è®¡ç›®æ ‡"></a>ğŸ¯ è®¾è®¡ç›®æ ‡</h3><ul><li>âœ… <strong>ä¸“ä¸šåŒ–åˆ†å·¥</strong> - æ¯ä¸ª Agent ä¸“æ³¨äºç‰¹å®šé¢†åŸŸ</li><li>âœ… <strong>æµç¨‹æ ‡å‡†åŒ–</strong> - å»ºç«‹æ¸…æ™°çš„å¼€å‘å·¥ä½œæµç¨‹</li><li>âœ… <strong>è´¨é‡ä¿è¯</strong> - ç¡®ä¿ä»£ç è´¨é‡å’Œæœ€ä½³å®è·µ</li><li>âœ… <strong>å¯æ‰©å±•æ€§</strong> - æ”¯æŒé¡¹ç›®è§„æ¨¡å’Œå¤æ‚åº¦å¢é•¿</li><li>âœ… <strong>ä¸€è‡´æ€§</strong> - ç»´æŠ¤é¡¹ç›®è§„èŒƒå’Œæ ‡å‡†ç»Ÿä¸€</li></ul><h3 id="ğŸ—ï¸-ç³»ç»Ÿæ¶æ„å›¾"><a href="#ğŸ—ï¸-ç³»ç»Ÿæ¶æ„å›¾" class="headerlink" title="ğŸ—ï¸ ç³»ç»Ÿæ¶æ„å›¾"></a>ğŸ—ï¸ ç³»ç»Ÿæ¶æ„å›¾</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">graph TB</span><br><span class="line">    A[Project Requirements] --&gt; B[Team Lead / Coordinator]</span><br><span class="line"></span><br><span class="line">    B --&gt; C[Project Architect]</span><br><span class="line">    B --&gt; D[API Designer]</span><br><span class="line">    B --&gt; E[Core Logic Developer]</span><br><span class="line">    B --&gt; F[Web Service Integrator]</span><br><span class="line">    B --&gt; G[Build Expert]</span><br><span class="line">    B --&gt; H[QA Specialist]</span><br><span class="line">    B --&gt; I[Deployment Operator]</span><br><span class="line"></span><br><span class="line">    C --&gt; J[System Architecture]</span><br><span class="line">    C --&gt; K[Technology Stack]</span><br><span class="line"></span><br><span class="line">    D --&gt; L[API Specifications]</span><br><span class="line">    D --&gt; M[Documentation]</span><br><span class="line"></span><br><span class="line">    E --&gt; N[Business Logic]</span><br><span class="line">    E --&gt; O[Core Algorithms]</span><br><span class="line"></span><br><span class="line">    F --&gt; P[Web Framework Integration]</span><br><span class="line">    F --&gt; Q[Request Handling]</span><br><span class="line"></span><br><span class="line">    G --&gt; R[Build Configuration]</span><br><span class="line">    G --&gt; S[Dependency Management]</span><br><span class="line"></span><br><span class="line">    H --&gt; T[Testing Strategy]</span><br><span class="line">    H --&gt; U[Quality Metrics]</span><br><span class="line"></span><br><span class="line">    I --&gt; V[Containerization]</span><br><span class="line">    I --&gt; W[Deployment Scripts]</span><br><span class="line"></span><br><span class="line">    J --&gt; X[C++ Web Application]</span><br><span class="line">    L --&gt; X</span><br><span class="line">    N --&gt; X</span><br><span class="line">    P --&gt; X</span><br><span class="line">    R --&gt; X</span><br><span class="line">    T --&gt; X</span><br><span class="line">    V --&gt; X</span><br></pre></td></tr></table></figure><hr><h2 id="2-ğŸ¯-è®¾è®¡åŸåˆ™"><a href="#2-ğŸ¯-è®¾è®¡åŸåˆ™" class="headerlink" title="2. ğŸ¯ è®¾è®¡åŸåˆ™"></a>2. ğŸ¯ è®¾è®¡åŸåˆ™</h2><h3 id="2-1-ğŸ”„-èŒè´£åˆ†ç¦»åŸåˆ™"><a href="#2-1-ğŸ”„-èŒè´£åˆ†ç¦»åŸåˆ™" class="headerlink" title="2.1 ğŸ”„ èŒè´£åˆ†ç¦»åŸåˆ™"></a>2.1 ğŸ”„ èŒè´£åˆ†ç¦»åŸåˆ™</h3><p>æ¯ä¸ª Agent éƒ½åº”è¯¥æœ‰æ˜ç¡®çš„èŒè´£è¾¹ç•Œï¼Œé¿å…åŠŸèƒ½é‡å ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">    A[æ¶æ„è®¾è®¡] --&gt; B[ä¸šåŠ¡é€»è¾‘] --&gt; C[Webé›†æˆ] --&gt; D[æ„å»ºéƒ¨ç½²]</span><br><span class="line"></span><br><span class="line">    style A fill:#e1f5fe</span><br><span class="line">    style B fill:#f3e5f5</span><br><span class="line">    style C fill:#e8f5e8</span><br><span class="line">    style D fill:#fff3e0</span><br></pre></td></tr></table></figure><h3 id="2-2-ğŸ“‹-å¯è¿½æº¯æ€§åŸåˆ™"><a href="#2-2-ğŸ“‹-å¯è¿½æº¯æ€§åŸåˆ™" class="headerlink" title="2.2 ğŸ“‹ å¯è¿½æº¯æ€§åŸåˆ™"></a>2.2 ğŸ“‹ å¯è¿½æº¯æ€§åŸåˆ™</h3><p>æ¯ä¸ªäº§å‡ºç‰©éƒ½åº”è¯¥èƒ½å¤Ÿè¿½æº¯åˆ°åˆ›å»ºå®ƒçš„ Agentï¼š</p><table><thead><tr><th>Agent</th><th>äº§å‡ºç‰©</th><th>å¯è¿½æº¯æ ‡è¯†</th></tr></thead><tbody><tr><td>Architect</td><td><code>CMakeLists.txt</code></td><td><code>// Generated by: cpp_architect</code></td></tr><tr><td>API Designer</td><td>OpenAPI spec</td><td><code>// Designed by: api_designer</code></td></tr><tr><td>Core Logic</td><td><code>.cpp/.hpp</code> files</td><td><code>// Implemented by: core_logic_developer</code></td></tr></tbody></table><h3 id="2-3-ğŸ”„-è¿­ä»£æ”¹è¿›åŸåˆ™"><a href="#2-3-ğŸ”„-è¿­ä»£æ”¹è¿›åŸåˆ™" class="headerlink" title="2.3 ğŸ”„ è¿­ä»£æ”¹è¿›åŸåˆ™"></a>2.3 ğŸ”„ è¿­ä»£æ”¹è¿›åŸåˆ™</h3><p>Agent åº”è¯¥èƒ½å¤ŸåŸºäºåé¦ˆè¿›è¡Œè¿­ä»£æ”¹è¿›ï¼Œè€Œä¸éœ€è¦å®Œå…¨é‡å†™ã€‚</p><hr><h2 id="3-ğŸ¢-Agent-æ¶æ„"><a href="#3-ğŸ¢-Agent-æ¶æ„" class="headerlink" title="3. ğŸ¢ Agent æ¶æ„"></a>3. ğŸ¢ Agent æ¶æ„</h2><h3 id="3-1-ğŸ”§-æ ‡å‡†åŒ–-Agent-ç»“æ„"><a href="#3-1-ğŸ”§-æ ‡å‡†åŒ–-Agent-ç»“æ„" class="headerlink" title="3.1 ğŸ”§ æ ‡å‡†åŒ– Agent ç»“æ„"></a>3.1 ğŸ”§ æ ‡å‡†åŒ– Agent ç»“æ„</h3><p>æ¯ä¸ª Agent éƒ½éµå¾ªç»Ÿä¸€çš„æ¨¡æ¿ç»“æ„ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># C++ Web ä»£ç†è®¾è®¡æ¶æ„</span></span><br><span class="line"><span class="section">## Description</span></span><br><span class="line">&#123;è¯¦ç»†çš„è§’è‰²æè¿°å’ŒèŒè´£&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">## Capabilities</span></span><br><span class="line"><span class="bullet">-</span> &#123;æ ¸å¿ƒèƒ½åŠ›åˆ—è¡¨&#125;</span><br><span class="line"><span class="bullet">-</span> &#123;ä¸“ä¸šæŠ€èƒ½&#125;</span><br><span class="line"><span class="bullet">-</span> &#123;å·¥å…·å’Œæ¡†æ¶&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">## Workflow</span></span><br><span class="line"><span class="bullet">1.</span> &#123;æ­¥éª¤1&#125;</span><br><span class="line"><span class="bullet">2.</span> &#123;æ­¥éª¤2&#125;</span><br><span class="line"><span class="bullet">3.</span> &#123;æ­¥éª¤3&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">## Input Dependencies</span></span><br><span class="line"><span class="bullet">-</span> &#123;éœ€è¦çš„å‰ç½®è¾“å…¥&#125;</span><br><span class="line"><span class="bullet">-</span> &#123;ä¾èµ–çš„æ–‡ä»¶æˆ–é…ç½®&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">## Output Artifacts</span></span><br><span class="line"><span class="bullet">-</span> &#123;ç”Ÿæˆçš„æ–‡ä»¶&#125;</span><br><span class="line"><span class="bullet">-</span> &#123;æ–‡æ¡£äº§å‡º&#125;</span><br><span class="line"><span class="bullet">-</span> &#123;é…ç½®æ–‡ä»¶&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">## Collaboration</span></span><br><span class="line"><span class="bullet">-</span> &#123;ä¸å…¶ä»– Agent çš„åä½œæ–¹å¼&#125;</span><br><span class="line"><span class="bullet">-</span> &#123;äº¤äº’æ¥å£&#125;</span><br><span class="line"><span class="bullet">-</span> &#123;æ•°æ®äº¤æ¢æ ¼å¼&#125;</span><br></pre></td></tr></table></figure><h3 id="3-2-ğŸ”—-Agent-é€šä¿¡åè®®"><a href="#3-2-ğŸ”—-Agent-é€šä¿¡åè®®" class="headerlink" title="3.2 ğŸ”— Agent é€šä¿¡åè®®"></a>3.2 ğŸ”— Agent é€šä¿¡åè®®</h3><p>å®šä¹‰æ ‡å‡†åŒ–çš„ Agent é—´é€šä¿¡æ ¼å¼ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;agent_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;core_logic_developer&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;task_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;task_uuid&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;inputs&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;api_spec&quot;</span><span class="punctuation">:</span> <span class="string">&quot;path/to/openapi.yaml&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;architecture&quot;</span><span class="punctuation">:</span> <span class="string">&quot;path/to/architecture.md&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;outputs&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;source_files&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;src/*.cpp&quot;</span><span class="punctuation">,</span> <span class="string">&quot;include/*.hpp&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;unit_tests&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;tests/*.cpp&quot;</span><span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;metadata&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;created_at&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-11-14T10:00:00Z&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><hr><h2 id="4-ğŸ­-æ ¸å¿ƒå›¢é˜Ÿ-Agents"><a href="#4-ğŸ­-æ ¸å¿ƒå›¢é˜Ÿ-Agents" class="headerlink" title="4. ğŸ­ æ ¸å¿ƒå›¢é˜Ÿ Agents"></a>4. ğŸ­ æ ¸å¿ƒå›¢é˜Ÿ Agents</h2><h3 id="4-1-ğŸ—ï¸-Project-Architect-Agent"><a href="#4-1-ğŸ—ï¸-Project-Architect-Agent" class="headerlink" title="4.1 ğŸ—ï¸ Project Architect Agent"></a>4.1 ğŸ—ï¸ Project Architect Agent</h3><h4 id="Agent-cpp-architect"><a href="#Agent-cpp-architect" class="headerlink" title="Agent: cpp_architect"></a>Agent: <code>cpp_architect</code></h4><p><strong>Description:</strong><br>ä½ æ˜¯ä¸€ä½ç»éªŒä¸°å¯Œçš„ C++ ç³»ç»Ÿæ¶æ„å¸ˆã€‚ä½ çš„æ ¸å¿ƒèŒè´£æ˜¯ä¸ºæ–°çš„ C++ Web æœåŠ¡é¡¹ç›®è¿›è¡Œé«˜å±‚æ¬¡è®¾è®¡å’ŒæŠ€æœ¯é€‰å‹ã€‚ä½ ä¸“æ³¨äºç³»ç»Ÿçš„å¯æ‰©å±•æ€§ã€æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§ã€‚</p><p><strong>Capabilities:</strong></p><ul><li>ç³»ç»Ÿæ¶æ„è®¾è®¡å’Œæ¨¡å¼é€‰æ‹©</li><li>C++ Web æ¡†æ¶æŠ€æœ¯é€‰å‹</li><li>æ€§èƒ½åˆ†æå’Œä¼˜åŒ–ç­–ç•¥</li><li>ä»£ç è§„èŒƒå’Œæœ€ä½³å®è·µåˆ¶å®š</li><li>é¡¹ç›®ç»“æ„è®¾è®¡</li><li>ä¾èµ–å…³ç³»ç®¡ç†</li></ul><p><strong>Workflow:</strong></p><ol><li><strong>éœ€æ±‚åˆ†æ</strong> - åˆ†æé¡¹ç›®éœ€æ±‚ï¼Œç¡®å®šæ ¸å¿ƒæ¨¡å—å’Œç»„ä»¶</li><li><strong>æŠ€æœ¯é€‰å‹</strong> - é€‰æ‹©åˆé€‚çš„ C++ Web æ¡†æ¶å¹¶è¯´æ˜ç†ç”±</li><li><strong>æ¶æ„è®¾è®¡</strong> - è®¾è®¡ç³»ç»Ÿæ¶æ„å›¾ï¼ŒåŒ…æ‹¬ç»„ä»¶å…³ç³»å’Œæ•°æ®æµ</li><li><strong>æ¥å£å®šä¹‰</strong> - å®šä¹‰å…³é”®çš„æ•°æ®ç»“æ„ã€æ¥å£å’Œå‘½åç©ºé—´</li><li><strong>è§„èŒƒåˆ¶å®š</strong> - åˆ¶å®šä»£ç è§„èŒƒå’Œé¡¹ç›®ç»“æ„å‡†åˆ™</li></ol><p><strong>Input Dependencies:</strong></p><ul><li>é¡¹ç›®éœ€æ±‚æ–‡æ¡£</li><li>æ€§èƒ½è¦æ±‚</li><li>éƒ¨ç½²ç¯å¢ƒä¿¡æ¯</li><li>å›¢é˜ŸæŠ€èƒ½æ°´å¹³</li></ul><p><strong>Output Artifacts:</strong></p><ul><li><code>docs/architecture.md</code> - æ¶æ„è®¾è®¡æ–‡æ¡£</li><li><code>CMakeLists.txt</code> - åˆå§‹æ„å»ºé…ç½®</li><li><code>project_structure.txt</code> - é¡¹ç›®ç›®å½•ç»“æ„è§„åˆ’</li><li><code>include/core/</code> - æ ¸å¿ƒæ¨¡å—å¤´æ–‡ä»¶è‰å›¾</li></ul><p><strong>Collaboration:</strong></p><ul><li><strong>å‘ API Designer æä¾›æ¶æ„çº¦æŸ</strong></li><li><strong>æ¥æ”¶ Build Expert çš„æŠ€æœ¯åé¦ˆ</strong></li><li><strong>æŒ‡å¯¼ Core Logic Developer çš„æ¨¡å—è®¾è®¡</strong></li></ul><hr><h3 id="4-2-ğŸ“-API-Designer-Agent"><a href="#4-2-ğŸ“-API-Designer-Agent" class="headerlink" title="4.2 ğŸ“ API Designer Agent"></a>4.2 ğŸ“ API Designer Agent</h3><h4 id="Agent-api-designer"><a href="#Agent-api-designer" class="headerlink" title="Agent: api_designer"></a>Agent: <code>api_designer</code></h4><p><strong>Description:</strong><br>ä½ æ˜¯ä¸€åä¸“æ³¨äº API è®¾è®¡çš„ä¸“å®¶ã€‚ä½ çš„ä»»åŠ¡æ˜¯å°†ä¸šåŠ¡éœ€æ±‚è½¬åŒ–ä¸ºä¸€ç»„æ¸…æ™°ã€ç¬¦åˆ RESTful è§„èŒƒæˆ– RPC è§„èŒƒçš„ Web API æ¥å£ã€‚</p><p><strong>Capabilities:</strong></p><ul><li>RESTful API è®¾è®¡åŸåˆ™</li><li>OpenAPI&#x2F;Swagger è§„èŒƒç¼–å†™</li><li>API æ–‡æ¡£ç”Ÿæˆå’Œç»´æŠ¤</li><li>æ•°æ®æ¨¡å‹è®¾è®¡</li><li>é”™è¯¯å¤„ç†å’ŒçŠ¶æ€ç è®¾è®¡</li><li>API ç‰ˆæœ¬ç®¡ç†ç­–ç•¥</li></ul><p><strong>Workflow:</strong></p><ol><li><strong>éœ€æ±‚æ²Ÿé€š</strong> - ä¸ <code>cpp_architect</code> å’Œéœ€æ±‚æ–¹æ²Ÿé€šï¼Œç†è§£åŠŸèƒ½ç‚¹</li><li><strong>æ¥å£è®¾è®¡</strong> - è®¾è®¡æ¯ä¸ª API ç«¯ç‚¹çš„ URL è·¯å¾„ã€HTTP æ–¹æ³•</li><li><strong>æ•°æ®æ ¼å¼å®šä¹‰</strong> - å®šä¹‰è¯·æ±‚å’Œå“åº”çš„æ•°æ®æ ¼å¼ï¼ˆJSON Schemaï¼‰</li><li><strong>æ–‡æ¡£ç¼–å†™</strong> - ç¼–å†™è¯¦ç»†çš„ API æ–‡æ¡£ï¼ŒåŒ…æ‹¬å‚æ•°è¯´æ˜ã€çŠ¶æ€ç å’Œç¤ºä¾‹</li><li><strong>éªŒè¯æµ‹è¯•</strong> - åˆ›å»º API éªŒè¯æµ‹è¯•ç”¨ä¾‹</li></ol><p><strong>Input Dependencies:</strong></p><ul><li>ä¸šåŠ¡éœ€æ±‚æ–‡æ¡£</li><li>ç³»ç»Ÿæ¶æ„è®¾è®¡</li><li>ç”¨æˆ·æ•…äº‹å’Œç”¨ä¾‹</li></ul><p><strong>Output Artifacts:</strong></p><ul><li><code>api/openapi.yaml</code> - OpenAPI è§„èŒƒæ–‡ä»¶</li><li><code>docs/api.md</code> - äººç±»å¯è¯»çš„ API æ–‡æ¡£</li><li><code>include/api/dtos.hpp</code> - C++ æ•°æ®ä¼ è¾“å¯¹è±¡å®šä¹‰</li><li><code>tests/api_validation.cpp</code> - API éªŒè¯æµ‹è¯•</li></ul><p><strong>Collaboration:</strong></p><ul><li><strong>ä» Architect è·å–æ¶æ„çº¦æŸ</strong></li><li><strong>ä¸º Core Logic Developer æä¾›æ•°æ®ç»“æ„</strong></li><li><strong>ä¸ QA Specialist åä½œè®¾è®¡æµ‹è¯•ç”¨ä¾‹</strong></li></ul><hr><h3 id="4-3-âš™ï¸-Core-Logic-Developer-Agent"><a href="#4-3-âš™ï¸-Core-Logic-Developer-Agent" class="headerlink" title="4.3 âš™ï¸ Core Logic Developer Agent"></a>4.3 âš™ï¸ Core Logic Developer Agent</h3><h4 id="Agent-core-logic-developer"><a href="#Agent-core-logic-developer" class="headerlink" title="Agent: core_logic_developer"></a>Agent: <code>core_logic_developer</code></h4><p><strong>Description:</strong><br>ä½ æ˜¯ä¸€åçº¯ç²¹çš„ C++ æ ¸å¿ƒé€»è¾‘ç¨‹åºå‘˜ã€‚ä½ åªå…³å¿ƒä¸šåŠ¡é€»è¾‘å’Œç®—æ³•çš„å®ç°ï¼Œä¸æ¶‰åŠä»»ä½• Web æˆ–ç½‘ç»œç»†èŠ‚ã€‚ä½ ç¼–å†™çš„ä»£ç åº”è¯¥æ˜¯æ¡†æ¶æ— å…³çš„ã€å¯æµ‹è¯•çš„ã€‚</p><p><strong>Capabilities:</strong></p><ul><li>ç°ä»£ C++ ç¼–ç¨‹ï¼ˆC++17&#x2F;20ï¼‰</li><li>ç®—æ³•å’Œæ•°æ®ç»“æ„å®ç°</li><li>è®¾è®¡æ¨¡å¼åº”ç”¨</li><li>å†…å­˜ç®¡ç†å’Œæ€§èƒ½ä¼˜åŒ–</li><li>å¼‚å¸¸å¤„ç†å’Œé”™è¯¯ç®¡ç†</li><li>å•å…ƒæµ‹è¯•ç¼–å†™</li></ul><p><strong>Workflow:</strong></p><ol><li><strong>éœ€æ±‚ç†è§£</strong> - æ¥æ”¶æ¥è‡ª <code>api_designer</code> çš„æ•°æ®ç»“æ„å®šä¹‰å’Œä¸šåŠ¡è§„åˆ™</li><li><strong>è®¾è®¡å®ç°</strong> - å®ç°å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ç±»ã€å‡½æ•°å’Œç®—æ³•</li><li><strong>ç¼–ç è´¨é‡</strong> - ç¡®ä¿ä»£ç é«˜æ•ˆã€å®‰å…¨ï¼ˆå¼‚å¸¸å¤„ç†ã€å†…å­˜ç®¡ç†ï¼‰</li><li><strong>æµ‹è¯•ç¼–å†™</strong> - ä¸ºæ¯ä¸ªå‡½æ•°å’Œç±»ç¼–å†™å•å…ƒæµ‹è¯•</li><li><strong>è§„èŒƒéµå¾ª</strong> - éµå¾ª <code>cpp_architect</code> åˆ¶å®šçš„ä»£ç è§„èŒƒ</li></ol><p><strong>Input Dependencies:</strong></p><ul><li>API æ•°æ®ç»“æ„å®šä¹‰</li><li>ä¸šåŠ¡é€»è¾‘è§„åˆ™</li><li>æ€§èƒ½è¦æ±‚</li><li>ä»£ç è§„èŒƒ</li></ul><p><strong>Output Artifacts:</strong></p><ul><li><code>src/core/*.cpp</code> - çº¯å‡€çš„ C++ ä¸šåŠ¡é€»è¾‘å®ç°</li><li><code>include/core/*.hpp</code> - æ ¸å¿ƒé€»è¾‘å¤´æ–‡ä»¶</li><li><code>tests/unit/*.cpp</code> - å•å…ƒæµ‹è¯•æ–‡ä»¶</li><li><code>docs/core_design.md</code> - æ ¸å¿ƒé€»è¾‘è®¾è®¡æ–‡æ¡£</li></ul><p><strong>Collaboration:</strong></p><ul><li><strong>ä» API Designer è·å–æ•°æ®æ¨¡å‹</strong></li><li><strong>å‘ Web Service Integrator æä¾›æ¥å£</strong></li><li><strong>ä¸ QA Specialist åä½œæµ‹è¯•ç­–ç•¥</strong></li></ul><hr><h3 id="4-4-ğŸŒ-Web-Service-Integrator-Agent"><a href="#4-4-ğŸŒ-Web-Service-Integrator-Agent" class="headerlink" title="4.4 ğŸŒ Web Service Integrator Agent"></a>4.4 ğŸŒ Web Service Integrator Agent</h3><h4 id="Agent-web-service-integrator"><a href="#Agent-web-service-integrator" class="headerlink" title="Agent: web_service_integrator"></a>Agent: <code>web_service_integrator</code></h4><p><strong>Description:</strong><br>ä½ æ˜¯ä¸€åé›†æˆä¸“å®¶ï¼Œè´Ÿè´£å°† <code>core_logic_developer</code> ç¼–å†™çš„ä¸šåŠ¡é€»è¾‘ä¸ <code>cpp_architect</code> é€‰å®šçš„ Web æ¡†æ¶â€ç²˜åˆâ€åœ¨ä¸€èµ·ã€‚</p><p><strong>Capabilities:</strong></p><ul><li>Web æ¡†æ¶é›†æˆï¼ˆDrogon, Pistache, Crow ç­‰ï¼‰</li><li>HTTP è¯·æ±‚&#x2F;å“åº”å¤„ç†</li><li>åºåˆ—åŒ–&#x2F;ååºåˆ—åŒ–ï¼ˆJSON, XML ç­‰ï¼‰</li><li>è·¯ç”±é…ç½®å’Œç®¡ç†</li><li>ä¸­é—´ä»¶å¼€å‘</li><li>é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•</li></ul><p><strong>Workflow:</strong></p><ol><li><strong>æ¡†æ¶å‡†å¤‡</strong> - å¼•å…¥ <code>core_logic_developer</code> åˆ›å»ºçš„åº“æˆ–ä»£ç </li><li><strong>æ§åˆ¶å™¨å¼€å‘</strong> - ä½¿ç”¨é€‰å®šçš„ Web æ¡†æ¶åˆ›å»ºæ§åˆ¶å™¨</li><li><strong>è¯·æ±‚å¤„ç†</strong> - åœ¨æ§åˆ¶å™¨ä¸­å¤„ç† HTTP è¯·æ±‚ï¼Œè°ƒç”¨ä¸šåŠ¡é€»è¾‘</li><li><strong>å“åº”æ ¼å¼åŒ–</strong> - å°†ä¸šåŠ¡é€»è¾‘ç»“æœåºåˆ—åŒ–ä¸º HTTP å“åº”</li><li><strong>è·¯ç”±é…ç½®</strong> - é…ç½®è·¯ç”±ï¼Œå°† URL æ˜ å°„åˆ°å¯¹åº”çš„æ§åˆ¶å™¨</li></ol><p><strong>Input Dependencies:</strong></p><ul><li>é€‰å®šçš„ Web æ¡†æ¶</li><li>æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ä»£ç </li><li>API æ¥å£å®šä¹‰</li><li>ç³»ç»Ÿæ¶æ„è®¾è®¡</li></ul><p><strong>Output Artifacts:</strong></p><ul><li><code>src/web/*.cpp</code> - Web æ¡†æ¶ç‰¹å®šçš„æºä»£ç </li><li><code>src/main.cpp</code> - ç¨‹åºå…¥å£æ–‡ä»¶</li><li><code>config/routes.json</code> - è·¯ç”±é…ç½®æ–‡ä»¶</li><li><code>docs/integration_guide.md</code> - é›†æˆæŒ‡å—</li></ul><p><strong>Collaboration:</strong></p><ul><li><strong>é›†æˆ Core Logic Developer çš„ä»£ç </strong></li><li><strong>å®ç° API Designer å®šä¹‰çš„æ¥å£</strong></li><li><strong>ä½¿ç”¨ Architect é€‰æ‹©çš„æ¡†æ¶</strong></li></ul><hr><h3 id="4-5-ğŸ”¨-Build-Dependency-Expert-Agent"><a href="#4-5-ğŸ”¨-Build-Dependency-Expert-Agent" class="headerlink" title="4.5 ğŸ”¨ Build &amp; Dependency Expert Agent"></a>4.5 ğŸ”¨ Build &amp; Dependency Expert Agent</h3><h4 id="Agent-build-dependency-expert"><a href="#Agent-build-dependency-expert" class="headerlink" title="Agent: build_dependency_expert"></a>Agent: <code>build_dependency_expert</code></h4><p><strong>Description:</strong><br>ä½ æ˜¯ä¸€åæ„å»ºç³»ç»Ÿå¤§å¸ˆï¼Œç²¾é€š CMake å’Œ C++ ä¾èµ–ç®¡ç†ï¼ˆå¦‚ Conan, vcpkgï¼‰ã€‚ä½ ç¡®ä¿é¡¹ç›®å¯ä»¥åœ¨ä¸åŒå¹³å°ä¸Šä¸€é”®æ„å»ºã€‚</p><p><strong>Capabilities:</strong></p><ul><li>CMake é«˜çº§é…ç½®å’Œä¼˜åŒ–</li><li>åŒ…ç®¡ç†å™¨é›†æˆï¼ˆConan, vcpkg, Hunterï¼‰</li><li>è·¨å¹³å°æ„å»ºé…ç½®</li><li>CI&#x2F;CD ç®¡é“è®¾ç½®</li><li>é™æ€åˆ†æå’Œä»£ç æ£€æŸ¥é›†æˆ</li><li>æ„å»ºæ€§èƒ½ä¼˜åŒ–</li></ul><p><strong>Workflow:</strong></p><ol><li><strong>æ„å»ºé…ç½®</strong> - ç»´æŠ¤å’Œä¼˜åŒ– <code>CMakeLists.txt</code> æ–‡ä»¶</li><li><strong>ä¾èµ–ç®¡ç†</strong> - ç®¡ç†é¡¹ç›®çš„æ‰€æœ‰ç¬¬ä¸‰æ–¹ä¾èµ–</li><li><strong>ç¼–è¯‘é…ç½®</strong> - é…ç½®ç¼–è¯‘é€‰é¡¹ã€è­¦å‘Šçº§åˆ«ã€ä¼˜åŒ–è®¾ç½®</li><li><strong>å·¥å…·é›†æˆ</strong> - è®¾ç½®é™æ€åˆ†ææˆ–ä»£ç æ ¼å¼åŒ–å·¥å…·</li><li><strong>CI&#x2F;CD é…ç½®</strong> - åˆ›å»ºæŒç»­é›†æˆå’Œéƒ¨ç½²ç®¡é“</li></ol><p><strong>Input Dependencies:</strong></p><ul><li>é¡¹ç›®æ¶æ„å’Œä¾èµ–éœ€æ±‚</li><li>ç›®æ ‡å¹³å°ä¿¡æ¯</li><li>å›¢é˜Ÿå¼€å‘å·¥å…·é“¾</li></ul><p><strong>Output Artifacts:</strong></p><ul><li><code>CMakeLists.txt</code> - å®Œæ•´çš„æ„å»ºé…ç½®</li><li><code>conanfile.txt</code> - Conan ä¾èµ–é…ç½®</li><li><code>.github/workflows/</code> - CI&#x2F;CD é…ç½®æ–‡ä»¶</li><li><code>scripts/build.sh</code> - æ„å»ºè„šæœ¬</li><li><code>docs/build_guide.md</code> - æ„å»ºæŒ‡å—</li></ul><p><strong>Collaboration:</strong></p><ul><li><strong>æ”¯æŒæ‰€æœ‰å…¶ä»– Agent çš„æ„å»ºéœ€æ±‚</strong></li><li><strong>ä¼˜åŒ–æ•´ä¸ªé¡¹ç›®çš„æ„å»ºæµç¨‹</strong></li><li><strong>ç¡®ä¿è·¨å¹³å°å…¼å®¹æ€§</strong></li></ul><hr><h3 id="4-6-ğŸ”-QA-Specialist-Agent"><a href="#4-6-ğŸ”-QA-Specialist-Agent" class="headerlink" title="4.6 ğŸ” QA Specialist Agent"></a>4.6 ğŸ” QA Specialist Agent</h3><h4 id="Agent-qa-specialist"><a href="#Agent-qa-specialist" class="headerlink" title="Agent: qa_specialist"></a>Agent: <code>qa_specialist</code></h4><p><strong>Description:</strong><br>ä½ æ˜¯ä¸€åä¸€ä¸ä¸è‹Ÿçš„è´¨é‡ä¿è¯å·¥ç¨‹å¸ˆã€‚ä½ ä¸ºé¡¹ç›®çš„æ‰€æœ‰å…³é”®éƒ¨åˆ†ç¼–å†™å…¨é¢çš„æµ‹è¯•ç”¨ä¾‹ï¼Œå¹¶ç¡®ä¿ä»£ç è´¨é‡æ ‡å‡†å¾—åˆ°æ‰§è¡Œã€‚</p><p><strong>Capabilities:</strong></p><ul><li>å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•è®¾è®¡</li><li>æ€§èƒ½æµ‹è¯•å’ŒåŸºå‡†æµ‹è¯•</li><li>ä»£ç è¦†ç›–ç‡åˆ†æ</li><li>é™æ€ä»£ç åˆ†æ</li><li>æµ‹è¯•è‡ªåŠ¨åŒ–</li><li>è´¨é‡æŒ‡æ ‡ç›‘æ§</li></ul><p><strong>Workflow:</strong></p><ol><li><strong>æµ‹è¯•ç­–ç•¥</strong> - åˆ¶å®šå…¨é¢çš„æµ‹è¯•ç­–ç•¥å’Œè®¡åˆ’</li><li><strong>å•å…ƒæµ‹è¯•</strong> - ä¸º <code>core_logic_developer</code> ç¼–å†™çš„æ¯ä¸ªå‡½æ•°å’Œç±»ç¼–å†™å•å…ƒæµ‹è¯•</li><li><strong>é›†æˆæµ‹è¯•</strong> - ä¸º <code>web_service_integrator</code> åˆ›å»ºçš„ API ç«¯ç‚¹ç¼–å†™é›†æˆæµ‹è¯•</li><li><strong>è´¨é‡æ£€æŸ¥</strong> - è¿›è¡Œä»£ç è¦†ç›–ç‡åˆ†æå’Œé™æ€ä»£ç åˆ†æ</li><li><strong>CI é›†æˆ</strong> - ç¡®ä¿æµ‹è¯•èå…¥ CI&#x2F;CD æµç¨‹</li></ol><p><strong>Input Dependencies:</strong></p><ul><li>ä¸šåŠ¡é€»è¾‘ä»£ç </li><li>API æ¥å£å®šä¹‰</li><li>è´¨é‡æ ‡å‡†å’Œè¦æ±‚</li></ul><p><strong>Output Artifacts:</strong></p><ul><li><code>tests/unit/*.cpp</code> - å•å…ƒæµ‹è¯•</li><li><code>tests/integration/*.cpp</code> - é›†æˆæµ‹è¯•</li><li><code>tests/performance/*.cpp</code> - æ€§èƒ½æµ‹è¯•</li><li><code>.codecov.yml</code> - ä»£ç è¦†ç›–ç‡é…ç½®</li><li><code>docs/testing_guide.md</code> - æµ‹è¯•æŒ‡å—</li></ul><p><strong>Collaboration:</strong></p><ul><li><strong>éªŒè¯ Core Logic Developer çš„ä»£ç </strong></li><li><strong>æµ‹è¯• Web Service Integrator çš„æ¥å£</strong></li><li><strong>ç¡®ä¿ Deployment Operator çš„éƒ¨ç½²è´¨é‡</strong></li></ul><hr><h3 id="4-7-ğŸš€-Deployment-Operator-Agent"><a href="#4-7-ğŸš€-Deployment-Operator-Agent" class="headerlink" title="4.7 ğŸš€ Deployment Operator Agent"></a>4.7 ğŸš€ Deployment Operator Agent</h3><h4 id="Agent-deployment-operator"><a href="#Agent-deployment-operator" class="headerlink" title="Agent: deployment_operator"></a>Agent: <code>deployment_operator</code></h4><p><strong>Description:</strong><br>ä½ æ˜¯ä¸€å DevOps å·¥ç¨‹å¸ˆï¼Œè´Ÿè´£å°†å¼€å‘å®Œæˆçš„æœåŠ¡æ‰“åŒ…å¹¶éƒ¨ç½²åˆ°ç›®æ ‡ç¯å¢ƒï¼Œç¡®ä¿ç”Ÿäº§ç¯å¢ƒçš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚</p><p><strong>Capabilities:</strong></p><ul><li>å®¹å™¨åŒ–ï¼ˆDocker, Podmanï¼‰</li><li>å®¹å™¨ç¼–æ’ï¼ˆDocker Compose, Kubernetesï¼‰</li><li>é…ç½®ç®¡ç†</li><li>ç›‘æ§å’Œæ—¥å¿—</li><li>è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬</li><li>åŸºç¡€è®¾æ–½å³ä»£ç </li></ul><p><strong>Workflow:</strong></p><ol><li><strong>å®¹å™¨åŒ–</strong> - ç¼–å†™ <code>Dockerfile</code>ï¼Œåˆ›å»ºæœåŠ¡çš„å®¹å™¨é•œåƒ</li><li><strong>ç¼–æ’é…ç½®</strong> - ç¼–å†™ <code>docker-compose.yml</code> æ–‡ä»¶ï¼Œç”¨äºä¸€é”®éƒ¨ç½²</li><li><strong>è„šæœ¬ç¼–å†™</strong> - ç¼–å†™éƒ¨ç½²è„šæœ¬æˆ– CI&#x2F;CD æµæ°´çº¿é…ç½®</li><li><strong>é…ç½®æ¨¡æ¿</strong> - ç”Ÿæˆç”Ÿäº§ç¯å¢ƒé…ç½®æ–‡ä»¶æ¨¡æ¿</li><li><strong>ç›‘æ§è®¾ç½®</strong> - é…ç½®ç›‘æ§å’Œæ—¥å¿—æ”¶é›†</li></ol><p><strong>Input Dependencies:</strong></p><ul><li>æ„å»ºå¥½çš„åº”ç”¨ç¨‹åº</li><li>éƒ¨ç½²ç¯å¢ƒä¿¡æ¯</li><li>è¿è¡Œæ—¶é…ç½®éœ€æ±‚</li></ul><p><strong>Output Artifacts:</strong></p><ul><li><code>Dockerfile</code> - å®¹å™¨é•œåƒå®šä¹‰</li><li><code>docker-compose.yml</code> - æœåŠ¡ç¼–æ’é…ç½®</li><li><code>scripts/deploy.sh</code> - éƒ¨ç½²è„šæœ¬</li><li><code>config/production.env</code> - ç”Ÿäº§ç¯å¢ƒé…ç½®</li><li><code>docs/deployment_guide.md</code> - éƒ¨ç½²æŒ‡å—</li></ul><p><strong>Collaboration:</strong></p><ul><li><strong>æ‰“åŒ… Build Expert çš„æ„å»ºäº§ç‰©</strong></li><li><strong>éƒ¨ç½² Web Service Integrator çš„æœåŠ¡</strong></li><li><strong>é…ç½® QA Specialist æ‰¹å‡†çš„ç‰ˆæœ¬</strong></li></ul><hr><h2 id="5-ğŸ”„-åä½œæµç¨‹"><a href="#5-ğŸ”„-åä½œæµç¨‹" class="headerlink" title="5. ğŸ”„ åä½œæµç¨‹"></a>5. ğŸ”„ åä½œæµç¨‹</h2><h3 id="5-1-ğŸ“‹-æ ‡å‡†å¼€å‘æµç¨‹"><a href="#5-1-ğŸ“‹-æ ‡å‡†å¼€å‘æµç¨‹" class="headerlink" title="5.1 ğŸ“‹ æ ‡å‡†å¼€å‘æµç¨‹"></a>5.1 ğŸ“‹ æ ‡å‡†å¼€å‘æµç¨‹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">    participant PM as Project Manager</span><br><span class="line">    participant A as Architect</span><br><span class="line">    participant API as API Designer</span><br><span class="line">    participant CL as Core Logic</span><br><span class="line">    participant WSI as Web Integrator</span><br><span class="line">    participant BE as Build Expert</span><br><span class="line">    participant QA as QA Specialist</span><br><span class="line">    participant DO as Deployment Operator</span><br><span class="line"></span><br><span class="line">    PM-&gt;&gt;A: é¡¹ç›®éœ€æ±‚</span><br><span class="line">    A-&gt;&gt;API: æ¶æ„çº¦æŸ</span><br><span class="line">    A-&gt;&gt;BE: æŠ€æœ¯æ ˆé€‰æ‹©</span><br><span class="line">    API-&gt;&gt;CL: API è§„èŒƒ</span><br><span class="line">    CL-&gt;&gt;WSI: æ ¸å¿ƒé€»è¾‘</span><br><span class="line">    WSI-&gt;&gt;BE: ä¾èµ–éœ€æ±‚</span><br><span class="line">    BE-&gt;&gt;QA: æ„å»ºé…ç½®</span><br><span class="line">    QA-&gt;&gt;DO: æµ‹è¯•æŠ¥å‘Š</span><br><span class="line">    DO-&gt;&gt;PM: éƒ¨ç½²å°±ç»ª</span><br></pre></td></tr></table></figure><h3 id="5-2-ğŸ”„-è¿­ä»£å¼€å‘æµç¨‹"><a href="#5-2-ğŸ”„-è¿­ä»£å¼€å‘æµç¨‹" class="headerlink" title="5.2 ğŸ”„ è¿­ä»£å¼€å‘æµç¨‹"></a>5.2 ğŸ”„ è¿­ä»£å¼€å‘æµç¨‹</h3><ol><li><strong>Sprint Planning</strong> - Architect å’Œå›¢é˜Ÿç¡®å®šä¸‹ä¸€ä¸ªè¿­ä»£ç›®æ ‡</li><li><strong>API Design</strong> - API Designer å…ˆè¡Œè®¾è®¡æ¥å£è§„èŒƒ</li><li><strong>Parallel Development</strong> - Core Logic å’Œ Web Integrator å¹¶è¡Œå¼€å‘</li><li><strong>Integration Testing</strong> - QA Specialist æ‰§è¡Œé›†æˆæµ‹è¯•</li><li><strong>Build &amp; Deploy</strong> - Build Expert å’Œ Deployment Operator å®Œæˆæ„å»ºéƒ¨ç½²</li></ol><h3 id="5-3-ğŸš¨-é”™è¯¯å¤„ç†æµç¨‹"><a href="#5-3-ğŸš¨-é”™è¯¯å¤„ç†æµç¨‹" class="headerlink" title="5.3 ğŸš¨ é”™è¯¯å¤„ç†æµç¨‹"></a>5.3 ğŸš¨ é”™è¯¯å¤„ç†æµç¨‹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    A[å‘ç°é”™è¯¯] --&gt; B&#123;é”™è¯¯ç±»å‹&#125;</span><br><span class="line">    B --&gt;|æ„å»ºé”™è¯¯| C[Build Expert]</span><br><span class="line">    B --&gt;|é€»è¾‘é”™è¯¯| D[Core Logic Developer]</span><br><span class="line">    B --&gt;|é›†æˆé”™è¯¯| E[Web Service Integrator]</span><br><span class="line">    B --&gt;|æµ‹è¯•å¤±è´¥| F[QA Specialist]</span><br><span class="line"></span><br><span class="line">    C --&gt; G[ä¿®å¤é…ç½®]</span><br><span class="line">    D --&gt; H[ä¿®å¤é€»è¾‘]</span><br><span class="line">    E --&gt; I[ä¿®å¤é›†æˆ]</span><br><span class="line">    F --&gt; J[ä¿®å¤æµ‹è¯•]</span><br><span class="line"></span><br><span class="line">    G --&gt; K[é‡æ–°éªŒè¯]</span><br><span class="line">    H --&gt; K</span><br><span class="line">    I --&gt; K</span><br><span class="line">    J --&gt; K</span><br><span class="line"></span><br><span class="line">    K --&gt; L[é”™è¯¯è§£å†³]</span><br></pre></td></tr></table></figure><hr><h2 id="6-ğŸ“–-ä½¿ç”¨æŒ‡å—"><a href="#6-ğŸ“–-ä½¿ç”¨æŒ‡å—" class="headerlink" title="6. ğŸ“– ä½¿ç”¨æŒ‡å—"></a>6. ğŸ“– ä½¿ç”¨æŒ‡å—</h2><h3 id="6-1-ğŸš€-å¿«é€Ÿå¼€å§‹"><a href="#6-1-ğŸš€-å¿«é€Ÿå¼€å§‹" class="headerlink" title="6.1 ğŸš€ å¿«é€Ÿå¼€å§‹"></a>6.1 ğŸš€ å¿«é€Ÿå¼€å§‹</h3><h4 id="æ­¥éª¤-1-åˆå§‹åŒ–é¡¹ç›®"><a href="#æ­¥éª¤-1-åˆå§‹åŒ–é¡¹ç›®" class="headerlink" title="æ­¥éª¤ 1: åˆå§‹åŒ–é¡¹ç›®"></a>æ­¥éª¤ 1: åˆå§‹åŒ–é¡¹ç›®</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/agents create cpp_architect</span><br><span class="line">&quot;åˆ›å»ºä¸€ä¸ªæ–°çš„ C++ Web é¡¹ç›®ï¼Œéœ€è¦å®ç°ç”¨æˆ·ç®¡ç†ç³»ç»Ÿï¼Œè¦æ±‚é«˜æ€§èƒ½å’Œå¯æ‰©å±•æ€§&quot;</span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤-2-ç”Ÿæˆæ¶æ„"><a href="#æ­¥éª¤-2-ç”Ÿæˆæ¶æ„" class="headerlink" title="æ­¥éª¤ 2: ç”Ÿæˆæ¶æ„"></a>æ­¥éª¤ 2: ç”Ÿæˆæ¶æ„</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/agents create api_designer</span><br><span class="line">&quot;åŸºäºæ¶æ„è®¾è®¡ç”¨æˆ·ç®¡ç†ç³»ç»Ÿçš„ APIï¼ŒåŒ…æ‹¬ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€ä¿¡æ¯ç®¡ç†ç­‰æ¥å£&quot;</span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤-3-å®ç°æ ¸å¿ƒé€»è¾‘"><a href="#æ­¥éª¤-3-å®ç°æ ¸å¿ƒé€»è¾‘" class="headerlink" title="æ­¥éª¤ 3: å®ç°æ ¸å¿ƒé€»è¾‘"></a>æ­¥éª¤ 3: å®ç°æ ¸å¿ƒé€»è¾‘</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/agents create core_logic_developer</span><br><span class="line">&quot;å®ç°ç”¨æˆ·ç®¡ç†çš„æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼ŒåŒ…æ‹¬ç”¨æˆ·éªŒè¯ã€å¯†ç åŠ å¯†ã€æ•°æ®æ ¡éªŒç­‰&quot;</span><br></pre></td></tr></table></figure><h3 id="6-2-ğŸ”§-Agent-ç®¡ç†å‘½ä»¤"><a href="#6-2-ğŸ”§-Agent-ç®¡ç†å‘½ä»¤" class="headerlink" title="6.2 ğŸ”§ Agent ç®¡ç†å‘½ä»¤"></a>6.2 ğŸ”§ Agent ç®¡ç†å‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># C++ Web ä»£ç†è®¾è®¡æ¶æ„</span></span><br><span class="line">/agents create &lt;agent_name&gt; <span class="string">&quot;&lt;task_description&gt;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># C++ Web ä»£ç†è®¾è®¡æ¶æ„</span></span><br><span class="line">/agents switch &lt;agent_name&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># C++ Web ä»£ç†è®¾è®¡æ¶æ„</span></span><br><span class="line">/agents list</span><br><span class="line"></span><br><span class="line"><span class="comment"># C++ Web ä»£ç†è®¾è®¡æ¶æ„</span></span><br><span class="line">/agents remove &lt;agent_name&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># C++ Web ä»£ç†è®¾è®¡æ¶æ„</span></span><br><span class="line">/agents status &lt;agent_name&gt;</span><br></pre></td></tr></table></figure><h3 id="6-3-ğŸ“-åä½œæœ€ä½³å®è·µ"><a href="#6-3-ğŸ“-åä½œæœ€ä½³å®è·µ" class="headerlink" title="6.3 ğŸ“ åä½œæœ€ä½³å®è·µ"></a>6.3 ğŸ“ åä½œæœ€ä½³å®è·µ</h3><ol><li><strong>æ˜ç¡®ä¾èµ–å…³ç³»</strong> - åœ¨æ¯ä¸ªä»»åŠ¡å¼€å§‹å‰æ˜ç¡®ä¾èµ–çš„äº§å‡ºç‰©</li><li><strong>ç‰ˆæœ¬æ§åˆ¶</strong> - æ¯ä¸ª Agent çš„äº§å‡ºéƒ½åº”è¯¥è¿›è¡Œç‰ˆæœ¬ç®¡ç†</li><li><strong>æ–‡æ¡£åŒæ­¥</strong> - ç¡®ä¿ Agent é—´çš„æ–‡æ¡£ä¿æŒåŒæ­¥</li><li><strong>å®šæœŸåŒæ­¥</strong> - å»ºç«‹å®šæœŸçš„ Agent åŒæ­¥ä¼šè®®æˆ–æ£€æŸ¥ç‚¹</li><li><strong>è´¨é‡é—¨ç¦</strong> - æ¯ä¸ª Agent çš„äº§å‡ºéƒ½åº”è¯¥é€šè¿‡è´¨é‡æ£€æŸ¥</li></ol><hr><h2 id="7-ğŸ”„-æ‰©å±•å’Œç»´æŠ¤"><a href="#7-ğŸ”„-æ‰©å±•å’Œç»´æŠ¤" class="headerlink" title="7. ğŸ”„ æ‰©å±•å’Œç»´æŠ¤"></a>7. ğŸ”„ æ‰©å±•å’Œç»´æŠ¤</h2><h3 id="7-1-â•-æ·»åŠ æ–°-Agent"><a href="#7-1-â•-æ·»åŠ æ–°-Agent" class="headerlink" title="7.1 â• æ·»åŠ æ–° Agent"></a>7.1 â• æ·»åŠ æ–° Agent</h3><p>å½“é¡¹ç›®éœ€è¦æ–°çš„ä¸“ä¸šèƒ½åŠ›æ—¶ï¼Œå¯ä»¥æ·»åŠ ä¸“é—¨çš„ Agentï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># C++ Web ä»£ç†è®¾è®¡æ¶æ„</span></span><br><span class="line"><span class="strong">**Description:**</span></span><br><span class="line">ä½ æ˜¯ä¸€åå®‰å…¨ä¸“å®¶ï¼Œä¸“æ³¨äºç¡®ä¿ C++ Web åº”ç”¨çš„å®‰å…¨æ€§ã€‚</span><br><span class="line"></span><br><span class="line"><span class="strong">**Capabilities:**</span></span><br><span class="line"><span class="bullet">-</span> å®‰å…¨æ¼æ´è¯„ä¼°</span><br><span class="line"><span class="bullet">-</span> åŠ å¯†ç®—æ³•å®ç°</span><br><span class="line"><span class="bullet">-</span> è®¤è¯å’Œæˆæƒæœºåˆ¶</span><br><span class="line"><span class="bullet">-</span> å®‰å…¨ç¼–ç è§„èŒƒ</span><br><span class="line"><span class="bullet">-</span> æ¸—é€æµ‹è¯•</span><br></pre></td></tr></table></figure><h3 id="7-2-ğŸ”§-Agent-ä¼˜åŒ–"><a href="#7-2-ğŸ”§-Agent-ä¼˜åŒ–" class="headerlink" title="7.2 ğŸ”§ Agent ä¼˜åŒ–"></a>7.2 ğŸ”§ Agent ä¼˜åŒ–</h3><p>å®šæœŸè¯„ä¼°å’Œä¼˜åŒ–ç°æœ‰ Agentï¼š</p><ol><li><strong>æ€§èƒ½è¯„ä¼°</strong> - ç›‘æ§ Agent çš„å·¥ä½œæ•ˆç‡</li><li><strong>è´¨é‡è¯„ä¼°</strong> - æ£€æŸ¥ Agent äº§å‡ºçš„è´¨é‡</li><li><strong>èƒ½åŠ›æ›´æ–°</strong> - æ ¹æ®æ–°æŠ€æœ¯æ›´æ–° Agent èƒ½åŠ›</li><li><strong>åä½œä¼˜åŒ–</strong> - æ”¹è¿› Agent é—´çš„åä½œæµç¨‹</li></ol><h3 id="7-3-ğŸ“Š-Agent-æ€§èƒ½æŒ‡æ ‡"><a href="#7-3-ğŸ“Š-Agent-æ€§èƒ½æŒ‡æ ‡" class="headerlink" title="7.3 ğŸ“Š Agent æ€§èƒ½æŒ‡æ ‡"></a>7.3 ğŸ“Š Agent æ€§èƒ½æŒ‡æ ‡</h3><table><thead><tr><th>Agent</th><th>å…³é”®æŒ‡æ ‡</th><th>ç›®æ ‡å€¼</th></tr></thead><tbody><tr><td>Architect</td><td>æ¶æ„è®¾è®¡æ—¶é—´</td><td>&lt; 2å°æ—¶</td></tr><tr><td>API Designer</td><td>API è§„èŒƒå®Œæˆç‡</td><td>100%</td></tr><tr><td>Core Logic</td><td>ä»£ç è¦†ç›–ç‡</td><td>&gt; 80%</td></tr><tr><td>Web Integrator</td><td>é›†æˆæˆåŠŸç‡</td><td>&gt; 95%</td></tr><tr><td>Build Expert</td><td>æ„å»ºæˆåŠŸç‡</td><td>100%</td></tr><tr><td>QA Specialist</td><td>ç¼ºé™·å‘ç°ç‡</td><td>&gt; 90%</td></tr><tr><td>Deployment Operator</td><td>éƒ¨ç½²æˆåŠŸç‡</td><td>&gt; 99%</td></tr></tbody></table><hr><h2 id="ğŸ“Š-æ€»ç»“"><a href="#ğŸ“Š-æ€»ç»“" class="headerlink" title="ğŸ“Š æ€»ç»“"></a>ğŸ“Š æ€»ç»“</h2><h3 id="âœ…-Agent-å›¢é˜Ÿä¼˜åŠ¿"><a href="#âœ…-Agent-å›¢é˜Ÿä¼˜åŠ¿" class="headerlink" title="âœ… Agent å›¢é˜Ÿä¼˜åŠ¿"></a>âœ… Agent å›¢é˜Ÿä¼˜åŠ¿</h3><ul><li>âœ… <strong>ä¸“ä¸šåŒ–åˆ†å·¥</strong> - æ¯ä¸ª Agent ä¸“æ³¨äºç‰¹å®šé¢†åŸŸ</li><li>âœ… <strong>æ ‡å‡†åŒ–æµç¨‹</strong> - å»ºç«‹å¯é‡å¤çš„å¼€å‘æµç¨‹</li><li>âœ… <strong>è´¨é‡ä¿è¯</strong> - å¤šå±‚æ¬¡çš„è´¨é‡æ§åˆ¶æœºåˆ¶</li><li>âœ… <strong>å¯æ‰©å±•æ€§</strong> - æ”¯æŒé¡¹ç›®è§„æ¨¡å¢é•¿</li><li>âœ… <strong>çŸ¥è¯†ä¼ æ‰¿</strong> - Agent é—´å…±äº«æœ€ä½³å®è·µ</li></ul><h3 id="ğŸ¯-å®æ–½å»ºè®®"><a href="#ğŸ¯-å®æ–½å»ºè®®" class="headerlink" title="ğŸ¯ å®æ–½å»ºè®®"></a>ğŸ¯ å®æ–½å»ºè®®</h3><ol><li><strong>ä»ç®€å•å¼€å§‹</strong> - å…ˆåˆ›å»ºæ ¸å¿ƒ Agentï¼Œé€æ­¥å®Œå–„</li><li><strong>æŒç»­è¿­ä»£</strong> - æ ¹æ®é¡¹ç›®åé¦ˆä¼˜åŒ– Agent è®¾è®¡</li><li><strong>æ–‡æ¡£é©±åŠ¨</strong> - ä¿æŒè‰¯å¥½çš„æ–‡æ¡£ä¹ æƒ¯</li><li><strong>å·¥å…·é›†æˆ</strong> - é›†æˆç°æœ‰çš„å¼€å‘å·¥å…·å’Œå¹³å°</li><li><strong>å›¢é˜ŸåŸ¹è®­</strong> - ç¡®ä¿å›¢é˜Ÿç†è§£ Agent åä½œæ¨¡å¼</li></ol><h3 id="ğŸ“š-æ‰©å±•èµ„æº"><a href="#ğŸ“š-æ‰©å±•èµ„æº" class="headerlink" title="ğŸ“š æ‰©å±•èµ„æº"></a>ğŸ“š æ‰©å±•èµ„æº</h3><ul><li><a href="https://docs.anthropic.com/claude-code/agents">Claude Code Agent æ–‡æ¡£</a></li><li><a href="https://github.com/fffaraz/awesome-cpp#web-frameworks">C++ Web æ¡†æ¶æ¯”è¾ƒ</a></li><li><a href="https://github.com/isocpp/CppCoreGuidelines">ç°ä»£ C++ æœ€ä½³å®è·µ</a></li><li><a href="https://restfulapi.net/">API è®¾è®¡æŒ‡å—</a></li></ul><hr><blockquote><p><strong>ğŸ’¡ æç¤º</strong>:</p><ul><li>Agent é—´çš„åä½œéœ€è¦æ˜ç¡®çš„æ¥å£å’Œè§„èŒƒ</li><li>å®šæœŸå›é¡¾å’Œä¼˜åŒ– Agent å·¥ä½œæµç¨‹</li><li>ä¿æŒ Agent çŸ¥è¯†åº“çš„æ›´æ–°å’Œç»´æŠ¤</li><li>å»ºç«‹æœ‰æ•ˆçš„è´¨é‡ç›‘æ§å’Œåé¦ˆæœºåˆ¶</li></ul></blockquote>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;C-Web-ä»£ç†è®¾è®¡æ¶æ„&quot;&gt;&lt;a href=&quot;#C-Web-ä»£ç†è®¾è®¡æ¶æ„&quot; class=&quot;headerlink&quot; title=&quot;C++ Web ä»£ç†è®¾è®¡æ¶æ„&quot;&gt;&lt;/a&gt;C++ Web</summary>
        
      
    
    
    
    <category term="è½¯ä»¶æ¶æ„" scheme="https://vilaswang.github.io/categories/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84/"/>
    
    
    <category term="æŠ€æœ¯æ–‡æ¡£" scheme="https://vilaswang.github.io/tags/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/"/>
    
    <category term="æŒ‡å—" scheme="https://vilaswang.github.io/tags/%E6%8C%87%E5%8D%97/"/>
    
  </entry>
  
  <entry>
    <title>Claude MCP é…ç½®æŒ‡å—</title>
    <link href="https://vilaswang.github.io/posts/361d35d7/"/>
    <id>https://vilaswang.github.io/posts/361d35d7/</id>
    <published>2025-12-09T06:09:54.000Z</published>
    <updated>2025-12-17T15:36:29.274Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Claude-MCP-é…ç½®æŒ‡å—"><a href="#Claude-MCP-é…ç½®æŒ‡å—" class="headerlink" title="Claude MCP é…ç½®æŒ‡å—"></a>Claude MCP é…ç½®æŒ‡å—</h1><blockquote><p><strong>æ–‡æ¡£åˆ›å»ºæ—¶é—´</strong>: 2025-11-14<br><strong>æœ€åæ›´æ–°</strong>: 2025-11-14<br><strong>æ ‡ç­¾</strong>: <code>claude-code</code>, <code>mcp</code>, <code>model-context-protocol</code>, <code>productivity</code>, <code>automation</code></p></blockquote><h2 id="ğŸ“‘-ç›®å½•"><a href="#ğŸ“‘-ç›®å½•" class="headerlink" title="ğŸ“‘ ç›®å½•"></a>ğŸ“‘ ç›®å½•</h2><ul><li><a href="#1-mcp-%E6%A6%82%E8%BF%B0">1. MCP æ¦‚è¿°</a></li><li><a href="#2-%E5%BF%85%E8%A3%85-mcp-%E6%9C%8D%E5%8A%A1%E5%99%A8">2. å¿…è£… MCP æœåŠ¡å™¨</a></li><li><a href="#3-%E6%8E%A8%E8%8D%90%E7%BB%84%E5%90%88">3. æ¨èç»„åˆ</a></li><li><a href="#4-%E9%85%8D%E7%BD%AE%E6%AD%A5%E9%AA%A4">4. é…ç½®æ­¥éª¤</a></li><li><a href="#5-top-15-mcp-%E6%9C%8D%E5%8A%A1%E5%99%A8">5. Top 15 MCP æœåŠ¡å™¨</a></li><li><a href="#6-%E6%95%85%E9%9A%9C%E6%8E%92%E9%99%A4">6. æ•…éšœæ’é™¤</a></li></ul><hr><h2 id="1-ğŸ“–-MCP-æ¦‚è¿°"><a href="#1-ğŸ“–-MCP-æ¦‚è¿°" class="headerlink" title="1. ğŸ“– MCP æ¦‚è¿°"></a>1. ğŸ“– MCP æ¦‚è¿°</h2><p>MCP (Model Context Protocol) æ˜¯ Claude Code çš„æ‰©å±•åè®®ï¼Œå…è®¸ AI åŠ©æ‰‹ç›´æ¥æ§åˆ¶å„ç§å·¥å…·å’ŒæœåŠ¡ã€‚</p><h3 id="ğŸ¯-MCP-ä¼˜åŠ¿"><a href="#ğŸ¯-MCP-ä¼˜åŠ¿" class="headerlink" title="ğŸ¯ MCP ä¼˜åŠ¿"></a>ğŸ¯ MCP ä¼˜åŠ¿</h3><ul><li>âœ… <strong>æ‰©å±•èƒ½åŠ›</strong> - å¤§å¹…æ‰©å±• Claude çš„åŠŸèƒ½èŒƒå›´</li><li>âœ… <strong>è‡ªåŠ¨åŒ–</strong> - å®ç°å¤æ‚çš„è‡ªåŠ¨åŒ–å·¥ä½œæµ</li><li>âœ… <strong>é›†æˆæ€§</strong> - è¿æ¥å„ç§ç¬¬ä¸‰æ–¹æœåŠ¡å’Œå·¥å…·</li><li>âœ… <strong>å®æ—¶æ€§</strong> - è·å–æœ€æ–°çš„ API æ–‡æ¡£å’Œä»£ç ç¤ºä¾‹</li></ul><hr><h2 id="2-â­-å¿…è£…-MCP-æœåŠ¡å™¨"><a href="#2-â­-å¿…è£…-MCP-æœåŠ¡å™¨" class="headerlink" title="2. â­ å¿…è£… MCP æœåŠ¡å™¨"></a>2. â­ å¿…è£… MCP æœåŠ¡å™¨</h2><h3 id="2-1-ğŸŒ-Playwright-MCP-æµè§ˆå™¨è‡ªåŠ¨åŒ–"><a href="#2-1-ğŸŒ-Playwright-MCP-æµè§ˆå™¨è‡ªåŠ¨åŒ–" class="headerlink" title="2.1 ğŸŒ Playwright MCP - æµè§ˆå™¨è‡ªåŠ¨åŒ–"></a>2.1 ğŸŒ Playwright MCP - æµè§ˆå™¨è‡ªåŠ¨åŒ–</h3><p><strong>åŠŸèƒ½</strong>: è®© Claude ç›´æ¥æ§åˆ¶æµè§ˆå™¨è¿›è¡Œæµ‹è¯•ã€æˆªå›¾ã€æ•°æ®çˆ¬å–</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Claude MCP é…ç½®æŒ‡å—</span></span><br><span class="line">claude mcp add playwright -s user -- npx @playwright/mcp@latest</span><br><span class="line"></span><br><span class="line"><span class="comment"># Claude MCP é…ç½®æŒ‡å—</span></span><br><span class="line">claude mcp list</span><br></pre></td></tr></table></figure><p><strong>é€‚ç”¨åœºæ™¯</strong>:</p><ul><li>ğŸ”„ è‡ªåŠ¨åŒ–æµ‹è¯•</li><li>ğŸ“¸ ç½‘é¡µæˆªå›¾</li><li>ğŸ•·ï¸ ç½‘é¡µæ•°æ®çˆ¬å–</li><li>ğŸ¯ UI äº¤äº’æµ‹è¯•</li></ul><h3 id="2-2-ğŸ“š-Context7-MCP-æ–‡æ¡£å®æ—¶æŸ¥è¯¢"><a href="#2-2-ğŸ“š-Context7-MCP-æ–‡æ¡£å®æ—¶æŸ¥è¯¢" class="headerlink" title="2.2 ğŸ“š Context7 MCP - æ–‡æ¡£å®æ—¶æŸ¥è¯¢"></a>2.2 ğŸ“š Context7 MCP - æ–‡æ¡£å®æ—¶æŸ¥è¯¢</h3><p><strong>åŠŸèƒ½</strong>: è·å–å„ç§ç¼–ç¨‹åº“çš„æœ€æ–°æ–‡æ¡£å’Œä»£ç ç¤ºä¾‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Claude MCP é…ç½®æŒ‡å—</span></span><br><span class="line">claude mcp add context7 -- npx -y @upstash/context7-mcp</span><br><span class="line"></span><br><span class="line"><span class="comment"># Claude MCP é…ç½®æŒ‡å—</span></span><br><span class="line">claude mcp add context7 -s user -- npx -y @upstash/context7-mcp</span><br></pre></td></tr></table></figure><p><strong>é€‚ç”¨åœºæ™¯</strong>:</p><ul><li>ğŸ” API é›†æˆå¼€å‘</li><li>ğŸ“– ç¼–ç¨‹å­¦ä¹ </li><li>ğŸ’¡ ä»£ç ç¤ºä¾‹æŸ¥æ‰¾</li><li>ğŸ†• æ–°æŠ€æœ¯æ¢ç´¢</li></ul><h3 id="2-3-ğŸ–¥ï¸-Filesystem-MCP-æ–‡ä»¶ç³»ç»Ÿæ“ä½œ"><a href="#2-3-ğŸ–¥ï¸-Filesystem-MCP-æ–‡ä»¶ç³»ç»Ÿæ“ä½œ" class="headerlink" title="2.3 ğŸ–¥ï¸ Filesystem MCP - æ–‡ä»¶ç³»ç»Ÿæ“ä½œ"></a>2.3 ğŸ–¥ï¸ Filesystem MCP - æ–‡ä»¶ç³»ç»Ÿæ“ä½œ</h3><p><strong>åŠŸèƒ½</strong>: è¯»å†™å’Œç®¡ç†æœ¬åœ°æ–‡ä»¶ã€æ–‡ä»¶å¤¹ï¼Œæ‰¹é‡æ“ä½œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Claude MCP é…ç½®æŒ‡å—</span></span><br><span class="line">npm install -g @modelcontextprotocol/server-filesystem</span><br></pre></td></tr></table></figure><p><strong>é€‚ç”¨åœºæ™¯</strong>:</p><ul><li>ğŸ“ ä»£ç åˆ†æ</li><li>ğŸ“„ æ–‡æ¡£ç”Ÿæˆ</li><li>ğŸ’¾ è‡ªåŠ¨å¤‡ä»½</li><li>ğŸ”„ æ‰¹é‡æ–‡ä»¶å¤„ç†</li></ul><h3 id="2-4-ğŸ”§-Git-MCP-ç‰ˆæœ¬æ§åˆ¶"><a href="#2-4-ğŸ”§-Git-MCP-ç‰ˆæœ¬æ§åˆ¶" class="headerlink" title="2.4 ğŸ”§ Git MCP - ç‰ˆæœ¬æ§åˆ¶"></a>2.4 ğŸ”§ Git MCP - ç‰ˆæœ¬æ§åˆ¶</h3><p><strong>åŠŸèƒ½</strong>: æ‰§è¡Œ Git å‘½ä»¤ï¼Œç®¡ç†ç‰ˆæœ¬æ§åˆ¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Claude MCP é…ç½®æŒ‡å—</span></span><br><span class="line">npm install -g @modelcontextprotocol/server-github</span><br></pre></td></tr></table></figure><p><strong>é€‚ç”¨åœºæ™¯</strong>:</p><ul><li>ğŸ“Š ç‰ˆæœ¬ç®¡ç†</li><li>ğŸš€ è‡ªåŠ¨åŒ–éƒ¨ç½²</li><li>ğŸ‘¥ å›¢é˜Ÿåä½œ</li><li>ğŸ” ä»£ç å®¡æŸ¥</li></ul><h3 id="2-5-ğŸ—ƒï¸-Database-MCP-æ•°æ®åº“è¿æ¥"><a href="#2-5-ğŸ—ƒï¸-Database-MCP-æ•°æ®åº“è¿æ¥" class="headerlink" title="2.5 ğŸ—ƒï¸ Database MCP - æ•°æ®åº“è¿æ¥"></a>2.5 ğŸ—ƒï¸ Database MCP - æ•°æ®åº“è¿æ¥</h3><p><strong>åŠŸèƒ½</strong>: è¿æ¥å’Œç®¡ç†å¤šç§æ•°æ®åº“</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Claude MCP é…ç½®æŒ‡å—</span></span><br><span class="line">npm install -g @modelcontextprotocol/server-postgres</span><br></pre></td></tr></table></figure><p><strong>é€‚ç”¨åœºæ™¯</strong>:</p><ul><li>ğŸ—„ï¸ æ•°æ®åº“ç®¡ç†</li><li>ğŸ“Š æ•°æ®åˆ†æ</li><li>ğŸ” SQL æŸ¥è¯¢</li><li>ğŸ’¿ æ•°æ®è¿ç§»</li></ul><hr><h2 id="3-ğŸ¯-æ¨èç»„åˆ"><a href="#3-ğŸ¯-æ¨èç»„åˆ" class="headerlink" title="3. ğŸ¯ æ¨èç»„åˆ"></a>3. ğŸ¯ æ¨èç»„åˆ</h2><h3 id="3-1-ğŸ“±-æŒ‰è§’è‰²åˆ†ç±»"><a href="#3-1-ğŸ“±-æŒ‰è§’è‰²åˆ†ç±»" class="headerlink" title="3.1 ğŸ“± æŒ‰è§’è‰²åˆ†ç±»"></a>3.1 ğŸ“± æŒ‰è§’è‰²åˆ†ç±»</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    A[å¼€å‘è€…è§’è‰²] --&gt; B[å‰ç«¯å¼€å‘è€…]</span><br><span class="line">    A --&gt; C[åç«¯å¼€å‘è€…]</span><br><span class="line">    A --&gt; D[æ•°æ®åˆ†æå¸ˆ]</span><br><span class="line">    A --&gt; E[å…¨æ ˆå¼€å‘è€…]</span><br><span class="line"></span><br><span class="line">    B --&gt; B1[Filesystem + Git + Figma]</span><br><span class="line">    C --&gt; C1[Git + Prisma + FastAPI]</span><br><span class="line">    D --&gt; D1[Context7 + Python + Database]</span><br><span class="line">    E --&gt; E1[Filesystem + Git + Pipedream]</span><br></pre></td></tr></table></figure><h3 id="3-2-ğŸ“¦-5ä¸ªå¿…è£…ç»„åˆ"><a href="#3-2-ğŸ“¦-5ä¸ªå¿…è£…ç»„åˆ" class="headerlink" title="3.2 ğŸ“¦ 5ä¸ªå¿…è£…ç»„åˆ"></a>3.2 ğŸ“¦ 5ä¸ªå¿…è£…ç»„åˆ</h3><p>åŸºäº2025å¹´ä½¿ç”¨ç»Ÿè®¡ï¼Œä»¥ä¸‹ MCP æœåŠ¡å™¨è¦†ç›–90%çš„æ—¥å¸¸éœ€æ±‚ï¼š</p><ol><li><strong>@modelcontextprotocol&#x2F;server-filesystem</strong> - æ–‡ä»¶ç³»ç»Ÿè®¿é—®</li><li><strong>@modelcontextprotocol&#x2F;server-github</strong> - GitHub é›†æˆ</li><li><strong>@modelcontextprotocol&#x2F;server-postgres</strong> - æ•°æ®åº“è¿æ¥</li><li><strong>@modelcontextprotocol&#x2F;server-slack</strong> - å›¢é˜Ÿåä½œ</li><li><strong>@modelcontextprotocol&#x2F;server-kubernetes</strong> - å®¹å™¨ç®¡ç†</li></ol><hr><h2 id="4-âš™ï¸-é…ç½®æ­¥éª¤"><a href="#4-âš™ï¸-é…ç½®æ­¥éª¤" class="headerlink" title="4. âš™ï¸ é…ç½®æ­¥éª¤"></a>4. âš™ï¸ é…ç½®æ­¥éª¤</h2><h3 id="4-1-ğŸ”-æ­¥éª¤1-å®‰è£…-MCP-æœåŠ¡å™¨"><a href="#4-1-ğŸ”-æ­¥éª¤1-å®‰è£…-MCP-æœåŠ¡å™¨" class="headerlink" title="4.1 ğŸ” æ­¥éª¤1: å®‰è£… MCP æœåŠ¡å™¨"></a>4.1 ğŸ” æ­¥éª¤1: å®‰è£… MCP æœåŠ¡å™¨</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Claude MCP é…ç½®æŒ‡å—</span></span><br><span class="line">npm install -g @modelcontextprotocol/server-browserkit \</span><br><span class="line">  @modelcontextprotocol/server-ollama \</span><br><span class="line">  @modelcontextprotocol/server-filesystem \</span><br><span class="line">  @modelcontextprotocol/server-github \</span><br><span class="line">  @modelcontextprotocol/server-postgres</span><br></pre></td></tr></table></figure><h3 id="4-2-ğŸ“-æ­¥éª¤2-é…ç½®-Claude-Code-CLI"><a href="#4-2-ğŸ“-æ­¥éª¤2-é…ç½®-Claude-Code-CLI" class="headerlink" title="4.2 ğŸ“ æ­¥éª¤2: é…ç½® Claude Code CLI"></a>4.2 ğŸ“ æ­¥éª¤2: é…ç½® Claude Code CLI</h3><p>Claude Code CLI çš„é…ç½®æ–‡ä»¶ä½äºï¼š</p><ul><li><strong>macOS &#x2F; Linux</strong>: <code>~/.config/claude/claude_desktop_config.json</code></li><li><strong>Windows</strong>: <code>%USERPROFILE%\.claude.json</code></li></ul><h3 id="4-3-ğŸ“„-æ­¥éª¤3-é…ç½®ç¤ºä¾‹"><a href="#4-3-ğŸ“„-æ­¥éª¤3-é…ç½®ç¤ºä¾‹" class="headerlink" title="4.3 ğŸ“„ æ­¥éª¤3: é…ç½®ç¤ºä¾‹"></a>4.3 ğŸ“„ æ­¥éª¤3: é…ç½®ç¤ºä¾‹</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;mcpServers&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;browserkit&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npx&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;-y&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;@modelcontextprotocol/server-browserkit&quot;</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;ollama&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npx&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;-y&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;@modelcontextprotocol/server-ollama&quot;</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;filesystem&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npx&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;-y&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;@modelcontextprotocol/server-filesystem&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;/path/to/allowed/directory&quot;</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;github&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npx&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;-y&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;@modelcontextprotocol/server-github&quot;</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="4-4-ğŸ”§-æ­¥éª¤4-ç‰¹æ®Šé…ç½®"><a href="#4-4-ğŸ”§-æ­¥éª¤4-ç‰¹æ®Šé…ç½®" class="headerlink" title="4.4 ğŸ”§ æ­¥éª¤4: ç‰¹æ®Šé…ç½®"></a>4.4 ğŸ”§ æ­¥éª¤4: ç‰¹æ®Šé…ç½®</h3><h4 id="Xmind-ç”Ÿæˆå™¨-MCP"><a href="#Xmind-ç”Ÿæˆå™¨-MCP" class="headerlink" title="Xmind ç”Ÿæˆå™¨ MCP"></a>Xmind ç”Ÿæˆå™¨ MCP</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;mcpServers&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;xmind&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npx&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;xmind-generator-mcp&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;env&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;outputPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;E:/xmind_generator_mcp_path&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;autoOpenFile&quot;</span><span class="punctuation">:</span> <span class="string">&quot;false&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h4 id="Office-Word-MCP"><a href="#Office-Word-MCP" class="headerlink" title="Office Word MCP"></a>Office Word MCP</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Claude MCP é…ç½®æŒ‡å—</span></span><br><span class="line">claude mcp add office-word -s user -- uvx --from office-word-mcp-server word_mcp_server</span><br></pre></td></tr></table></figure><hr><h2 id="5-ğŸ“Š-Top-15-MCP-æœåŠ¡å™¨"><a href="#5-ğŸ“Š-Top-15-MCP-æœåŠ¡å™¨" class="headerlink" title="5. ğŸ“Š Top 15 MCP æœåŠ¡å™¨"></a>5. ğŸ“Š Top 15 MCP æœåŠ¡å™¨</h2><table><thead><tr><th>æ’å</th><th>åç§°</th><th>Staræ•°</th><th>æ ¸å¿ƒåŠŸèƒ½</th><th>æœ€ä½³åœºæ™¯</th></tr></thead><tbody><tr><td>1</td><td>Filesystem MCP</td><td>64,053 â­</td><td>è¯»å†™&#x2F;ç®¡ç†æœ¬åœ°æ–‡ä»¶ã€æ–‡ä»¶å¤¹</td><td>ä»£ç åˆ†æã€æ–‡æ¡£ç”Ÿæˆã€è‡ªåŠ¨å¤‡ä»½</td></tr><tr><td>2</td><td>Git MCP</td><td>64,053 â­</td><td>æ‰§è¡Œgitå‘½ä»¤ï¼ŒæŸ¥çœ‹å†å²å’Œå·®å¼‚</td><td>ç‰ˆæœ¬ç®¡ç†ã€è‡ªåŠ¨åŒ–éƒ¨ç½²ã€å›¢é˜Ÿåä½œ</td></tr><tr><td>3</td><td>Prisma MCP</td><td>43,499 â­</td><td>ç®¡ç†Prismaæ•°æ®åº“æ¨¡å¼</td><td>Webå¼€å‘ã€æ•°æ®åº“è®¾è®¡</td></tr><tr><td>4</td><td>Context7 MCP</td><td>25,610 â­</td><td>è·å–æœ€æ–°åº“æ–‡æ¡£å’Œä»£ç ç¤ºä¾‹</td><td>APIé›†æˆã€ç¼–ç¨‹å­¦ä¹ </td></tr><tr><td>5</td><td>GitHub MCP</td><td>20,923 â­</td><td>ç®¡ç†ä»“åº“ã€PRå’ŒIssues</td><td>å¼€æºé¡¹ç›®ç®¡ç†ã€CI&#x2F;CD</td></tr><tr><td>6</td><td>Task Master</td><td>20,520 â­</td><td>æ™ºèƒ½ä»»åŠ¡åˆ†è§£å’Œä¼˜å…ˆçº§ç®¡ç†</td><td>é¡¹ç›®ç®¡ç†ã€æ•æ·å¼€å‘</td></tr><tr><td>7</td><td>Repomix</td><td>18,511 â­</td><td>å‹ç¼©ä»£ç åº“ä¸ºAIå‹å¥½æ ¼å¼</td><td>å¤§å‹ä»£ç å®¡æŸ¥ã€æ¶æ„åˆ†æ</td></tr><tr><td>8</td><td>BlenderMCP</td><td>12,829 â­</td><td>æ§åˆ¶Blenderè¿›è¡Œ3Då»ºæ¨¡</td><td>æ¸¸æˆå¼€å‘ã€3Dè®¾è®¡</td></tr><tr><td>9</td><td>mcp-run-python</td><td>11,603 â­</td><td>å®‰å…¨è¿è¡ŒPythonä»£ç </td><td>ç®—æ³•éªŒè¯ã€æ•°æ®åˆ†æ</td></tr><tr><td>10</td><td>Pipedream</td><td>10,139 â­</td><td>è¿æ¥2500+åº”ç”¨å’ŒAPI</td><td>ä¸šåŠ¡æµç¨‹è‡ªåŠ¨åŒ–ã€æ•°æ®åŒæ­¥</td></tr><tr><td>11</td><td>Figma MCP</td><td>9,891 â­</td><td>è¯»å–Figmaè®¾è®¡ï¼Œç”Ÿæˆå‰ç«¯ä»£ç </td><td>UI&#x2F;UXå¼€å‘ã€è®¾è®¡è½¬ä»£ç </td></tr><tr><td>12</td><td>æ•°æ®åº“MCPå·¥å…·ç®±</td><td>9,229 â­</td><td>æ”¯æŒå¤šæ•°æ®åº“æŸ¥è¯¢å’Œä¼˜åŒ–</td><td>æ•°æ®åº“ç®¡ç†ã€æ•°æ®åˆ†æ</td></tr><tr><td>13</td><td>Serena</td><td>8,743 â­</td><td>å¤§å‹ä»£ç åº“ç¬¦å·åŒ–åˆ†æ</td><td>ä»£ç é‡æ„ã€bugä¿®å¤</td></tr><tr><td>14</td><td>FastAPI-MCP</td><td>7,857 â­</td><td>é›¶é…ç½®é›†æˆFastAPI</td><td>APIå¼€å‘ã€å¾®æœåŠ¡</td></tr><tr><td>15</td><td>Fonoster MCP</td><td>6,740 â­</td><td>ç®¡ç†ç”µè¯ç³»ç»Ÿ</td><td>å®¢æœç³»ç»Ÿã€ç”µè¯è¥é”€</td></tr></tbody></table><hr><h2 id="6-ğŸ”§-æ•…éšœæ’é™¤"><a href="#6-ğŸ”§-æ•…éšœæ’é™¤" class="headerlink" title="6. ğŸ”§ æ•…éšœæ’é™¤"></a>6. ğŸ”§ æ•…éšœæ’é™¤</h2><h3 id="6-1-âŒ-å¸¸è§é—®é¢˜"><a href="#6-1-âŒ-å¸¸è§é—®é¢˜" class="headerlink" title="6.1 âŒ å¸¸è§é—®é¢˜"></a>6.1 âŒ å¸¸è§é—®é¢˜</h3><h4 id="é—®é¢˜1-MCP-æœåŠ¡å™¨æ— æ³•å¯åŠ¨"><a href="#é—®é¢˜1-MCP-æœåŠ¡å™¨æ— æ³•å¯åŠ¨" class="headerlink" title="é—®é¢˜1: MCP æœåŠ¡å™¨æ— æ³•å¯åŠ¨"></a>é—®é¢˜1: MCP æœåŠ¡å™¨æ— æ³•å¯åŠ¨</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Claude MCP é…ç½®æŒ‡å—</span></span><br><span class="line">claude mcp list</span><br><span class="line"></span><br><span class="line"><span class="comment"># Claude MCP é…ç½®æŒ‡å—</span></span><br><span class="line">claude mcp remove &lt;server-name&gt;</span><br><span class="line">claude mcp add &lt;server-name&gt; &lt;<span class="built_in">command</span>&gt;</span><br></pre></td></tr></table></figure><h4 id="é—®é¢˜2-é…ç½®æ–‡ä»¶æ ¼å¼é”™è¯¯"><a href="#é—®é¢˜2-é…ç½®æ–‡ä»¶æ ¼å¼é”™è¯¯" class="headerlink" title="é—®é¢˜2: é…ç½®æ–‡ä»¶æ ¼å¼é”™è¯¯"></a>é—®é¢˜2: é…ç½®æ–‡ä»¶æ ¼å¼é”™è¯¯</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// éªŒè¯ JSON æ ¼å¼</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;mcpServers&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;server-name&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;command-string&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;arg1&quot;</span><span class="punctuation">,</span> <span class="string">&quot;arg2&quot;</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h4 id="é—®é¢˜3-æƒé™é—®é¢˜"><a href="#é—®é¢˜3-æƒé™é—®é¢˜" class="headerlink" title="é—®é¢˜3: æƒé™é—®é¢˜"></a>é—®é¢˜3: æƒé™é—®é¢˜</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Claude MCP é…ç½®æŒ‡å—</span></span><br><span class="line"><span class="built_in">ls</span> -la ~/.claude.json</span><br><span class="line"></span><br><span class="line"><span class="comment"># Claude MCP é…ç½®æŒ‡å—</span></span><br><span class="line"><span class="built_in">chmod</span> 600 ~/.claude.json</span><br></pre></td></tr></table></figure><h3 id="6-2-ğŸ› ï¸-è°ƒè¯•æŠ€å·§"><a href="#6-2-ğŸ› ï¸-è°ƒè¯•æŠ€å·§" class="headerlink" title="6.2 ğŸ› ï¸ è°ƒè¯•æŠ€å·§"></a>6.2 ğŸ› ï¸ è°ƒè¯•æŠ€å·§</h3><ol><li><strong>æŸ¥çœ‹æ—¥å¿—</strong>: æ£€æŸ¥ Claude Code çš„æ—¥å¿—è¾“å‡º</li><li><strong>æµ‹è¯•è¿æ¥</strong>: ä½¿ç”¨ç®€å•çš„å‘½ä»¤æµ‹è¯• MCP æœåŠ¡å™¨</li><li><strong>é€æ­¥é…ç½®</strong>: ä¸€æ¬¡åªæ·»åŠ ä¸€ä¸ª MCP æœåŠ¡å™¨</li><li><strong>ç‰ˆæœ¬æ£€æŸ¥</strong>: ç¡®ä¿æ‰€æœ‰ä¾èµ–ç‰ˆæœ¬å…¼å®¹</li></ol><h3 id="6-3-ğŸ“-è·å–å¸®åŠ©"><a href="#6-3-ğŸ“-è·å–å¸®åŠ©" class="headerlink" title="6.3 ğŸ“ è·å–å¸®åŠ©"></a>6.3 ğŸ“ è·å–å¸®åŠ©</h3><ul><li><strong>å®˜æ–¹æ–‡æ¡£</strong>: <a href="https://docs.anthropic.com/claude/docs/mcp">Claude Code MCP Documentation</a></li><li><strong>ç¤¾åŒºæ”¯æŒ</strong>: GitHub Issues å’Œ Discussions</li><li><strong>ç¤ºä¾‹é…ç½®</strong>: å®˜æ–¹ç¤ºä¾‹ä»“åº“</li></ul><hr><h2 id="ğŸ“š-æ‰©å±•èµ„æº"><a href="#ğŸ“š-æ‰©å±•èµ„æº" class="headerlink" title="ğŸ“š æ‰©å±•èµ„æº"></a>ğŸ“š æ‰©å±•èµ„æº</h2><h3 id="ğŸ”—-ç›¸å…³é“¾æ¥"><a href="#ğŸ”—-ç›¸å…³é“¾æ¥" class="headerlink" title="ğŸ”— ç›¸å…³é“¾æ¥"></a>ğŸ”— ç›¸å…³é“¾æ¥</h3><ul><li><a href="https://modelcontextprotocol.io/">MCP å®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://docs.anthropic.com/claude/docs">Claude Code æŒ‡å—</a></li><li><a href="https://github.com/modelcontextprotocol/servers">MCP æœåŠ¡å™¨åˆ—è¡¨</a></li></ul><h3 id="ğŸ¯-å­¦ä¹ è·¯å¾„"><a href="#ğŸ¯-å­¦ä¹ è·¯å¾„" class="headerlink" title="ğŸ¯ å­¦ä¹ è·¯å¾„"></a>ğŸ¯ å­¦ä¹ è·¯å¾„</h3><ol><li><strong>åŸºç¡€é…ç½®</strong> - ä»ç®€å•çš„ Filesystem MCP å¼€å§‹</li><li><strong>åŠŸèƒ½æ‰©å±•</strong> - é€æ­¥æ·»åŠ ä¸“ä¸šé¢†åŸŸ MCP</li><li><strong>è‡ªå®šä¹‰å¼€å‘</strong> - å­¦ä¹ å¼€å‘è‡ªå®šä¹‰ MCP æœåŠ¡å™¨</li><li><strong>æœ€ä½³å®è·µ</strong> - æŒæ¡é«˜çº§é…ç½®å’Œä¼˜åŒ–æŠ€å·§</li></ol><hr><h2 id="ğŸ“ˆ-ä½¿ç”¨å»ºè®®"><a href="#ğŸ“ˆ-ä½¿ç”¨å»ºè®®" class="headerlink" title="ğŸ“ˆ ä½¿ç”¨å»ºè®®"></a>ğŸ“ˆ ä½¿ç”¨å»ºè®®</h2><h3 id="ğŸ’¡-æ•ˆç‡æå‡æŠ€å·§"><a href="#ğŸ’¡-æ•ˆç‡æå‡æŠ€å·§" class="headerlink" title="ğŸ’¡ æ•ˆç‡æå‡æŠ€å·§"></a>ğŸ’¡ æ•ˆç‡æå‡æŠ€å·§</h3><ol><li><strong>æŒ‰éœ€å®‰è£…</strong> - åªå®‰è£…å½“å‰é¡¹ç›®éœ€è¦çš„ MCP</li><li><strong>å®šæœŸæ›´æ–°</strong> - ä¿æŒ MCP æœåŠ¡å™¨ä¸ºæœ€æ–°ç‰ˆæœ¬</li><li><strong>æ€§èƒ½ä¼˜åŒ–</strong> - ç›‘æ§ MCP æœåŠ¡å™¨èµ„æºä½¿ç”¨æƒ…å†µ</li><li><strong>å®‰å…¨è€ƒè™‘</strong> - é™åˆ¶æ–‡ä»¶ç³»ç»Ÿè®¿é—®èŒƒå›´</li></ol><h3 id="ğŸ”„-å·¥ä½œæµä¼˜åŒ–"><a href="#ğŸ”„-å·¥ä½œæµä¼˜åŒ–" class="headerlink" title="ğŸ”„ å·¥ä½œæµä¼˜åŒ–"></a>ğŸ”„ å·¥ä½œæµä¼˜åŒ–</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">    A[é¡¹ç›®åˆ†æ] --&gt; B[é€‰æ‹©åˆé€‚MCP]</span><br><span class="line">    B --&gt; C[é…ç½®æµ‹è¯•]</span><br><span class="line">    C --&gt; D[é›†æˆå·¥ä½œæµ]</span><br><span class="line">    D --&gt; E[æŒç»­ä¼˜åŒ–]</span><br><span class="line"></span><br><span class="line">    style A fill:#e1f5fe</span><br><span class="line">    style B fill:#f3e5f5</span><br><span class="line">    style C fill:#e8f5e8</span><br><span class="line">    style D fill:#fff3e0</span><br><span class="line">    style E fill:#fce4ec</span><br></pre></td></tr></table></figure><hr><blockquote><p><strong>ğŸ’¡ æç¤º</strong>: MCP é…ç½®æ˜¯ä¸€ä¸ªè¿­ä»£è¿‡ç¨‹ï¼Œå»ºè®®ä»åŸºç¡€åŠŸèƒ½å¼€å§‹ï¼Œé€æ­¥æ‰©å±•åˆ°å¤æ‚çš„è‡ªåŠ¨åŒ–å·¥ä½œæµã€‚å®šæœŸæ£€æŸ¥æ›´æ–°ä»¥è·å¾—æœ€æ–°åŠŸèƒ½å’Œå®‰å…¨ä¿®å¤ã€‚</p></blockquote>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;Claude-MCP-é…ç½®æŒ‡å—&quot;&gt;&lt;a href=&quot;#Claude-MCP-é…ç½®æŒ‡å—&quot; class=&quot;headerlink&quot; title=&quot;Claude MCP é…ç½®æŒ‡å—&quot;&gt;&lt;/a&gt;Claude MCP</summary>
        
      
    
    
    
    <category term="å¼€å‘å·¥å…·" scheme="https://vilaswang.github.io/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="æŠ€æœ¯æ–‡æ¡£" scheme="https://vilaswang.github.io/tags/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/"/>
    
    <category term="æŒ‡å—" scheme="https://vilaswang.github.io/tags/%E6%8C%87%E5%8D%97/"/>
    
  </entry>
  
  <entry>
    <title>FileZilla ç«¯å£è½¬å‘æŒ‡å—</title>
    <link href="https://vilaswang.github.io/posts/33eb4929/"/>
    <id>https://vilaswang.github.io/posts/33eb4929/</id>
    <published>2025-12-09T06:09:54.000Z</published>
    <updated>2025-12-17T15:36:29.284Z</updated>
    
    <content type="html"><![CDATA[<h1 id="FileZilla-ç«¯å£è½¬å‘æŒ‡å—"><a href="#FileZilla-ç«¯å£è½¬å‘æŒ‡å—" class="headerlink" title="FileZilla ç«¯å£è½¬å‘æŒ‡å—"></a>FileZilla ç«¯å£è½¬å‘æŒ‡å—</h1><blockquote><p><strong>æ–‡æ¡£åˆ›å»ºæ—¶é—´</strong>: 2025-11-14<br><strong>æœ€åæ›´æ–°</strong>: 2025-11-14<br><strong>æ ‡ç­¾</strong>: <code>filezilla</code>, <code>ftp</code>, <code>portforwarding</code>, <code>èŠ±ç”Ÿå£³</code>, <code>å†…ç½‘ç©¿é€</code>, <code>è¿œç¨‹è®¿é—®</code></p></blockquote><h2 id="ğŸ“‘-ç›®å½•"><a href="#ğŸ“‘-ç›®å½•" class="headerlink" title="ğŸ“‘ ç›®å½•"></a>ğŸ“‘ ç›®å½•</h2><ul><li><a href="#1-%E6%A6%82%E8%BF%B0">1. æ¦‚è¿°</a></li><li><a href="#2-%E9%85%8D%E7%BD%AE%E6%B5%81%E7%A8%8B%E5%9B%BE">2. é…ç½®æµç¨‹å›¾</a></li><li><a href="#3-filezilla-server-%E9%85%8D%E7%BD%AE">3. FileZilla Server é…ç½®</a></li><li><a href="#4-%E8%8A%B1%E7%94%9F%E5%A3%B3%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F">4. èŠ±ç”Ÿå£³å†…ç½‘ç©¿é€</a></li><li><a href="#5-ftp-%E8%A2%AB%E5%8A%A8%E6%A8%A1%E5%BC%8F%E9%85%8D%E7%BD%AE">5. FTP è¢«åŠ¨æ¨¡å¼é…ç½®</a></li><li><a href="#6-%E9%98%B2%E7%81%AB%E5%A2%99%E8%AE%BE%E7%BD%AE">6. é˜²ç«å¢™è®¾ç½®</a></li><li><a href="#7-%E8%BF%9E%E6%8E%A5%E6%B5%8B%E8%AF%95">7. è¿æ¥æµ‹è¯•</a></li><li><a href="#8-%E6%95%85%E9%9A%9C%E6%8E%92%E9%99%A4">8. æ•…éšœæ’é™¤</a></li></ul><hr><h2 id="1-ğŸ“–-æ¦‚è¿°"><a href="#1-ğŸ“–-æ¦‚è¿°" class="headerlink" title="1. ğŸ“– æ¦‚è¿°"></a>1. ğŸ“– æ¦‚è¿°</h2><p>æœ¬æŒ‡å—è¯¦ç»†ä»‹ç»å¦‚ä½•ä½¿ç”¨ FileZilla Server æ­å»º FTP æœåŠ¡å™¨ï¼Œå¹¶é€šè¿‡èŠ±ç”Ÿå£³å®ç°å¤–ç½‘è®¿é—®å†…ç½‘æ–‡ä»¶çš„å®Œæ•´è§£å†³æ–¹æ¡ˆã€‚</p><h3 id="ğŸ¯-é…ç½®ç›®æ ‡"><a href="#ğŸ¯-é…ç½®ç›®æ ‡" class="headerlink" title="ğŸ¯ é…ç½®ç›®æ ‡"></a>ğŸ¯ é…ç½®ç›®æ ‡</h3><ul><li>âœ… æ­å»ºå†…ç½‘ FTP æœåŠ¡å™¨</li><li>âœ… é…ç½®èŠ±ç”Ÿå£³å†…ç½‘ç©¿é€</li><li>âœ… å®ç°å¤–ç½‘å®‰å…¨è®¿é—®</li><li>âœ… æ”¯æŒæ–‡ä»¶ä¸Šä¼ ä¸‹è½½</li></ul><h3 id="ğŸ—ï¸-ç³»ç»Ÿæ¶æ„å›¾"><a href="#ğŸ—ï¸-ç³»ç»Ÿæ¶æ„å›¾" class="headerlink" title="ğŸ—ï¸ ç³»ç»Ÿæ¶æ„å›¾"></a>ğŸ—ï¸ ç³»ç»Ÿæ¶æ„å›¾</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">flowchart TD</span><br><span class="line">    A[å¤–ç½‘å®¢æˆ·ç«¯] --&gt; B[èŠ±ç”Ÿå£³å¤–ç½‘åŸŸå]</span><br><span class="line">    B --&gt; C[èŠ±ç”Ÿå£³æœåŠ¡å™¨]</span><br><span class="line">    C --&gt; D[å†…ç½‘æœåŠ¡å™¨]</span><br><span class="line">    D --&gt; E[FileZilla Server]</span><br><span class="line">    E --&gt; F[å…±äº«æ–‡ä»¶å¤¹]</span><br><span class="line"></span><br><span class="line">    G[FTPæ§åˆ¶é€šé“&lt;br/&gt;ç«¯å£21] --&gt; C</span><br><span class="line">    H[FTPæ•°æ®é€šé“&lt;br/&gt;è¢«åŠ¨ç«¯å£] --&gt; C</span><br><span class="line"></span><br><span class="line">    style A fill:#e1f5fe</span><br><span class="line">    style B fill:#f3e5f5</span><br><span class="line">    style C fill:#e8f5e8</span><br><span class="line">    style D fill:#fff3e0</span><br></pre></td></tr></table></figure><hr><h2 id="2-ğŸ”„-é…ç½®æµç¨‹å›¾"><a href="#2-ğŸ”„-é…ç½®æµç¨‹å›¾" class="headerlink" title="2. ğŸ”„ é…ç½®æµç¨‹å›¾"></a>2. ğŸ”„ é…ç½®æµç¨‹å›¾</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">flowchart TD</span><br><span class="line">    A[å¼€å§‹é…ç½®] --&gt; B[å®‰è£…ä¸é…ç½®FileZilla Server]</span><br><span class="line">    B --&gt; C[é…ç½®èŠ±ç”Ÿå£³å†…ç½‘ç©¿é€]</span><br><span class="line">    C --&gt; D&#123;é…ç½®FTPè¢«åŠ¨æ¨¡å¼&lt;br&gt;ä¸æ•°æ®ä¼ è¾“ç«¯å£&#125;</span><br><span class="line">    D --&gt; E[è®¾ç½®Windowsé˜²ç«å¢™]</span><br><span class="line">    E --&gt; F[å¤–ç½‘è¿æ¥æµ‹è¯•]</span><br><span class="line">    F --&gt; G&#123;æµ‹è¯•æˆåŠŸ?&#125;</span><br><span class="line">    G -- æ˜¯ --&gt; H[é…ç½®å®Œæˆ]</span><br><span class="line">    G -- å¦ --&gt; I[æ£€æŸ¥ç«¯å£æ˜ å°„ä¸è¢«åŠ¨æ¨¡å¼è®¾ç½®]</span><br><span class="line">    I --&gt; F</span><br></pre></td></tr></table></figure><hr><h2 id="3-ğŸ–¥ï¸-FileZilla-Server-é…ç½®"><a href="#3-ğŸ–¥ï¸-FileZilla-Server-é…ç½®" class="headerlink" title="3. ğŸ–¥ï¸ FileZilla Server é…ç½®"></a>3. ğŸ–¥ï¸ FileZilla Server é…ç½®</h2><h3 id="3-1-ğŸ“¥-ä¸‹è½½ä¸å®‰è£…"><a href="#3-1-ğŸ“¥-ä¸‹è½½ä¸å®‰è£…" class="headerlink" title="3.1 ğŸ“¥ ä¸‹è½½ä¸å®‰è£…"></a>3.1 ğŸ“¥ ä¸‹è½½ä¸å®‰è£…</h3><ol><li><p><strong>ä¸‹è½½ FileZilla Server</strong></p><ul><li>è®¿é—® <a href="https://filezilla-project.org/">FileZilla å®˜ç½‘</a></li><li>ä¸‹è½½ FileZilla Server ç‰ˆæœ¬</li><li>ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œå®‰è£…ç¨‹åº</li></ul></li><li><p><strong>å®‰è£…é…ç½®</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…è¿‡ç¨‹ä¸­çš„å…³é”®è®¾ç½®ï¼š</span></span><br><span class="line">- ç®¡ç†ç«¯å£: 14147 (é»˜è®¤)</span><br><span class="line">- æœåŠ¡ç«¯å£: 21 (FTPæ§åˆ¶ç«¯å£)</span><br><span class="line">- å¯åŠ¨ä¸ºç³»ç»ŸæœåŠ¡: æ¨è</span><br></pre></td></tr></table></figure></li></ol><h3 id="3-2-ğŸ‘¤-ç”¨æˆ·ä¸æƒé™é…ç½®"><a href="#3-2-ğŸ‘¤-ç”¨æˆ·ä¸æƒé™é…ç½®" class="headerlink" title="3.2 ğŸ‘¤ ç”¨æˆ·ä¸æƒé™é…ç½®"></a>3.2 ğŸ‘¤ ç”¨æˆ·ä¸æƒé™é…ç½®</h3><h4 id="åˆ›å»ºç”¨æˆ·"><a href="#åˆ›å»ºç”¨æˆ·" class="headerlink" title="åˆ›å»ºç”¨æˆ·"></a>åˆ›å»ºç”¨æˆ·</h4><ol><li><p><strong>æ‰“å¼€ç®¡ç†ç•Œé¢</strong></p><ul><li>åŒå‡»ç³»ç»Ÿæ‰˜ç›˜çš„ FileZilla Server å›¾æ ‡</li><li>æˆ–è®¿é—® <code>http://localhost:14147</code></li></ul></li><li><p><strong>æ·»åŠ ç”¨æˆ·</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Edit â†’ Users â†’ Add</span><br><span class="line">- ç”¨æˆ·å: user1 (è‡ªå®šä¹‰)</span><br><span class="line">- å¯†ç : è®¾ç½®å¼ºå¯†ç </span><br><span class="line">- å‹¾é€‰ &quot;Password&quot; å¹¶è¾“å…¥å¯†ç </span><br></pre></td></tr></table></figure></li></ol><h4 id="è®¾ç½®å…±äº«æ–‡ä»¶å¤¹"><a href="#è®¾ç½®å…±äº«æ–‡ä»¶å¤¹" class="headerlink" title="è®¾ç½®å…±äº«æ–‡ä»¶å¤¹"></a>è®¾ç½®å…±äº«æ–‡ä»¶å¤¹</h4><ol><li><p><strong>æ·»åŠ å…±äº«ç›®å½•</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Shared folders â†’ Add</span><br><span class="line">- é€‰æ‹©è¦å…±äº«çš„å†…ç½‘ç›®å½•</span><br><span class="line">- ä¾‹å¦‚: D:\SharedFiles</span><br></pre></td></tr></table></figure></li><li><p><strong>é…ç½®æƒé™</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Filesæƒé™:</span><br><span class="line">âœ“ Read (è¯»å–/ä¸‹è½½)</span><br><span class="line">âœ“ Write (å†™å…¥/ä¸Šä¼ ) - å¯é€‰</span><br><span class="line">âœ“ Delete (åˆ é™¤) - å¯é€‰</span><br><span class="line">âœ“ Append (è¿½åŠ ) - å¯é€‰</span><br><span class="line"></span><br><span class="line">Directoriesæƒé™:</span><br><span class="line">âœ“ Create (åˆ›å»ºç›®å½•)</span><br><span class="line">âœ“ Delete (åˆ é™¤ç›®å½•)</span><br><span class="line">âœ“ List (åˆ—å‡ºç›®å½•)</span><br><span class="line">âœ“ Subdirs (å­ç›®å½•)</span><br></pre></td></tr></table></figure></li></ol><h3 id="3-3-ğŸ”§-åŸºç¡€é…ç½®"><a href="#3-3-ğŸ”§-åŸºç¡€é…ç½®" class="headerlink" title="3.3 ğŸ”§ åŸºç¡€é…ç½®"></a>3.3 ğŸ”§ åŸºç¡€é…ç½®</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">    A[FileZillaè®¾ç½®] --&gt; B[å¸¸è§„è®¾ç½®]</span><br><span class="line">    A --&gt; C[è¢«åŠ¨æ¨¡å¼]</span><br><span class="line">    A --&gt; D[å®‰å…¨è®¾ç½®]</span><br><span class="line"></span><br><span class="line">    B --&gt; B1[ç›‘å¬ç«¯å£: 21]</span><br><span class="line">    B --&gt; B2[æœ€å¤§è¿æ¥æ•°: 10]</span><br><span class="line"></span><br><span class="line">    C --&gt; C1[å¯ç”¨è¢«åŠ¨æ¨¡å¼]</span><br><span class="line">    C --&gt; C2[è‡ªå®šä¹‰ç«¯å£èŒƒå›´]</span><br><span class="line"></span><br><span class="line">    D --&gt; D1[åŠ å¯†æ¨¡å¼]</span><br><span class="line">    D --&gt; D2[IPè¿‡æ»¤]</span><br></pre></td></tr></table></figure><hr><h2 id="4-ğŸŒ-èŠ±ç”Ÿå£³å†…ç½‘ç©¿é€"><a href="#4-ğŸŒ-èŠ±ç”Ÿå£³å†…ç½‘ç©¿é€" class="headerlink" title="4. ğŸŒ èŠ±ç”Ÿå£³å†…ç½‘ç©¿é€"></a>4. ğŸŒ èŠ±ç”Ÿå£³å†…ç½‘ç©¿é€</h2><h3 id="4-1-ğŸ“±-èŠ±ç”Ÿå£³å®¢æˆ·ç«¯è®¾ç½®"><a href="#4-1-ğŸ“±-èŠ±ç”Ÿå£³å®¢æˆ·ç«¯è®¾ç½®" class="headerlink" title="4.1 ğŸ“± èŠ±ç”Ÿå£³å®¢æˆ·ç«¯è®¾ç½®"></a>4.1 ğŸ“± èŠ±ç”Ÿå£³å®¢æˆ·ç«¯è®¾ç½®</h3><ol><li><p><strong>ä¸‹è½½å®‰è£…èŠ±ç”Ÿå£³</strong></p><ul><li>è®¿é—® <a href="https://hsk.oray.com/">èŠ±ç”Ÿå£³å®˜ç½‘</a></li><li>ä¸‹è½½å¹¶å®‰è£…èŠ±ç”Ÿå£³å®¢æˆ·ç«¯</li><li>æ³¨å†Œå¹¶ç™»å½•èŠ±ç”Ÿå£³è´¦å·</li></ul></li><li><p><strong>æ·»åŠ å†…ç½‘ç©¿é€æ˜ å°„</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">å†…ç½‘ç©¿é€ â†’ + æ·»åŠ æ˜ å°„</span><br><span class="line"></span><br><span class="line">ç¬¬ä¸€ä¸ªæ˜ å°„ (FTPæ§åˆ¶é€šé“):</span><br><span class="line">- åº”ç”¨åç§°: FTP-Control</span><br><span class="line">- åº”ç”¨ç±»å‹: TCP</span><br><span class="line">- å†…ç½‘ä¸»æœºIP: 192.168.x.x (æœåŠ¡å™¨å†…ç½‘IP)</span><br><span class="line">- å†…ç½‘ç«¯å£: 21</span><br></pre></td></tr></table></figure></li></ol><h3 id="4-2-ğŸ”—-è·å–å¤–ç½‘è®¿é—®åœ°å€"><a href="#4-2-ğŸ”—-è·å–å¤–ç½‘è®¿é—®åœ°å€" class="headerlink" title="4.2 ğŸ”— è·å–å¤–ç½‘è®¿é—®åœ°å€"></a>4.2 ğŸ”— è·å–å¤–ç½‘è®¿é—®åœ°å€</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">    participant U as ç”¨æˆ·</span><br><span class="line">    participant P as èŠ±ç”Ÿå£³å®¢æˆ·ç«¯</span><br><span class="line">    participant S as èŠ±ç”Ÿå£³æœåŠ¡å™¨</span><br><span class="line">    participant F as FileZilla Server</span><br><span class="line"></span><br><span class="line">    U-&gt;&gt;P: æ·»åŠ æ˜ å°„é…ç½®</span><br><span class="line">    P-&gt;&gt;S: æäº¤æ˜ å°„è¯·æ±‚</span><br><span class="line">    S-&gt;&gt;S: ç”Ÿæˆå¤–ç½‘åŸŸå</span><br><span class="line">    S-&gt;&gt;P: è¿”å›å¤–ç½‘è®¿é—®åœ°å€</span><br><span class="line">    P-&gt;&gt;U: æ˜¾ç¤ºå¤–ç½‘åœ°å€</span><br></pre></td></tr></table></figure><p><strong>è·å–çš„ä¿¡æ¯</strong>:</p><ul><li>å¤–ç½‘åŸŸå: <code>xxxx.vicp.cc</code></li><li>å¤–ç½‘ç«¯å£: <code>12345</code> (ç¤ºä¾‹)</li></ul><hr><h2 id="5-ğŸ”„-FTP-è¢«åŠ¨æ¨¡å¼é…ç½®"><a href="#5-ğŸ”„-FTP-è¢«åŠ¨æ¨¡å¼é…ç½®" class="headerlink" title="5. ğŸ”„ FTP è¢«åŠ¨æ¨¡å¼é…ç½®"></a>5. ğŸ”„ FTP è¢«åŠ¨æ¨¡å¼é…ç½®</h2><h3 id="5-1-ğŸ¯-ç†è§£è¢«åŠ¨æ¨¡å¼"><a href="#5-1-ğŸ¯-ç†è§£è¢«åŠ¨æ¨¡å¼" class="headerlink" title="5.1 ğŸ¯ ç†è§£è¢«åŠ¨æ¨¡å¼"></a>5.1 ğŸ¯ ç†è§£è¢«åŠ¨æ¨¡å¼</h3><p>FTP åè®®éœ€è¦ä¸¤ä¸ªé€šé“ï¼š</p><ul><li><strong>æ§åˆ¶é€šé“</strong>: ç«¯å£ 21ï¼Œç”¨äºå‘é€å‘½ä»¤</li><li><strong>æ•°æ®é€šé“</strong>: åŠ¨æ€ç«¯å£ï¼Œç”¨äºä¼ è¾“æ•°æ®</li></ul><h3 id="5-2-ğŸ“¡-æ·»åŠ æ•°æ®ç«¯å£æ˜ å°„"><a href="#5-2-ğŸ“¡-æ·»åŠ æ•°æ®ç«¯å£æ˜ å°„" class="headerlink" title="5.2 ğŸ“¡ æ·»åŠ æ•°æ®ç«¯å£æ˜ å°„"></a>5.2 ğŸ“¡ æ·»åŠ æ•°æ®ç«¯å£æ˜ å°„</h3><ol><li><p><strong>åœ¨èŠ±ç”Ÿå£³ä¸­æ·»åŠ ç¬¬äºŒä¸ªæ˜ å°„</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ç¬¬äºŒä¸ªæ˜ å°„ (FTPæ•°æ®é€šé“):</span><br><span class="line">- åº”ç”¨åç§°: FTP-Data</span><br><span class="line">- åº”ç”¨ç±»å‹: TCP</span><br><span class="line">- å†…ç½‘ä¸»æœºIP: 192.168.x.x (åŒä¸Š)</span><br><span class="line">- å†…ç½‘ç«¯å£: 60000 (ä¸´æ—¶è®¾ç½®)</span><br></pre></td></tr></table></figure></li><li><p><strong>è®°ä¸‹å¤–ç½‘ç«¯å£</strong></p><ul><li>å‡è®¾ç”Ÿæˆçš„å¤–ç½‘ç«¯å£ä¸º <code>10418</code></li><li>éœ€è¦ä¿®æ”¹å†…ç½‘ç«¯å£ä¸ä¹‹åŒ¹é…</li></ul></li><li><p><strong>ä¿®æ­£ç«¯å£æ˜ å°„</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ç¼–è¾‘ FTP-Data æ˜ å°„:</span><br><span class="line">- å°†å†…ç½‘ç«¯å£æ”¹ä¸º: 10418</span><br><span class="line">- ç¡®ä¿å†…å¤–ç«¯å£ä¸€è‡´</span><br></pre></td></tr></table></figure></li></ol><h3 id="5-3-âš™ï¸-FileZilla-è¢«åŠ¨æ¨¡å¼è®¾ç½®"><a href="#5-3-âš™ï¸-FileZilla-è¢«åŠ¨æ¨¡å¼è®¾ç½®" class="headerlink" title="5.3 âš™ï¸ FileZilla è¢«åŠ¨æ¨¡å¼è®¾ç½®"></a>5.3 âš™ï¸ FileZilla è¢«åŠ¨æ¨¡å¼è®¾ç½®</h3><ol><li><p><strong>è¿›å…¥è¢«åŠ¨æ¨¡å¼è®¾ç½®</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Edit â†’ Settings â†’ Passive mode settings</span><br></pre></td></tr></table></figure></li><li><p><strong>é…ç½®è¢«åŠ¨æ¨¡å¼å‚æ•°</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">âœ“ Use custom port range</span><br><span class="line">- Custom port range: 10418-10418</span><br><span class="line"></span><br><span class="line">âœ“ Use the following IP</span><br><span class="line">- IP: xxxx.vicp.cc (èŠ±ç”Ÿå£³åŸŸå)</span><br></pre></td></tr></table></figure></li></ol><h3 id="4-4-ğŸ›¡ï¸-å®‰å…¨é…ç½®å»ºè®®"><a href="#4-4-ğŸ›¡ï¸-å®‰å…¨é…ç½®å»ºè®®" class="headerlink" title="4.4 ğŸ›¡ï¸ å®‰å…¨é…ç½®å»ºè®®"></a>4.4 ğŸ›¡ï¸ å®‰å…¨é…ç½®å»ºè®®</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    A[FTPå®‰å…¨é…ç½®] --&gt; B[å¯ç”¨SSL/TLS]</span><br><span class="line">    A --&gt; C[é™åˆ¶IPè®¿é—®]</span><br><span class="line">    A --&gt; D[å¼ºå¯†ç ç­–ç•¥]</span><br><span class="line">    A --&gt; E[æ—¥å¿—ç›‘æ§]</span><br><span class="line"></span><br><span class="line">    B --&gt; B1[ç”Ÿæˆè‡ªç­¾åè¯ä¹¦]</span><br><span class="line">    B --&gt; B2[å¼ºåˆ¶åŠ å¯†è¿æ¥]</span><br><span class="line"></span><br><span class="line">    C --&gt; C1[IPç™½åå•]</span><br><span class="line">    C --&gt; C2[åœ°ç†ä½ç½®é™åˆ¶]</span><br><span class="line"></span><br><span class="line">    D --&gt; D1[å¯†ç å¤æ‚åº¦è¦æ±‚]</span><br><span class="line">    D --&gt; D2[å®šæœŸæ›´æ¢å¯†ç ]</span><br><span class="line"></span><br><span class="line">    E --&gt; E1[è®¿é—®æ—¥å¿—]</span><br><span class="line">    E --&gt; E2[å¼‚å¸¸å‘Šè­¦]</span><br></pre></td></tr></table></figure><hr><h2 id="6-ğŸ”¥-Windows-é˜²ç«å¢™è®¾ç½®"><a href="#6-ğŸ”¥-Windows-é˜²ç«å¢™è®¾ç½®" class="headerlink" title="6. ğŸ”¥ Windows é˜²ç«å¢™è®¾ç½®"></a>6. ğŸ”¥ Windows é˜²ç«å¢™è®¾ç½®</h2><h3 id="6-1-ğŸ›¡ï¸-æ·»åŠ é˜²ç«å¢™è§„åˆ™"><a href="#6-1-ğŸ›¡ï¸-æ·»åŠ é˜²ç«å¢™è§„åˆ™" class="headerlink" title="6.1 ğŸ›¡ï¸ æ·»åŠ é˜²ç«å¢™è§„åˆ™"></a>6.1 ğŸ›¡ï¸ æ·»åŠ é˜²ç«å¢™è§„åˆ™</h3><ol><li><p><strong>æ‰“å¼€ Windows é˜²ç«å¢™</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ§åˆ¶é¢æ¿ â†’ Windows Defender é˜²ç«å¢™ â†’ é«˜çº§è®¾ç½®</span><br></pre></td></tr></table></figure></li><li><p><strong>æ·»åŠ å…¥ç«™è§„åˆ™</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">å…¥ç«™è§„åˆ™ â†’ æ–°å»ºè§„åˆ™</span><br><span class="line"></span><br><span class="line">è§„åˆ™1 (FTPæ§åˆ¶):</span><br><span class="line">- ç«¯å£: TCP 21</span><br><span class="line">- æ“ä½œ: å…è®¸è¿æ¥</span><br><span class="line">- é…ç½®æ–‡ä»¶: åŸŸã€ä¸“ç”¨ã€å…¬ç”¨</span><br><span class="line"></span><br><span class="line">è§„åˆ™2 (FTPæ•°æ®):</span><br><span class="line">- ç«¯å£: TCP 10418</span><br><span class="line">- æ“ä½œ: å…è®¸è¿æ¥</span><br><span class="line">- é…ç½®æ–‡ä»¶: åŸŸã€ä¸“ç”¨ã€å…¬ç”¨</span><br></pre></td></tr></table></figure></li></ol><h3 id="6-2-ğŸ”§-éªŒè¯é˜²ç«å¢™é…ç½®"><a href="#6-2-ğŸ”§-éªŒè¯é˜²ç«å¢™é…ç½®" class="headerlink" title="6.2 ğŸ”§ éªŒè¯é˜²ç«å¢™é…ç½®"></a>6.2 ğŸ”§ éªŒè¯é˜²ç«å¢™é…ç½®</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># FileZilla ç«¯å£è½¬å‘æŒ‡å—</span></span><br><span class="line">telnet localhost 21</span><br><span class="line">telnet localhost 10418</span><br><span class="line"></span><br><span class="line"><span class="comment"># FileZilla ç«¯å£è½¬å‘æŒ‡å—</span></span><br><span class="line">netsh advfirewall show allprofiles</span><br></pre></td></tr></table></figure><hr><h2 id="7-ğŸ§ª-å¤–ç½‘è¿æ¥æµ‹è¯•"><a href="#7-ğŸ§ª-å¤–ç½‘è¿æ¥æµ‹è¯•" class="headerlink" title="7. ğŸ§ª å¤–ç½‘è¿æ¥æµ‹è¯•"></a>7. ğŸ§ª å¤–ç½‘è¿æ¥æµ‹è¯•</h2><h3 id="7-1-ğŸ”—-ä½¿ç”¨-FileZilla-Client-æµ‹è¯•"><a href="#7-1-ğŸ”—-ä½¿ç”¨-FileZilla-Client-æµ‹è¯•" class="headerlink" title="7.1 ğŸ”— ä½¿ç”¨ FileZilla Client æµ‹è¯•"></a>7.1 ğŸ”— ä½¿ç”¨ FileZilla Client æµ‹è¯•</h3><ol><li><p><strong>ä¸‹è½½ FileZilla Client</strong></p><ul><li>è®¿é—® FileZilla å®˜ç½‘ä¸‹è½½å®¢æˆ·ç«¯</li><li>å®‰è£…å¹¶å¯åŠ¨</li></ul></li><li><p><strong>é…ç½®ç«™ç‚¹è¿æ¥</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ä¸»æœº: xxxx.vicp.cc:21</span><br><span class="line">ç”¨æˆ·å: user1</span><br><span class="line">å¯†ç : [è®¾ç½®çš„å¯†ç ]</span><br><span class="line">ç«¯å£: 21</span><br><span class="line">ä¼ è¾“æ¨¡å¼: è¢«åŠ¨æ¨¡å¼</span><br></pre></td></tr></table></figure></li><li><p><strong>è¿æ¥æµ‹è¯•</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">    participant C as FileZilla Client</span><br><span class="line">    participant H as èŠ±ç”Ÿå£³</span><br><span class="line">    participant S as å†…ç½‘æœåŠ¡å™¨</span><br><span class="line">    participant F as FileZilla Server</span><br><span class="line"></span><br><span class="line">    C-&gt;&gt;H: è¿æ¥è¯·æ±‚ (ç«¯å£21)</span><br><span class="line">    H-&gt;&gt;S: è½¬å‘è¿æ¥</span><br><span class="line">    S-&gt;&gt;F: FTPæ§åˆ¶è¿æ¥</span><br><span class="line">    F-&gt;&gt;S: å“åº”è¢«åŠ¨ç«¯å£</span><br><span class="line">    S-&gt;&gt;H: è½¬å‘è¢«åŠ¨ç«¯å£ä¿¡æ¯</span><br><span class="line">    H-&gt;&gt;C: è¿”å›æ•°æ®ç«¯å£</span><br><span class="line">    C-&gt;&gt;H: æ•°æ®è¿æ¥ (ç«¯å£10418)</span><br><span class="line">    H-&gt;&gt;S: è½¬å‘æ•°æ®è¿æ¥</span><br><span class="line">    S-&gt;&gt;F: FTPæ•°æ®è¿æ¥</span><br></pre></td></tr></table></figure></li></ol><h3 id="7-2-ğŸ“Š-æµ‹è¯•ç»“æœæ£€æŸ¥"><a href="#7-2-ğŸ“Š-æµ‹è¯•ç»“æœæ£€æŸ¥" class="headerlink" title="7.2 ğŸ“Š æµ‹è¯•ç»“æœæ£€æŸ¥"></a>7.2 ğŸ“Š æµ‹è¯•ç»“æœæ£€æŸ¥</h3><p><strong>æˆåŠŸæ ‡å¿—</strong>:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">âœ… çŠ¶æ€: è¿æ¥æˆåŠŸ</span><br><span class="line">âœ… ç›®å½•åˆ—è¡¨: æ˜¾ç¤ºå…±äº«æ–‡ä»¶å¤¹å†…å®¹</span><br><span class="line">âœ… æ–‡ä»¶ä¸‹è½½: å¯ä»¥æ­£å¸¸ä¸‹è½½æ–‡ä»¶</span><br><span class="line">âœ… æ–‡ä»¶ä¸Šä¼ : å¯ä»¥æ­£å¸¸ä¸Šä¼ æ–‡ä»¶ (å¦‚æœæƒé™å…è®¸)</span><br></pre></td></tr></table></figure><h3 id="7-3-ğŸŒ-å…¶ä»–-FTP-å®¢æˆ·ç«¯æµ‹è¯•"><a href="#7-3-ğŸŒ-å…¶ä»–-FTP-å®¢æˆ·ç«¯æµ‹è¯•" class="headerlink" title="7.3 ğŸŒ å…¶ä»– FTP å®¢æˆ·ç«¯æµ‹è¯•"></a>7.3 ğŸŒ å…¶ä»– FTP å®¢æˆ·ç«¯æµ‹è¯•</h3><h4 id="Windows-èµ„æºç®¡ç†å™¨"><a href="#Windows-èµ„æºç®¡ç†å™¨" class="headerlink" title="Windows èµ„æºç®¡ç†å™¨"></a>Windows èµ„æºç®¡ç†å™¨</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">åœ°å€æ è¾“å…¥: ftp://user1:password@xxxx.vicp.cc:21</span><br></pre></td></tr></table></figure><h4 id="æµè§ˆå™¨è®¿é—®"><a href="#æµè§ˆå™¨è®¿é—®" class="headerlink" title="æµè§ˆå™¨è®¿é—®"></a>æµè§ˆå™¨è®¿é—®</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è®¿é—®: ftp://xxxx.vicp.cc:21</span><br></pre></td></tr></table></figure><h4 id="å‘½ä»¤è¡Œæµ‹è¯•"><a href="#å‘½ä»¤è¡Œæµ‹è¯•" class="headerlink" title="å‘½ä»¤è¡Œæµ‹è¯•"></a>å‘½ä»¤è¡Œæµ‹è¯•</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ftp xxxx.vicp.cc:21</span><br><span class="line">user1</span><br><span class="line">password</span><br><span class="line"><span class="built_in">ls</span></span><br></pre></td></tr></table></figure><hr><h2 id="8-ğŸ”§-æ•…éšœæ’é™¤"><a href="#8-ğŸ”§-æ•…éšœæ’é™¤" class="headerlink" title="8. ğŸ”§ æ•…éšœæ’é™¤"></a>8. ğŸ”§ æ•…éšœæ’é™¤</h2><h3 id="8-1-âŒ-å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ"><a href="#8-1-âŒ-å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ" class="headerlink" title="8.1 âŒ å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ"></a>8.1 âŒ å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ</h3><h4 id="é—®é¢˜1-è¿æ¥è¶…æ—¶"><a href="#é—®é¢˜1-è¿æ¥è¶…æ—¶" class="headerlink" title="é—®é¢˜1: è¿æ¥è¶…æ—¶"></a>é—®é¢˜1: è¿æ¥è¶…æ—¶</h4><p><strong>ç—‡çŠ¶</strong>: è¿æ¥æ—¶é•¿æ—¶é—´æ— å“åº”</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    A[è¿æ¥è¶…æ—¶] --&gt; B&#123;é—®é¢˜æ’æŸ¥&#125;</span><br><span class="line">    B --&gt; C[æ£€æŸ¥èŠ±ç”Ÿå£³æ˜ å°„]</span><br><span class="line">    B --&gt; D[æ£€æŸ¥é˜²ç«å¢™è®¾ç½®]</span><br><span class="line">    B --&gt; E[æ£€æŸ¥FTPæœåŠ¡çŠ¶æ€]</span><br><span class="line"></span><br><span class="line">    C --&gt; C1[ç¡®è®¤æ˜ å°„é…ç½®æ­£ç¡®]</span><br><span class="line">    D --&gt; D1[ç¡®è®¤ç«¯å£å·²å¼€æ”¾]</span><br><span class="line">    E --&gt; E1[ç¡®è®¤æœåŠ¡æ­£åœ¨è¿è¡Œ]</span><br></pre></td></tr></table></figure><p><strong>è§£å†³æ–¹æ¡ˆ</strong>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># FileZilla ç«¯å£è½¬å‘æŒ‡å—</span></span><br><span class="line"><span class="comment"># FileZilla ç«¯å£è½¬å‘æŒ‡å—</span></span><br><span class="line"><span class="comment"># FileZilla ç«¯å£è½¬å‘æŒ‡å—</span></span><br><span class="line">ftp localhost:21</span><br><span class="line"></span><br><span class="line"><span class="comment"># FileZilla ç«¯å£è½¬å‘æŒ‡å—</span></span><br><span class="line">services.msc â†’ æŸ¥æ‰¾ FileZilla Server</span><br></pre></td></tr></table></figure><h4 id="é—®é¢˜2-èƒ½è¿æ¥ä½†æ— æ³•åˆ—å‡ºç›®å½•"><a href="#é—®é¢˜2-èƒ½è¿æ¥ä½†æ— æ³•åˆ—å‡ºç›®å½•" class="headerlink" title="é—®é¢˜2: èƒ½è¿æ¥ä½†æ— æ³•åˆ—å‡ºç›®å½•"></a>é—®é¢˜2: èƒ½è¿æ¥ä½†æ— æ³•åˆ—å‡ºç›®å½•</h4><p><strong>ç—‡çŠ¶</strong>: è¿æ¥æˆåŠŸä½†çœ‹ä¸åˆ°æ–‡ä»¶åˆ—è¡¨</p><p><strong>åŸå› åˆ†æ</strong>:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ä¸»è¦åŸå› : è¢«åŠ¨æ¨¡å¼é…ç½®é”™è¯¯</span><br><span class="line">- æ•°æ®ç«¯å£æ˜ å°„ä¸æ­£ç¡®</span><br><span class="line">- FileZillaè¢«åŠ¨æ¨¡å¼è®¾ç½®é—®é¢˜</span><br></pre></td></tr></table></figure><p><strong>è§£å†³æ–¹æ¡ˆ</strong>:</p><ol><li>é‡æ–°é…ç½®è¢«åŠ¨æ¨¡å¼ç«¯å£</li><li>ç¡®ä¿ FileZilla ä¸­è®¾ç½®çš„å¤–ç½‘IPæ­£ç¡®</li><li>æ£€æŸ¥æ•°æ®ç«¯å£çš„é˜²ç«å¢™è§„åˆ™</li></ol><h4 id="é—®é¢˜3-ç™»å½•è®¤è¯å¤±è´¥"><a href="#é—®é¢˜3-ç™»å½•è®¤è¯å¤±è´¥" class="headerlink" title="é—®é¢˜3: ç™»å½•è®¤è¯å¤±è´¥"></a>é—®é¢˜3: ç™»å½•è®¤è¯å¤±è´¥</h4><p><strong>ç—‡çŠ¶</strong>: ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># FileZilla ç«¯å£è½¬å‘æŒ‡å—</span></span><br><span class="line">FileZilla Serverç®¡ç†ç•Œé¢ â†’ Edit â†’ Users</span><br><span class="line">â†’ é€‰æ‹©ç”¨æˆ· â†’ é‡æ–°è®¾ç½®å¯†ç </span><br><span class="line"></span><br><span class="line"><span class="comment"># FileZilla ç«¯å£è½¬å‘æŒ‡å—</span></span><br><span class="line">ç¡®è®¤ç”¨æˆ·æœ‰è‡³å°‘ä¸€ä¸ªå…±äº«æ–‡ä»¶å¤¹</span><br><span class="line">ç¡®è®¤ç”¨æˆ·æœ‰è¯»å–æƒé™</span><br></pre></td></tr></table></figure><h3 id="8-2-ğŸ”-é«˜çº§æ•…éšœæ’é™¤"><a href="#8-2-ğŸ”-é«˜çº§æ•…éšœæ’é™¤" class="headerlink" title="8.2 ğŸ” é«˜çº§æ•…éšœæ’é™¤"></a>8.2 ğŸ” é«˜çº§æ•…éšœæ’é™¤</h3><h4 id="ç½‘ç»œè¯Šæ–­å·¥å…·"><a href="#ç½‘ç»œè¯Šæ–­å·¥å…·" class="headerlink" title="ç½‘ç»œè¯Šæ–­å·¥å…·"></a>ç½‘ç»œè¯Šæ–­å·¥å…·</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># FileZilla ç«¯å£è½¬å‘æŒ‡å—</span></span><br><span class="line">nmap -p 21,10418 localhost</span><br><span class="line"></span><br><span class="line"><span class="comment"># FileZilla ç«¯å£è½¬å‘æŒ‡å—</span></span><br><span class="line">telnet localhost 21</span><br><span class="line">telnet localhost 10418</span><br><span class="line"></span><br><span class="line"><span class="comment"># FileZilla ç«¯å£è½¬å‘æŒ‡å—</span></span><br><span class="line">tracert xxxx.vicp.cc</span><br></pre></td></tr></table></figure><h4 id="æ—¥å¿—åˆ†æ"><a href="#æ—¥å¿—åˆ†æ" class="headerlink" title="æ—¥å¿—åˆ†æ"></a>æ—¥å¿—åˆ†æ</h4><ol><li><p><strong>FileZilla Server æ—¥å¿—</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ç¼–è¾‘ â†’ è®¾ç½® â†’ æ—¥å¿—æ–‡ä»¶</span><br><span class="line">- å¯ç”¨æ—¥å¿—è®°å½•</span><br><span class="line">- æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯</span><br></pre></td></tr></table></figure></li><li><p><strong>Windows äº‹ä»¶æ—¥å¿—</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">äº‹ä»¶æŸ¥çœ‹å™¨ â†’ Windows æ—¥å¿— â†’ åº”ç”¨ç¨‹åº</span><br><span class="line">- æŸ¥æ‰¾ä¸ FileZilla ç›¸å…³çš„é”™è¯¯</span><br></pre></td></tr></table></figure></li></ol><h3 id="8-3-ğŸ“-è·å–æ”¯æŒ"><a href="#8-3-ğŸ“-è·å–æ”¯æŒ" class="headerlink" title="8.3 ğŸ“ è·å–æ”¯æŒ"></a>8.3 ğŸ“ è·å–æ”¯æŒ</h3><p><strong>å®˜æ–¹èµ„æº</strong>:</p><ul><li><a href="https://wiki.filezilla-project.org/">FileZilla å®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://hsk.oray.com/support/">èŠ±ç”Ÿå£³æŠ€æœ¯æ”¯æŒ</a></li><li><a href="https://tools.ietf.org/html/rfc959">FTP åè®®æ–‡æ¡£</a></li></ul><p><strong>ç¤¾åŒºæ”¯æŒ</strong>:</p><ul><li>FileZilla è®ºå›</li><li>èŠ±ç”Ÿå£³ç”¨æˆ·ç¤¾åŒº</li><li>Stack Overflow æŠ€æœ¯é—®ç­”</li></ul><hr><h2 id="ğŸ“Š-æ€§èƒ½ä¼˜åŒ–å»ºè®®"><a href="#ğŸ“Š-æ€§èƒ½ä¼˜åŒ–å»ºè®®" class="headerlink" title="ğŸ“Š æ€§èƒ½ä¼˜åŒ–å»ºè®®"></a>ğŸ“Š æ€§èƒ½ä¼˜åŒ–å»ºè®®</h2><h3 id="9-1-âš¡-æœåŠ¡å™¨ä¼˜åŒ–"><a href="#9-1-âš¡-æœåŠ¡å™¨ä¼˜åŒ–" class="headerlink" title="9.1 âš¡ æœåŠ¡å™¨ä¼˜åŒ–"></a>9.1 âš¡ æœåŠ¡å™¨ä¼˜åŒ–</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">    A[æ€§èƒ½ä¼˜åŒ–] --&gt; B[ç½‘ç»œä¼˜åŒ–]</span><br><span class="line">    A --&gt; C[ç¡¬ä»¶ä¼˜åŒ–]</span><br><span class="line">    A --&gt; D[è½¯ä»¶é…ç½®]</span><br><span class="line"></span><br><span class="line">    B --&gt; B1[æé«˜å¸¦å®½]</span><br><span class="line">    B --&gt; B2[ä¼˜åŒ–MTU]</span><br><span class="line"></span><br><span class="line">    C --&gt; C1[å‡çº§CPU]</span><br><span class="line">    C --&gt; C2[å¢åŠ å†…å­˜]</span><br><span class="line">    C --&gt; C3[SSDç¡¬ç›˜]</span><br><span class="line"></span><br><span class="line">    D --&gt; D1[è°ƒæ•´è¿æ¥æ•°]</span><br><span class="line">    D --&gt; D2[å¯ç”¨ç¼“å­˜]</span><br><span class="line">    D --&gt; D3[ä¼˜åŒ–æ—¥å¿—]</span><br></pre></td></tr></table></figure><h3 id="9-2-ğŸ”’-å®‰å…¨åŠ å›º"><a href="#9-2-ğŸ”’-å®‰å…¨åŠ å›º" class="headerlink" title="9.2 ğŸ”’ å®‰å…¨åŠ å›º"></a>9.2 ğŸ”’ å®‰å…¨åŠ å›º</h3><ol><li><strong>å®šæœŸæ›´æ–°</strong> - ä¿æŒ FileZilla Server ä¸ºæœ€æ–°ç‰ˆæœ¬</li><li><strong>ç›‘æ§è®¿é—®</strong> - è®¾ç½®å¼‚å¸¸è®¿é—®å‘Šè­¦</li><li><strong>å¤‡ä»½é…ç½®</strong> - å®šæœŸå¤‡ä»½ç”¨æˆ·å’Œé…ç½®ä¿¡æ¯</li><li><strong>è®¿é—®é™åˆ¶</strong> - é™åˆ¶ç‰¹å®šIPè®¿é—®</li></ol><hr><h2 id="ğŸ“š-æ€»ç»“"><a href="#ğŸ“š-æ€»ç»“" class="headerlink" title="ğŸ“š æ€»ç»“"></a>ğŸ“š æ€»ç»“</h2><h3 id="âœ…-é…ç½®å®Œæˆæ¸…å•"><a href="#âœ…-é…ç½®å®Œæˆæ¸…å•" class="headerlink" title="âœ… é…ç½®å®Œæˆæ¸…å•"></a>âœ… é…ç½®å®Œæˆæ¸…å•</h3><ul><li><input checked="" disabled="" type="checkbox"> FileZilla Server å®‰è£…é…ç½®</li><li><input checked="" disabled="" type="checkbox"> ç”¨æˆ·è´¦æˆ·å’Œæƒé™è®¾ç½®</li><li><input checked="" disabled="" type="checkbox"> èŠ±ç”Ÿå£³å†…ç½‘ç©¿é€é…ç½®</li><li><input checked="" disabled="" type="checkbox"> FTP è¢«åŠ¨æ¨¡å¼è®¾ç½®</li><li><input checked="" disabled="" type="checkbox"> é˜²ç«å¢™è§„åˆ™é…ç½®</li><li><input checked="" disabled="" type="checkbox"> å¤–ç½‘è¿æ¥æµ‹è¯•é€šè¿‡</li></ul><h3 id="ğŸ¯-ä½¿ç”¨åœºæ™¯"><a href="#ğŸ¯-ä½¿ç”¨åœºæ™¯" class="headerlink" title="ğŸ¯ ä½¿ç”¨åœºæ™¯"></a>ğŸ¯ ä½¿ç”¨åœºæ™¯</h3><ul><li><strong>ä¸ªäººæ–‡ä»¶åˆ†äº«</strong> - åœ¨å¤–ç½‘è®¿é—®å®¶ä¸­æ–‡ä»¶</li><li><strong>å›¢é˜Ÿåä½œ</strong> - å…±äº«é¡¹ç›®æ–‡ä»¶</li><li><strong>è¿œç¨‹å¤‡ä»½</strong> - å¤–ç½‘å¤‡ä»½é‡è¦æ•°æ®</li><li><strong>ç½‘ç«™ç»´æŠ¤</strong> - ä¸Šä¼ ä¸‹è½½ç½‘ç«™æ–‡ä»¶</li></ul><h3 id="ğŸ’¡-ç»´æŠ¤å»ºè®®"><a href="#ğŸ’¡-ç»´æŠ¤å»ºè®®" class="headerlink" title="ğŸ’¡ ç»´æŠ¤å»ºè®®"></a>ğŸ’¡ ç»´æŠ¤å»ºè®®</h3><ul><li>å®šæœŸæ£€æŸ¥èŠ±ç”Ÿå£³æ˜ å°„çŠ¶æ€</li><li>ç›‘æ§æœåŠ¡å™¨æ€§èƒ½å’Œè¿æ¥æ•°</li><li>å®šæœŸæ›´æ–°å¯†ç å’Œå®‰å…¨é…ç½®</li><li>å¤‡ä»½é‡è¦æ–‡ä»¶å’Œé…ç½®</li></ul><hr><blockquote><p><strong>ğŸ’¡ æç¤º</strong>:</p><ul><li>èŠ±ç”Ÿå£³å…è´¹ç‰ˆæœ¬é€šå¸¸é™åˆ¶æ˜ å°„æ•°é‡å’Œå¸¦å®½</li><li>ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨ä»˜è´¹ç‰ˆæœ¬è·å¾—æ›´å¥½æ€§èƒ½</li><li>å®šæœŸæ£€æŸ¥ FTP æœåŠ¡çŠ¶æ€ç¡®ä¿å¯ç”¨æ€§</li><li>é‡è¦æ•°æ®å»ºè®®ä½¿ç”¨æ›´å®‰å…¨çš„ä¼ è¾“æ–¹å¼å¦‚ SFTP</li></ul></blockquote>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;FileZilla-ç«¯å£è½¬å‘æŒ‡å—&quot;&gt;&lt;a href=&quot;#FileZilla-ç«¯å£è½¬å‘æŒ‡å—&quot; class=&quot;headerlink&quot; title=&quot;FileZilla ç«¯å£è½¬å‘æŒ‡å—&quot;&gt;&lt;/a&gt;FileZilla</summary>
        
      
    
    
    
    <category term="äº‘åŸç”Ÿè¿ç»´" scheme="https://vilaswang.github.io/categories/%E4%BA%91%E5%8E%9F%E7%94%9F%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="æŠ€æœ¯æ–‡æ¡£" scheme="https://vilaswang.github.io/tags/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/"/>
    
    <category term="æŒ‡å—" scheme="https://vilaswang.github.io/tags/%E6%8C%87%E5%8D%97/"/>
    
  </entry>
  
  <entry>
    <title>mTLS è¯ä¹¦ç”ŸæˆæŒ‡å—</title>
    <link href="https://vilaswang.github.io/posts/cb45c274/"/>
    <id>https://vilaswang.github.io/posts/cb45c274/</id>
    <published>2025-12-09T06:09:54.000Z</published>
    <updated>2025-12-17T15:36:29.302Z</updated>
    
    <content type="html"><![CDATA[<h1 id="mTLS-è¯ä¹¦ç”ŸæˆæŒ‡å—"><a href="#mTLS-è¯ä¹¦ç”ŸæˆæŒ‡å—" class="headerlink" title="mTLS è¯ä¹¦ç”ŸæˆæŒ‡å—"></a>mTLS è¯ä¹¦ç”ŸæˆæŒ‡å—</h1><h2 id="ç”Ÿæˆ-CA-è¯ä¹¦"><a href="#ç”Ÿæˆ-CA-è¯ä¹¦" class="headerlink" title="ç”Ÿæˆ CA è¯ä¹¦"></a>ç”Ÿæˆ CA è¯ä¹¦</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mTLS è¯ä¹¦ç”ŸæˆæŒ‡å—</span></span><br><span class="line">openssl genrsa -aes256 -out ca-key.pem 4096</span><br><span class="line"></span><br><span class="line"><span class="comment"># mTLS è¯ä¹¦ç”ŸæˆæŒ‡å—</span></span><br><span class="line">openssl genrsa -out ca-key.pem 4096</span><br><span class="line"></span><br><span class="line"><span class="comment"># mTLS è¯ä¹¦ç”ŸæˆæŒ‡å—</span></span><br><span class="line">openssl req -new -x509 -days 3650 -key ca-key.pem -out ca-crt.pem -sha256</span><br></pre></td></tr></table></figure><p><strong>CA è¯ä¹¦ç”Ÿæˆæ³¨æ„äº‹é¡¹ï¼š</strong></p><ul><li>Common Name: è¾“å…¥ CA åç§°ï¼Œå¦‚ â€œMy-CAâ€</li><li>Organization: è¾“å…¥ç»„ç»‡åç§°</li><li>Country: è¾“å…¥å›½å®¶ä»£ç ï¼Œå¦‚ â€œCNâ€</li><li>æœ‰æ•ˆæœŸå»ºè®®è®¾ç½®ä¸º 10 å¹´ (3650 å¤©)</li></ul><h2 id="ç”ŸæˆæœåŠ¡å™¨è¯ä¹¦"><a href="#ç”ŸæˆæœåŠ¡å™¨è¯ä¹¦" class="headerlink" title="ç”ŸæˆæœåŠ¡å™¨è¯ä¹¦"></a>ç”ŸæˆæœåŠ¡å™¨è¯ä¹¦</h2><h3 id="1-ç”ŸæˆæœåŠ¡å™¨ç§é’¥"><a href="#1-ç”ŸæˆæœåŠ¡å™¨ç§é’¥" class="headerlink" title="1. ç”ŸæˆæœåŠ¡å™¨ç§é’¥"></a>1. ç”ŸæˆæœåŠ¡å™¨ç§é’¥</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl genrsa -out server-key.pem 2048</span><br></pre></td></tr></table></figure><h3 id="2-ç”ŸæˆæœåŠ¡å™¨è¯ä¹¦ç­¾åè¯·æ±‚"><a href="#2-ç”ŸæˆæœåŠ¡å™¨è¯ä¹¦ç­¾åè¯·æ±‚" class="headerlink" title="2. ç”ŸæˆæœåŠ¡å™¨è¯ä¹¦ç­¾åè¯·æ±‚"></a>2. ç”ŸæˆæœåŠ¡å™¨è¯ä¹¦ç­¾åè¯·æ±‚</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl req -new -sha256 -key server-key.pem -out server-csr.pem</span><br></pre></td></tr></table></figure><p><strong>åœ¨æç¤ºè¾“å…¥ä¿¡æ¯æ—¶ï¼š</strong></p><ul><li><strong>Country Name</strong>: ä¸ CA è¯ä¹¦ç›¸åŒ</li><li><strong>State or Province Name</strong>: çœä»½åç§°</li><li><strong>Locality Name</strong>: åŸå¸‚åç§°</li><li><strong>Organization Name</strong>: æœåŠ¡å™¨æ‰€å±ç»„ç»‡</li><li><strong>Organizational Unit Name</strong>: éƒ¨é—¨åç§°ï¼ˆå¯é€‰ï¼‰</li><li><strong>Common Name</strong>: <strong>é‡è¦ï¼</strong> å¿…é¡»å¡«å†™æœåŠ¡å™¨çš„åŸŸåæˆ– IP åœ°å€</li><li><strong>Email Address</strong>: é‚®ç®±åœ°å€ï¼ˆå¯é€‰ï¼‰</li></ul><h3 id="3-åˆ›å»ºæœåŠ¡å™¨è¯ä¹¦æ‰©å±•é…ç½®æ–‡ä»¶"><a href="#3-åˆ›å»ºæœåŠ¡å™¨è¯ä¹¦æ‰©å±•é…ç½®æ–‡ä»¶" class="headerlink" title="3. åˆ›å»ºæœåŠ¡å™¨è¯ä¹¦æ‰©å±•é…ç½®æ–‡ä»¶"></a>3. åˆ›å»ºæœåŠ¡å™¨è¯ä¹¦æ‰©å±•é…ç½®æ–‡ä»¶</h3><p>åˆ›å»º <code>server_cert_ext.cnf</code> æ–‡ä»¶ï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[server_cert]</span></span><br><span class="line"><span class="attr">basicConstraints</span> = critical, CA:<span class="literal">FALSE</span></span><br><span class="line"><span class="attr">keyUsage</span> = critical, digitalSignature, keyEncipherment</span><br><span class="line"><span class="attr">extendedKeyUsage</span> = serverAuth</span><br><span class="line"><span class="attr">subjectKeyIdentifier</span> = hash</span><br><span class="line"><span class="attr">authorityKeyIdentifier</span> = keyid,issuer</span><br><span class="line"><span class="attr">subjectAltName</span> = @alt_names</span><br><span class="line"></span><br><span class="line"><span class="section">[alt_names]</span></span><br><span class="line"><span class="attr">DNS.1</span> = localhost</span><br><span class="line"><span class="attr">DNS.2</span> = your-domain.com</span><br><span class="line"><span class="attr">IP.1</span> = <span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line"><span class="attr">IP.2</span> = your-server-ip</span><br></pre></td></tr></table></figure><h3 id="4-ç”ŸæˆæœåŠ¡å™¨è¯ä¹¦"><a href="#4-ç”ŸæˆæœåŠ¡å™¨è¯ä¹¦" class="headerlink" title="4. ç”ŸæˆæœåŠ¡å™¨è¯ä¹¦"></a>4. ç”ŸæˆæœåŠ¡å™¨è¯ä¹¦</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">openssl x509 -req -<span class="keyword">in</span> server-csr.pem -CA ca-crt.pem -CAkey ca-key.pem -CAcreateserial -out server-crt.pem -days 365 -sha256 -extfile server_cert_ext.cnf -extensions server_cert</span><br><span class="line"></span><br><span class="line"><span class="comment"># mTLS è¯ä¹¦ç”ŸæˆæŒ‡å—</span></span><br><span class="line">openssl verify -CAfile ca-crt.pem server-crt.pem</span><br></pre></td></tr></table></figure><h3 id="5-æŸ¥çœ‹è¯ä¹¦è¯¦æƒ…"><a href="#5-æŸ¥çœ‹è¯ä¹¦è¯¦æƒ…" class="headerlink" title="5. æŸ¥çœ‹è¯ä¹¦è¯¦æƒ…"></a>5. æŸ¥çœ‹è¯ä¹¦è¯¦æƒ…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl x509 -<span class="keyword">in</span> server-crt.pem -text -noout -purpose</span><br></pre></td></tr></table></figure><h2 id="ç”Ÿæˆå®¢æˆ·ç«¯è¯ä¹¦"><a href="#ç”Ÿæˆå®¢æˆ·ç«¯è¯ä¹¦" class="headerlink" title="ç”Ÿæˆå®¢æˆ·ç«¯è¯ä¹¦"></a>ç”Ÿæˆå®¢æˆ·ç«¯è¯ä¹¦</h2><h3 id="1-ç”Ÿæˆå®¢æˆ·ç«¯ç§é’¥"><a href="#1-ç”Ÿæˆå®¢æˆ·ç«¯ç§é’¥" class="headerlink" title="1. ç”Ÿæˆå®¢æˆ·ç«¯ç§é’¥"></a>1. ç”Ÿæˆå®¢æˆ·ç«¯ç§é’¥</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl genrsa -out client-key.pem 2048</span><br></pre></td></tr></table></figure><h3 id="2-ç”Ÿæˆå®¢æˆ·ç«¯è¯ä¹¦ç­¾åè¯·æ±‚"><a href="#2-ç”Ÿæˆå®¢æˆ·ç«¯è¯ä¹¦ç­¾åè¯·æ±‚" class="headerlink" title="2. ç”Ÿæˆå®¢æˆ·ç«¯è¯ä¹¦ç­¾åè¯·æ±‚"></a>2. ç”Ÿæˆå®¢æˆ·ç«¯è¯ä¹¦ç­¾åè¯·æ±‚</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl req -new -sha256 -key client-key.pem -out client-csr.pem</span><br></pre></td></tr></table></figure><p><strong>åœ¨æç¤ºè¾“å…¥ä¿¡æ¯æ—¶ï¼š</strong></p><ul><li><strong>Country Name</strong>: ä¸ CA è¯ä¹¦ç›¸åŒ</li><li><strong>State or Province Name</strong>: çœä»½åç§°</li><li><strong>Locality Name</strong>: åŸå¸‚åç§°</li><li><strong>Organization Name</strong>: å®¢æˆ·ç«¯æ‰€å±ç»„ç»‡</li><li><strong>Organizational Unit Name</strong>: éƒ¨é—¨åç§°ï¼ˆå¯é€‰ï¼‰</li><li><strong>Common Name</strong>: å®¢æˆ·ç«¯æ ‡è¯†åç§°ï¼ˆç”¨äºåŒºåˆ†ä¸åŒå®¢æˆ·ç«¯ï¼‰</li><li><strong>Email Address</strong>: é‚®ç®±åœ°å€ï¼ˆå¯é€‰ï¼‰</li></ul><h3 id="3-åˆ›å»ºå®¢æˆ·ç«¯è¯ä¹¦æ‰©å±•é…ç½®æ–‡ä»¶"><a href="#3-åˆ›å»ºå®¢æˆ·ç«¯è¯ä¹¦æ‰©å±•é…ç½®æ–‡ä»¶" class="headerlink" title="3. åˆ›å»ºå®¢æˆ·ç«¯è¯ä¹¦æ‰©å±•é…ç½®æ–‡ä»¶"></a>3. åˆ›å»ºå®¢æˆ·ç«¯è¯ä¹¦æ‰©å±•é…ç½®æ–‡ä»¶</h3><p>åˆ›å»º <code>client_cert_ext.cnf</code> æ–‡ä»¶ï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[client_cert]</span></span><br><span class="line"><span class="attr">basicConstraints</span> = critical, CA:<span class="literal">FALSE</span></span><br><span class="line"><span class="attr">keyUsage</span> = critical, digitalSignature, keyEncipherment</span><br><span class="line"><span class="attr">extendedKeyUsage</span> = clientAuth</span><br><span class="line"><span class="attr">subjectKeyIdentifier</span> = hash</span><br><span class="line"><span class="attr">authorityKeyIdentifier</span> = keyid,issuer</span><br><span class="line"><span class="attr">subjectAltName</span> = @alt_names</span><br><span class="line"></span><br><span class="line"><span class="section">[alt_names]</span></span><br><span class="line"><span class="attr">DNS.1</span> = client</span><br><span class="line"><span class="attr">DNS.2</span> = localhost</span><br></pre></td></tr></table></figure><h3 id="4-ç”Ÿæˆå®¢æˆ·ç«¯è¯ä¹¦"><a href="#4-ç”Ÿæˆå®¢æˆ·ç«¯è¯ä¹¦" class="headerlink" title="4. ç”Ÿæˆå®¢æˆ·ç«¯è¯ä¹¦"></a>4. ç”Ÿæˆå®¢æˆ·ç«¯è¯ä¹¦</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">openssl x509 -req -<span class="keyword">in</span> client-csr.pem -CA ca-crt.pem -CAkey ca-key.pem -CAcreateserial -out client-crt.pem -days 365 -sha256 -extfile client_cert_ext.cnf -extensions client_cert</span><br><span class="line"></span><br><span class="line"><span class="comment"># mTLS è¯ä¹¦ç”ŸæˆæŒ‡å—</span></span><br><span class="line">openssl verify -CAfile ca-crt.pem client-crt.pem</span><br></pre></td></tr></table></figure><h3 id="5-æŸ¥çœ‹è¯ä¹¦è¯¦æƒ…-1"><a href="#5-æŸ¥çœ‹è¯ä¹¦è¯¦æƒ…-1" class="headerlink" title="5. æŸ¥çœ‹è¯ä¹¦è¯¦æƒ…"></a>5. æŸ¥çœ‹è¯ä¹¦è¯¦æƒ…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl x509 -<span class="keyword">in</span> client-crt.pem -text -noout -purpose</span><br></pre></td></tr></table></figure><h2 id="è¯ä¹¦éªŒè¯æµ‹è¯•"><a href="#è¯ä¹¦éªŒè¯æµ‹è¯•" class="headerlink" title="è¯ä¹¦éªŒè¯æµ‹è¯•"></a>è¯ä¹¦éªŒè¯æµ‹è¯•</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mTLS è¯ä¹¦ç”ŸæˆæŒ‡å—</span></span><br><span class="line">openssl s_server -cert server-crt.pem -key server-key.pem -CAfile ca-crt.pem -Verify 1 -port 8443</span><br><span class="line"></span><br><span class="line"><span class="comment"># mTLS è¯ä¹¦ç”ŸæˆæŒ‡å—</span></span><br><span class="line">openssl s_client -connect localhost:8443 -cert client-crt.pem -key client-key.pem -CAfile ca-crt.pem</span><br></pre></td></tr></table></figure><h2 id="æ–‡ä»¶è¯´æ˜"><a href="#æ–‡ä»¶è¯´æ˜" class="headerlink" title="æ–‡ä»¶è¯´æ˜"></a>æ–‡ä»¶è¯´æ˜</h2><ul><li><code>ca-key.pem</code>: CA ç§é’¥ï¼ˆå¦¥å–„ä¿ç®¡ï¼‰</li><li><code>ca-crt.pem</code>: CA æ ¹è¯ä¹¦ï¼ˆå®¢æˆ·ç«¯éœ€è¦ä¿¡ä»»æ­¤è¯ä¹¦ï¼‰</li><li><code>ca.srl</code>: CA åºåˆ—å·æ–‡ä»¶</li><li><code>server-key.pem</code>: æœåŠ¡å™¨ç§é’¥</li><li><code>server-csr.pem</code>: æœåŠ¡å™¨è¯ä¹¦ç­¾åè¯·æ±‚ï¼ˆå¯åˆ é™¤ï¼‰</li><li><code>server-crt.pem</code>: æœåŠ¡å™¨è¯ä¹¦</li><li><code>client-key.pem</code>: å®¢æˆ·ç«¯ç§é’¥</li><li><code>client-csr.pem</code>: å®¢æˆ·ç«¯è¯ä¹¦ç­¾åè¯·æ±‚ï¼ˆå¯åˆ é™¤ï¼‰</li><li><code>client-crt.pem</code>: å®¢æˆ·ç«¯è¯ä¹¦</li></ul><h2 id="å®‰å…¨æ³¨æ„äº‹é¡¹"><a href="#å®‰å…¨æ³¨æ„äº‹é¡¹" class="headerlink" title="å®‰å…¨æ³¨æ„äº‹é¡¹"></a>å®‰å…¨æ³¨æ„äº‹é¡¹</h2><ol><li><strong>ç§é’¥ä¿æŠ¤</strong>: æ‰€æœ‰ <code>.pem</code> ç§é’¥æ–‡ä»¶å¿…é¡»ä¸¥æ ¼ä¿æŠ¤ï¼Œä¸è¦æ³„éœ²</li><li><strong>è¯ä¹¦æœ‰æ•ˆæœŸ</strong>: å®šæœŸæ£€æŸ¥å’Œæ›´æ–°å³å°†è¿‡æœŸçš„è¯ä¹¦</li><li><strong>Common Name</strong>: æœåŠ¡å™¨è¯ä¹¦çš„ Common Name å¿…é¡»ä¸å®é™…è®¿é—®çš„åŸŸååŒ¹é…</li><li><strong>SAN æ‰©å±•</strong>: ç°ä»£æµè§ˆå™¨è¦æ±‚ä½¿ç”¨ SAN (Subject Alternative Name) è€Œä¸æ˜¯ CN</li><li><strong>å¯†ç ä¿æŠ¤</strong>: ç”Ÿäº§ç¯å¢ƒä¸­å»ºè®®ä¸ºç§é’¥è®¾ç½®å¯†ç ä¿æŠ¤</li></ol><h2 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h2><ul><li><strong>æœåŠ¡å™¨ç«¯</strong>: é…ç½® web æœåŠ¡å™¨ï¼ˆNginxã€Apache ç­‰ï¼‰ä½¿ç”¨ <code>server-crt.pem</code> å’Œ <code>server-key.pem</code></li><li><strong>å®¢æˆ·ç«¯</strong>: é…ç½®åº”ç”¨ç¨‹åºä½¿ç”¨ <code>client-crt.pem</code> å’Œ <code>client-key.pem</code> è¿›è¡ŒåŒå‘è®¤è¯</li><li><strong>ä¿¡ä»»é“¾</strong>: å®¢æˆ·ç«¯éœ€è¦å°† <code>ca-crt.pem</code> æ·»åŠ åˆ°ä¿¡ä»»è¯ä¹¦å­˜å‚¨ä¸­</li></ul>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;mTLS-è¯ä¹¦ç”ŸæˆæŒ‡å—&quot;&gt;&lt;a href=&quot;#mTLS-è¯ä¹¦ç”ŸæˆæŒ‡å—&quot; class=&quot;headerlink&quot; title=&quot;mTLS è¯ä¹¦ç”ŸæˆæŒ‡å—&quot;&gt;&lt;/a&gt;mTLS è¯ä¹¦ç”ŸæˆæŒ‡å—&lt;/h1&gt;&lt;h2 id=&quot;ç”Ÿæˆ-CA-è¯ä¹¦&quot;&gt;&lt;a</summary>
        
      
    
    
    
    <category term="Webæ¶æ„å®‰å…¨" scheme="https://vilaswang.github.io/categories/Web%E6%9E%B6%E6%9E%84%E5%AE%89%E5%85%A8/"/>
    
    
    <category term="æŠ€æœ¯æ–‡æ¡£" scheme="https://vilaswang.github.io/tags/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/"/>
    
    <category term="æŒ‡å—" scheme="https://vilaswang.github.io/tags/%E6%8C%87%E5%8D%97/"/>
    
  </entry>
  
  <entry>
    <title>æ–‡ä»¶ç®¡ç† API è§„èŒƒ</title>
    <link href="https://vilaswang.github.io/posts/eed6fb04/"/>
    <id>https://vilaswang.github.io/posts/eed6fb04/</id>
    <published>2025-12-09T06:09:54.000Z</published>
    <updated>2025-12-17T15:36:29.297Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ–‡ä»¶ç®¡ç†-API-è§„èŒƒ"><a href="#æ–‡ä»¶ç®¡ç†-API-è§„èŒƒ" class="headerlink" title="æ–‡ä»¶ç®¡ç† API è§„èŒƒ"></a>æ–‡ä»¶ç®¡ç† API è§„èŒƒ</h1><blockquote><p><strong>æ–‡æ¡£åˆ›å»ºæ—¶é—´</strong>: 2025-11-14<br><strong>æœ€åæ›´æ–°</strong>: 2025-11-14<br><strong>ç‰ˆæœ¬</strong>: v1.0<br><strong>æ ‡ç­¾</strong>: <code>api</code>, <code>rest</code>, <code>file-management</code>, <code>authentication</code>, <code>swagger</code></p></blockquote><h2 id="ğŸ“‘-ç›®å½•"><a href="#ğŸ“‘-ç›®å½•" class="headerlink" title="ğŸ“‘ ç›®å½•"></a>ğŸ“‘ ç›®å½•</h2><ul><li><a href="#1-%E5%9F%BA%E7%A1%80%E4%BF%A1%E6%81%AF">1. åŸºç¡€ä¿¡æ¯</a></li><li><a href="#2-%E8%AE%A4%E8%AF%81%E4%B8%8E%E6%8E%88%E6%9D%83">2. è®¤è¯ä¸æˆæƒ</a></li><li><a href="#3-%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86">3. æ–‡ä»¶ç®¡ç†</a></li><li><a href="#4-%E6%96%87%E4%BB%B6%E6%94%AF%E6%8C%81">4. æ–‡ä»¶æ”¯æŒ</a></li><li><a href="#5-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86">5. é”™è¯¯å¤„ç†</a></li><li><a href="#6-%E5%AE%89%E5%85%A8%E6%9C%BA%E5%88%B6">6. å®‰å…¨æœºåˆ¶</a></li><li><a href="#7-%E9%80%9F%E7%8E%87%E9%99%90%E5%88%B6">7. é€Ÿç‡é™åˆ¶</a></li><li><a href="#8-openapi-%E8%A7%84%E8%8C%83">8. OpenAPI è§„èŒƒ</a></li></ul><hr><h2 id="1-ğŸ“‹-åŸºç¡€ä¿¡æ¯"><a href="#1-ğŸ“‹-åŸºç¡€ä¿¡æ¯" class="headerlink" title="1. ğŸ“‹ åŸºç¡€ä¿¡æ¯"></a>1. ğŸ“‹ åŸºç¡€ä¿¡æ¯</h2><table><thead><tr><th>é¡¹ç›®</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>Base URL</strong></td><td><code>/api/v1</code></td></tr><tr><td><strong>åè®®</strong></td><td>HTTPS</td></tr><tr><td><strong>æ•°æ®æ ¼å¼</strong></td><td>JSON</td></tr><tr><td><strong>è®¤è¯æ–¹å¼</strong></td><td>JWT Bearer Token</td></tr><tr><td><strong>API ç‰ˆæœ¬</strong></td><td>v1.0</td></tr></tbody></table><h3 id="ğŸ”-è®¤è¯è¯·æ±‚æ ¼å¼"><a href="#ğŸ”-è®¤è¯è¯·æ±‚æ ¼å¼" class="headerlink" title="ğŸ” è®¤è¯è¯·æ±‚æ ¼å¼"></a>ğŸ” è®¤è¯è¯·æ±‚æ ¼å¼</h3><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GET</span> <span class="string">/api/v1/files/list</span> <span class="meta">HTTP/1.1</span></span><br><span class="line"><span class="attribute">Host</span><span class="punctuation">: </span>your-domain.com</span><br><span class="line"><span class="attribute">Authorization</span><span class="punctuation">: </span>Bearer &lt;jwt_token&gt;</span><br><span class="line"><span class="attribute">Content-Type</span><span class="punctuation">: </span>application/json</span><br></pre></td></tr></table></figure><hr><h2 id="2-ğŸ”-è®¤è¯ä¸æˆæƒ"><a href="#2-ğŸ”-è®¤è¯ä¸æˆæƒ" class="headerlink" title="2. ğŸ” è®¤è¯ä¸æˆæƒ"></a>2. ğŸ” è®¤è¯ä¸æˆæƒ</h2><h3 id="2-1-ğŸ‘¤-ç”¨æˆ·æ³¨å†Œ"><a href="#2-1-ğŸ‘¤-ç”¨æˆ·æ³¨å†Œ" class="headerlink" title="2.1 ğŸ‘¤ ç”¨æˆ·æ³¨å†Œ"></a>2.1 ğŸ‘¤ ç”¨æˆ·æ³¨å†Œ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">    participant C as Client</span><br><span class="line">    participant A as API Server</span><br><span class="line">    participant D as Database</span><br><span class="line"></span><br><span class="line">    C-&gt;&gt;A: POST /auth/register</span><br><span class="line">    A-&gt;&gt;A: éªŒè¯è¾“å…¥æ•°æ®</span><br><span class="line">    A-&gt;&gt;D: æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å­˜åœ¨</span><br><span class="line">    D--&gt;&gt;A: è¿”å›æ£€æŸ¥ç»“æœ</span><br><span class="line">    A-&gt;&gt;A: åŠ å¯†å¯†ç </span><br><span class="line">    A-&gt;&gt;D: åˆ›å»ºæ–°ç”¨æˆ·</span><br><span class="line">    D--&gt;&gt;A: è¿”å›ç”¨æˆ·ä¿¡æ¯</span><br><span class="line">    A-&gt;&gt;A: ç”ŸæˆJWT Token</span><br><span class="line">    A--&gt;&gt;C: è¿”å›ç”¨æˆ·ä¿¡æ¯å’ŒToken</span><br></pre></td></tr></table></figure><h4 id="æ¥å£è¯¦æƒ…"><a href="#æ¥å£è¯¦æƒ…" class="headerlink" title="æ¥å£è¯¦æƒ…"></a>æ¥å£è¯¦æƒ…</h4><p><strong>è¯·æ±‚</strong>:</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">POST /api/v1/auth/register</span><br><span class="line"><span class="attribute">Content-Type</span><span class="punctuation">: </span>application/json</span><br></pre></td></tr></table></figure><p><strong>è¯·æ±‚ä½“</strong>:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;username&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;user@example.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;password&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;confirmPassword&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>éªŒè¯è§„åˆ™</strong>:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;username&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;required&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;minLength&quot;</span>: <span class="number">3</span>,</span><br><span class="line">        <span class="string">&quot;maxLength&quot;</span>: <span class="number">20</span>,</span><br><span class="line">        <span class="string">&quot;pattern&quot;</span>: <span class="string">&quot;^[a-zA-Z0-9_]+$&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;email&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;required&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;format&quot;</span>: <span class="string">&quot;email&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;password&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;required&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;minLength&quot;</span>: <span class="number">8</span>,</span><br><span class="line">        <span class="string">&quot;pattern&quot;</span>: <span class="string">&quot;^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&amp;])[A-Za-z\\d@$!%*?&amp;]&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æˆåŠŸå“åº” (201)</strong>:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;æ³¨å†ŒæˆåŠŸ&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;user&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;uuid&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;username&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;user@example.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;createdAt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-11-14T10:00:00Z&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;token&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="2-2-ğŸ”‘-ç”¨æˆ·ç™»å½•"><a href="#2-2-ğŸ”‘-ç”¨æˆ·ç™»å½•" class="headerlink" title="2.2 ğŸ”‘ ç”¨æˆ·ç™»å½•"></a>2.2 ğŸ”‘ ç”¨æˆ·ç™»å½•</h3><p><strong>è¯·æ±‚</strong>:</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">POST /api/v1/auth/login</span><br><span class="line"><span class="attribute">Content-Type</span><span class="punctuation">: </span>application/json</span><br></pre></td></tr></table></figure><p><strong>è¯·æ±‚ä½“</strong>:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;username&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;password&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>æˆåŠŸå“åº” (200)</strong>:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ç™»å½•æˆåŠŸ&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;user&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;uuid&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;username&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;user@example.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;lastLoginAt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-11-14T10:00:00Z&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;token&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;expiresIn&quot;</span><span class="punctuation">:</span> <span class="number">86400</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="2-3-ğŸŒ-OAuth-é›†æˆ"><a href="#2-3-ğŸŒ-OAuth-é›†æˆ" class="headerlink" title="2.3 ğŸŒ OAuth é›†æˆ"></a>2.3 ğŸŒ OAuth é›†æˆ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    A[ç”¨æˆ·ç‚¹å‡»Googleç™»å½•] --&gt; B[é‡å®šå‘åˆ°Google OAuth]</span><br><span class="line">    B --&gt; C[ç”¨æˆ·æˆæƒ]</span><br><span class="line">    C --&gt; D[Googleå›è°ƒå¤„ç†]</span><br><span class="line">    D --&gt; E[åˆ›å»ºæˆ–æŸ¥æ‰¾ç”¨æˆ·]</span><br><span class="line">    E --&gt; F[ç”ŸæˆJWT Token]</span><br><span class="line">    F --&gt; G[é‡å®šå‘åˆ°åº”ç”¨]</span><br><span class="line"></span><br><span class="line">    style A fill:#e1f5fe</span><br><span class="line">    style G fill:#e8f5e8</span><br></pre></td></tr></table></figure><hr><h2 id="3-ğŸ“-æ–‡ä»¶ç®¡ç†"><a href="#3-ğŸ“-æ–‡ä»¶ç®¡ç†" class="headerlink" title="3. ğŸ“ æ–‡ä»¶ç®¡ç†"></a>3. ğŸ“ æ–‡ä»¶ç®¡ç†</h2><h3 id="3-1-ğŸ“¤-å•æ–‡ä»¶ä¸Šä¼ "><a href="#3-1-ğŸ“¤-å•æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="3.1 ğŸ“¤ å•æ–‡ä»¶ä¸Šä¼ "></a>3.1 ğŸ“¤ å•æ–‡ä»¶ä¸Šä¼ </h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">    participant C as Client</span><br><span class="line">    participant S as API Server</span><br><span class="line">    participant F as File Storage</span><br><span class="line">    participant D as Database</span><br><span class="line"></span><br><span class="line">    C-&gt;&gt;S: POST /files/upload (multipart/form-data)</span><br><span class="line">    S-&gt;&gt;S: éªŒè¯è®¤è¯Token</span><br><span class="line">    S-&gt;&gt;S: æ–‡ä»¶ç±»å‹å’Œå¤§å°éªŒè¯</span><br><span class="line">    S-&gt;&gt;S: ç”Ÿæˆå”¯ä¸€æ–‡ä»¶å</span><br><span class="line">    S-&gt;&gt;F: ä¿å­˜æ–‡ä»¶</span><br><span class="line">    F--&gt;&gt;S: è¿”å›æ–‡ä»¶ä¿¡æ¯</span><br><span class="line">    S-&gt;&gt;D: ä¿å­˜æ–‡ä»¶å…ƒæ•°æ®</span><br><span class="line">    D--&gt;&gt;S: è¿”å›ä¿å­˜ç»“æœ</span><br><span class="line">    S--&gt;&gt;C: è¿”å›ä¸Šä¼ ç»“æœ</span><br></pre></td></tr></table></figure><h4 id="æ¥å£è¯¦æƒ…-1"><a href="#æ¥å£è¯¦æƒ…-1" class="headerlink" title="æ¥å£è¯¦æƒ…"></a>æ¥å£è¯¦æƒ…</h4><p><strong>è¯·æ±‚</strong>:</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">POST /api/v1/files/upload</span><br><span class="line"><span class="attribute">Authorization</span><span class="punctuation">: </span>Bearer &lt;token&gt;</span><br><span class="line"><span class="attribute">Content-Type</span><span class="punctuation">: </span>multipart/form-data</span><br></pre></td></tr></table></figure><p><strong>è¯·æ±‚ä½“</strong>:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file: &lt;binary_data&gt;</span><br></pre></td></tr></table></figure><p><strong>æˆåŠŸå“åº” (200)</strong>:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;æ–‡ä»¶ä¸Šä¼ æˆåŠŸ&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;file&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;uuid&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;document.pdf&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;originalName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;æˆ‘çš„æ–‡æ¡£.pdf&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">1048576</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;mimeType&quot;</span><span class="punctuation">:</span> <span class="string">&quot;application/pdf&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/uploads/2025/11/14/uuid-document.pdf&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;uploadTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-11-14T10:00:00Z&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;checksum&quot;</span><span class="punctuation">:</span> <span class="string">&quot;sha256:abc123...&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="3-2-ğŸ“¦-å¤šæ–‡ä»¶ä¸Šä¼ "><a href="#3-2-ğŸ“¦-å¤šæ–‡ä»¶ä¸Šä¼ " class="headerlink" title="3.2 ğŸ“¦ å¤šæ–‡ä»¶ä¸Šä¼ "></a>3.2 ğŸ“¦ å¤šæ–‡ä»¶ä¸Šä¼ </h3><p><strong>è¯·æ±‚</strong>:</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">POST /api/v1/files/multi-upload</span><br><span class="line"><span class="attribute">Authorization</span><span class="punctuation">: </span>Bearer &lt;token&gt;</span><br><span class="line"><span class="attribute">Content-Type</span><span class="punctuation">: </span>multipart/form-data</span><br></pre></td></tr></table></figure><p><strong>é™åˆ¶</strong>:</p><ul><li>æœ€å¤§æ–‡ä»¶æ•°é‡: 10ä¸ª</li><li>å•æ–‡ä»¶æœ€å¤§å¤§å°: 100MB</li><li>æ€»å¤§å°é™åˆ¶: 500MB</li></ul><p><strong>æˆåŠŸå“åº” (200)</strong>:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;æ–‡ä»¶ä¸Šä¼ æˆåŠŸ&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;uploaded&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;uuid1&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;file1.pdf&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">1048576</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/uploads/uuid1-file1.pdf&quot;</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;uuid2&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;file2.jpg&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">2097152</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/uploads/uuid2-file2.jpg&quot;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;failed&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;summary&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;total&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;uploaded&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;failed&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;totalSize&quot;</span><span class="punctuation">:</span> <span class="number">3145728</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="3-3-ğŸ“‹-è·å–æ–‡ä»¶åˆ—è¡¨"><a href="#3-3-ğŸ“‹-è·å–æ–‡ä»¶åˆ—è¡¨" class="headerlink" title="3.3 ğŸ“‹ è·å–æ–‡ä»¶åˆ—è¡¨"></a>3.3 ğŸ“‹ è·å–æ–‡ä»¶åˆ—è¡¨</h3><p><strong>è¯·æ±‚</strong>:</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GET /api/v1/files/list?page=1&amp;limit=20&amp;sort=name&amp;order=asc</span><br><span class="line"><span class="attribute">Authorization</span><span class="punctuation">: </span>Bearer &lt;token&gt;</span><br></pre></td></tr></table></figure><p><strong>æŸ¥è¯¢å‚æ•°</strong>:</p><table><thead><tr><th>å‚æ•°</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>page</code></td><td>integer</td><td>1</td><td>é¡µç </td></tr><tr><td><code>limit</code></td><td>integer</td><td>20</td><td>æ¯é¡µæ•°é‡ (1-100)</td></tr><tr><td><code>sort</code></td><td>string</td><td>name</td><td>æ’åºå­—æ®µ (name, size, uploadTime)</td></tr><tr><td><code>order</code></td><td>string</td><td>desc</td><td>æ’åºæ–¹å‘ (asc, desc)</td></tr><tr><td><code>search</code></td><td>string</td><td>-</td><td>æœç´¢æ–‡ä»¶å</td></tr><tr><td><code>type</code></td><td>string</td><td>-</td><td>æ–‡ä»¶ç±»å‹è¿‡æ»¤</td></tr></tbody></table><p><strong>æˆåŠŸå“åº” (200)</strong>:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Success&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;files&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;uuid&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;document.pdf&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">1048576</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;mimeType&quot;</span><span class="punctuation">:</span> <span class="string">&quot;application/pdf&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/api/v1/files/download/uuid-document.pdf&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;uploadTime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-11-14T10:00:00Z&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;downloadCount&quot;</span><span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;thumbnail&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/api/v1/files/thumbnail/uuid-document.jpg&quot;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;pagination&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;page&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;limit&quot;</span><span class="punctuation">:</span> <span class="number">20</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;total&quot;</span><span class="punctuation">:</span> <span class="number">100</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;totalPages&quot;</span><span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;hasNext&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;hasPrev&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;stats&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;totalFiles&quot;</span><span class="punctuation">:</span> <span class="number">100</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;totalSize&quot;</span><span class="punctuation">:</span> <span class="number">1073741824</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;totalDownloads&quot;</span><span class="punctuation">:</span> <span class="number">1250</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="3-4-â¬‡ï¸-æ–‡ä»¶ä¸‹è½½"><a href="#3-4-â¬‡ï¸-æ–‡ä»¶ä¸‹è½½" class="headerlink" title="3.4 â¬‡ï¸ æ–‡ä»¶ä¸‹è½½"></a>3.4 â¬‡ï¸ æ–‡ä»¶ä¸‹è½½</h3><p><strong>è¯·æ±‚</strong>:</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GET /api/v1/files/download/:filename</span><br><span class="line"><span class="attribute">Authorization</span><span class="punctuation">: </span>Bearer &lt;token&gt;</span><br></pre></td></tr></table></figure><p><strong>URL å‚æ•°</strong>:</p><ul><li><code>filename</code>: æ–‡ä»¶åæˆ–æ–‡ä»¶ID</li></ul><p><strong>åŠŸèƒ½ç‰¹æ€§</strong>:</p><ul><li>âœ… æ”¯æŒæ–­ç‚¹ç»­ä¼ </li><li>âœ… ä¸‹è½½ç»Ÿè®¡</li><li>âœ… è®¿é—®æƒé™éªŒè¯</li><li>âœ… ä¸‹è½½æ—¥å¿—è®°å½•</li></ul><p><strong>å“åº”å¤´</strong>:</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Content-Type</span><span class="punctuation">: </span>application/octet-stream</span><br><span class="line"><span class="attribute">Content-Disposition</span><span class="punctuation">: </span>attachment; filename=&quot;document.pdf&quot;</span><br><span class="line"><span class="attribute">Content-Length</span><span class="punctuation">: </span>1048576</span><br><span class="line"><span class="attribute">Accept-Ranges</span><span class="punctuation">: </span>bytes</span><br><span class="line"><span class="attribute">ETag</span><span class="punctuation">: </span>&quot;abc123...&quot;</span><br><span class="line"><span class="attribute">Last-Modified</span><span class="punctuation">: </span>Wed, 14 Nov 2025 10:00:00 GMT</span><br></pre></td></tr></table></figure><hr><h2 id="4-ğŸ“-æ–‡ä»¶æ”¯æŒ"><a href="#4-ğŸ“-æ–‡ä»¶æ”¯æŒ" class="headerlink" title="4. ğŸ“ æ–‡ä»¶æ”¯æŒ"></a>4. ğŸ“ æ–‡ä»¶æ”¯æŒ</h2><h3 id="4-1-ğŸ¨-å…è®¸çš„æ–‡ä»¶ç±»å‹"><a href="#4-1-ğŸ¨-å…è®¸çš„æ–‡ä»¶ç±»å‹" class="headerlink" title="4.1 ğŸ¨ å…è®¸çš„æ–‡ä»¶ç±»å‹"></a>4.1 ğŸ¨ å…è®¸çš„æ–‡ä»¶ç±»å‹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    A[æ”¯æŒçš„æ–‡ä»¶ç±»å‹] --&gt; B[å›¾ç‰‡æ–‡ä»¶]</span><br><span class="line">    A --&gt; C[æ–‡æ¡£æ–‡ä»¶]</span><br><span class="line">    A --&gt; D[å‹ç¼©æ–‡ä»¶]</span><br><span class="line">    A --&gt; E[ä»£ç æ–‡ä»¶]</span><br><span class="line"></span><br><span class="line">    B --&gt; B1[image/*]</span><br><span class="line">    B --&gt; B2[jpeg, png, gif, webp]</span><br><span class="line"></span><br><span class="line">    C --&gt; C1[application/pdf]</span><br><span class="line">    C --&gt; C2[application/msword]</span><br><span class="line">    C --&gt; C3[text/plain]</span><br><span class="line"></span><br><span class="line">    D --&gt; D1[application/zip]</span><br><span class="line">    D --&gt; D2[application/x-rar-compressed]</span><br><span class="line"></span><br><span class="line">    E --&gt; E1[text/x-code]</span><br><span class="line">    E --&gt; E2[application/json]</span><br></pre></td></tr></table></figure><p><strong>è¯¦ç»†MIMEç±»å‹åˆ—è¡¨</strong>:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;images&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;image/jpeg&quot;</span><span class="punctuation">,</span> <span class="string">&quot;image/png&quot;</span><span class="punctuation">,</span> <span class="string">&quot;image/gif&quot;</span><span class="punctuation">,</span> <span class="string">&quot;image/webp&quot;</span><span class="punctuation">,</span> <span class="string">&quot;image/svg+xml&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;documents&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;application/pdf&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;application/msword&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;application/vnd.openxmlformats-officedocument.wordprocessingml.document&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;application/vnd.ms-excel&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;text/plain&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;text/markdown&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;archives&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;application/zip&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;application/x-rar-compressed&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;application/x-7z-compressed&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;text/x-code&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;application/json&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;text/xml&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;application/xml&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="4-2-ğŸ“-æ–‡ä»¶å¤§å°é™åˆ¶"><a href="#4-2-ğŸ“-æ–‡ä»¶å¤§å°é™åˆ¶" class="headerlink" title="4.2 ğŸ“ æ–‡ä»¶å¤§å°é™åˆ¶"></a>4.2 ğŸ“ æ–‡ä»¶å¤§å°é™åˆ¶</h3><table><thead><tr><th>æ–‡ä»¶ç±»å‹</th><th>æœ€å¤§å¤§å°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>å›¾ç‰‡æ–‡ä»¶</strong></td><td>50MB</td><td>JPEG, PNG, GIFç­‰</td></tr><tr><td><strong>PDFæ–‡æ¡£</strong></td><td>100MB</td><td>PDFæ–‡æ¡£</td></tr><tr><td><strong>Officeæ–‡æ¡£</strong></td><td>100MB</td><td>Word, Excel, PowerPoint</td></tr><tr><td><strong>å‹ç¼©æ–‡ä»¶</strong></td><td>200MB</td><td>ZIP, RAR, 7Z</td></tr><tr><td><strong>å…¶ä»–æ–‡ä»¶</strong></td><td>50MB</td><td>å…¶ä»–å…è®¸çš„ç±»å‹</td></tr></tbody></table><h3 id="4-3-ğŸ–¼ï¸-ç¼©ç•¥å›¾ç”Ÿæˆ"><a href="#4-3-ğŸ–¼ï¸-ç¼©ç•¥å›¾ç”Ÿæˆ" class="headerlink" title="4.3 ğŸ–¼ï¸ ç¼©ç•¥å›¾ç”Ÿæˆ"></a>4.3 ğŸ–¼ï¸ ç¼©ç•¥å›¾ç”Ÿæˆ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">    A[ä¸Šä¼ æ–‡ä»¶] --&gt; B&#123;æ˜¯å¦ä¸ºå›¾ç‰‡?&#125;</span><br><span class="line">    B --&gt;|æ˜¯| C[ç”Ÿæˆç¼©ç•¥å›¾]</span><br><span class="line">    B --&gt;|å¦| D[ä½¿ç”¨é»˜è®¤å›¾æ ‡]</span><br><span class="line">    C --&gt; E[å­˜å‚¨ç¼©ç•¥å›¾]</span><br><span class="line">    D --&gt; F[è¿”å›å›¾æ ‡è·¯å¾„]</span><br><span class="line">    E --&gt; G[è¿”å›ç¼©ç•¥å›¾URL]</span><br></pre></td></tr></table></figure><p><strong>ç¼©ç•¥å›¾è§„æ ¼</strong>:</p><ul><li><strong>å°ºå¯¸</strong>: 200x200 åƒç´ </li><li><strong>æ ¼å¼</strong>: JPEG</li><li><strong>è´¨é‡</strong>: 85%</li><li><strong>å­˜å‚¨è·¯å¾„</strong>: <code>/thumbnails/{file_id}.jpg</code></li></ul><hr><h2 id="5-âŒ-é”™è¯¯å¤„ç†"><a href="#5-âŒ-é”™è¯¯å¤„ç†" class="headerlink" title="5. âŒ é”™è¯¯å¤„ç†"></a>5. âŒ é”™è¯¯å¤„ç†</h2><h3 id="5-1-ğŸ“Š-æ ‡å‡†é”™è¯¯å“åº”æ ¼å¼"><a href="#5-1-ğŸ“Š-æ ‡å‡†é”™è¯¯å“åº”æ ¼å¼" class="headerlink" title="5.1 ğŸ“Š æ ‡å‡†é”™è¯¯å“åº”æ ¼å¼"></a>5.1 ğŸ“Š æ ‡å‡†é”™è¯¯å“åº”æ ¼å¼</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;success&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;error&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ERROR_CODE&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ç”¨æˆ·å‹å¥½çš„é”™è¯¯æè¿°&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;details&quot;</span><span class="punctuation">:</span> <span class="string">&quot;è¯¦ç»†é”™è¯¯ä¿¡æ¯ï¼ˆå¼€å‘ç¯å¢ƒï¼‰&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2025-11-14T10:00:00Z&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/api/v1/files/upload&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;requestId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;uuid-for-tracking&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="5-2-ğŸ“‹-HTTP-çŠ¶æ€ç "><a href="#5-2-ğŸ“‹-HTTP-çŠ¶æ€ç " class="headerlink" title="5.2 ğŸ“‹ HTTP çŠ¶æ€ç "></a>5.2 ğŸ“‹ HTTP çŠ¶æ€ç </h3><table><thead><tr><th>çŠ¶æ€ç </th><th>è¯´æ˜</th><th>ç¤ºä¾‹åœºæ™¯</th></tr></thead><tbody><tr><td><strong>200</strong></td><td>æˆåŠŸ</td><td>æ–‡ä»¶ä¸Šä¼ æˆåŠŸ</td></tr><tr><td><strong>201</strong></td><td>åˆ›å»ºæˆåŠŸ</td><td>ç”¨æˆ·æ³¨å†ŒæˆåŠŸ</td></tr><tr><td><strong>400</strong></td><td>è¯·æ±‚é”™è¯¯</td><td>å‚æ•°éªŒè¯å¤±è´¥</td></tr><tr><td><strong>401</strong></td><td>æœªè®¤è¯</td><td>Tokenæ— æ•ˆæˆ–è¿‡æœŸ</td></tr><tr><td><strong>403</strong></td><td>æƒé™ä¸è¶³</td><td>è®¿é—®ä»–äººæ–‡ä»¶</td></tr><tr><td><strong>404</strong></td><td>èµ„æºä¸å­˜åœ¨</td><td>æ–‡ä»¶ä¸å­˜åœ¨</td></tr><tr><td><strong>409</strong></td><td>å†²çª</td><td>ç”¨æˆ·åå·²å­˜åœ¨</td></tr><tr><td><strong>413</strong></td><td>æ–‡ä»¶è¿‡å¤§</td><td>è¶…è¿‡å¤§å°é™åˆ¶</td></tr><tr><td><strong>415</strong></td><td>ä¸æ”¯æŒçš„ç±»å‹</td><td>æ–‡ä»¶ç±»å‹ä¸å…è®¸</td></tr><tr><td><strong>422</strong></td><td>éªŒè¯å¤±è´¥</td><td>ä¸šåŠ¡é€»è¾‘éªŒè¯å¤±è´¥</td></tr><tr><td><strong>429</strong></td><td>è¯·æ±‚è¿‡å¤š</td><td>è¶…å‡ºé€Ÿç‡é™åˆ¶</td></tr><tr><td><strong>500</strong></td><td>æœåŠ¡å™¨é”™è¯¯</td><td>å†…éƒ¨æœåŠ¡å™¨é”™è¯¯</td></tr></tbody></table><h3 id="5-3-ğŸ”§-é”™è¯¯ä»£ç å®šä¹‰"><a href="#5-3-ğŸ”§-é”™è¯¯ä»£ç å®šä¹‰" class="headerlink" title="5.3 ğŸ”§ é”™è¯¯ä»£ç å®šä¹‰"></a>5.3 ğŸ”§ é”™è¯¯ä»£ç å®šä¹‰</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">ErrorCodes</span> = &#123;</span><br><span class="line">    <span class="comment">// è®¤è¯ç›¸å…³</span></span><br><span class="line">    <span class="attr">AUTH_TOKEN_MISSING</span>: <span class="string">&#x27;AUTH_001&#x27;</span>,</span><br><span class="line">    <span class="attr">AUTH_TOKEN_INVALID</span>: <span class="string">&#x27;AUTH_002&#x27;</span>,</span><br><span class="line">    <span class="attr">AUTH_TOKEN_EXPIRED</span>: <span class="string">&#x27;AUTH_003&#x27;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”¨æˆ·ç›¸å…³</span></span><br><span class="line">    <span class="attr">USER_NOT_FOUND</span>: <span class="string">&#x27;USER_001&#x27;</span>,</span><br><span class="line">    <span class="attr">USER_ALREADY_EXISTS</span>: <span class="string">&#x27;USER_002&#x27;</span>,</span><br><span class="line">    <span class="attr">USER_CREDENTIALS_INVALID</span>: <span class="string">&#x27;USER_003&#x27;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ–‡ä»¶ç›¸å…³</span></span><br><span class="line">    <span class="attr">FILE_NOT_FOUND</span>: <span class="string">&#x27;FILE_001&#x27;</span>,</span><br><span class="line">    <span class="attr">FILE_TOO_LARGE</span>: <span class="string">&#x27;FILE_002&#x27;</span>,</span><br><span class="line">    <span class="attr">FILE_TYPE_NOT_ALLOWED</span>: <span class="string">&#x27;FILE_003&#x27;</span>,</span><br><span class="line">    <span class="attr">FILE_UPLOAD_FAILED</span>: <span class="string">&#x27;FILE_004&#x27;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç³»ç»Ÿç›¸å…³</span></span><br><span class="line">    <span class="attr">RATE_LIMIT_EXCEEDED</span>: <span class="string">&#x27;SYS_001&#x27;</span>,</span><br><span class="line">    <span class="attr">MAINTENANCE_MODE</span>: <span class="string">&#x27;SYS_002&#x27;</span>,</span><br><span class="line">    <span class="attr">QUOTA_EXCEEDED</span>: <span class="string">&#x27;SYS_003&#x27;</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><hr><h2 id="6-ğŸ”’-å®‰å…¨æœºåˆ¶"><a href="#6-ğŸ”’-å®‰å…¨æœºåˆ¶" class="headerlink" title="6. ğŸ”’ å®‰å…¨æœºåˆ¶"></a>6. ğŸ”’ å®‰å…¨æœºåˆ¶</h2><h3 id="6-1-ğŸ›¡ï¸-è®¤è¯ä¸æˆæƒ"><a href="#6-1-ğŸ›¡ï¸-è®¤è¯ä¸æˆæƒ" class="headerlink" title="6.1 ğŸ›¡ï¸ è®¤è¯ä¸æˆæƒ"></a>6.1 ğŸ›¡ï¸ è®¤è¯ä¸æˆæƒ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    A[å®¢æˆ·ç«¯è¯·æ±‚] --&gt; B[JWTéªŒè¯]</span><br><span class="line">    B --&gt; C&#123;Tokenæœ‰æ•ˆ?&#125;</span><br><span class="line">    C --&gt;|å¦| D[è¿”å›401é”™è¯¯]</span><br><span class="line">    C --&gt;|æ˜¯| E[æƒé™æ£€æŸ¥]</span><br><span class="line">    E --&gt; F&#123;æƒé™å……è¶³?&#125;</span><br><span class="line">    F --&gt;|å¦| G[è¿”å›403é”™è¯¯]</span><br><span class="line">    F --&gt;|æ˜¯| H[å¤„ç†è¯·æ±‚]</span><br><span class="line">    H --&gt; I[è¿”å›å“åº”]</span><br></pre></td></tr></table></figure><h4 id="JWT-Token-ç»“æ„"><a href="#JWT-Token-ç»“æ„" class="headerlink" title="JWT Token ç»“æ„"></a>JWT Token ç»“æ„</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;header&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;alg&quot;</span><span class="punctuation">:</span> <span class="string">&quot;HS256&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;typ&quot;</span><span class="punctuation">:</span> <span class="string">&quot;JWT&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;payload&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;sub&quot;</span><span class="punctuation">:</span> <span class="string">&quot;user_id&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;username&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;user@example.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;role&quot;</span><span class="punctuation">:</span> <span class="string">&quot;user&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;iat&quot;</span><span class="punctuation">:</span> <span class="number">1640000000</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;exp&quot;</span><span class="punctuation">:</span> <span class="number">1640086400</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="6-2-ğŸ”-å¯†ç å®‰å…¨"><a href="#6-2-ğŸ”-å¯†ç å®‰å…¨" class="headerlink" title="6.2 ğŸ” å¯†ç å®‰å…¨"></a>6.2 ğŸ” å¯†ç å®‰å…¨</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯†ç åŠ å¯†ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">const</span> bcrypt = <span class="built_in">require</span>(<span class="string">&#x27;bcrypt&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">hashPassword</span> = <span class="keyword">async</span> (<span class="params">password</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> saltRounds = <span class="number">12</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">await</span> bcrypt.<span class="title function_">hash</span>(password, saltRounds);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">verifyPassword</span> = <span class="keyword">async</span> (<span class="params">password, hash</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">await</span> bcrypt.<span class="title function_">compare</span>(password, hash);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="6-3-ğŸ“-è¾“å…¥éªŒè¯"><a href="#6-3-ğŸ“-è¾“å…¥éªŒè¯" class="headerlink" title="6.3 ğŸ“ è¾“å…¥éªŒè¯"></a>6.3 ğŸ“ è¾“å…¥éªŒè¯</h3><p><strong>æ–‡ä»¶åéªŒè¯</strong>:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;filename&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;required&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;pattern&quot;</span>: <span class="string">&quot;^[a-zA-Z0-9._-]+$&quot;</span>,</span><br><span class="line">        <span class="string">&quot;maxLength&quot;</span>: <span class="number">255</span>,</span><br><span class="line">        <span class="string">&quot;sanitize&quot;</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>SQLæ³¨å…¥é˜²æŠ¤</strong>:</p><ul><li>ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢</li><li>è¾“å…¥è½¬ä¹‰å’Œè¿‡æ»¤</li><li>æœ€å°æƒé™åŸåˆ™</li></ul><hr><h2 id="7-â±ï¸-é€Ÿç‡é™åˆ¶"><a href="#7-â±ï¸-é€Ÿç‡é™åˆ¶" class="headerlink" title="7. â±ï¸ é€Ÿç‡é™åˆ¶"></a>7. â±ï¸ é€Ÿç‡é™åˆ¶</h2><h3 id="7-1-ğŸš¦-é™åˆ¶ç­–ç•¥"><a href="#7-1-ğŸš¦-é™åˆ¶ç­–ç•¥" class="headerlink" title="7.1 ğŸš¦ é™åˆ¶ç­–ç•¥"></a>7.1 ğŸš¦ é™åˆ¶ç­–ç•¥</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">    A[è¯·æ±‚] --&gt; B[é€Ÿç‡é™åˆ¶æ£€æŸ¥]</span><br><span class="line">    B --&gt; C&#123;è¶…å‡ºé™åˆ¶?&#125;</span><br><span class="line">    C --&gt;|æ˜¯| D[è¿”å›429é”™è¯¯]</span><br><span class="line">    C --&gt;|å¦| E[å¤„ç†è¯·æ±‚]</span><br><span class="line">    E --&gt; F[æ›´æ–°è®¡æ•°å™¨]</span><br><span class="line"></span><br><span class="line">    style D fill:#ffcdd2</span><br><span class="line">    style F fill:#c8e6c9</span><br></pre></td></tr></table></figure><h3 id="7-2-ğŸ“Š-é™åˆ¶è§„åˆ™"><a href="#7-2-ğŸ“Š-é™åˆ¶è§„åˆ™" class="headerlink" title="7.2 ğŸ“Š é™åˆ¶è§„åˆ™"></a>7.2 ğŸ“Š é™åˆ¶è§„åˆ™</h3><table><thead><tr><th>ç«¯ç‚¹ç±»å‹</th><th>æ—¶é—´çª—å£</th><th>æœ€å¤§è¯·æ±‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>è®¤è¯ç›¸å…³</strong></td><td>15åˆ†é’Ÿ</td><td>5æ¬¡&#x2F;IP</td><td>ç™»å½•ã€æ³¨å†Œ</td></tr><tr><td><strong>æ–‡ä»¶ä¸Šä¼ </strong></td><td>1å°æ—¶</td><td>50æ¬¡&#x2F;ç”¨æˆ·</td><td>å•æ–‡ä»¶ä¸Šä¼ </td></tr><tr><td><strong>æ–‡ä»¶ä¸‹è½½</strong></td><td>1å°æ—¶</td><td>200æ¬¡&#x2F;ç”¨æˆ·</td><td>æ–‡ä»¶ä¸‹è½½</td></tr><tr><td><strong>å…¶ä»–API</strong></td><td>15åˆ†é’Ÿ</td><td>100æ¬¡&#x2F;IP</td><td>ä¸€èˆ¬è¯·æ±‚</td></tr></tbody></table><h3 id="7-3-ğŸ“ˆ-é™åˆ¶å“åº”å¤´"><a href="#7-3-ğŸ“ˆ-é™åˆ¶å“åº”å¤´" class="headerlink" title="7.3 ğŸ“ˆ é™åˆ¶å“åº”å¤´"></a>7.3 ğŸ“ˆ é™åˆ¶å“åº”å¤´</h3><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">HTTP/1.1</span> <span class="number">429</span> Too Many Requests</span><br><span class="line"><span class="attribute">X-RateLimit-Limit</span><span class="punctuation">: </span>5</span><br><span class="line"><span class="attribute">X-RateLimit-Remaining</span><span class="punctuation">: </span>0</span><br><span class="line"><span class="attribute">X-RateLimit-Reset</span><span class="punctuation">: </span>1640090000</span><br><span class="line"><span class="attribute">Retry-After</span><span class="punctuation">: </span>900</span><br></pre></td></tr></table></figure><hr><h2 id="8-ğŸ“‹-OpenAPI-è§„èŒƒ"><a href="#8-ğŸ“‹-OpenAPI-è§„èŒƒ" class="headerlink" title="8. ğŸ“‹ OpenAPI è§„èŒƒ"></a>8. ğŸ“‹ OpenAPI è§„èŒƒ</h2><h3 id="8-1-ğŸ”-Swagger-é…ç½®"><a href="#8-1-ğŸ”-Swagger-é…ç½®" class="headerlink" title="8.1 ğŸ” Swagger é…ç½®"></a>8.1 ğŸ” Swagger é…ç½®</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">openapi:</span> <span class="number">3.0</span><span class="number">.0</span></span><br><span class="line"><span class="attr">info:</span></span><br><span class="line">  <span class="attr">title:</span> <span class="string">æ–‡ä»¶ç®¡ç†ç³»ç»Ÿ</span> <span class="string">API</span></span><br><span class="line">  <span class="attr">description:</span> <span class="string">åŸºäºJWTè®¤è¯çš„æ–‡ä»¶ç®¡ç†ç³»ç»ŸAPIæ–‡æ¡£</span></span><br><span class="line">  <span class="attr">version:</span> <span class="number">1.0</span><span class="number">.0</span></span><br><span class="line">  <span class="attr">contact:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">API</span> <span class="string">Support</span></span><br><span class="line">    <span class="attr">email:</span> <span class="string">support@example.com</span></span><br><span class="line">  <span class="attr">license:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">MIT</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">https://opensource.org/licenses/MIT</span></span><br><span class="line"></span><br><span class="line"><span class="attr">servers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">url:</span> <span class="string">https://api.example.com/api/v1</span></span><br><span class="line">    <span class="attr">description:</span> <span class="string">ç”Ÿäº§ç¯å¢ƒ</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">url:</span> <span class="string">https://dev-api.example.com/api/v1</span></span><br><span class="line">    <span class="attr">description:</span> <span class="string">å¼€å‘ç¯å¢ƒ</span></span><br><span class="line"></span><br><span class="line"><span class="attr">security:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">bearerAuth:</span> []</span><br><span class="line"></span><br><span class="line"><span class="attr">components:</span></span><br><span class="line">  <span class="attr">securitySchemes:</span></span><br><span class="line">    <span class="attr">bearerAuth:</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">http</span></span><br><span class="line">      <span class="attr">scheme:</span> <span class="string">bearer</span></span><br><span class="line">      <span class="attr">bearerFormat:</span> <span class="string">JWT</span></span><br></pre></td></tr></table></figure><h3 id="8-2-ğŸ“-API-æ–‡æ¡£ç”Ÿæˆ"><a href="#8-2-ğŸ“-API-æ–‡æ¡£ç”Ÿæˆ" class="headerlink" title="8.2 ğŸ“ API æ–‡æ¡£ç”Ÿæˆ"></a>8.2 ğŸ“ API æ–‡æ¡£ç”Ÿæˆ</h3><p><strong>è®¿é—® Swagger UI</strong>:</p><ul><li>ç”Ÿäº§ç¯å¢ƒ: <code>https://api.example.com/docs</code></li><li>å¼€å‘ç¯å¢ƒ: <code>https://dev-api.example.com/docs</code></li></ul><p><strong>ä¸‹è½½ OpenAPI è§„èŒƒ</strong>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -o api-spec.json https://api.example.com/api-spec</span><br></pre></td></tr></table></figure><hr><h2 id="ğŸ“Š-API-ä½¿ç”¨ç»Ÿè®¡"><a href="#ğŸ“Š-API-ä½¿ç”¨ç»Ÿè®¡" class="headerlink" title="ğŸ“Š API ä½¿ç”¨ç»Ÿè®¡"></a>ğŸ“Š API ä½¿ç”¨ç»Ÿè®¡</h2><h3 id="9-1-ğŸ“ˆ-ä½¿ç”¨æƒ…å†µç›‘æ§"><a href="#9-1-ğŸ“ˆ-ä½¿ç”¨æƒ…å†µç›‘æ§" class="headerlink" title="9.1 ğŸ“ˆ ä½¿ç”¨æƒ…å†µç›‘æ§"></a>9.1 ğŸ“ˆ ä½¿ç”¨æƒ…å†µç›‘æ§</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    A[APIè¯·æ±‚] --&gt; B[è®°å½•è¯·æ±‚æ—¥å¿—]</span><br><span class="line">    B --&gt; C[æ›´æ–°ç»Ÿè®¡æ•°æ®]</span><br><span class="line">    C --&gt; D[å®æ—¶ç›‘æ§é¢æ¿]</span><br><span class="line"></span><br><span class="line">    E[é”™è¯¯è¯·æ±‚] --&gt; F[é”™è¯¯æ—¥å¿—è®°å½•]</span><br><span class="line">    F --&gt; G[å‘Šè­¦ç³»ç»Ÿ]</span><br><span class="line">    G --&gt; H[è¿ç»´å›¢é˜Ÿ]</span><br></pre></td></tr></table></figure><h3 id="9-2-ğŸ”-åˆ†ææŒ‡æ ‡"><a href="#9-2-ğŸ”-åˆ†ææŒ‡æ ‡" class="headerlink" title="9.2 ğŸ” åˆ†ææŒ‡æ ‡"></a>9.2 ğŸ” åˆ†ææŒ‡æ ‡</h3><table><thead><tr><th>æŒ‡æ ‡</th><th>è¯´æ˜</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td><strong>è¯·æ±‚é‡</strong></td><td>APIè°ƒç”¨æ¬¡æ•°</td><td>æ€§èƒ½åˆ†æ</td></tr><tr><td><strong>å“åº”æ—¶é—´</strong></td><td>å¹³å‡å“åº”æ—¶é—´</td><td>æ€§èƒ½ä¼˜åŒ–</td></tr><tr><td><strong>é”™è¯¯ç‡</strong></td><td>4xx&#x2F;5xxé”™è¯¯æ¯”ä¾‹</td><td>ç³»ç»Ÿç¨³å®šæ€§</td></tr><tr><td><strong>å¹¶å‘ç”¨æˆ·</strong></td><td>åŒæ—¶åœ¨çº¿ç”¨æˆ·æ•°</td><td>å®¹é‡è§„åˆ’</td></tr></tbody></table><hr><h2 id="ğŸ“š-å®¢æˆ·ç«¯é›†æˆ"><a href="#ğŸ“š-å®¢æˆ·ç«¯é›†æˆ" class="headerlink" title="ğŸ“š å®¢æˆ·ç«¯é›†æˆ"></a>ğŸ“š å®¢æˆ·ç«¯é›†æˆ</h2><h3 id="10-1-ğŸ–¥ï¸-JavaScript-å®¢æˆ·ç«¯ç¤ºä¾‹"><a href="#10-1-ğŸ–¥ï¸-JavaScript-å®¢æˆ·ç«¯ç¤ºä¾‹" class="headerlink" title="10.1 ğŸ–¥ï¸ JavaScript å®¢æˆ·ç«¯ç¤ºä¾‹"></a>10.1 ğŸ–¥ï¸ JavaScript å®¢æˆ·ç«¯ç¤ºä¾‹</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">FileManagerAPI</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">baseURL</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">baseURL</span> = baseURL;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">token</span> = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">setToken</span>(<span class="params">token</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">token</span> = token;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">request</span>(<span class="params">method, endpoint, data = <span class="literal">null</span>, options = &#123;&#125;</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> config = &#123;</span><br><span class="line">            method,</span><br><span class="line">            <span class="attr">headers</span>: &#123;</span><br><span class="line">                <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>,</span><br><span class="line">                ...options.<span class="property">headers</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">token</span>) &#123;</span><br><span class="line">            config.<span class="property">headers</span>.<span class="property">Authorization</span> = <span class="string">`Bearer <span class="subst">$&#123;<span class="variable language_">this</span>.token&#125;</span>`</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (data) &#123;</span><br><span class="line">            config.<span class="property">body</span> = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.baseURL&#125;</span><span class="subst">$&#123;endpoint&#125;</span>`</span>, config);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”¨æˆ·ç™»å½•</span></span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">login</span>(<span class="params">username, password</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">request</span>(<span class="string">&#x27;POST&#x27;</span>, <span class="string">&#x27;/auth/login&#x27;</span>, &#123;</span><br><span class="line">            username,</span><br><span class="line">            password</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (result.<span class="property">success</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">setToken</span>(result.<span class="property">data</span>.<span class="property">token</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸Šä¼ æ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">uploadFile</span>(<span class="params">file</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> formData = <span class="keyword">new</span> <span class="title class_">FormData</span>();</span><br><span class="line">        formData.<span class="title function_">append</span>(<span class="string">&#x27;file&#x27;</span>, file);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.baseURL&#125;</span>/files/upload`</span>, &#123;</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">            <span class="attr">headers</span>: &#123;</span><br><span class="line">                <span class="string">&#x27;Authorization&#x27;</span>: <span class="string">`Bearer <span class="subst">$&#123;<span class="variable language_">this</span>.token&#125;</span>`</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">body</span>: formData</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–æ–‡ä»¶åˆ—è¡¨</span></span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">getFiles</span>(<span class="params">page = <span class="number">1</span>, limit = <span class="number">20</span></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">request</span>(<span class="string">&#x27;GET&#x27;</span>, <span class="string">`/files/list?page=<span class="subst">$&#123;page&#125;</span>&amp;limit=<span class="subst">$&#123;limit&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">const</span> api = <span class="keyword">new</span> <span class="title class_">FileManagerAPI</span>(<span class="string">&#x27;https://api.example.com/api/v1&#x27;</span>);</span><br></pre></td></tr></table></figure><hr><h2 id="ğŸ“‹-æ€»ç»“"><a href="#ğŸ“‹-æ€»ç»“" class="headerlink" title="ğŸ“‹ æ€»ç»“"></a>ğŸ“‹ æ€»ç»“</h2><h3 id="âœ…-API-ç‰¹æ€§æ€»è§ˆ"><a href="#âœ…-API-ç‰¹æ€§æ€»è§ˆ" class="headerlink" title="âœ… API ç‰¹æ€§æ€»è§ˆ"></a>âœ… API ç‰¹æ€§æ€»è§ˆ</h3><ul><li>ğŸ” <strong>å®‰å…¨è®¤è¯</strong>: JWT Token è®¤è¯æœºåˆ¶</li><li>ğŸ“ <strong>æ–‡ä»¶ç®¡ç†</strong>: å®Œæ•´çš„æ–‡ä»¶ä¸Šä¼ ä¸‹è½½åŠŸèƒ½</li><li>ğŸ¯ <strong>æƒé™æ§åˆ¶</strong>: ç”¨æˆ·çº§åˆ«çš„è®¿é—®æ§åˆ¶</li><li>âš¡ <strong>æ€§èƒ½ä¼˜åŒ–</strong>: æ”¯æŒæ–­ç‚¹ç»­ä¼ å’Œç¼©ç•¥å›¾</li><li>ğŸ“Š <strong>ç›‘æ§ç»Ÿè®¡</strong>: å®Œæ•´çš„APIä½¿ç”¨ç»Ÿè®¡</li><li>ğŸ“ <strong>æ–‡æ¡£å®Œæ•´</strong>: è¯¦ç»†çš„APIæ–‡æ¡£å’Œç¤ºä¾‹</li></ul><h3 id="ğŸš€-é›†æˆå»ºè®®"><a href="#ğŸš€-é›†æˆå»ºè®®" class="headerlink" title="ğŸš€ é›†æˆå»ºè®®"></a>ğŸš€ é›†æˆå»ºè®®</h3><ol><li><strong>å‰ç«¯åº”ç”¨</strong>: ä½¿ç”¨ JavaScript SDK å¿«é€Ÿé›†æˆ</li><li><strong>ç§»åŠ¨åº”ç”¨</strong>: ä½¿ç”¨ RESTful API è¿›è¡Œæ•°æ®äº¤äº’</li><li><strong>ç¬¬ä¸‰æ–¹æœåŠ¡</strong>: é€šè¿‡ Webhook æ¥æ”¶æ–‡ä»¶äº‹ä»¶é€šçŸ¥</li><li><strong>ä¼ä¸šé›†æˆ</strong>: æ”¯æŒ SSO å’Œä¼ä¸šçº§æƒé™ç®¡ç†</li></ol><h3 id="ğŸ”§-æ‰©å±•åŠŸèƒ½"><a href="#ğŸ”§-æ‰©å±•åŠŸèƒ½" class="headerlink" title="ğŸ”§ æ‰©å±•åŠŸèƒ½"></a>ğŸ”§ æ‰©å±•åŠŸèƒ½</h3><ul><li>ğŸ”„ <strong>æ–‡ä»¶åŒæ­¥</strong>: å¤šè®¾å¤‡æ–‡ä»¶åŒæ­¥</li><li>ğŸ“¤ <strong>åˆ†äº«é“¾æ¥</strong>: ç”Ÿæˆæ–‡ä»¶åˆ†äº«é“¾æ¥</li><li>ğŸ” <strong>å…¨æ–‡æœç´¢</strong>: æ–‡ä»¶å†…å®¹å…¨æ–‡æ£€ç´¢</li><li>ğŸ—‚ï¸ <strong>ç‰ˆæœ¬ç®¡ç†</strong>: æ–‡ä»¶ç‰ˆæœ¬å†å²è®°å½•</li><li>ğŸ“± <strong>ç§»åŠ¨ç«¯</strong>: ä¸“ç”¨çš„ç§»åŠ¨ç«¯API</li></ul><hr><blockquote><p><strong>ğŸ’¡ ä½¿ç”¨æç¤º</strong>:</p><ul><li>æ‰€æœ‰APIè°ƒç”¨éƒ½éœ€è¦æœ‰æ•ˆçš„JWT Token</li><li>å»ºè®®ä½¿ç”¨HTTPSç¡®ä¿ä¼ è¾“å®‰å…¨</li><li>å®šæœŸè½®æ¢APIå¯†é’¥å’Œå¯†ç </li><li>ç›‘æ§APIä½¿ç”¨æƒ…å†µé¿å…è¶…å‡ºé…é¢é™åˆ¶</li></ul></blockquote>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;æ–‡ä»¶ç®¡ç†-API-è§„èŒƒ&quot;&gt;&lt;a href=&quot;#æ–‡ä»¶ç®¡ç†-API-è§„èŒƒ&quot; class=&quot;headerlink&quot; title=&quot;æ–‡ä»¶ç®¡ç† API è§„èŒƒ&quot;&gt;&lt;/a&gt;æ–‡ä»¶ç®¡ç† API</summary>
        
      
    
    
    
    <category term="Webæ¶æ„å®‰å…¨" scheme="https://vilaswang.github.io/categories/Web%E6%9E%B6%E6%9E%84%E5%AE%89%E5%85%A8/"/>
    
    
    <category term="æŠ€æœ¯æ–‡æ¡£" scheme="https://vilaswang.github.io/tags/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/"/>
    
    <category term="æŒ‡å—" scheme="https://vilaswang.github.io/tags/%E6%8C%87%E5%8D%97/"/>
    
  </entry>
  
  <entry>
    <title>Qt ä¸‹è½½å™¨éœ€æ±‚è§„èŒƒ</title>
    <link href="https://vilaswang.github.io/posts/6ee89f12/"/>
    <id>https://vilaswang.github.io/posts/6ee89f12/</id>
    <published>2025-12-09T06:09:54.000Z</published>
    <updated>2025-12-17T15:36:29.261Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Qt-ä¸‹è½½å™¨éœ€æ±‚è§„èŒƒ"><a href="#Qt-ä¸‹è½½å™¨éœ€æ±‚è§„èŒƒ" class="headerlink" title="Qt ä¸‹è½½å™¨éœ€æ±‚è§„èŒƒ"></a>Qt ä¸‹è½½å™¨éœ€æ±‚è§„èŒƒ</h1><blockquote><p><strong>æ–‡æ¡£åˆ›å»ºæ—¶é—´</strong>: 2025-11-14<br><strong>æœ€åæ›´æ–°</strong>: 2025-11-14<br><strong>ç‰ˆæœ¬</strong>: v1.0<br><strong>æ ‡ç­¾</strong>: <code>qt</code>, <code>downloader</code>, <code>product-requirements</code>, <code>desktop-app</code>, <code>c++</code></p></blockquote><h2 id="ğŸ“‘-ç›®å½•"><a href="#ğŸ“‘-ç›®å½•" class="headerlink" title="ğŸ“‘ ç›®å½•"></a>ğŸ“‘ ç›®å½•</h2><ul><li><a href="#1-%E4%BA%A7%E5%93%81%E6%A6%82%E8%BF%B0">1. äº§å“æ¦‚è¿°</a></li><li><a href="#2-%E7%94%A8%E6%88%B7%E8%A7%92%E8%89%B2">2. ç”¨æˆ·è§’è‰²</a></li><li><a href="#3-%E5%8A%9F%E8%83%BD%E9%9C%80%E6%B1%82">3. åŠŸèƒ½éœ€æ±‚</a></li><li><a href="#4-%E9%9D%9E%E5%8A%9F%E8%83%BD%E9%9C%80%E6%B1%82">4. éåŠŸèƒ½éœ€æ±‚</a></li><li><a href="#5-%E7%95%8C%E9%9D%A2%E8%AE%BE%E8%AE%A1">5. ç•Œé¢è®¾è®¡</a></li><li><a href="#6-%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B">6. æ•°æ®æ¨¡å‹</a></li><li><a href="#7-%E6%8A%80%E6%9C%AF%E8%A7%84%E8%8C%83">7. æŠ€æœ¯è§„èŒƒ</a></li><li><a href="#8-%E4%BA%A4%E4%BB%98%E8%A6%81%E6%B1%82">8. äº¤ä»˜è¦æ±‚</a></li></ul><hr><h2 id="1-ğŸ¯-äº§å“æ¦‚è¿°"><a href="#1-ğŸ¯-äº§å“æ¦‚è¿°" class="headerlink" title="1. ğŸ¯ äº§å“æ¦‚è¿°"></a>1. ğŸ¯ äº§å“æ¦‚è¿°</h2><h3 id="1-1-äº§å“å®šä½"><a href="#1-1-äº§å“å®šä½" class="headerlink" title="1.1 äº§å“å®šä½"></a>1.1 äº§å“å®šä½</h3><p>åŸºäº Qt æ¡†æ¶å¼€å‘çš„æ¡Œé¢ä¸‹è½½ç®¡ç†å™¨ï¼Œæ”¯æŒå¤šçº¿ç¨‹å¹¶å‘ä¸‹è½½ï¼Œæä¾›ç›´è§‚çš„ä»»åŠ¡ç®¡ç†ç•Œé¢å’Œå®æ—¶è¿›åº¦ç›‘æ§ã€‚</p><h3 id="1-2-æ ¸å¿ƒä»·å€¼"><a href="#1-2-æ ¸å¿ƒä»·å€¼" class="headerlink" title="1.2 æ ¸å¿ƒä»·å€¼"></a>1.2 æ ¸å¿ƒä»·å€¼</h3><ul><li>âœ… <strong>æ‰¹é‡ä¸‹è½½</strong> - æ”¯æŒå¤šä»»åŠ¡å¹¶å‘ä¸‹è½½</li><li>âœ… <strong>è¿›åº¦ç›‘æ§</strong> - å®æ—¶æ˜¾ç¤ºä¸‹è½½çŠ¶æ€å’Œè¿›åº¦</li><li>âœ… <strong>æ–­ç‚¹ç»­ä¼ </strong> - æ”¯æŒä¸‹è½½ä¸­æ–­åç»§ç»­</li><li>âœ… <strong>è·¨å¹³å°</strong> - æ”¯æŒ Windowsã€macOSã€Linux</li></ul><h3 id="1-3-äº§å“æ¶æ„å›¾"><a href="#1-3-äº§å“æ¶æ„å›¾" class="headerlink" title="1.3 äº§å“æ¶æ„å›¾"></a>1.3 äº§å“æ¶æ„å›¾</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    A[ç”¨æˆ·ç•Œé¢] --&gt; B[ä»»åŠ¡ç®¡ç†å™¨]</span><br><span class="line">    B --&gt; C[ä¸‹è½½å¼•æ“]</span><br><span class="line">    C --&gt; D[ç½‘ç»œè¯·æ±‚å±‚]</span><br><span class="line"></span><br><span class="line">    B --&gt; E[æ•°æ®æŒä¹…åŒ–]</span><br><span class="line">    B --&gt; F[é…ç½®ç®¡ç†]</span><br><span class="line"></span><br><span class="line">    C --&gt; G[çº¿ç¨‹æ± ]</span><br><span class="line">    G --&gt; H[ä»»åŠ¡é˜Ÿåˆ—]</span><br><span class="line"></span><br><span class="line">    D --&gt; I[HTTP/HTTPS]</span><br><span class="line">    D --&gt; J[é‡å®šå‘å¤„ç†]</span><br><span class="line">    D --&gt; K[è®¤è¯å¤„ç†]</span><br><span class="line"></span><br><span class="line">    style A fill:#e1f5fe</span><br><span class="line">    style B fill:#f3e5f5</span><br><span class="line">    style C fill:#e8f5e8</span><br><span class="line">    style D fill:#fff3e0</span><br></pre></td></tr></table></figure><hr><h2 id="2-ğŸ‘¥-ç”¨æˆ·è§’è‰²"><a href="#2-ğŸ‘¥-ç”¨æˆ·è§’è‰²" class="headerlink" title="2. ğŸ‘¥ ç”¨æˆ·è§’è‰²"></a>2. ğŸ‘¥ ç”¨æˆ·è§’è‰²</h2><h3 id="2-1-ç›®æ ‡ç”¨æˆ·"><a href="#2-1-ç›®æ ‡ç”¨æˆ·" class="headerlink" title="2.1 ç›®æ ‡ç”¨æˆ·"></a>2.1 ç›®æ ‡ç”¨æˆ·</h3><p><strong>ç»ˆç«¯ç”¨æˆ·</strong> - éœ€è¦æ‰¹é‡ä¸‹è½½æ–‡ä»¶çš„ä¸ªäººç”¨æˆ·</p><ul><li>æŠ€æœ¯èƒŒæ™¯ï¼šæ™®é€šè®¡ç®—æœºç”¨æˆ·</li><li>ä½¿ç”¨åœºæ™¯ï¼šä¸‹è½½è½¯ä»¶ã€æ–‡æ¡£ã€åª’ä½“æ–‡ä»¶</li><li>æ“ä½œä¹ æƒ¯ï¼šå›¾å½¢ç•Œé¢æ“ä½œ</li></ul><h3 id="2-2-ç”¨æˆ·åœºæ™¯"><a href="#2-2-ç”¨æˆ·åœºæ™¯" class="headerlink" title="2.2 ç”¨æˆ·åœºæ™¯"></a>2.2 ç”¨æˆ·åœºæ™¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">    A[ç”¨æˆ·è¾“å…¥URL] --&gt; B[æ·»åŠ ä¸‹è½½ä»»åŠ¡]</span><br><span class="line">    B --&gt; C[å¼€å§‹ä¸‹è½½]</span><br><span class="line">    C --&gt; D[ç›‘æ§è¿›åº¦]</span><br><span class="line">    D --&gt; E&#123;å®Œæˆä¸‹è½½?&#125;</span><br><span class="line">    E --&gt;|æ˜¯| F[é€šçŸ¥ç”¨æˆ·]</span><br><span class="line">    E --&gt;|å¦| D</span><br><span class="line">    F --&gt; G[ä»»åŠ¡å®Œæˆ]</span><br></pre></td></tr></table></figure><hr><h2 id="3-ğŸ“‹-åŠŸèƒ½éœ€æ±‚"><a href="#3-ğŸ“‹-åŠŸèƒ½éœ€æ±‚" class="headerlink" title="3. ğŸ“‹ åŠŸèƒ½éœ€æ±‚"></a>3. ğŸ“‹ åŠŸèƒ½éœ€æ±‚</h2><h3 id="3-1-ğŸ›ï¸-ä»»åŠ¡ç®¡ç†"><a href="#3-1-ğŸ›ï¸-ä»»åŠ¡ç®¡ç†" class="headerlink" title="3.1 ğŸ›ï¸ ä»»åŠ¡ç®¡ç†"></a>3.1 ğŸ›ï¸ ä»»åŠ¡ç®¡ç†</h3><h4 id="3-1-1-æ·»åŠ ä»»åŠ¡"><a href="#3-1-1-æ·»åŠ ä»»åŠ¡" class="headerlink" title="3.1.1 æ·»åŠ ä»»åŠ¡"></a>3.1.1 æ·»åŠ ä»»åŠ¡</h4><ul><li><strong>URL è¾“å…¥</strong>: æ”¯æŒå•ä¸ªæˆ–å¤šä¸ª URLï¼ˆæ¯è¡Œä¸€ä¸ªï¼‰</li><li><strong>URL æ ¼å¼</strong>: æ”¯æŒ HTTP&#x2F;HTTPS åè®®</li><li><strong>è®¤è¯æ”¯æŒ</strong>: URL ä¸­å¯åŒ…å«ç”¨æˆ·åå¯†ç  (<code>user:pass@host</code>)</li><li><strong>æ‰¹é‡å¯¼å…¥</strong>: æ”¯æŒä»å‰ªè´´æ¿ç²˜è´´å¤šä¸ª URL</li></ul><h4 id="3-1-2-ä»»åŠ¡åˆ—è¡¨æ˜¾ç¤º"><a href="#3-1-2-ä»»åŠ¡åˆ—è¡¨æ˜¾ç¤º" class="headerlink" title="3.1.2 ä»»åŠ¡åˆ—è¡¨æ˜¾ç¤º"></a>3.1.2 ä»»åŠ¡åˆ—è¡¨æ˜¾ç¤º</h4><p><strong>è¡¨æ ¼åˆ—å¿…é¡»åŒ…å«</strong>:</p><ul><li><strong>æ–‡ä»¶å</strong>: ä» URL æå–æˆ– Content-Disposition è§£æ</li><li><strong>æ–‡ä»¶å¤§å°</strong>: å­—èŠ‚æ•°ï¼Œè·å–åæ˜¾ç¤º (-1 è¡¨ç¤ºæœªçŸ¥)</li><li><strong>å·²ä¸‹è½½å¤§å°</strong>: å­—èŠ‚æ•°ï¼Œå®æ—¶åˆ·æ–°</li><li><strong>è¿›åº¦ç™¾åˆ†æ¯”</strong>: 0-100%ï¼Œå®æ—¶è®¡ç®—</li><li><strong>ä¸‹è½½é€Ÿåº¦</strong>: B&#x2F;sï¼Œå®æ—¶åˆ·æ–°</li><li><strong>çŠ¶æ€</strong>: ç­‰å¾… &#x2F; ä¸‹è½½ä¸­ &#x2F; å·²å®Œæˆ &#x2F; é”™è¯¯</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">gantt</span><br><span class="line">    title ä¸‹è½½ä»»åŠ¡çŠ¶æ€æµè½¬</span><br><span class="line">    dateFormat X</span><br><span class="line">    axisFormat %s</span><br><span class="line"></span><br><span class="line">    section ä¸‹è½½æµç¨‹</span><br><span class="line">    ç­‰å¾…ä¸­     :0, 10</span><br><span class="line">    ä¸‹è½½ä¸­     :10, 100</span><br><span class="line">    å·²å®Œæˆ     :100, 110</span><br><span class="line">    é”™è¯¯å¤„ç†   :a1, after a2, 20</span><br></pre></td></tr></table></figure><h4 id="3-1-3-ä»»åŠ¡æ“ä½œ"><a href="#3-1-3-ä»»åŠ¡æ“ä½œ" class="headerlink" title="3.1.3 ä»»åŠ¡æ“ä½œ"></a>3.1.3 ä»»åŠ¡æ“ä½œ</h4><ul><li><strong>å¼€å§‹</strong>: å¯åŠ¨é€‰ä¸­çš„ä¸‹è½½ä»»åŠ¡</li><li><strong>æš‚åœ</strong>: æš‚åœæ­£åœ¨ä¸‹è½½çš„ä»»åŠ¡</li><li><strong>å–æ¶ˆ</strong>: å–æ¶ˆä¸‹è½½å¹¶åˆ é™¤æœªå®Œæˆçš„æ–‡ä»¶</li><li><strong>åˆ é™¤</strong>: ä»åˆ—è¡¨ä¸­åˆ é™¤å·²å®Œæˆæˆ–å¤±è´¥çš„è®°å½•</li></ul><h3 id="3-2-âš™ï¸-ä¸‹è½½å¼•æ“"><a href="#3-2-âš™ï¸-ä¸‹è½½å¼•æ“" class="headerlink" title="3.2 âš™ï¸ ä¸‹è½½å¼•æ“"></a>3.2 âš™ï¸ ä¸‹è½½å¼•æ“</h3><h4 id="3-2-1-å¤šçº¿ç¨‹ä¸‹è½½"><a href="#3-2-1-å¤šçº¿ç¨‹ä¸‹è½½" class="headerlink" title="3.2.1 å¤šçº¿ç¨‹ä¸‹è½½"></a>3.2.1 å¤šçº¿ç¨‹ä¸‹è½½</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å•ä»»åŠ¡å¤šçº¿ç¨‹é…ç½®</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> DEFAULT_THREAD_COUNT = <span class="number">4</span>;  <span class="comment">// é»˜è®¤4çº¿ç¨‹</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MAX_THREAD_COUNT = <span class="number">16</span>;     <span class="comment">// æœ€å¤§16çº¿ç¨‹</span></span><br></pre></td></tr></table></figure><ul><li><strong>åˆ†æ®µä¸‹è½½</strong>: å°†æ–‡ä»¶åˆ†ä¸ºå¤šä¸ªç‰‡æ®µå¹¶å‘ä¸‹è½½</li><li><strong>çº¿ç¨‹ç®¡ç†</strong>: æ¯ä¸ªä»»åŠ¡å¯é…ç½®ç‹¬ç«‹çº¿ç¨‹æ•°</li><li><strong>è´Ÿè½½å‡è¡¡</strong>: åŠ¨æ€è°ƒæ•´å„çº¿ç¨‹ä¸‹è½½é€Ÿåº¦</li></ul><h4 id="3-2-2-ç½‘ç»œæ”¯æŒ"><a href="#3-2-2-ç½‘ç»œæ”¯æŒ" class="headerlink" title="3.2.2 ç½‘ç»œæ”¯æŒ"></a>3.2.2 ç½‘ç»œæ”¯æŒ</h4><ul><li><strong>åè®®æ”¯æŒ</strong>: HTTP&#x2F;HTTPS</li><li><strong>é‡å®šå‘</strong>: è‡ªåŠ¨å¤„ç† 3xx é‡å®šå‘</li><li><strong>è®¤è¯</strong>: æ”¯æŒ Basic Authentication</li><li><strong>ä»£ç†æ”¯æŒ</strong>: ç³»ç»Ÿä»£ç†è®¾ç½®</li></ul><h4 id="3-2-3-å®Œæ•´æ€§æ ¡éªŒ"><a href="#3-2-3-å®Œæ•´æ€§æ ¡éªŒ" class="headerlink" title="3.2.3 å®Œæ•´æ€§æ ¡éªŒ"></a>3.2.3 å®Œæ•´æ€§æ ¡éªŒ</h4><ul><li><strong>å¤§å°æ ¡éªŒ</strong>: ä¸‹è½½å®Œæˆåæ ¡éªŒ Content-Length</li><li><strong>MD5æ ¡éªŒ</strong>: æœåŠ¡å™¨è¿”å› MD5 å¤´æ—¶è¿›è¡Œæ ¡éªŒ</li><li><strong>æ–­ç‚¹ç»­ä¼ </strong>: æ”¯æŒä»ä¸­æ–­ä½ç½®ç»§ç»­ä¸‹è½½</li></ul><h3 id="3-3-ğŸ’¾-è®¾ç½®ä¸æŒä¹…åŒ–"><a href="#3-3-ğŸ’¾-è®¾ç½®ä¸æŒä¹…åŒ–" class="headerlink" title="3.3 ğŸ’¾ è®¾ç½®ä¸æŒä¹…åŒ–"></a>3.3 ğŸ’¾ è®¾ç½®ä¸æŒä¹…åŒ–</h3><h4 id="3-3-1-é…ç½®ç®¡ç†"><a href="#3-3-1-é…ç½®ç®¡ç†" class="headerlink" title="3.3.1 é…ç½®ç®¡ç†"></a>3.3.1 é…ç½®ç®¡ç†</h4><ul><li><strong>ä¸‹è½½ç›®å½•</strong>: é»˜è®¤ç³»ç»Ÿâ€ä¸‹è½½â€æ–‡ä»¶å¤¹ï¼Œå¯è‡ªå®šä¹‰</li><li><strong>å¹¶å‘é™åˆ¶</strong>: å…¨å±€æœ€å¤§åŒæ—¶ä¸‹è½½æ•°</li><li><strong>çº¿ç¨‹æ•°</strong>: æ¯ä»»åŠ¡é»˜è®¤çº¿ç¨‹æ•°</li><li><strong>é‡è¯•æ¬¡æ•°</strong>: å¤±è´¥é‡è¯•æ¬¡æ•°</li></ul><h4 id="3-3-2-ä»»åŠ¡æŒä¹…åŒ–"><a href="#3-3-2-ä»»åŠ¡æŒä¹…åŒ–" class="headerlink" title="3.3.2 ä»»åŠ¡æŒä¹…åŒ–"></a>3.3.2 ä»»åŠ¡æŒä¹…åŒ–</h4><ul><li><strong>è‡ªåŠ¨ä¿å­˜</strong>: ä»»åŠ¡çŠ¶æ€è‡ªåŠ¨ä¿å­˜</li><li><strong>å¯åŠ¨æ¢å¤</strong>: ç¨‹åºå¯åŠ¨æ—¶æ¢å¤æœªå®Œæˆä»»åŠ¡</li><li><strong>è®¾ç½®ä¿å­˜</strong>: ç”¨æˆ·é…ç½®æŒä¹…åŒ–å­˜å‚¨</li></ul><h3 id="3-4-ğŸš¨-å¼‚å¸¸å¤„ç†ä¸åé¦ˆ"><a href="#3-4-ğŸš¨-å¼‚å¸¸å¤„ç†ä¸åé¦ˆ" class="headerlink" title="3.4 ğŸš¨ å¼‚å¸¸å¤„ç†ä¸åé¦ˆ"></a>3.4 ğŸš¨ å¼‚å¸¸å¤„ç†ä¸åé¦ˆ</h3><h4 id="3-4-1-ç½‘ç»œå¼‚å¸¸"><a href="#3-4-1-ç½‘ç»œå¼‚å¸¸" class="headerlink" title="3.4.1 ç½‘ç»œå¼‚å¸¸"></a>3.4.1 ç½‘ç»œå¼‚å¸¸</h4><ul><li><strong>è‡ªåŠ¨é‡è¯•</strong>: ç½‘ç»œä¸­æ–­æ—¶è‡ªåŠ¨é‡è¯•3æ¬¡</li><li><strong>æŒ‡æ•°é€€é¿</strong>: é‡è¯•é—´éš”é€æ¸å¢åŠ </li><li><strong>é”™è¯¯åˆ†ç±»</strong>: åŒºåˆ†ä¸´æ—¶é”™è¯¯å’Œæ°¸ä¹…é”™è¯¯</li></ul><h4 id="3-4-2-ç”¨æˆ·åé¦ˆ"><a href="#3-4-2-ç”¨æˆ·åé¦ˆ" class="headerlink" title="3.4.2 ç”¨æˆ·åé¦ˆ"></a>3.4.2 ç”¨æˆ·åé¦ˆ</h4><ul><li><strong>çŠ¶æ€æ›´æ–°</strong>: å®æ—¶æ›´æ–°ä»»åŠ¡çŠ¶æ€</li><li><strong>é”™è¯¯æç¤º</strong>: æ˜¾ç¤ºè¯¦ç»†é”™è¯¯ä¿¡æ¯</li><li><strong>å®Œæˆé€šçŸ¥</strong>: ä¸‹è½½å®Œæˆæ—¶ç³»ç»Ÿæ‰˜ç›˜é€šçŸ¥</li><li><strong>è¿›åº¦æç¤º</strong>: è¿›åº¦æ¡å’Œç™¾åˆ†æ¯”æ˜¾ç¤º</li></ul><hr><h2 id="4-ğŸš€-éåŠŸèƒ½éœ€æ±‚"><a href="#4-ğŸš€-éåŠŸèƒ½éœ€æ±‚" class="headerlink" title="4. ğŸš€ éåŠŸèƒ½éœ€æ±‚"></a>4. ğŸš€ éåŠŸèƒ½éœ€æ±‚</h2><h3 id="4-1-ğŸ–¥ï¸-å¹³å°å…¼å®¹æ€§"><a href="#4-1-ğŸ–¥ï¸-å¹³å°å…¼å®¹æ€§" class="headerlink" title="4.1 ğŸ–¥ï¸ å¹³å°å…¼å®¹æ€§"></a>4.1 ğŸ–¥ï¸ å¹³å°å…¼å®¹æ€§</h3><table><thead><tr><th>å¹³å°</th><th>æœ€ä½ç‰ˆæœ¬</th><th>æ¶æ„</th><th>Qt ç‰ˆæœ¬</th></tr></thead><tbody><tr><td><strong>Windows</strong></td><td>Windows 10+</td><td>x64</td><td>Qt 5.3-5.12</td></tr><tr><td><strong>macOS</strong></td><td>10.15+</td><td>x64</td><td>Qt 5.3-5.12</td></tr><tr><td><strong>Linux</strong></td><td>Ubuntu 22.04+</td><td>x64</td><td>Qt 5.3-5.12</td></tr></tbody></table><h3 id="4-2-âš¡-æ€§èƒ½è¦æ±‚"><a href="#4-2-âš¡-æ€§èƒ½è¦æ±‚" class="headerlink" title="4.2 âš¡ æ€§èƒ½è¦æ±‚"></a>4.2 âš¡ æ€§èƒ½è¦æ±‚</h3><ul><li><strong>å†…å­˜ä½¿ç”¨</strong>: åŒæ—¶10ä¸ªä»»åŠ¡å¹¶å‘æ—¶ï¼Œå³°å€¼å†…å­˜ â‰¤ 200MB</li><li><strong>UIå“åº”</strong>: ä»»ä½•æ“ä½œåœ¨ 200ms å†…ç»™å‡ºè§†è§‰åé¦ˆ</li><li><strong>ä¸‹è½½é€Ÿåº¦</strong>: å……åˆ†åˆ©ç”¨å¯ç”¨å¸¦å®½</li><li><strong>å¯åŠ¨æ—¶é—´</strong>: å†·å¯åŠ¨ &lt; 3ç§’</li></ul><h3 id="4-3-ğŸ”’-å®‰å…¨æ€§è¦æ±‚"><a href="#4-3-ğŸ”’-å®‰å…¨æ€§è¦æ±‚" class="headerlink" title="4.3 ğŸ”’ å®‰å…¨æ€§è¦æ±‚"></a>4.3 ğŸ”’ å®‰å…¨æ€§è¦æ±‚</h3><ul><li><strong>URLéªŒè¯</strong>: éªŒè¯è¾“å…¥URLæ ¼å¼</li><li><strong>æ–‡ä»¶è·¯å¾„</strong>: é˜²æ­¢è·¯å¾„éå†æ”»å‡»</li><li><strong>ä¸‹è½½é™åˆ¶</strong>: æ”¯æŒæ–‡ä»¶å¤§å°å’Œç±»å‹é™åˆ¶</li><li><strong>ç”¨æˆ·æ•°æ®</strong>: æœ¬åœ°æ•°æ®åŠ å¯†å­˜å‚¨</li></ul><hr><h2 id="5-ğŸ¨-ç•Œé¢è®¾è®¡"><a href="#5-ğŸ¨-ç•Œé¢è®¾è®¡" class="headerlink" title="5. ğŸ¨ ç•Œé¢è®¾è®¡"></a>5. ğŸ¨ ç•Œé¢è®¾è®¡</h2><h3 id="5-1-ä¸»ç•Œé¢å¸ƒå±€"><a href="#5-1-ä¸»ç•Œé¢å¸ƒå±€" class="headerlink" title="5.1 ä¸»ç•Œé¢å¸ƒå±€"></a>5.1 ä¸»ç•Œé¢å¸ƒå±€</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚ URL è¾“å…¥æ¡†                                              â”‚</span><br><span class="line">â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚</span><br><span class="line">â”‚ â”‚ https://example.com/file1.zip                       â”‚ â”‚</span><br><span class="line">â”‚ â”‚ https://example.com/file2.pdf                       â”‚ â”‚</span><br><span class="line">â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚</span><br><span class="line">â”‚ [æ·»åŠ ] [å¼€å§‹å…¨éƒ¨] [æš‚åœå…¨éƒ¨] [åˆ é™¤é€‰ä¸­]                 â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚ ä»»åŠ¡åˆ—è¡¨ (QTableView)                                  â”‚</span><br><span class="line">â”‚ æ–‡ä»¶å      â”‚ å¤§å°     â”‚ å·²ä¸‹è½½  â”‚ è¿›åº¦  â”‚ é€Ÿåº¦  â”‚ çŠ¶æ€ â”‚</span><br><span class="line">â”‚ file1.zip   â”‚ 100MB    â”‚ 50MB    â”‚ 50%   â”‚ 1MB/s â”‚ä¸‹è½½ä¸­â”‚</span><br><span class="line">â”‚ file2.pdf   â”‚ 20MB     â”‚ 20MB    â”‚ 100%  â”‚ 0     â”‚å®Œæˆ â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚ å…¨å±€é€Ÿåº¦: 1.5MB/s  å‰©ä½™æ—¶é—´: 2åˆ†é’Ÿ  ä»»åŠ¡æ•°: 2/10       â”‚</span><br><span class="line">â”‚ [è®¾ç½®] [å…³äº] [é€€å‡º]                                    â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></pre></td></tr></table></figure><h3 id="5-2-ç•Œé¢çŠ¶æ€å›¾"><a href="#5-2-ç•Œé¢çŠ¶æ€å›¾" class="headerlink" title="5.2 ç•Œé¢çŠ¶æ€å›¾"></a>5.2 ç•Œé¢çŠ¶æ€å›¾</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">stateDiagram-v2</span><br><span class="line">    [*] --&gt; åˆå§‹åŒ–ç•Œé¢</span><br><span class="line">    åˆå§‹åŒ–ç•Œé¢ --&gt; ç©ºé—²çŠ¶æ€</span><br><span class="line">    ç©ºé—²çŠ¶æ€ --&gt; ä¸‹è½½ä¸­: æ·»åŠ ä»»åŠ¡å¹¶å¼€å§‹</span><br><span class="line">    ä¸‹è½½ä¸­ --&gt; æš‚åœä¸­: ç”¨æˆ·æš‚åœ</span><br><span class="line">    æš‚åœä¸­ --&gt; ä¸‹è½½ä¸­: ç”¨æˆ·ç»§ç»­</span><br><span class="line">    ä¸‹è½½ä¸­ --&gt; å®Œæˆ: ä¸‹è½½å®Œæˆ</span><br><span class="line">    ä¸‹è½½ä¸­ --&gt; é”™è¯¯: ä¸‹è½½å¤±è´¥</span><br><span class="line">    é”™è¯¯ --&gt; ä¸‹è½½ä¸­: é‡è¯•ä¸‹è½½</span><br><span class="line">    å®Œæˆ --&gt; ç©ºé—²çŠ¶æ€: æ¸…é™¤ä»»åŠ¡</span><br></pre></td></tr></table></figure><hr><h2 id="6-ğŸ“Š-æ•°æ®æ¨¡å‹"><a href="#6-ğŸ“Š-æ•°æ®æ¨¡å‹" class="headerlink" title="6. ğŸ“Š æ•°æ®æ¨¡å‹"></a>6. ğŸ“Š æ•°æ®æ¨¡å‹</h2><h3 id="6-1-æ ¸å¿ƒæ•°æ®ç»“æ„"><a href="#6-1-æ ¸å¿ƒæ•°æ®ç»“æ„" class="headerlink" title="6.1 æ ¸å¿ƒæ•°æ®ç»“æ„"></a>6.1 æ ¸å¿ƒæ•°æ®ç»“æ„</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸‹è½½ä»»åŠ¡æ•°æ®æ¨¡å‹</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">DownloadTask</span> &#123;</span><br><span class="line">    QString id;                    <span class="comment">// å”¯ä¸€æ ‡è¯†</span></span><br><span class="line">    QUrl url;                     <span class="comment">// ä¸‹è½½URL</span></span><br><span class="line">    QString fileName;             <span class="comment">// æœ¬åœ°æ–‡ä»¶å</span></span><br><span class="line">    QString savePath;             <span class="comment">// ä¿å­˜è·¯å¾„</span></span><br><span class="line">    qint64 totalBytes;           <span class="comment">// æ€»å¤§å° (-1=æœªçŸ¥)</span></span><br><span class="line">    qint64 downloadedBytes;      <span class="comment">// å·²ä¸‹è½½å¤§å°</span></span><br><span class="line">    <span class="type">int</span> progress;                 <span class="comment">// è¿›åº¦ç™¾åˆ†æ¯” (0-100)</span></span><br><span class="line">    qint64 speed;                <span class="comment">// å½“å‰é€Ÿåº¦ (B/s)</span></span><br><span class="line">    qint64 averageSpeed;         <span class="comment">// å¹³å‡é€Ÿåº¦ (B/s)</span></span><br><span class="line">    QDateTime startTime;         <span class="comment">// å¼€å§‹æ—¶é—´</span></span><br><span class="line">    QDateTime finishTime;        <span class="comment">// å®Œæˆæ—¶é—´</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">enum</span> <span class="title class_">State</span> &#123;</span><br><span class="line">        Waiting,     <span class="comment">// ç­‰å¾…å¼€å§‹</span></span><br><span class="line">        Running,     <span class="comment">// ä¸‹è½½ä¸­</span></span><br><span class="line">        Paused,      <span class="comment">// å·²æš‚åœ</span></span><br><span class="line">        Completed,   <span class="comment">// å·²å®Œæˆ</span></span><br><span class="line">        Error,       <span class="comment">// é”™è¯¯</span></span><br><span class="line">        Cancelled    <span class="comment">// å·²å–æ¶ˆ</span></span><br><span class="line">    &#125; state;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">enum</span> <span class="title class_">Priority</span> &#123;</span><br><span class="line">        Low = <span class="number">1</span>,</span><br><span class="line">        Normal = <span class="number">2</span>,</span><br><span class="line">        High = <span class="number">3</span></span><br><span class="line">    &#125; priority;</span><br><span class="line"></span><br><span class="line">    QString errorMessage;        <span class="comment">// é”™è¯¯ä¿¡æ¯</span></span><br><span class="line">    <span class="type">int</span> retryCount;             <span class="comment">// é‡è¯•æ¬¡æ•°</span></span><br><span class="line">    <span class="type">int</span> maxRetries;             <span class="comment">// æœ€å¤§é‡è¯•æ¬¡æ•°</span></span><br><span class="line">    QStringList downloadThreads;  <span class="comment">// ä¸‹è½½çº¿ç¨‹åˆ—è¡¨</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="6-2-é…ç½®æ•°æ®ç»“æ„"><a href="#6-2-é…ç½®æ•°æ®ç»“æ„" class="headerlink" title="6.2 é…ç½®æ•°æ®ç»“æ„"></a>6.2 é…ç½®æ•°æ®ç»“æ„</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">DownloadSettings</span> &#123;</span><br><span class="line">    QString defaultDownloadPath;    <span class="comment">// é»˜è®¤ä¸‹è½½è·¯å¾„</span></span><br><span class="line">    <span class="type">int</span> maxConcurrentTasks;         <span class="comment">// æœ€å¤§å¹¶å‘ä»»åŠ¡æ•°</span></span><br><span class="line">    <span class="type">int</span> defaultThreadCount;         <span class="comment">// é»˜è®¤çº¿ç¨‹æ•°</span></span><br><span class="line">    <span class="type">int</span> maxRetryCount;             <span class="comment">// æœ€å¤§é‡è¯•æ¬¡æ•°</span></span><br><span class="line">    <span class="type">bool</span> autoRetry;                <span class="comment">// è‡ªåŠ¨é‡è¯•</span></span><br><span class="line">    <span class="type">bool</span> startOnStartup;           <span class="comment">// å¼€æœºå¯åŠ¨</span></span><br><span class="line">    <span class="type">bool</span> showNotifications;        <span class="comment">// æ˜¾ç¤ºé€šçŸ¥</span></span><br><span class="line">    <span class="type">bool</span> verifyIntegrity;          <span class="comment">// éªŒè¯æ–‡ä»¶å®Œæ•´æ€§</span></span><br><span class="line">    qint64 maxFileSize;            <span class="comment">// æœ€å¤§æ–‡ä»¶å¤§å°é™åˆ¶</span></span><br><span class="line">    QStringList blockedExtensions;  <span class="comment">// ç¦æ­¢çš„æ–‡ä»¶æ‰©å±•å</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><hr><h2 id="7-ğŸ”§-æŠ€æœ¯è§„èŒƒ"><a href="#7-ğŸ”§-æŠ€æœ¯è§„èŒƒ" class="headerlink" title="7. ğŸ”§ æŠ€æœ¯è§„èŒƒ"></a>7. ğŸ”§ æŠ€æœ¯è§„èŒƒ</h2><h3 id="7-1-æŠ€æœ¯æ ˆ"><a href="#7-1-æŠ€æœ¯æ ˆ" class="headerlink" title="7.1 æŠ€æœ¯æ ˆ"></a>7.1 æŠ€æœ¯æ ˆ</h3><ul><li><strong>UIæ¡†æ¶</strong>: Qt Widgets (éQML)</li><li><strong>ç½‘ç»œåº“</strong>: QNetworkRequest</li><li><strong>å¹¶å‘</strong>: QThread + QThreadPool</li><li><strong>æŒä¹…åŒ–</strong>: QSettings + SQLite</li><li><strong>æ—¥å¿—</strong>: QtMessageHandler</li></ul><h3 id="7-2-ä»£ç ç»“æ„"><a href="#7-2-ä»£ç ç»“æ„" class="headerlink" title="7.2 ä»£ç ç»“æ„"></a>7.2 ä»£ç ç»“æ„</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">FastDownloader/</span><br><span class="line">â”œâ”€â”€ main.cpp                 # ç¨‹åºå…¥å£</span><br><span class="line">â”œâ”€â”€ MainWindow.h/.cpp         # ä¸»çª—å£</span><br><span class="line">â”œâ”€â”€ MainWindow.ui             # UIæ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ DownloadTask.h/.cpp       # ä¸‹è½½ä»»åŠ¡æ•°æ®æ¨¡å‹</span><br><span class="line">â”œâ”€â”€ DownloadManager.h/.cpp    # ä¸‹è½½ç®¡ç†å™¨</span><br><span class="line">â”œâ”€â”€ Downloader.h/.cpp         # ä¸‹è½½å¼•æ“</span><br><span class="line">â”œâ”€â”€ SettingsDialog.h/.cpp     # è®¾ç½®å¯¹è¯æ¡†</span><br><span class="line">â”œâ”€â”€ SettingsDialog.ui         # è®¾ç½®UI</span><br><span class="line">â””â”€â”€ resources/                # èµ„æºæ–‡ä»¶</span><br><span class="line">    â”œâ”€â”€ icons/</span><br><span class="line">    â””â”€â”€ translations/</span><br></pre></td></tr></table></figure><h3 id="7-3-å…³é”®æŠ€æœ¯ç‚¹"><a href="#7-3-å…³é”®æŠ€æœ¯ç‚¹" class="headerlink" title="7.3 å…³é”®æŠ€æœ¯ç‚¹"></a>7.3 å…³é”®æŠ€æœ¯ç‚¹</h3><h4 id="7-3-1-å¤šçº¿ç¨‹ä¸‹è½½"><a href="#7-3-1-å¤šçº¿ç¨‹ä¸‹è½½" class="headerlink" title="7.3.1 å¤šçº¿ç¨‹ä¸‹è½½"></a>7.3.1 å¤šçº¿ç¨‹ä¸‹è½½</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">DownloadThread</span> : <span class="keyword">public</span> QThread &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">run</span><span class="params">()</span> <span class="keyword">override</span></span>;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">pause</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">stop</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">signals:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">progressChanged</span><span class="params">(qint64 bytesReceived, qint64 bytesTotal)</span></span>;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">speedChanged</span><span class="params">(qint64 speed)</span></span>;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">finished</span><span class="params">(<span class="type">bool</span> success, <span class="type">const</span> QString&amp; error)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    QNetworkReply* m_reply;</span><br><span class="line">    QUrl m_url;</span><br><span class="line">    QString m_filePath;</span><br><span class="line">    qint64 m_startPos;</span><br><span class="line">    qint64 m_endPos;</span><br><span class="line">    <span class="type">bool</span> m_paused;</span><br><span class="line">    <span class="type">bool</span> m_stopped;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="7-3-2-æ–­ç‚¹ç»­ä¼ "><a href="#7-3-2-æ–­ç‚¹ç»­ä¼ " class="headerlink" title="7.3.2 æ–­ç‚¹ç»­ä¼ "></a>7.3.2 æ–­ç‚¹ç»­ä¼ </h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–æ–‡ä»¶å·²ä¸‹è½½å¤§å°</span></span><br><span class="line"><span class="function">qint64 <span class="title">getDownloadedFileSize</span><span class="params">(<span class="type">const</span> QString&amp; filePath)</span> </span>&#123;</span><br><span class="line">    <span class="function">QFile <span class="title">file</span><span class="params">(filePath)</span></span>;</span><br><span class="line">    <span class="keyword">if</span> (file.<span class="built_in">exists</span>()) &#123;</span><br><span class="line">        <span class="keyword">return</span> file.<span class="built_in">size</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®Rangeè¯·æ±‚å¤´</span></span><br><span class="line"><span class="function">QNetworkRequest <span class="title">createRangeRequest</span><span class="params">(<span class="type">const</span> QUrl&amp; url, qint64 startPos)</span> </span>&#123;</span><br><span class="line">    <span class="function">QNetworkRequest <span class="title">request</span><span class="params">(url)</span></span>;</span><br><span class="line">    QString range = <span class="built_in">QString</span>(<span class="string">&quot;bytes=%1-&quot;</span>).<span class="built_in">arg</span>(startPos);</span><br><span class="line">    request.<span class="built_in">setRawHeader</span>(<span class="string">&quot;Range&quot;</span>, range.<span class="built_in">toLatin1</span>());</span><br><span class="line">    <span class="keyword">return</span> request;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="7-4-æ€§èƒ½ä¼˜åŒ–"><a href="#7-4-æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="7.4 æ€§èƒ½ä¼˜åŒ–"></a>7.4 æ€§èƒ½ä¼˜åŒ–</h3><ul><li><strong>å†…å­˜ç®¡ç†</strong>: åŠæ—¶é‡Šæ”¾ä¸‹è½½å®Œæˆçš„æ•°æ®</li><li><strong>ç½‘ç»œä¼˜åŒ–</strong>: è¿æ¥æ± å’ŒKeep-Alive</li><li><strong>UIæ›´æ–°</strong>: ä½¿ç”¨å®šæ—¶å™¨å‡å°‘UIåˆ·æ–°é¢‘ç‡</li><li><strong>ç£ç›˜IO</strong>: ç¼“å†²å†™å…¥ï¼Œå‡å°‘ç£ç›˜IOæ¬¡æ•°</li></ul><hr><h2 id="8-ğŸ“¦-äº¤ä»˜è¦æ±‚"><a href="#8-ğŸ“¦-äº¤ä»˜è¦æ±‚" class="headerlink" title="8. ğŸ“¦ äº¤ä»˜è¦æ±‚"></a>8. ğŸ“¦ äº¤ä»˜è¦æ±‚</h2><h3 id="8-1-äº¤ä»˜ç‰©æ¸…å•"><a href="#8-1-äº¤ä»˜ç‰©æ¸…å•" class="headerlink" title="8.1 äº¤ä»˜ç‰©æ¸…å•"></a>8.1 äº¤ä»˜ç‰©æ¸…å•</h3><ul><li><input checked="" disabled="" type="checkbox"> <strong>æºä»£ç </strong>: å®Œæ•´çš„C++æºç å®ç°</li><li><input checked="" disabled="" type="checkbox"> <strong>èµ„æºæ–‡ä»¶</strong>: å›¾æ ‡ã€UIæ–‡ä»¶ç­‰</li><li><input checked="" disabled="" type="checkbox"> <strong>æ„å»ºè„šæœ¬</strong>: CMakeLists.txtæˆ–.proæ–‡ä»¶</li><li><input disabled="" type="checkbox"> <strong>æµ‹è¯•ç”¨ä¾‹</strong>: å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•</li><li><input disabled="" type="checkbox"> <strong>éƒ¨ç½²æ–‡æ¡£</strong>: ç¼–è¯‘å’Œéƒ¨ç½²è¯´æ˜</li></ul><h3 id="8-2-ä»£ç è§„èŒƒ"><a href="#8-2-ä»£ç è§„èŒƒ" class="headerlink" title="8.2 ä»£ç è§„èŒƒ"></a>8.2 ä»£ç è§„èŒƒ</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‘½åè§„èŒƒ</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DownloadManager</span> : <span class="keyword">public</span> QObject &#123;  <span class="comment">// ç±»åï¼šPascalCase</span></span><br><span class="line">    Q_OBJECT</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">DownloadManager</span><span class="params">(QObject *parent = <span class="literal">nullptr</span>)</span></span>;  <span class="comment">// å‡½æ•°åï¼šcamelCase</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> slots:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">onDownloadProgress</span><span class="params">(qint64 bytesReceived, qint64 bytesTotal)</span></span>;  <span class="comment">// æ§½å‡½æ•°å‘½å</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> m_maxConcurrentTasks;  <span class="comment">// æˆå‘˜å˜é‡ï¼šm_å‰ç¼€ï¼ŒcamelCase</span></span><br><span class="line">    QString m_defaultPath;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="8-3-è´¨é‡è¦æ±‚"><a href="#8-3-è´¨é‡è¦æ±‚" class="headerlink" title="8.3 è´¨é‡è¦æ±‚"></a>8.3 è´¨é‡è¦æ±‚</h3><ul><li><strong>ä»£ç è¦†ç›–ç‡</strong>: â‰¥80%</li><li><strong>å†…å­˜æ³„æ¼</strong>: æ— å†…å­˜æ³„æ¼</li><li><strong>æ–‡æ¡£å®Œæ•´</strong>: å…³é”®å‡½æ•°æœ‰æ³¨é‡Š</li><li><strong>å¼‚å¸¸å¤„ç†</strong>: å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶</li></ul><hr><h2 id="ğŸ“Š-é¡¹ç›®é‡Œç¨‹ç¢‘"><a href="#ğŸ“Š-é¡¹ç›®é‡Œç¨‹ç¢‘" class="headerlink" title="ğŸ“Š é¡¹ç›®é‡Œç¨‹ç¢‘"></a>ğŸ“Š é¡¹ç›®é‡Œç¨‹ç¢‘</h2><h3 id="Phase-1-åŸºç¡€æ¡†æ¶-2å‘¨"><a href="#Phase-1-åŸºç¡€æ¡†æ¶-2å‘¨" class="headerlink" title="Phase 1: åŸºç¡€æ¡†æ¶ (2å‘¨)"></a>Phase 1: åŸºç¡€æ¡†æ¶ (2å‘¨)</h3><ul><li><input checked="" disabled="" type="checkbox"> ä¸»ç•Œé¢è®¾è®¡</li><li><input checked="" disabled="" type="checkbox"> æ•°æ®æ¨¡å‹å®šä¹‰</li><li><input checked="" disabled="" type="checkbox"> åŸºç¡€ä¸‹è½½åŠŸèƒ½</li></ul><h3 id="Phase-2-æ ¸å¿ƒåŠŸèƒ½-3å‘¨"><a href="#Phase-2-æ ¸å¿ƒåŠŸèƒ½-3å‘¨" class="headerlink" title="Phase 2: æ ¸å¿ƒåŠŸèƒ½ (3å‘¨)"></a>Phase 2: æ ¸å¿ƒåŠŸèƒ½ (3å‘¨)</h3><ul><li><input disabled="" type="checkbox"> å¤šçº¿ç¨‹ä¸‹è½½å®ç°</li><li><input disabled="" type="checkbox"> æ–­ç‚¹ç»­ä¼ åŠŸèƒ½</li><li><input disabled="" type="checkbox"> ä»»åŠ¡ç®¡ç†ç•Œé¢</li></ul><h3 id="Phase-3-é«˜çº§åŠŸèƒ½-2å‘¨"><a href="#Phase-3-é«˜çº§åŠŸèƒ½-2å‘¨" class="headerlink" title="Phase 3: é«˜çº§åŠŸèƒ½ (2å‘¨)"></a>Phase 3: é«˜çº§åŠŸèƒ½ (2å‘¨)</h3><ul><li><input disabled="" type="checkbox"> é…ç½®ç®¡ç†</li><li><input disabled="" type="checkbox"> å¼‚å¸¸å¤„ç†</li><li><input disabled="" type="checkbox"> æ€§èƒ½ä¼˜åŒ–</li></ul><h3 id="Phase-4-æµ‹è¯•å‘å¸ƒ-1å‘¨"><a href="#Phase-4-æµ‹è¯•å‘å¸ƒ-1å‘¨" class="headerlink" title="Phase 4: æµ‹è¯•å‘å¸ƒ (1å‘¨)"></a>Phase 4: æµ‹è¯•å‘å¸ƒ (1å‘¨)</h3><ul><li><input disabled="" type="checkbox"> åŠŸèƒ½æµ‹è¯•</li><li><input disabled="" type="checkbox"> æ€§èƒ½æµ‹è¯•</li><li><input disabled="" type="checkbox"> ä»£ç å®¡æŸ¥</li></ul><hr><h2 id="ğŸ“ˆ-æˆåŠŸæŒ‡æ ‡"><a href="#ğŸ“ˆ-æˆåŠŸæŒ‡æ ‡" class="headerlink" title="ğŸ“ˆ æˆåŠŸæŒ‡æ ‡"></a>ğŸ“ˆ æˆåŠŸæŒ‡æ ‡</h2><h3 id="8-1-åŠŸèƒ½æŒ‡æ ‡"><a href="#8-1-åŠŸèƒ½æŒ‡æ ‡" class="headerlink" title="8.1 åŠŸèƒ½æŒ‡æ ‡"></a>8.1 åŠŸèƒ½æŒ‡æ ‡</h3><ul><li>âœ… æ”¯æŒåŒæ—¶ä¸‹è½½10ä¸ªæ–‡ä»¶</li><li>âœ… ä¸‹è½½é€Ÿåº¦è¾¾åˆ°å¸¦å®½çš„90%ä»¥ä¸Š</li><li>âœ… ç¨‹åºå¯åŠ¨æ—¶é—´&lt;3ç§’</li><li>âœ… å†…å­˜ä½¿ç”¨&lt;200MBï¼ˆ10ä¸ªå¹¶å‘ä»»åŠ¡ï¼‰</li></ul><h3 id="8-2-ç”¨æˆ·ä½“éªŒæŒ‡æ ‡"><a href="#8-2-ç”¨æˆ·ä½“éªŒæŒ‡æ ‡" class="headerlink" title="8.2 ç”¨æˆ·ä½“éªŒæŒ‡æ ‡"></a>8.2 ç”¨æˆ·ä½“éªŒæŒ‡æ ‡</h3><ul><li>âœ… ç•Œé¢å“åº”æ—¶é—´&lt;200ms</li><li>âœ… æ”¯æŒæ–­ç‚¹ç»­ä¼ </li><li>âœ… é”™è¯¯æ¢å¤æˆåŠŸç‡&gt;95%</li><li>âœ… ç”¨æˆ·æ“ä½œæµç¨‹ç®€åŒ–</li></ul><hr><h2 id="ğŸ“š-å‚è€ƒèµ„æ–™"><a href="#ğŸ“š-å‚è€ƒèµ„æ–™" class="headerlink" title="ğŸ“š å‚è€ƒèµ„æ–™"></a>ğŸ“š å‚è€ƒèµ„æ–™</h2><ul><li><a href="https://doc.qt.io/">Qt å®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://doc.qt.io/qt-5/qnetworkrequest.html">QNetworkRequest ç±»æ–‡æ¡£</a></li><li><a href="https://doc.qt.io/qt-5/thread-support.html">Qt å¤šçº¿ç¨‹ç¼–ç¨‹æŒ‡å—</a></li><li><a href="https://tools.ietf.org/html/rfc7231">HTTP åè®®è§„èŒƒ</a></li></ul><hr><blockquote><p><strong>ğŸ’¡ å¼€å‘å»ºè®®</strong>:</p><ul><li>é‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œä¾¿äºåŠŸèƒ½æ‰©å±•</li><li>é‡è§†ç”¨æˆ·ä½“éªŒï¼Œç•Œé¢ç®€æ´ç›´è§‚</li><li>å®Œå–„é”™è¯¯å¤„ç†ï¼Œæé«˜ç¨‹åºç¨³å®šæ€§</li><li>å……åˆ†æµ‹è¯•å„ç§ç½‘ç»œç¯å¢ƒå’Œå¼‚å¸¸æƒ…å†µ</li></ul></blockquote>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;Qt-ä¸‹è½½å™¨éœ€æ±‚è§„èŒƒ&quot;&gt;&lt;a href=&quot;#Qt-ä¸‹è½½å™¨éœ€æ±‚è§„èŒƒ&quot; class=&quot;headerlink&quot; title=&quot;Qt ä¸‹è½½å™¨éœ€æ±‚è§„èŒƒ&quot;&gt;&lt;/a&gt;Qt ä¸‹è½½å™¨éœ€æ±‚è§„èŒƒ&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;æ–‡æ¡£åˆ›å»ºæ—¶é—´&lt;/strong&gt;:</summary>
        
      
    
    
    
    <category term="è½¯ä»¶æ¶æ„" scheme="https://vilaswang.github.io/categories/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84/"/>
    
    
    <category term="æŠ€æœ¯æ–‡æ¡£" scheme="https://vilaswang.github.io/tags/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/"/>
    
    <category term="æŒ‡å—" scheme="https://vilaswang.github.io/tags/%E6%8C%87%E5%8D%97/"/>
    
  </entry>
  
  <entry>
    <title>FileZilla å†…ç½‘ç©¿é€é…ç½®æŒ‡å—</title>
    <link href="https://vilaswang.github.io/posts/2acf74bd/"/>
    <id>https://vilaswang.github.io/posts/2acf74bd/</id>
    <published>2025-12-09T04:59:14.000Z</published>
    <updated>2025-12-17T15:36:29.265Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ğŸ› ï¸-è¯¦ç»†é…ç½®æ­¥éª¤"><a href="#ğŸ› ï¸-è¯¦ç»†é…ç½®æ­¥éª¤" class="headerlink" title="ğŸ› ï¸ è¯¦ç»†é…ç½®æ­¥éª¤"></a>ğŸ› ï¸ è¯¦ç»†é…ç½®æ­¥éª¤</h3><h4 id="1-å®‰è£…ä¸é…ç½®FileZilla-Server"><a href="#1-å®‰è£…ä¸é…ç½®FileZilla-Server" class="headerlink" title="1. å®‰è£…ä¸é…ç½®FileZilla Server"></a>1. å®‰è£…ä¸é…ç½®FileZilla Server</h4><ul><li><p><strong>ä¸‹è½½ä¸å®‰è£…</strong><br>åœ¨æ‚¨çš„å†…ç½‘æœåŠ¡å™¨ä¸Šï¼Œä»FileZillaå®˜ç½‘ä¸‹è½½FileZilla Serverå¹¶å®‰è£…ã€‚</p><blockquote><p><strong>æ³¨æ„</strong>: æœ¬æŒ‡å—åŸºäº FileZilla Server ç»å…¸ç‰ˆæœ¬ (0.9.x) çš„ç•Œé¢æè¿°ã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ 1.x æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œç®¡ç†ç•Œé¢å¯èƒ½æœ‰æ‰€ä¸åŒï¼ˆé€šå¸¸ä¸ºåŸºäºWebçš„ä»ªè¡¨æ¿ï¼‰ï¼Œä½†æ ¸å¿ƒé…ç½®æ¦‚å¿µï¼ˆç”¨æˆ·ã€è¢«åŠ¨æ¨¡å¼ç«¯å£ï¼‰æ˜¯é€šç”¨çš„ã€‚</p></blockquote><p>å®‰è£…è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå¼¹å‡ºâ€œè¿æ¥åˆ°æœåŠ¡å™¨â€é…ç½®ç•Œé¢ï¼Œé€šå¸¸ä½¿ç”¨é»˜è®¤è®¾ç½®ï¼ˆå¦‚ä¸»æœºå<code>127.0.0.1</code>ï¼Œç®¡ç†ç«¯å£ï¼‰å³å¯ï¼Œç‚¹å‡»â€œè¿æ¥â€æˆ–â€œç¡®å®šâ€ã€‚</p></li><li><p><strong>åˆ›å»ºç”¨æˆ·ä¸è®¾ç½®å¯†ç </strong><br>å®‰è£…å®Œæˆåï¼Œåœ¨FileZilla Serverç®¡ç†ç•Œé¢ä¸­ï¼š</p><ul><li>ç‚¹å‡» <strong>Edit</strong> -&gt; <strong>Users</strong> è¿›å…¥ç”¨æˆ·è®¾ç½®ã€‚</li><li>åœ¨ <strong>General</strong>ï¼ˆé€šç”¨ï¼‰é¡µé¢ï¼Œç‚¹å‡» <strong>Add</strong> æŒ‰é’®åˆ›å»ºæ–°ç”¨æˆ·ï¼ˆä¾‹å¦‚ <code>user1</code>ï¼‰ã€‚</li><li>ä¸ºè¯¥ç”¨æˆ·è®¾ç½®å¯†ç ã€‚</li></ul></li><li><p><strong>è®¾ç½®å…±äº«æ–‡ä»¶å¤¹</strong><br>åˆ›å»ºç”¨æˆ·åï¼Œç³»ç»Ÿé€šå¸¸ä¼šæç¤ºéœ€è®¾ç½®è‡³å°‘ä¸€ä¸ªå…±äº«æ–‡ä»¶å¤¹ã€‚</p><ul><li>åœ¨ <strong>Shared folders</strong> é¡µé¢ï¼Œç‚¹å‡» <strong>Add</strong> æŒ‰é’®ï¼Œé€‰æ‹©æ‚¨å¸Œæœ›å¤–ç½‘èƒ½è®¿é—®ä¸‹è½½æ–‡ä»¶çš„å†…ç½‘ç›®å½•ã€‚</li><li>æ ¹æ®éœ€è¦ï¼Œåœ¨ <strong>Files</strong> å’Œ <strong>Directories</strong> ä¸‹ä¸ºç”¨æˆ·è®¾ç½®ç›®å½•çš„è¯»å–ï¼ˆå¯ä¸‹è½½ï¼‰ã€å†™å…¥ã€åˆ é™¤ç­‰æƒé™ã€‚è‡³å°‘éœ€è¦å¼€å¯<strong>è¯»å–</strong>æƒé™ï¼Œæ‰èƒ½å…è®¸æ–‡ä»¶ä¸‹è½½ã€‚</li></ul></li></ul><h4 id="2-é…ç½®èŠ±ç”Ÿå£³å†…ç½‘ç©¿é€"><a href="#2-é…ç½®èŠ±ç”Ÿå£³å†…ç½‘ç©¿é€" class="headerlink" title="2. é…ç½®èŠ±ç”Ÿå£³å†…ç½‘ç©¿é€"></a>2. é…ç½®èŠ±ç”Ÿå£³å†…ç½‘ç©¿é€</h4><ul><li><strong>å®‰è£…èŠ±ç”Ÿå£³å¹¶æ·»åŠ æ˜ å°„</strong><br>åœ¨å†…ç½‘æœåŠ¡å™¨ä¸‹è½½ã€å®‰è£…å¹¶ç™»å½•èŠ±ç”Ÿå£³å®¢æˆ·ç«¯ã€‚<ul><li>åœ¨èŠ±ç”Ÿå£³å®¢æˆ·ç«¯çš„ <strong>å†…ç½‘ç©¿é€</strong> é¡µé¢ï¼Œç‚¹å‡» <strong>+</strong> æŒ‰é’®æ·»åŠ æ˜ å°„ã€‚</li><li><strong>åº”ç”¨åç§°</strong>ï¼šå¯è‡ªå®šä¹‰ï¼Œå¦‚â€FTP-Controlâ€ã€‚</li><li><strong>åº”ç”¨ç±»å‹</strong>ï¼šé€‰æ‹© <strong>TCP</strong>ã€‚</li><li><strong>å†…ç½‘ä¸»æœºIP</strong>ï¼šå¡«å†™è¿è¡ŒFileZilla Serverçš„å†…ç½‘æœåŠ¡å™¨IPåœ°å€ï¼ˆé€šå¸¸æ˜¯<code>192.168.x.x</code>å½¢å¼çš„åœ°å€ï¼‰ã€‚<strong>æ³¨æ„</strong>ï¼šä¸è¦ä½¿ç”¨<code>localhost</code>æˆ–<code>127.0.0.1</code>ã€‚</li><li><strong>å†…ç½‘ç«¯å£</strong>ï¼šå¡«å†™FTPæœåŠ¡çš„æ§åˆ¶ç«¯å£ï¼Œé»˜è®¤ä¸º <strong>21</strong>ã€‚</li><li>ç‚¹å‡»ä¿å­˜ï¼ŒèŠ±ç”Ÿå£³ä¼šç”Ÿæˆä¸€ä¸ªFTPæ§åˆ¶é€šé“çš„å¤–ç½‘è®¿é—®åœ°å€ï¼ˆåŒ…å«åŸŸåå’Œç«¯å£ï¼‰ã€‚</li></ul></li></ul><h4 id="3-é…ç½®FTPè¢«åŠ¨æ¨¡å¼ä¸æ•°æ®ä¼ è¾“ç«¯å£"><a href="#3-é…ç½®FTPè¢«åŠ¨æ¨¡å¼ä¸æ•°æ®ä¼ è¾“ç«¯å£" class="headerlink" title="3. é…ç½®FTPè¢«åŠ¨æ¨¡å¼ä¸æ•°æ®ä¼ è¾“ç«¯å£"></a>3. é…ç½®FTPè¢«åŠ¨æ¨¡å¼ä¸æ•°æ®ä¼ è¾“ç«¯å£</h4><p>FTPåè®®ä½¿ç”¨<strong>21ç«¯å£</strong>å»ºç«‹æ§åˆ¶è¿æ¥ï¼Œä½¿ç”¨<strong>è¢«åŠ¨æ¨¡å¼ä¸‹çš„å…¶ä»–ç«¯å£</strong>è¿›è¡Œæ•°æ®ä¼ è¾“ã€‚å› æ­¤ï¼Œå¿…é¡»å•ç‹¬æ˜ å°„æ•°æ®ä¼ è¾“ç«¯å£ã€‚</p><ul><li><p><strong>åœ¨èŠ±ç”Ÿå£³ä¸­æ˜ å°„æ•°æ®ç«¯å£</strong><br>æŒ‰ç…§ä¸Šè¿°åŒæ ·æ–¹æ³•ï¼Œåœ¨èŠ±ç”Ÿå£³ä¸­ä¸ºFTPè¢«åŠ¨æ¨¡å¼ç«¯å£å†æ·»åŠ ä¸€æ¡æ˜ å°„ï¼š</p><ul><li><strong>åº”ç”¨åç§°</strong>ï¼šå¯è‡ªå®šä¹‰ï¼Œå¦‚â€FTP-Dataâ€ã€‚</li><li><strong>åº”ç”¨ç±»å‹</strong>ï¼š<strong>TCP</strong>ã€‚</li><li><strong>å†…ç½‘ä¸»æœºIP</strong>ï¼šä¸ä¸Šä¸€æ­¥ç›¸åŒã€‚</li><li><strong>å†…ç½‘ç«¯å£</strong>ï¼šå¯<strong>ä»»æ„å¡«å†™ä¸€ä¸ªæœªå ç”¨çš„ç«¯å£å·</strong>ï¼Œä¾‹å¦‚ <code>12345</code>ã€‚</li><li>ä¿å­˜åï¼ŒèŠ±ç”Ÿå£³ä¼šç”Ÿæˆç¬¬äºŒä¸ªå¤–ç½‘è®¿é—®åœ°å€ï¼Œ<strong>è¯·è®°ä¸‹è¿™ä¸ªæ–°åœ°å€çš„å¤–ç½‘ç«¯å£å·</strong>ï¼ˆä¾‹å¦‚ <code>10418</code>ï¼‰ï¼Œä¸‹ä¸€æ­¥éœ€è¦ç”¨åˆ°ã€‚</li></ul><p>æ·»åŠ æ˜ å°„åï¼Œå¯èƒ½éœ€è¦<strong>ç¼–è¾‘è¿™æ¡æ˜ å°„</strong>ï¼Œå°† <strong>å†…ç½‘ç«¯å£</strong> ä¿®æ”¹ä¸ºä¸èŠ±ç”Ÿå£³ç”Ÿæˆçš„ <strong>å¤–ç½‘ç«¯å£ä¸€è‡´</strong>ï¼ˆä¾‹å¦‚å°†å†…ç½‘ç«¯å£ä»<code>12345</code>æ”¹ä¸º<code>10418</code>ï¼‰ï¼Œä»¥ç¡®ä¿æ•°æ®é€šé“æ­£å¸¸ä¼ è¾“ã€‚</p></li><li><p><strong>åœ¨FileZilla Serverä¸­è®¾ç½®è¢«åŠ¨æ¨¡å¼</strong><br>ç°åœ¨éœ€è¦åœ¨FileZilla Serverä¸­å‘ŠçŸ¥å®ƒä½¿ç”¨è¿™ä¸ªæ˜ å°„å¥½çš„ç«¯å£ã€‚</p><ul><li>æ‰“å¼€FileZilla Serverï¼Œç‚¹å‡» <strong>Edit</strong> -&gt; <strong>Settings</strong>ï¼Œè¿›å…¥ <strong>Passive mode settings</strong> (è¢«åŠ¨æ¨¡å¼è®¾ç½®)ã€‚</li><li>å‹¾é€‰ <strong>Use custom port range</strong> (ä½¿ç”¨è‡ªå®šä¹‰ç«¯å£èŒƒå›´)ã€‚</li><li>åœ¨è¾“å…¥æ¡†ä¸­ï¼Œ<strong>å¡«å†™èŠ±ç”Ÿå£³ä¸ºæ•°æ®é€šé“ç”Ÿæˆçš„å¤–ç½‘ç«¯å£å·</strong>ï¼ˆä¾‹å¦‚ä¸Šä¸€æ­¥çš„ <code>10418</code>ï¼‰ã€‚å¦‚æœåªä½¿ç”¨å•ä¸ªç«¯å£ï¼Œèµ·å§‹å’Œç»“æŸç«¯å£å¡«ç›¸åŒçš„å³å¯ã€‚</li><li><strong>å…³é”®æ­¥éª¤</strong>ï¼šåœ¨ <strong>Use the following IP</strong> ä¸‹æ–¹ï¼Œå¯èƒ½éœ€è¦å¡«å†™èŠ±ç”Ÿå£³ç”Ÿæˆçš„å¤–ç½‘è®¿é—®<strong>åŸŸå</strong>ï¼ˆå³FTPæ§åˆ¶é€šé“çš„åŸŸåï¼‰ã€‚è¿™èƒ½ç¡®ä¿FTPæœåŠ¡å™¨å°†æ­£ç¡®çš„åœ°å€å‘ŠçŸ¥å¤–ç½‘å®¢æˆ·ç«¯ã€‚</li></ul></li></ul><h4 id="4-è®¾ç½®Windowsé˜²ç«å¢™"><a href="#4-è®¾ç½®Windowsé˜²ç«å¢™" class="headerlink" title="4. è®¾ç½®Windowsé˜²ç«å¢™"></a>4. è®¾ç½®Windowsé˜²ç«å¢™</h4><p>å¦‚æœå†…ç½‘æœåŠ¡å™¨çš„Windowsé˜²ç«å¢™å·²å¼€å¯ï¼Œéœ€è¦æ”¾è¡ŒFileZilla Serverç›¸å…³ç«¯å£ã€‚</p><ul><li>åœ¨ <strong>Windows Defender é˜²ç«å¢™</strong> ä¸­ï¼Œæ·»åŠ å…¥ç«™è§„åˆ™ã€‚</li><li>å…è®¸ä¹‹å‰ç”¨åˆ°çš„ç«¯å£ï¼ˆå¦‚æ§åˆ¶ç«¯å£<code>21</code>å’Œæ‚¨åœ¨èŠ±ç”Ÿå£³è®¾ç½®çš„æ•°æ®ç«¯å£<code>10418</code>ï¼‰çš„TCPè¿æ¥ã€‚</li></ul><h4 id="5-å¤–ç½‘è¿æ¥æµ‹è¯•"><a href="#5-å¤–ç½‘è¿æ¥æµ‹è¯•" class="headerlink" title="5. å¤–ç½‘è¿æ¥æµ‹è¯•"></a>5. å¤–ç½‘è¿æ¥æµ‹è¯•</h4><p>åœ¨å¦ä¸€å°å¤–ç½‘ç”µè„‘ä¸Šï¼Œä½¿ç”¨ä»»ä½•FTPå®¢æˆ·ç«¯ï¼ˆå¦‚FileZilla Clientï¼‰è¿›è¡Œæµ‹è¯•ã€‚</p><ul><li><strong>ä¸»æœº&#x2F;åœ°å€</strong>ï¼šå¡«å†™èŠ±ç”Ÿå£³ä¸º<strong>æ§åˆ¶é€šé“</strong>ç”Ÿæˆçš„å¤–ç½‘è®¿é—®åœ°å€ï¼ˆåŸŸåå’Œç«¯å£ï¼Œä¾‹å¦‚ <code>xxxx.vicp.cc:21</code> å¤„çš„ç«¯å£ï¼‰ã€‚</li><li><strong>ç”¨æˆ·åä¸å¯†ç </strong>ï¼šå¡«å†™æ‚¨åœ¨FileZilla Serverä¸­è®¾ç½®çš„è´¦å·ï¼ˆå¦‚ <code>user1</code>ï¼‰å’Œå¯†ç ã€‚</li><li><strong>ä¼ è¾“æ¨¡å¼</strong>ï¼šåœ¨FTPå®¢æˆ·ç«¯çš„ç«™ç‚¹è®¾ç½®ä¸­ï¼Œ<strong>ä¼ è¾“æ¨¡å¼è¯·é€‰æ‹©â€œè¢«åŠ¨æ¨¡å¼â€</strong>ã€‚</li><li>è¿æ¥æˆåŠŸåï¼Œæ‚¨åº”è¯¥èƒ½çœ‹åˆ°å†…ç½‘å…±äº«çš„æ–‡ä»¶å¹¶å¯è¿›è¡Œä¸‹è½½ã€‚</li></ul><h3 id="ğŸ’¡-å…³é”®é…ç½®æé†’ä¸æ’æŸ¥"><a href="#ğŸ’¡-å…³é”®é…ç½®æé†’ä¸æ’æŸ¥" class="headerlink" title="ğŸ’¡ å…³é”®é…ç½®æé†’ä¸æ’æŸ¥"></a>ğŸ’¡ å…³é”®é…ç½®æé†’ä¸æ’æŸ¥</h3><ul><li><strong>æ ¸å¿ƒåŸç†</strong>ï¼šæˆåŠŸçš„å…³é”®åœ¨äºç†è§£FTPéœ€è¦<strong>ä¸¤ä¸ªé€šé“</strong>ï¼ˆæ§åˆ¶+æ•°æ®ï¼‰ï¼Œå¹¶æ­£ç¡®é…ç½®<strong>è¢«åŠ¨æ¨¡å¼</strong>åŠå¯¹åº”çš„<strong>ç«¯å£æ˜ å°„</strong>ã€‚</li><li><strong>åŸŸåä¸IP</strong>ï¼šåœ¨FileZilla Serverçš„è¢«åŠ¨æ¨¡å¼è®¾ç½®ä¸­ï¼Œâ€Use the following IPâ€å¤„å»ºè®®å¡«å†™èŠ±ç”Ÿå£³ç”Ÿæˆçš„<strong>åŸŸå</strong>ï¼Œè€ŒéIPåœ°å€ã€‚</li><li><strong>é˜²ç«å¢™</strong>ï¼šç¡®ä¿å†…ç½‘æœåŠ¡å™¨çš„é˜²ç«å¢™ä¸ä¼šé˜»æŒ¡è¿æ¥ã€‚</li><li><strong>èŠ±ç”Ÿå£³ç‰ˆæœ¬</strong>ï¼šå…è´¹ç‰ˆèŠ±ç”Ÿå£³é€šå¸¸æ”¯æŒæ·»åŠ 2æ¡æ˜ å°„ï¼Œåˆšå¥½æ»¡è¶³FTPæ§åˆ¶ä¸æ•°æ®é€šé“çš„éœ€æ±‚ã€‚å¦‚æœæ•°æ®ç«¯å£ä¸ç†æƒ³ï¼Œå¯ä»¥åˆ é™¤æ˜ å°„åé‡æ–°æ·»åŠ ã€‚</li></ul>]]></content>
    
    
    <summary type="html">è¯¦ç»†ä»‹ç»ä½¿ç”¨Filezilla Serverå’ŒèŠ±ç”Ÿå£³å®ç°å†…ç½‘ç©¿é€çš„æŠ€æœ¯å®ç°ã€é…ç½®æ–¹æ³•ã€æœ€ä½³å®è·µç­‰å†…å®¹ã€‚</summary>
    
    
    
    <category term="ç³»ç»Ÿè¿ç»´ç®¡ç†" scheme="https://vilaswang.github.io/categories/%E7%B3%BB%E7%BB%9F%E8%BF%90%E7%BB%B4%E7%AE%A1%E7%90%86/"/>
    
    <category term="WindowsæœåŠ¡ç®¡ç†" scheme="https://vilaswang.github.io/categories/%E7%B3%BB%E7%BB%9F%E8%BF%90%E7%BB%B4%E7%AE%A1%E7%90%86/Windows%E6%9C%8D%E5%8A%A1%E7%AE%A1%E7%90%86/"/>
    
    
    <category term="Windows" scheme="https://vilaswang.github.io/tags/Windows/"/>
    
  </entry>
  
</feed>
